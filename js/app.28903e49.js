(function(){var e={8905:function(e){var t=function(e){this.canvas=e.canvas,this.ctx=e.ctx,this.particleColor=e.options.particleColor,this.x=Math.random()*this.canvas.width,this.y=Math.random()*this.canvas.height,this.velocity={x:(Math.random()-.5)*e.options.velocity,y:(Math.random()-.5)*e.options.velocity}};t.prototype.update=function(){(this.x>this.canvas.width+20||this.x<-20)&&(this.velocity.x=-this.velocity.x),(this.y>this.canvas.height+20||this.y<-20)&&(this.velocity.y=-this.velocity.y),this.x+=this.velocity.x,this.y+=this.velocity.y},t.prototype.draw=function(){this.ctx.beginPath(),this.ctx.fillStyle=this.particleColor,this.ctx.globalAlpha=.7,this.ctx.arc(this.x,this.y,1.5,0,2*Math.PI),this.ctx.fill()};var a=function(e,t){this.canvasDiv=e,this.canvasDiv.size={width:this.canvasDiv.offsetWidth,height:this.canvasDiv.offsetHeight},t=void 0!==t?t:{},this.options={particleColor:void 0!==t.particleColor?t.particleColor:"#fff",background:void 0!==t.background?t.background:"#1a252f",interactive:void 0===t.interactive||t.interactive,velocity:this.setVelocity(t.speed),density:this.setDensity(t.density)},this.init()};a.prototype.init=function(){if(this.bgDiv=document.createElement("div"),this.canvasDiv.appendChild(this.bgDiv),this.setStyles(this.bgDiv,{position:"absolute",top:0,left:0,bottom:0,right:0,"z-index":1}),/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(this.options.background)&&this.setStyles(this.bgDiv,{background:this.options.background}),!/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(this.options.particleColor))return console.error("Please specify a valid particleColor hexadecimal color"),!1;this.canvas=document.createElement("canvas"),this.canvasDiv.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.canvasDiv.size.width,this.canvas.height=this.canvasDiv.size.height,this.setStyles(this.canvasDiv,{position:"relative"}),this.setStyles(this.canvas,{"z-index":"20",position:"relative"}),window.addEventListener("resize",function(){if(this.canvasDiv.offsetWidth===this.canvasDiv.size.width&&this.canvasDiv.offsetHeight===this.canvasDiv.size.height)return!1;this.canvas.width=this.canvasDiv.size.width=this.canvasDiv.offsetWidth,this.canvas.height=this.canvasDiv.size.height=this.canvasDiv.offsetHeight,clearTimeout(this.resetTimer),this.resetTimer=setTimeout(function(){this.particles=[];for(var e=0;e<this.canvas.width*this.canvas.height/this.options.density;e++)this.particles.push(new t(this));this.options.interactive&&this.particles.push(this.mouseParticle),requestAnimationFrame(this.update.bind(this))}.bind(this),500)}.bind(this)),this.particles=[];for(var e=0;e<this.canvas.width*this.canvas.height/this.options.density;e++)this.particles.push(new t(this));this.options.interactive&&(this.mouseParticle=new t(this),this.mouseParticle.velocity={x:0,y:0},this.particles.push(this.mouseParticle),this.canvas.addEventListener("mousemove",function(e){this.mouseParticle.x=e.clientX-this.canvas.offsetLeft,this.mouseParticle.y=e.clientY-this.canvas.offsetTop}.bind(this)),this.canvas.addEventListener("mouseup",function(){this.mouseParticle.velocity={x:(Math.random()-.5)*this.options.velocity,y:(Math.random()-.5)*this.options.velocity},this.mouseParticle=new t(this),this.mouseParticle.velocity={x:0,y:0},this.particles.push(this.mouseParticle)}.bind(this))),requestAnimationFrame(this.update.bind(this))},a.prototype.update=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.globalAlpha=1;for(var e=0;e<this.particles.length;e++){this.particles[e].update(),this.particles[e].draw();for(var t=this.particles.length-1;t>e;t--){var a=Math.sqrt(Math.pow(this.particles[e].x-this.particles[t].x,2)+Math.pow(this.particles[e].y-this.particles[t].y,2));a>120||(this.ctx.beginPath(),this.ctx.strokeStyle=this.options.particleColor,this.ctx.globalAlpha=(120-a)/120,this.ctx.lineWidth=2.8,this.ctx.moveTo(this.particles[e].x,this.particles[e].y),this.ctx.lineTo(this.particles[t].x,this.particles[t].y),this.ctx.stroke())}}0!==this.options.velocity&&requestAnimationFrame(this.update.bind(this))},a.prototype.setVelocity=function(e){return"fast"===e?3.5:"slow"===e?1:"none"===e?0:.66},a.prototype.setDensity=function(e){return"high"===e?5e3:"low"===e?2e4:isNaN(parseInt(e,10))?1e4:e},a.prototype.setStyles=function(e,t){for(var a in t)e.style[a]=t[a]},e.exports={ParticleNetwork:a}},1191:function(e,t,a){"use strict";var i=a(9242),l=a(3396);function o(e,t,a,i,o,n){const s=(0,l.up)("router-view");return(0,l.wg)(),(0,l.j4)(s)}var n={name:"App",components:{}},s=a(89);const r=(0,s.Z)(n,[["render",o]]);var d=r,c=a(5431);(0,c.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var u=a(2483),h=a.p+"img/pollenyzer_logo.8c6997e9.svg";const p=(0,l._)("img",{class:"mx-auto my-4",style:{"max-width":"500px"},alt:"Vue logo",src:h},null,-1),m={key:0},f={key:0},v={key:0};function y(e,t,a,o,n,s){const r=(0,l.up)("MDBRow"),d=(0,l.up)("MDBCol"),c=(0,l.up)("MyCard1"),u=(0,l.up)("MyCard2"),h=(0,l.up)("MyCard3"),y=(0,l.up)("MDBContainer"),b=(0,l.up)("MyFooter");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{md:"12",class:"mx-auto"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[p])),_:1}),(0,l.Wm)(r)])),_:1})])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i.uT,{appear:"",name:"bounce"},{default:(0,l.w5)((()=>[n.showCards[0]?((0,l.wg)(),(0,l.iD)("p",m,[(0,l.Wm)(c)])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(i.uT,{name:"bounce"},{default:(0,l.w5)((()=>[n.showCards[1]?((0,l.wg)(),(0,l.iD)("p",f,[(0,l.Wm)(u,{ref:"metadata"},null,512)])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(i.uT,{name:"bounce"},{default:(0,l.w5)((()=>[n.showCards[2]?((0,l.wg)(),(0,l.iD)("p",v,[(0,l.Wm)(h,{metaData:n.metaData},null,8,["metaData"])])):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(b,{onNextCard:t[0]||(t[0]=e=>s.nextCard()),onPreviousCard:t[1]||(t[1]=e=>s.previousCard()),prevDisabled:n.prevDisabled,nextDisabled:n.nextDisabled},null,8,["prevDisabled","nextDisabled"])])}const b=e=>((0,l.dD)("data-v-941d3c70"),e=e(),(0,l.Cn)(),e),g={style:{color:"white",position:"fixed",bottom:"0",width:"100%"},class:"d-block d-md-none"},D={class:"text-center p-1",style:{"background-image":"linear-gradient(to top,rgba(151, 190, 17, 1),rgba(151, 190, 17, 0.3),rgba(251,252,235, 0))"}},_={key:0,class:"text-center bgcol_green",style:{width:"100%","min-height":"1em"}},w=(0,l.Uk)(" © 2023 Pollenyzer "),x=b((()=>(0,l._)("span",{style:{color:"rgba(255, 255, 255, 0.3)"}},"v0.2",-1))),C=[w,x],k={style:{width:"100%","padding-bottom":"100px"},class:"d-none d-md-block text-center"},M=b((()=>(0,l._)("div",{style:{height:"50px"}},null,-1))),B={style:{color:"white",position:"fixed",bottom:"0",width:"100%"}},W={key:0,class:"text-center bgcol_dark text-smaller",style:{width:"100%","min-height":"1em"}},A=(0,l.Uk)(" © 2022 Pollenyzer "),T=b((()=>(0,l._)("span",{style:{color:"rgba(255, 255, 255, 0.4)"}},"v0.2",-1))),z=[A,T];function $(e,t,a,i,o,n){const s=(0,l.up)("MyCardControls");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",g,[(0,l._)("div",D,[(0,l.Wm)(s,{onNextCard:t[0]||(t[0]=t=>e.$emit("nextCard")),onPreviousCard:t[1]||(t[1]=t=>e.$emit("previousCard")),nextDisabled:a.nextDisabled,prevDisabled:a.prevDisabled},null,8,["nextDisabled","prevDisabled"])]),((0,l.wg)(),(0,l.iD)("div",_,C))]),(0,l._)("div",k,[(0,l.Wm)(s,{onNextCard:t[2]||(t[2]=t=>e.$emit("nextCard")),onPreviousCard:t[3]||(t[3]=t=>e.$emit("previousCard")),nextDisabled:a.nextDisabled,prevDisabled:a.prevDisabled},null,8,["nextDisabled","prevDisabled"]),M,(0,l._)("div",B,[((0,l.wg)(),(0,l.iD)("div",W,z))])])],64)}const R={class:"d-block d-md-none"},I={class:"mx-2"},U={class:"mx-2"},P={class:"d-none d-md-block"},S={class:"m-5"},O={class:"m-5"};function j(e,t,a,i,o,n){const s=(0,l.up)("MDBIcon"),r=(0,l.up)("MDBBtn");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",R,[(0,l._)("span",I,[(0,l.Wm)(r,{onClick:t[0]||(t[0]=t=>e.$emit("previousCard")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.prevDisabled},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{icon:"angle-left"})])),_:1},8,["disabled"])]),(0,l._)("span",U,[(0,l.Wm)(r,{onClick:t[1]||(t[1]=t=>e.$emit("nextCard")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.nextDisabled},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{icon:"angle-right"})])),_:1},8,["disabled"])])]),(0,l._)("div",P,[(0,l._)("span",S,[(0,l.Wm)(r,{onClick:t[2]||(t[2]=t=>e.$emit("previousCard")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.prevDisabled},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{icon:"angle-left"})])),_:1},8,["disabled"])]),(0,l._)("span",O,[(0,l.Wm)(r,{onClick:t[3]||(t[3]=t=>e.$emit("nextCard")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.nextDisabled},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{icon:"angle-right"})])),_:1},8,["disabled"])])])])}var H=a(6818),V={data(){return{}},props:{prevDisabled:Boolean,nextDisabled:Boolean},name:"CamControls",components:{MDBBtn:H.MDBBtn,MDBIcon:H.MDBIcon}};const E=(0,s.Z)(V,[["render",j]]);var F=E,N={components:{MyCardControls:F},props:{prevDisabled:Boolean,nextDisabled:Boolean},emits:["nextCard","previousCard"]};const q=(0,s.Z)(N,[["render",$],["__scopeId","data-v-941d3c70"]]);var L=q,Z=a.p+"img/contact.3e208f71.png",G=a.p+"img/pollenyzer-example.890cdf71.jpg";const J=(0,l.Uk)("Analyze the pollen colors of your pollen traps!"),Y=(0,l._)("ol",null,[(0,l._)("li",null,"Attach the pollen trap to the hive for a few days."),(0,l._)("li",null,"Harvest the pollen."),(0,l._)("li",null,"Photograph your catch."),(0,l._)("li",null,"(Opt. provide some additional information for scientists)."),(0,l._)("li",null,"Analyze your pollen colors!")],-1),K=(0,l.Uk)(" If you need help with scientific (digital) pollen analysis, please contact "),Q=(0,l._)("img",{src:Z,style:{display:"inline",height:"1em"}},null,-1),X=(0,l._)("div",{class:"row justify-content-evenly"},[(0,l._)("img",{src:G,style:{width:"unset","max-height":"350px"}})],-1);function ee(e,t,a,i,o,n){const s=(0,l.up)("MDBCardTitle"),r=(0,l.up)("MDBCardText"),d=(0,l.up)("MDBCardBody"),c=(0,l.up)("MDBCard");return(0,l.wg)(),(0,l.j4)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[J])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[Y,K,Q])),_:1}),X])),_:1})])),_:1})}var te={name:"MyCard1",components:{MDBCard:H.MDBCard,MDBCardBody:H.MDBCardBody,MDBCardTitle:H.MDBCardTitle,MDBCardText:H.MDBCardText}};const ae=(0,s.Z)(te,[["render",ee]]);var ie=ae,le=a(7139);const oe=(0,l.Uk)("Support science!"),ne=(0,l.Uk)(" You can skip this, but if you want to save the bees, please give us additional information about your hive. "),se=(0,l._)("hr",null,null,-1),re=(0,l._)("label",{for:"coords",class:"form-label"},"Hive's location",-1),de=(0,l.Uk)(" Find the location of your bees on Google maps, right-click on the position and copy the coordinates into this field. "),ce=(0,l._)("span",{class:"input-group-text border-0",id:"search-addon"},[(0,l._)("i",{class:"fas fa-map-marker-alt"})],-1),ue=(0,l._)("hr",null,null,-1),he=(0,l._)("label",{for:"habitat",class:"form-label"},"Hive's habitat type",-1),pe=(0,l.Uk)(" Select which type of habitat best describes the hive's surroundings within a 2km radius. "),me={class:"form-check"},fe=(0,l._)("label",{class:"form-check-label",for:"flexRadioDefault1"},"unknown",-1),ve={class:"form-check"},ye=(0,l._)("label",{class:"form-check-label",for:"flexRadioDefault2"},"Arable land",-1),be={class:"form-check"},ge=(0,l._)("label",{class:"form-check-label",for:"flexRadioDefault3"},"urban",-1),De={class:"form-check"},_e=(0,l._)("label",{class:"form-check-label",for:"flexRadioDefault4"},"village",-1),we={class:"form-check"},xe=(0,l._)("label",{class:"form-check-label",for:"flexRadioDefault5"},"pasture/meadow",-1),Ce={class:"form-check"},ke=(0,l._)("label",{class:"form-check-label",for:"flexRadioDefault6"},"heath/moor",-1),Me={class:"form-check"},Be=(0,l._)("label",{class:"form-check-label",for:"flexRadioDefault7"},"salt marsh",-1),We={class:"form-check"},Ae=(0,l._)("label",{class:"form-check-label",for:"flexRadioDefault8"},"deciduous forest",-1),Te={class:"form-check"},ze=(0,l._)("label",{class:"form-check-label",for:"flexRadioDefault9"},"coniferous forest",-1),$e={class:"form-check"},Re=(0,l._)("label",{class:"form-check-label",for:"flexRadioDefault10"},"mixed forest",-1),Ie={class:"form-check"},Ue=(0,l._)("label",{class:"form-check-label",for:"flexRadioDefault11"},"wetland forest",-1),Pe=(0,l._)("hr",null,null,-1),Se={for:"duration",class:"form-label"},Oe=(0,l.Uk)("No. of days the trap was mounted: "),je=(0,l._)("hr",null,null,-1),He={for:"datepicker",class:"form-label"},Ve={style:{"text-align":"center",width:"100%"}},Ee=(0,l._)("hr",null,null,-1),Fe=(0,l._)("label",{for:"privacy",class:"form-label"},[(0,l._)("b",null,"* Data protection and usage (required)")],-1),Ne=(0,l._)("div",{style:{"text-align":"left",width:"100%",color:"rgb(234, 0, 0)"}},[(0,l.Uk)(' By clicking "Continue," you agree that a '),(0,l._)("a",{href:"https://policies.google.com/privacy?hl=en-US",target:"_blank"},"Google"),(0,l.Uk)(" Cloud Function on a U.S. server may "),(0,l._)("a",{href:"https://firebase.google.com/support/privacy",target:"_blank"},"temporarily"),(0,l.Uk)(" process your IP address and that the information you provide, including imagery, may be used for research purposes. Please do not provide any personal information. ")],-1),qe=(0,l._)("label",{for:"checkbox",style:{"margin-left":"10px"}}," I Agree",-1);function Le(e,t,a,o,n,s){const r=(0,l.up)("MDBCardTitle"),d=(0,l.up)("MDBCardText"),c=(0,l.up)("MDBInput"),u=(0,l.up)("vue3-slider"),h=(0,l.up)("Datepicker"),p=(0,l.up)("MDBCardBody"),m=(0,l.up)("MDBCard");return(0,l.wg)(),(0,l.j4)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"xtra-padding"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[oe])),_:1}),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[ne])),_:1}),se,re,(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[de])),_:1}),(0,l.Wm)(c,{id:"coords",inputGroup:"",formOutline:!1,wrapperClass:"mb-3",class:"rounded",modelValue:n.hiveCoords,"onUpdate:modelValue":t[0]||(t[0]=e=>n.hiveCoords=e),"aria-describedby":"Apiary's coordinates.","aria-label":"Apiary's coordinates",placeholder:"Apiary's coordinates"},{prepend:(0,l.w5)((()=>[ce])),_:1},8,["modelValue"]),ue,he,(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[pe])),_:1}),(0,l._)("div",me,[(0,l.wy)((0,l._)("input",{class:"form-check-input","onUpdate:modelValue":t[1]||(t[1]=e=>n.habitat=e),type:"radio",name:"flexRadioDefault",value:"unknown",id:"flexRadioDefault1"},null,512),[[i.G2,n.habitat]]),fe]),(0,l._)("div",ve,[(0,l.wy)((0,l._)("input",{class:"form-check-input","onUpdate:modelValue":t[2]||(t[2]=e=>n.habitat=e),type:"radio",name:"flexRadioDefault",value:"arable land",id:"flexRadioDefault2"},null,512),[[i.G2,n.habitat]]),ye]),(0,l._)("div",be,[(0,l.wy)((0,l._)("input",{class:"form-check-input","onUpdate:modelValue":t[3]||(t[3]=e=>n.habitat=e),type:"radio",name:"flexRadioDefault",value:"urban",id:"flexRadioDefault3"},null,512),[[i.G2,n.habitat]]),ge]),(0,l._)("div",De,[(0,l.wy)((0,l._)("input",{class:"form-check-input","onUpdate:modelValue":t[4]||(t[4]=e=>n.habitat=e),type:"radio",name:"flexRadioDefault",value:"village",id:"flexRadioDefault4"},null,512),[[i.G2,n.habitat]]),_e]),(0,l._)("div",we,[(0,l.wy)((0,l._)("input",{class:"form-check-input","onUpdate:modelValue":t[5]||(t[5]=e=>n.habitat=e),type:"radio",name:"flexRadioDefault",value:"pasture/meadow",id:"flexRadioDefault5"},null,512),[[i.G2,n.habitat]]),xe]),(0,l._)("div",Ce,[(0,l.wy)((0,l._)("input",{class:"form-check-input","onUpdate:modelValue":t[6]||(t[6]=e=>n.habitat=e),type:"radio",name:"flexRadioDefault",value:"heath/moor",id:"flexRadioDefault6"},null,512),[[i.G2,n.habitat]]),ke]),(0,l._)("div",Me,[(0,l.wy)((0,l._)("input",{class:"form-check-input","onUpdate:modelValue":t[7]||(t[7]=e=>n.habitat=e),type:"radio",name:"flexRadioDefault",value:"salt marsh",id:"flexRadioDefault7"},null,512),[[i.G2,n.habitat]]),Be]),(0,l._)("div",We,[(0,l.wy)((0,l._)("input",{class:"form-check-input","onUpdate:modelValue":t[8]||(t[8]=e=>n.habitat=e),type:"radio",name:"flexRadioDefault",value:"deciduous forest",id:"flexRadioDefault8"},null,512),[[i.G2,n.habitat]]),Ae]),(0,l._)("div",Te,[(0,l.wy)((0,l._)("input",{class:"form-check-input","onUpdate:modelValue":t[9]||(t[9]=e=>n.habitat=e),type:"radio",name:"flexRadioDefault",value:"coniferous forest",id:"flexRadioDefault9"},null,512),[[i.G2,n.habitat]]),ze]),(0,l._)("div",$e,[(0,l.wy)((0,l._)("input",{class:"form-check-input","onUpdate:modelValue":t[10]||(t[10]=e=>n.habitat=e),type:"radio",name:"flexRadioDefault",value:"mixed forest",id:"flexRadioDefault10"},null,512),[[i.G2,n.habitat]]),Re]),(0,l._)("div",Ie,[(0,l.wy)((0,l._)("input",{class:"form-check-input","onUpdate:modelValue":t[11]||(t[11]=e=>n.habitat=e),type:"radio",name:"flexRadioDefault",value:"wetland forest",id:"flexRadioDefault11"},null,512),[[i.G2,n.habitat]]),Ue]),Pe,(0,l._)("label",Se,[Oe,(0,l._)("b",null,(0,le.zw)(n.daysMounted),1)]),(0,l.Wm)(u,{id:"duration",trackColor:"#ffa820",color:"#97be11",modelValue:n.daysMounted,"onUpdate:modelValue":t[12]||(t[12]=e=>n.daysMounted=e),handleScale:2.1,min:1,alwaysShowHandle:!0,sticky:!0,max:7,disabled:!1},null,8,["modelValue","handleScale"]),je,(0,l._)("label",He,"When was the pollen trap opened? "+(0,le.zw)(n.trapOpenedDate),1),(0,l._)("div",Ve,[(0,l.Wm)(h,{id:"datepicker",selectText:"",timePicker:!1,"auto-apply":!0,inline:!0,modelValue:n.trapOpenedDate,"onUpdate:modelValue":t[13]||(t[13]=e=>n.trapOpenedDate=e)},null,8,["modelValue"])]),Ee,Fe,Ne,(0,l.wy)((0,l._)("input",{type:"checkbox",id:"checkbox","onUpdate:modelValue":t[14]||(t[14]=e=>n.privacyChecked=e)},null,512),[[i.e8,n.privacyChecked]]),qe])),_:1})])),_:1})}var Ze=a(8524),Ge=a(1716),Je=a.n(Ge),Ye=a(4870),Ke={name:"MyCard2",data(){return{hiveCoords:void 0,trapOpenedDate:void 0,habitat:void 0,daysMounted:void 0,privacyChecked:!1}},components:{MDBCard:H.MDBCard,MDBCardBody:H.MDBCardBody,MDBCardTitle:H.MDBCardTitle,MDBCardText:H.MDBCardText,MDBInput:H.MDBInput,Datepicker:Ze.Z,"vue3-slider":Je()},setup(){const e=(0,Ye.iH)(""),t=(0,Ye.iH)(""),a=(0,Ye.iH)(""),i=(0,Ye.iH)(""),l=(0,Ye.iH)(""),o=(0,Ye.iH)("");return{input12:e,input13:t,input14:a,input15:i,input16:l,textarea2:o}}};const Qe=(0,s.Z)(Ke,[["render",Le]]);var Xe=Qe,et=a.p+"img/how-to-pollenyzer.66e0ffbc.jpg";const tt=e=>((0,l.dD)("data-v-7b8a38ca"),e=e(),(0,l.Cn)(),e),at=(0,l.Uk)("Take or upload a photo!"),it=tt((()=>(0,l._)("ul",{class:"fa-ul p-1 py-3"},[(0,l._)("li",null,[(0,l._)("span",{class:"fa-li"},[(0,l._)("i",{class:"fas fa-check col_green"})]),(0,l._)("p",null," Place pollen on a white, folded piece of paper (A5). ")]),(0,l._)("li",null,[(0,l._)("span",{class:"fa-li"},[(0,l._)("i",{class:"fas fa-check col_green"})]),(0,l._)("p",null," Pollen that is occluded by other pollen cannot be detected. ")]),(0,l._)("li",null,[(0,l._)("span",{class:"fa-li"},[(0,l._)("i",{class:"fas fa-check col_green"})]),(0,l._)("p",null,"Avoid casting shadows.")]),(0,l._)("li",null,[(0,l._)("span",{class:"fa-li"},[(0,l._)("i",{class:"fas fa-check col_green"})]),(0,l._)("p",null,"Avoid flash and use indirect natural daylight instead.")]),(0,l._)("li",null,[(0,l._)("span",{class:"fa-li"},[(0,l._)("i",{class:"fas fa-check col_green"})]),(0,l._)("p",null,"Recommended: Use a color calibration strip for consistent results. Such a strip can be found on Kellogg's (TM) products and is typically used to evaluate print quality. Make sure it shows the exact same 24 color patches that you see on the image below. The cut strip is automatically detected and used in the calculations. ")]),(0,l._)("li",null,[(0,l._)("span",{class:"fa-li"},[(0,l._)("i",{class:"fas fa-check col_green"})]),(0,l._)("p",null,[(0,l.Uk)("This programme runs on a free cloud computing tariff, so calculations may take 1-2 minutes. For faster processing you can find the source code "),(0,l._)("a",{href:"https://github.com/pollenyzer/beesypollen"},"here"),(0,l.Uk)(" or contact the author for processing of image batches. ")])])],-1))),lt=tt((()=>(0,l._)("div",{class:"row justify-content-evenly"},[(0,l._)("img",{src:et,alt:"How to pollenyzer",style:{width:"unset","max-height":"350px"}})],-1))),ot={class:"row justify-content-evenly",style:{"margin-top":"30px"}},nt={class:"col-4 text-center"},st=tt((()=>(0,l._)("i",{class:"fas fa-image",style:{}},null,-1))),rt=[st],dt={class:"col-4 text-center"},ct=tt((()=>(0,l._)("i",{class:"fas fa-camera",style:{}},null,-1))),ut=[ct],ht={class:"col-4 text-center"},pt={for:"file"},mt=tt((()=>(0,l._)("i",{class:"fas fa-2x fa-file-upload",style:{cursor:"pointer"}},null,-1))),ft={type:"file",ref:"fileupload",id:"file",style:{display:"none"},name:"image",accept:"image/jpeg,image/jpg,image/png",multiple:"","data-original-title":"upload photos"},vt=tt((()=>(0,l._)("div",{class:"row justify-content-evenly"},[(0,l._)("div",{class:"col-4 text-center small p-1"},"Try with test image"),(0,l._)("div",{class:"col-4 text-center small p-1"},"Open camera"),(0,l._)("div",{class:"col-4 text-center small p-1"},"Upload file ")],-1)));function yt(e,t,a,i,o,n){const s=(0,l.up)("MDBCardTitle"),r=(0,l.up)("MDBCardText"),d=(0,l.up)("MDBCardBody"),c=(0,l.up)("MDBCard");return(0,l.wg)(),(0,l.j4)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[at])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[it])),_:1}),lt,(0,l._)("div",ot,[(0,l._)("div",nt,[(0,l._)("a",{class:"btn btn-primary btn-lg btn-floating btn-dark",onClick:t[0]||(t[0]=e=>n.tryTestImage()),role:"button"},rt)]),(0,l._)("div",dt,[(0,l._)("a",{class:"btn btn-primary btn-lg btn-floating btn-dark",onClick:t[1]||(t[1]=e=>n.openCam()),role:"button"},ut)]),(0,l._)("div",ht,[(0,l._)("label",pt,[mt,(0,l._)("input",ft,null,512)])])]),vt])),_:1})])),_:1})}var bt={name:"MyCard3",data(){return{date:null}},components:{MDBCard:H.MDBCard,MDBCardBody:H.MDBCardBody,MDBCardTitle:H.MDBCardTitle,MDBCardText:H.MDBCardText},props:{metaData:void 0},mounted(){const e=this.$refs.fileupload;e.onclick=function(){this.value=null};const t=this.$router;var a=this;e.addEventListener("change",(function(){const e=new FileReader;e.addEventListener("load",(function(){const i=e.result;t.push({name:"main",params:{uploaded_image:i,metaData:JSON.stringify(a.metaData)}})})),e.readAsDataURL(this.files[0])}))},methods:{openCam(){this.$router.push({name:"main",params:{metaData:JSON.stringify(this.metaData)}})},tryTestImage(){function e(e,t,a){var i=new Image;i.crossOrigin="Anonymous",i.onload=function(){var e,i=document.createElement("CANVAS"),l=i.getContext("2d");i.height=this.naturalHeight,i.width=this.naturalWidth,l.drawImage(this,0,0),e=i.toDataURL(a),t(e)},i.src=e,(i.complete||void 0===i.complete)&&(i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",i.src=e)}e("testbild.jpg",function(e){console.log("RESULT:",e),this.$router.push({name:"main",params:{uploaded_image:e,metaData:JSON.stringify(this.metaData)}})}.bind(this))}}};const gt=(0,s.Z)(bt,[["render",yt],["__scopeId","data-v-7b8a38ca"]]);var Dt=gt,_t={data(){return{cardId:0,showCards:[!0,!1,!1],prevDisabled:!0,nextDisabled:!1,metaData:void 0}},methods:{nextCard(){if(this.showCards[this.cardId]=!1,this.cardId++,this.showCards[this.cardId]=!0,0===this.cardId)this.prevDisabled=!0,this.nextDisabled=!1;else if(2===this.cardId){if(this.metaData={hiveCoords:this.$refs.metadata.hiveCoords,trapOpenedDate:this.$refs.metadata.trapOpenedDate,habitat:this.$refs.metadata.habitat,daysMounted:this.$refs.metadata.daysMounted,privacyChecked:this.$refs.metadata.privacyChecked},!this.metaData.privacyChecked)return this.showCards[this.cardId]=!1,this.cardId--,void(this.showCards[this.cardId]=!0);this.prevDisabled=!1,this.nextDisabled=!0}else this.prevDisabled=!1,this.nextDisabled=!1},previousCard(){this.showCards[this.cardId]=!1,this.cardId--,this.showCards[this.cardId]=!0,0===this.cardId?(this.prevDisabled=!0,this.nextDisabled=!1):2===this.cardId?(this.prevDisabled=!1,this.nextDisabled=!0):(this.prevDisabled=!1,this.nextDisabled=!1)}},name:"HomeView",components:{MyFooter:L,MyCard1:ie,MyCard2:Xe,MyCard3:Dt,MDBCol:H.MDBCol,MDBRow:H.MDBRow,MDBContainer:H.MDBContainer}};const wt=(0,s.Z)(_t,[["render",y]]);var xt=wt;const Ct=e=>((0,l.dD)("data-v-6b7670e8"),e=e(),(0,l.Cn)(),e),kt={style:{height:"100%",width:"100%"}},Mt={key:0,style:{overflow:"hidden"},ref:"errorcontainer",class:"error-container parent"},Bt={class:"error-close"},Wt=Ct((()=>(0,l._)("i",{class:"fa fa-times fa-2x"},null,-1))),At=[Wt],Tt={class:"error-content"},zt={key:1,ref:"maincamcontainer",style:{height:"100%",display:"flex"}},$t={key:2,ref:"mainfilecontainer",style:{height:"100%",display:"flex"}},Rt={ref:"maindatacontainer",style:{display:"none"}};function It(e,t,a,i,o,n){const s=(0,l.up)("MainCam"),r=(0,l.up)("MainFile"),d=(0,l.up)("MainData");return(0,l.wg)(),(0,l.iD)("div",kt,[o.errorMsg?((0,l.wg)(),(0,l.iD)("div",Mt,[(0,l._)("div",Bt,[(0,l._)("a",{style:{color:"#fbfceb"},href:"#!",onClick:t[0]||(t[0]=e=>{e.preventDefault(),this.errorMsg=null}),role:"button"},At)]),(0,l._)("div",Tt,(0,le.zw)(o.errorMsg),1)],512)):(0,l.kq)("",!0),e.$route.params?.uploaded_image?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",zt,[(0,l.Wm)(s,{onError:t[1]||(t[1]=e=>n.onError(e)),metaData:e.$route.params?.metaData,onPhotoAnalyzed:t[2]||(t[2]=e=>n.onPhotoAnalyzed(e))},null,8,["metaData"])],512)),e.$route.params?.uploaded_image?((0,l.wg)(),(0,l.iD)("div",$t,[(0,l.Wm)(r,{onError:t[3]||(t[3]=e=>n.onError(e)),metaData:e.$route.params?.metaData,onPhotoAnalyzed:t[4]||(t[4]=e=>n.onPhotoAnalyzed(e))},null,8,["metaData"])],512)):(0,l.kq)("",!0),(0,l._)("div",Rt,[(0,l.Wm)(d,{onRedo:t[5]||(t[5]=e=>n.onRedo()),onError:t[6]||(t[6]=e=>n.onError(e)),pollenData:o.pollenData},null,8,["pollenData"])],512)])}const Ut=e=>((0,l.dD)("data-v-66ff2c46"),e=e(),(0,l.Cn)(),e),Pt={class:"wrapper align-items-center justify-content-center",style:{display:"flex"}},St={ref:"videocanvas",class:"video-canvas"},Ot={ref:"particlediv",class:"particle-div"},jt={class:"video",ref:"videoviewer"},Ht={class:"photo-button-container d-block text-center my-3"},Vt=["disabled"],Et=Ut((()=>(0,l._)("i",{class:"fas fa-camera",style:{}},null,-1))),Ft=[Et];function Nt(e,t,a,i,o,n){return(0,l.wg)(),(0,l.iD)("div",Pt,[(0,l._)("canvas",St,null,512),(0,l._)("div",Ot,null,512),(0,l._)("video",jt,null,512),(0,l._)("div",Ht,[(0,l._)("button",{class:"button photo-button",disabled:o.camButtonDisabled,onClick:t[0]||(t[0]=(...e)=>n.TakePhoto&&n.TakePhoto(...e))},Ft,8,Vt)])])}a(1703);var qt=a(8905),Lt={components:{},data(){return{mediaStream:null,data:null,camButtonDisabled:!1}},props:{metaData:void 0},methods:{async StartRecording(){await navigator.mediaDevices.enumerateDevices().catch((e=>{this.$emit("error","Could not retrieve cameras. ("+e+")")}));let e=this.$refs.videoviewer,t=this.$refs.videocanvas,a=this.$refs.particlediv;this.camButtonDisabled=!1,t.style.display="none",a.display="none",e.style.display="block",this.mediaStream=navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:2048},height:{ideal:1536}}}).catch((e=>{this.$emit("error","Could not start camera. ("+e+")")})).then((t=>(this.mediaStream=t,e.srcObject=this.mediaStream,e.play().catch((e=>{this.$emit("error","Could not start playing camera stream. ("+e+")")})))))},async TakePhoto(){let e=this.$refs.videoviewer,t=this.$refs.videocanvas,a=this.$refs.particlediv;this.camButtonDisabled=!0;const i=t.getContext("2d");i.canvas.width=e.videoWidth,i.canvas.height=e.videoHeight;let l=e.videoWidth,o=e.videoHeight;i.drawImage(e,0,0,l,o);let n=e.clientWidth,s=t.toDataURL(),r=o/l;e.style.display="none",t.style.display="block",t.style.width="100%",a.style.display="block",a.innerHTML="",a.style.width=n+"px",a.style.height=n*r+"px";var d={particleColor:"#ffa820",background:s,interactive:!0,speed:"fast",density:"high"};new qt.ParticleNetwork(a,d);const c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({img:s,metadata:this.metaData})},u=this.mediaStream?.getVideoTracks();u?.forEach((e=>{e.stop()})),fetch("https://us-east1-pollenyzer-98b13.cloudfunctions.net/analyse",c).then((e=>{if(!e.ok)return e.text().then((e=>{throw new Error(e)}));let t=e.json();return a.innerHTML="",a.style.display="none",t})).then((e=>{if(!e){const e="Could contact AI-server.";throw console.log(e),new Error(e)}e["dataURL"]=s,e["imgWidth"]=l,e["imgHeight"]=o,this.$emit("photoAnalyzed",e)})).catch((e=>{console.log("server error",e),this.$emit("error","Could not retrieve pollen analysis. ("+e+")"),a.innerHTML="",a.style.display="none",this.$router.push({name:"main",params:{}})}))}},async mounted(){await this.StartRecording().catch((e=>{this.$emit("error","Could not start camera. ("+e+")")}))}};const Zt=(0,s.Z)(Lt,[["render",Nt],["__scopeId","data-v-66ff2c46"]]);var Gt=Zt;const Jt={ref:"datawrapper"},Yt=(0,l._)("img",{class:"mx-auto my-4",style:{"max-width":"500px"},src:h},null,-1),Kt={key:0},Qt=(0,l.Uk)("Pollen Detections"),Xt={style:{"margin-bottom":"2em"}},ea={key:0,style:{color:"red","font-weight":"bold"}},ta=(0,l.Uk)(" Only few pollen were detected. Does your input image match the example images (see "),aa=(0,l._)("a",{href:"https://pollenyzer.github.io/testbild.jpg",target:"_blank",rel:"noopener noreferrer"},"here",-1),ia=(0,l.Uk)(" for an example)? Are pollen placed on white background? Does the background have an approximate format of 150mm x 200mm? Is it centered in the image? "),la=[ta,aa,ia],oa={key:1},na={key:2},sa=(0,l._)("li",null," Use the zoom function to check on the highlighted detections. ",-1),ra=(0,l._)("li",null,"Download links:",-1),da={key:3},ca=["href"],ua={key:4},ha=["href"],pa={id:"annotationimgcontainer",ref:"annotationimgcontainer"},ma={ref:"annotationimg",id:"annotationimg",style:{display:"none"}},fa={style:{display:"none"},ref:"annotationcanvas",class:"annotation-canvas"},va={key:0},ya={style:{"margin-bottom":"10px",width:"100%","text-align":"center","font-weight":"bold"}},ba=(0,l._)("div",{class:"cluster-img-wrapper"},[(0,l._)("div",{style:{"font-weight":"bold"}},"Diversity indices")],-1),ga={class:"cluster-img-wrapper"},Da=(0,l._)("a",{href:"https://en.wikipedia.org/wiki/Diversity_index",target:"_blank"},"Richness",-1),_a=(0,l._)("a",{href:"https://en.wikipedia.org/wiki/Diversity_index",target:"_blank"},"Shannon",-1),wa=(0,l._)("a",{href:"https://en.wikipedia.org/wiki/Diversity_index",target:"_blank"},"Evenness",-1),xa=(0,l._)("a",{href:"https://en.wikipedia.org/wiki/Diversity_index",target:"_blank"},"Avg. cluster size",-1),Ca=(0,l._)("div",{class:"cluster-img-wrapper"},[(0,l._)("div",{style:{"font-weight":"bold"}}," primary pollen colors per cluster ")],-1),ka={key:0},Ma=(0,l._)("div",{style:{"text-align":"center","margin-bottom":"-50px",color:"#888"}}," outliers (n less than 1 percent) ",-1),Ba=(0,l._)("hr",{class:"outliers"},null,-1),Wa=[Ma,Ba],Aa={style:{color:"#888"}},Ta=["src"];function za(e,t,a,o,n,s){const r=(0,l.up)("MDBRow"),d=(0,l.up)("MDBCol"),c=(0,l.up)("MDBCardTitle"),u=(0,l.up)("MDBCardText"),h=(0,l.up)("MDBCardBody"),p=(0,l.up)("MDBCard"),m=(0,l.up)("vue3-slider"),f=(0,l.up)("MDBContainer"),v=(0,l.up)("CamFooter");return(0,l.wg)(),(0,l.iD)("div",Jt,[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{md:"12",class:"mx-auto"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[Yt])),_:1})])),_:1})])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i.uT,{appear:"",name:"bounce",onAfterEnter:t[0]||(t[0]=e=>s.showAnnotations(a.pollenData))},{default:(0,l.w5)((()=>[n.showCards[0]?((0,l.wg)(),(0,l.iD)("p",Kt,[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[Qt])),_:1}),(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l._)("ul",Xt,[(0,l._)("li",null,(0,le.zw)(a.pollenData?.pollen?.n_pollen)+" pollen detected.",1),a.pollenData?.pollen?.n_pollen<50?((0,l.wg)(),(0,l.iD)("li",ea,la)):(0,l.kq)("",!0),a.pollenData?.pollen?.calibration?((0,l.wg)(),(0,l.iD)("li",oa," Calibration strip found. The extracted and processed color strip is shown in the upper right corner of the image below. ")):(0,l.kq)("",!0),a.pollenData?.pollen?.calibration?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("li",na," No calibration strip found. Consider to buy a Kellogs(TM) corn flakes packaging which includes a 24 color calibration strip. Other products that are printed on similar paper which contain the very same calibration strip can also be used. ")),sa,ra,(0,l._)("li",null,(0,le.zw)(a.pollenData),1),(0,l._)("li",null,(0,le.zw)(a.pollenData?.root_dir),1),(0,l._)("li",null,(0,le.zw)(a.pollenData?.pollen?.root_dir),1),a.pollenData?.root_dir?((0,l.wg)(),(0,l.iD)("li",da,[(0,l._)("a",{href:"https://storage.googleapis.com/pollenyzer/"+a.pollenData?.root_dir+"/result.csv",download:"pollenyzer_result.csv"},"Download results as CSV",8,ca)])):(0,l.kq)("",!0),a.pollenData?.root_dir?((0,l.wg)(),(0,l.iD)("li",ua,[(0,l._)("a",{href:"https://storage.googleapis.com/pollenyzer/"+a.pollenData?.root_dir+"/3_annotated.png",download:"pollenyzer_annotations.png"},"Download annotated input image",8,ha)])):(0,l.kq)("",!0)]),(0,l._)("div",pa,null,512),(0,l._)("img",ma,null,512),(0,l._)("canvas",fa,null,512)])),_:1})])),_:1})])),_:1})])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(i.uT,{appear:"",name:"bounce"},{default:(0,l.w5)((()=>[n.showCards[1]?((0,l.wg)(),(0,l.iD)("p",va,[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l._)("div",ya," #cluster "+(0,le.zw)(n.nCluster)+", including "+(0,le.zw)(a.pollenData?.pollen?.clusters?.cluster_imgs[n.nCluster].cluster.filter((e=>e.cluster_size<Math.ceil(a.pollenData?.pollen?.n_pollen/100))).length)+" outlier(s) ",1),(0,l.Wm)(m,{trackColor:"#ffa820",color:"#97be11",tooltip:!0,modelValue:n.nCluster,"onUpdate:modelValue":t[1]||(t[1]=e=>n.nCluster=e),handleScale:3,min:1,alwaysShowHandle:!0,sticky:!0,max:n.maxCluster},null,8,["modelValue","max"]),(0,l._)("div",null,[ba,(0,l._)("div",ga,[(0,l._)("div",null,[Da,(0,l.Uk)(": "+(0,le.zw)(a.pollenData?.pollen?.clusters?.cluster_imgs[n.nCluster]?.diversity?.richness),1)]),(0,l._)("div",null,[_a,(0,l.Uk)(": "+(0,le.zw)(a.pollenData?.pollen?.clusters?.cluster_imgs[n.nCluster]?.diversity?.shannon?.toFixed(4)||"non-calculable")+", ",1)]),(0,l._)("div",null,[wa,(0,l.Uk)(": "+(0,le.zw)(a.pollenData?.pollen?.clusters?.cluster_imgs[n.nCluster]?.diversity?.shannon_eveness?.toFixed(4)||"non-calculable")+", ",1)]),(0,l._)("div",null,[xa,(0,l.Uk)(": "+(0,le.zw)(a.pollenData?.pollen?.clusters?.cluster_imgs[n.nCluster]?.diversity?.avg_population_size?.toFixed(2)),1)])]),Ca,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.pollenData?.pollen?.clusters?.cluster_imgs[n.nCluster].cluster,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"cluster-img-wrapper",key:e},[t>1&&a.pollenData?.pollen?.clusters?.cluster_imgs[n.nCluster].cluster[t-1].cluster_size>Math.ceil(a.pollenData?.pollen?.n_pollen/100)&&e.cluster_size<=Math.ceil(a.pollenData?.pollen?.n_pollen/100)?((0,l.wg)(),(0,l.iD)("div",ka,Wa)):(0,l.kq)("",!0),(0,l._)("div",Aa," cluster "+(0,le.zw)(t+1)+" (n="+(0,le.zw)(e.cluster_size)+") ",1),(0,l._)("img",{src:e.cluster_primary_canvas,class:"cluster-img"},null,8,Ta)])))),128))])])),_:1})])),_:1})])),_:1})])):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(v,{onNextCard:t[2]||(t[2]=e=>s.nextCard()),onPreviousCard:t[3]||(t[3]=e=>s.previousCard()),onRedo:t[4]||(t[4]=t=>e.$emit("redo")),prevDisabled:n.prevDisabled,nextDisabled:n.nextDisabled,redoDisabled:!1},null,8,["prevDisabled","nextDisabled"])],512)}const $a={style:{color:"white",position:"fixed",bottom:"0",width:"100%"},class:"d-block d-md-none"},Ra={class:"text-center p-1",style:{"background-image":"linear-gradient(to top,rgba(151, 190, 17, 1),rgba(151, 190, 17, 0.3),rgba(251,252,235, 0))"}},Ia={key:0,class:"text-center bgcol_green",style:{width:"100%","min-height":"1em"}},Ua={style:{width:"100%","padding-bottom":"100px"},class:"d-none d-md-block text-center"},Pa={style:{color:"white",position:"fixed",bottom:"0",width:"100%"}},Sa={key:0,class:"text-center bgcol_dark text-smaller",style:{width:"100%","min-height":"1em"}};function Oa(e,t,a,i,o,n){const s=(0,l.up)("CamControls");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",$a,[(0,l._)("div",Ra,[(0,l.Wm)(s,{onNextCard:t[0]||(t[0]=t=>e.$emit("nextCard")),onPreviousCard:t[1]||(t[1]=t=>e.$emit("previousCard")),nextDisabled:a.nextDisabled,prevDisabled:a.prevDisabled,onRedo:t[2]||(t[2]=t=>e.$emit("redo"))},null,8,["nextDisabled","prevDisabled"])]),((0,l.wg)(),(0,l.iD)("div",Ia," © 2022 Pollenyzer "))]),(0,l._)("div",Ua,[(0,l.Wm)(s,{onNextCard:t[3]||(t[3]=t=>e.$emit("nextCard")),onPreviousCard:t[4]||(t[4]=t=>e.$emit("previousCard")),onRedo:t[5]||(t[5]=t=>e.$emit("redo")),nextDisabled:a.nextDisabled,prevDisabled:a.prevDisabled,redoDisabled:a.redoDisabled},null,8,["nextDisabled","prevDisabled","redoDisabled"]),(0,l._)("div",Pa,[((0,l.wg)(),(0,l.iD)("div",Sa," © 2022 Pollenyzer "))])])],64)}const ja={class:"d-block d-md-none"},Ha={class:"mx-2"},Va={class:"mx-2"},Ea={class:"mx-2"},Fa={class:"d-none d-md-block"},Na={class:"m-5"},qa={class:"m-5"},La={class:"m-5"};function Za(e,t,a,i,o,n){const s=(0,l.up)("MDBIcon"),r=(0,l.up)("MDBBtn");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",ja,[(0,l._)("span",Ha,[(0,l.Wm)(r,{onClick:t[0]||(t[0]=t=>e.$emit("previousCard")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.prevDisabled},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{icon:"angle-left"})])),_:1},8,["disabled"])]),(0,l._)("span",Va,[(0,l.Wm)(r,{onClick:t[1]||(t[1]=t=>e.$emit("redo")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.redoDisabled},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{icon:"redo"})])),_:1},8,["disabled"])]),(0,l._)("span",Ea,[(0,l.Wm)(r,{onClick:t[2]||(t[2]=t=>e.$emit("nextCard")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.nextDisabled},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{icon:"angle-right"})])),_:1},8,["disabled"])])]),(0,l._)("div",Fa,[(0,l._)("span",Na,[(0,l.Wm)(r,{onClick:t[3]||(t[3]=t=>e.$emit("previousCard")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.prevDisabled},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{icon:"angle-left"})])),_:1},8,["disabled"])]),(0,l._)("span",qa,[(0,l.Wm)(r,{onClick:t[4]||(t[4]=t=>e.$emit("redo")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.redoDisabled},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{icon:"redo"})])),_:1},8,["disabled"])]),(0,l._)("span",La,[(0,l.Wm)(r,{onClick:t[5]||(t[5]=t=>e.$emit("nextCard")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.nextDisabled},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{icon:"angle-right"})])),_:1},8,["disabled"])])])])}var Ga={data(){return{}},props:{prevDisabled:Boolean,nextDisabled:Boolean,redoDisabled:Boolean},name:"CamControls",components:{MDBBtn:H.MDBBtn,MDBIcon:H.MDBIcon}};const Ja=(0,s.Z)(Ga,[["render",Za]]);var Ya=Ja,Ka={name:"CamFooter",components:{CamControls:Ya},props:{prevDisabled:Boolean,nextDisabled:Boolean,redoDisabled:Boolean},emits:["nextCard","previousCard","redo"]};const Qa=(0,s.Z)(Ka,[["render",Oa],["__scopeId","data-v-fd317084"]]);var Xa=Qa,ei=a(9096),ti={components:{MDBCol:H.MDBCol,MDBRow:H.MDBRow,MDBContainer:H.MDBContainer,MDBCard:H.MDBCard,MDBCardBody:H.MDBCardBody,MDBCardTitle:H.MDBCardTitle,MDBCardText:H.MDBCardText,CamFooter:Xa,"vue3-slider":Je()},props:{pollenData:Object},data(){return{showCards:[!0,!1,!1],cardId:0,nCluster:1,maxCluster:1,prevDisabled:!0,nextDisabled:!1}},mounted(){},watch:{pollenData(e,t){this.showAnnotations(e)}},methods:{showAnnotations(e){if(e){this.nCluster=this.pollenData.pollen.clusters.n_clusters_predicted+this.pollenData.pollen.clusters.n_outliers_predicted,this.maxCluster=Object.keys(this.pollenData?.pollen?.clusters?.cluster_imgs).length||1;let a=this.$refs.annotationcanvas,i=this.$refs.annotationimg;const l=a.getContext("2d");console.log("width:",e.pollen.img_width,"height:",e.pollen.img_height),l.canvas.width=e.pollen.img_width,l.canvas.height=e.pollen.img_height;var t=new Image;t.onload=function(){l.drawImage(t,0,0,e.pollen.img_width,e.pollen.img_height),i.src=a.toDataURL(),new ei.Z("#annotationimgcontainer",{src:i,maxRatio:10,slider:!1,zoomer:!0})},t.src=e.pollen.annotated_img}},nextCard(){this.showCards[this.cardId]=!1,this.cardId++,this.showCards[this.cardId]=!0,0===this.cardId?(this.prevDisabled=!0,this.nextDisabled=!1):1===this.cardId?(this.prevDisabled=!1,this.nextDisabled=!0):(this.prevDisabled=!1,this.nextDisabled=!1)},previousCard(){this.showCards[this.cardId]=!1,this.cardId--,this.showCards[this.cardId]=!0,0===this.cardId?(this.prevDisabled=!0,this.nextDisabled=!1):1===this.cardId?(this.prevDisabled=!1,this.nextDisabled=!0):(this.prevDisabled=!1,this.nextDisabled=!1)}}};const ai=(0,s.Z)(ti,[["render",za]]);var ii=ai;const li=e=>((0,l.dD)("data-v-43d53211"),e=e(),(0,l.Cn)(),e),oi={class:"wrapper align-items-center justify-content-center",style:{display:"flex"}},ni={ref:"particledivfile",class:"particle-div"},si=["src"],ri={class:"photo-button-container d-block text-center my-3"},di=["disabled"],ci=li((()=>(0,l._)("i",{class:"fas fa-play",style:{}},null,-1))),ui=[ci];function hi(e,t,a,i,o,n){return(0,l.wg)(),(0,l.iD)("div",oi,[(0,l._)("div",ni,null,512),(0,l._)("img",{class:"image",ref:"imgviewer",src:this.$route.params.uploaded_image},null,8,si),(0,l._)("div",ri,[(0,l._)("button",{class:"button photo-button",disabled:o.camButtonDisabled,onClick:t[0]||(t[0]=(...e)=>n.analyzeUpload&&n.analyzeUpload(...e))},ui,8,di)])])}var pi={components:{},data(){return{data:null,camButtonDisabled:!1}},props:{metaData:void 0},methods:{async analyzeUpload(){let e=this.$refs.imgviewer,t=e.width,a=e.height,i=this.$refs.particledivfile,l=this.$route.params.uploaded_image;this.camButtonDisabled=!0,i.style.display="block",i.innerHTML="",i.style.width="100%";let o=a/t;i.style.display="block",i.innerHTML="",i.style.width=e.clientWidth+"px",i.style.height=e.clientWidth*o+"px";var n={particleColor:"#ffa820",background:l,interactive:!0,speed:"fast",density:"high"};new qt.ParticleNetwork(i,n);const s={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({img:l,metadata:this.metaData})};fetch("https://us-east1-pollenyzer-98b13.cloudfunctions.net/analyse",s).then((e=>{if(!e.ok)return e.text().then((e=>{throw new Error(e)}));let t=e.json();return i.innerHTML="",i.style.display="none",t})).then((e=>{if(!e){const e="Could contact AI-server.";throw console.log(e),new Error(e)}console.log(e),e["dataURL"]=l,e["imgWidth"]=t,e["imgHeight"]=a,this.camButtonDisabled=!1,this.$emit("photoAnalyzed",e)})).catch((e=>{this.$emit("error","Could not retrieve pollen analysis. ("+e+")"),i.innerHTML="",i.style.display="none",router.push({name:"main",params:{uploaded_image:uploaded_image}})}))}},async mounted(){}};const mi=(0,s.Z)(pi,[["render",hi],["__scopeId","data-v-43d53211"]]);var fi=mi,vi={components:{MainCam:Gt,MainData:ii,MainFile:fi},props:{},created(){},mounted(){},setup(){},data(){return{metaData:void 0,pollenData:void 0,errorMsg:null,errorZIndex:10}},methods:{onRedo(){this.$router.push("/")},onError(e){this.errorMsg=e,setTimeout((()=>{this.$refs.errorcontainer.style.zIndex=++this.errorZIndex}),200)},onPhotoAnalyzed(e){try{this.$refs.maincamcontainer.style.display="none"}catch{}try{this.$refs.mainfilecontainer.style.display="none"}catch{}this.$refs.maindatacontainer.style.display="block",this.pollenData=e}}};const yi=(0,s.Z)(vi,[["render",It],["__scopeId","data-v-6b7670e8"]]);var bi=yi;const gi=[{path:"/",name:"home",component:xt},{path:"/main",name:"main",component:bi},{path:"/:catchAll(.*)",component:xt}],Di=(0,u.p7)({history:(0,u.r5)(),routes:gi});var _i=Di;(0,i.ri)(d).use(_i).mount("#app")}},t={};function a(i){var l=t[i];if(void 0!==l)return l.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,i,l,o){if(!i){var n=1/0;for(c=0;c<e.length;c++){i=e[c][0],l=e[c][1],o=e[c][2];for(var s=!0,r=0;r<i.length;r++)(!1&o||n>=o)&&Object.keys(a.O).every((function(e){return a.O[e](i[r])}))?i.splice(r--,1):(s=!1,o<n&&(n=o));if(s){e.splice(c--,1);var d=l();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[i,l,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var l,o,n=i[0],s=i[1],r=i[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(l in s)a.o(s,l)&&(a.m[l]=s[l]);if(r)var c=r(a)}for(t&&t(i);d<n.length;d++)o=n[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},i=self["webpackChunkpollenyzer"]=self["webpackChunkpollenyzer"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(1191)}));i=a.O(i)})();
//# sourceMappingURL=app.28903e49.js.map