(function(){var e={8905:function(e){var t=function(e){this.canvas=e.canvas,this.ctx=e.ctx,this.particleColor=e.options.particleColor,this.x=Math.random()*this.canvas.width,this.y=Math.random()*this.canvas.height,this.velocity={x:(Math.random()-.5)*e.options.velocity,y:(Math.random()-.5)*e.options.velocity}};t.prototype.update=function(){(this.x>this.canvas.width+20||this.x<-20)&&(this.velocity.x=-this.velocity.x),(this.y>this.canvas.height+20||this.y<-20)&&(this.velocity.y=-this.velocity.y),this.x+=this.velocity.x,this.y+=this.velocity.y},t.prototype.draw=function(){this.ctx.beginPath(),this.ctx.fillStyle=this.particleColor,this.ctx.globalAlpha=.7,this.ctx.arc(this.x,this.y,1.5,0,2*Math.PI),this.ctx.fill()};var a=function(e,t){this.canvasDiv=e,this.canvasDiv.size={width:this.canvasDiv.offsetWidth,height:this.canvasDiv.offsetHeight},t=void 0!==t?t:{},this.options={particleColor:void 0!==t.particleColor?t.particleColor:"#fff",background:void 0!==t.background?t.background:"#1a252f",interactive:void 0===t.interactive||t.interactive,velocity:this.setVelocity(t.speed),density:this.setDensity(t.density)},this.init()};a.prototype.init=function(){if(this.bgDiv=document.createElement("div"),this.canvasDiv.appendChild(this.bgDiv),this.setStyles(this.bgDiv,{position:"absolute",top:0,left:0,bottom:0,right:0,"z-index":1}),/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(this.options.background)&&this.setStyles(this.bgDiv,{background:this.options.background}),!/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(this.options.particleColor))return console.error("Please specify a valid particleColor hexadecimal color"),!1;this.canvas=document.createElement("canvas"),this.canvasDiv.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.canvasDiv.size.width,this.canvas.height=this.canvasDiv.size.height,this.setStyles(this.canvasDiv,{position:"relative"}),this.setStyles(this.canvas,{"z-index":"20",position:"relative"}),window.addEventListener("resize",function(){if(this.canvasDiv.offsetWidth===this.canvasDiv.size.width&&this.canvasDiv.offsetHeight===this.canvasDiv.size.height)return!1;this.canvas.width=this.canvasDiv.size.width=this.canvasDiv.offsetWidth,this.canvas.height=this.canvasDiv.size.height=this.canvasDiv.offsetHeight,clearTimeout(this.resetTimer),this.resetTimer=setTimeout(function(){this.particles=[];for(var e=0;e<this.canvas.width*this.canvas.height/this.options.density;e++)this.particles.push(new t(this));this.options.interactive&&this.particles.push(this.mouseParticle),requestAnimationFrame(this.update.bind(this))}.bind(this),500)}.bind(this)),this.particles=[];for(var e=0;e<this.canvas.width*this.canvas.height/this.options.density;e++)this.particles.push(new t(this));this.options.interactive&&(this.mouseParticle=new t(this),this.mouseParticle.velocity={x:0,y:0},this.particles.push(this.mouseParticle),this.canvas.addEventListener("mousemove",function(e){this.mouseParticle.x=e.clientX-this.canvas.offsetLeft,this.mouseParticle.y=e.clientY-this.canvas.offsetTop}.bind(this)),this.canvas.addEventListener("mouseup",function(){this.mouseParticle.velocity={x:(Math.random()-.5)*this.options.velocity,y:(Math.random()-.5)*this.options.velocity},this.mouseParticle=new t(this),this.mouseParticle.velocity={x:0,y:0},this.particles.push(this.mouseParticle)}.bind(this))),requestAnimationFrame(this.update.bind(this))},a.prototype.update=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.globalAlpha=1;for(var e=0;e<this.particles.length;e++){this.particles[e].update(),this.particles[e].draw();for(var t=this.particles.length-1;t>e;t--){var a=Math.sqrt(Math.pow(this.particles[e].x-this.particles[t].x,2)+Math.pow(this.particles[e].y-this.particles[t].y,2));a>120||(this.ctx.beginPath(),this.ctx.strokeStyle=this.options.particleColor,this.ctx.globalAlpha=(120-a)/120,this.ctx.lineWidth=2.8,this.ctx.moveTo(this.particles[e].x,this.particles[e].y),this.ctx.lineTo(this.particles[t].x,this.particles[t].y),this.ctx.stroke())}}0!==this.options.velocity&&requestAnimationFrame(this.update.bind(this))},a.prototype.setVelocity=function(e){return"fast"===e?3.5:"slow"===e?1:"none"===e?0:.66},a.prototype.setDensity=function(e){return"high"===e?5e3:"low"===e?2e4:isNaN(parseInt(e,10))?1e4:e},a.prototype.setStyles=function(e,t){for(var a in t)e.style[a]=t[a]},e.exports={ParticleNetwork:a}},8862:function(e,t,a){"use strict";var i=a(9242),n=a(3396);function s(e,t,a,i,s,o){const l=(0,n.up)("router-view");return(0,n.wg)(),(0,n.j4)(l)}var o={name:"App",components:{}},l=a(89);const r=(0,l.Z)(o,[["render",s]]);var d=r,c=a(5431);(0,c.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var u=a(2483),h=a.p+"img/pollenyzer_logo.8c6997e9.svg";const p=(0,n._)("img",{class:"mx-auto my-4",style:{"max-width":"500px"},alt:"Vue logo",src:h},null,-1),m={key:0},v={key:0},f={key:0};function b(e,t,a,s,o,l){const r=(0,n.up)("MDBRow"),d=(0,n.up)("MDBCol"),c=(0,n.up)("MyCard1"),u=(0,n.up)("MyCard2"),h=(0,n.up)("MyCard3"),b=(0,n.up)("MDBContainer"),g=(0,n.up)("MyFooter");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{md:"12",class:"mx-auto"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[p])),_:1}),(0,n.Wm)(r)])),_:1})])),_:1}),(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i.uT,{appear:"",name:"bounce"},{default:(0,n.w5)((()=>[o.showCards[0]?((0,n.wg)(),(0,n.iD)("p",m,[(0,n.Wm)(c)])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(i.uT,{name:"bounce"},{default:(0,n.w5)((()=>[o.showCards[1]?((0,n.wg)(),(0,n.iD)("p",v,[(0,n.Wm)(u)])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(i.uT,{name:"bounce"},{default:(0,n.w5)((()=>[o.showCards[2]?((0,n.wg)(),(0,n.iD)("p",f,[(0,n.Wm)(h)])):(0,n.kq)("",!0)])),_:1})])),_:1})])),_:1}),(0,n.Wm)(g,{onNextCard:t[0]||(t[0]=e=>l.nextCard()),onPreviousCard:t[1]||(t[1]=e=>l.previousCard()),prevDisabled:o.prevDisabled,nextDisabled:o.nextDisabled},null,8,["prevDisabled","nextDisabled"])])}const g={style:{color:"white",position:"fixed",bottom:"0",width:"100%"},class:"d-block d-md-none"},D={class:"text-center p-1",style:{"background-image":"linear-gradient(to top,rgba(151, 190, 17, 1),rgba(151, 190, 17, 0.3),rgba(251,252,235, 0))"}},w={key:0,class:"text-center bgcol_green",style:{width:"100%","min-height":"1em"}},y={style:{width:"100%"},class:"d-none d-md-block text-center"},C={style:{color:"white",position:"fixed",bottom:"0",width:"100%"}},x={key:0,class:"text-center bgcol_dark text-smaller",style:{width:"100%","min-height":"1em"}};function _(e,t,a,i,s,o){const l=(0,n.up)("MyCardControls");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",g,[(0,n._)("div",D,[(0,n.Wm)(l,{onNextCard:t[0]||(t[0]=t=>e.$emit("nextCard")),onPreviousCard:t[1]||(t[1]=t=>e.$emit("previousCard")),nextDisabled:a.nextDisabled,prevDisabled:a.prevDisabled},null,8,["nextDisabled","prevDisabled"])]),((0,n.wg)(),(0,n.iD)("div",w," © 2022 Pollenyzer "))]),(0,n._)("div",y,[(0,n.Wm)(l,{onNextCard:t[2]||(t[2]=t=>e.$emit("nextCard")),onPreviousCard:t[3]||(t[3]=t=>e.$emit("previousCard")),nextDisabled:a.nextDisabled,prevDisabled:a.prevDisabled},null,8,["nextDisabled","prevDisabled"]),(0,n._)("div",C,[((0,n.wg)(),(0,n.iD)("div",x," © 2022 Pollenyzer "))])])],64)}const k={class:"d-block d-md-none"},M={class:"mx-2"},B={class:"mx-2"},W={class:"d-none d-md-block"},T={class:"m-5"},I={class:"m-5"};function P(e,t,a,i,s,o){const l=(0,n.up)("MDBIcon"),r=(0,n.up)("MDBBtn");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",k,[(0,n._)("span",M,[(0,n.Wm)(r,{onClick:t[0]||(t[0]=t=>e.$emit("previousCard")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.prevDisabled},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{icon:"angle-left"})])),_:1},8,["disabled"])]),(0,n._)("span",B,[(0,n.Wm)(r,{onClick:t[1]||(t[1]=t=>e.$emit("nextCard")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.nextDisabled},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{icon:"angle-right"})])),_:1},8,["disabled"])])]),(0,n._)("div",W,[(0,n._)("span",T,[(0,n.Wm)(r,{onClick:t[2]||(t[2]=t=>e.$emit("previousCard")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.prevDisabled},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{icon:"angle-left"})])),_:1},8,["disabled"])]),(0,n._)("span",I,[(0,n.Wm)(r,{onClick:t[3]||(t[3]=t=>e.$emit("nextCard")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.nextDisabled},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{icon:"angle-right"})])),_:1},8,["disabled"])])])])}var A=a(6818),H={data(){return{}},props:{prevDisabled:Boolean,nextDisabled:Boolean},name:"CamControls",components:{MDBBtn:A.MDBBtn,MDBIcon:A.MDBIcon}};const $=(0,l.Z)(H,[["render",P]]);var S=$,j={components:{MyCardControls:S},props:{prevDisabled:Boolean,nextDisabled:Boolean}};const z=(0,l.Z)(j,[["render",_],["__scopeId","data-v-52b20327"]]);var F=z;const O=(0,n.Uk)("Analyze the content of your pollen traps!"),E=(0,n._)("ol",null,[(0,n._)("li",null,"Mount your pollen trap for a couple of days."),(0,n._)("li",null,"Harvest."),(0,n._)("li",null,"Take a photo of your harvest"),(0,n._)("li",null,"(Opt. provide some extra information for scientists.)"),(0,n._)("li",null,"Analyze your pollen!")],-1);function N(e,t,a,i,s,o){const l=(0,n.up)("MDBCardTitle"),r=(0,n.up)("MDBCardText"),d=(0,n.up)("MDBCardBody"),c=(0,n.up)("MDBCard");return(0,n.wg)(),(0,n.j4)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(l,null,{default:(0,n.w5)((()=>[O])),_:1}),(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[E])),_:1})])),_:1})])),_:1})}var L={name:"MyCard1",components:{MDBCard:A.MDBCard,MDBCardBody:A.MDBCardBody,MDBCardTitle:A.MDBCardTitle,MDBCardText:A.MDBCardText}};const R=(0,l.Z)(L,[["render",N]]);var V=R;const Z=(0,n.Uk)("Support science!"),U=(0,n.Uk)(" You can skip this, however, if you feel like saving the bees, provide us with some additional information on your hive. "),q=(0,n._)("hr",null,null,-1),G=(0,n._)("div",{class:"my-3"},"Hive's location",-1),K=(0,n._)("span",{class:"input-group-text border-0",id:"search-addon"},[(0,n._)("i",{class:"fas fa-map-marker-alt"})],-1),Y=(0,n._)("span",{class:"input-group-text border-0",id:"search-addon"},[(0,n._)("i",{class:"fas fa-map-marker-alt"})],-1),X=(0,n._)("hr",null,null,-1),J=(0,n._)("label",{for:"customRange3",class:"form-label"},"No. of days the trap was mounted",-1),Q=(0,n._)("div",{class:"range"},[(0,n._)("input",{type:"range",class:"form-range range-dark",min:"0",max:"5",value:'["A", "A", "A", "A", "A"]',id:"customRange3"})],-1),ee=(0,n._)("hr",null,null,-1),te=(0,n._)("div",{class:"my-3"},"Date of harvest",-1);function ae(e,t,a,i,s,o){const l=(0,n.up)("MDBCardTitle"),r=(0,n.up)("MDBCardText"),d=(0,n.up)("MDBInput"),c=(0,n.up)("Datepicker"),u=(0,n.up)("MDBCardBody"),h=(0,n.up)("MDBCard");return(0,n.wg)(),(0,n.j4)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(l,null,{default:(0,n.w5)((()=>[Z])),_:1}),(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[U])),_:1}),q,G,(0,n.Wm)(d,{inputGroup:"",formOutline:!1,wrapperClass:"mb-3",class:"rounded",modelValue:i.input12,"onUpdate:modelValue":t[0]||(t[0]=e=>i.input12=e),"aria-describedby":"search-addon","aria-label":"country",placeholder:"Hive's country"},{prepend:(0,n.w5)((()=>[K])),_:1},8,["modelValue"]),(0,n.Wm)(d,{inputGroup:"",formOutline:!1,type:"number",wrapperClass:"mb-3",class:"rounded",modelValue:i.input13,"onUpdate:modelValue":t[1]||(t[1]=e=>i.input13=e),"aria-describedby":"basic-addon4","aria-label":"zipcode",placeholder:"Hive's zip code"},{prepend:(0,n.w5)((()=>[Y])),_:1},8,["modelValue"]),X,J,Q,ee,te,(0,n.Wm)(c,{modelValue:s.date,"onUpdate:modelValue":t[2]||(t[2]=e=>s.date=e)},null,8,["modelValue"])])),_:1})])),_:1})}var ie=a(8524),ne=a(4870),se={name:"MyCard2",data(){return{date:null}},components:{MDBCard:A.MDBCard,MDBCardBody:A.MDBCardBody,MDBCardTitle:A.MDBCardTitle,MDBCardText:A.MDBCardText,MDBInput:A.MDBInput,Datepicker:ie.Z},setup(){const e=(0,ne.iH)(""),t=(0,ne.iH)(""),a=(0,ne.iH)(""),i=(0,ne.iH)(""),n=(0,ne.iH)(""),s=(0,ne.iH)("");return{input12:e,input13:t,input14:a,input15:i,input16:n,textarea2:s}}};const oe=(0,l.Z)(se,[["render",ae]]);var le=oe;const re=e=>((0,n.dD)("data-v-408a26fe"),e=e(),(0,n.Cn)(),e),de=(0,n.Uk)("Take or upload a photo!"),ce=re((()=>(0,n._)("ul",{class:"fa-ul p-1 py-3"},[(0,n._)("li",null,[(0,n._)("span",{class:"fa-li"},[(0,n._)("i",{class:"fas fa-check col_green"})]),(0,n._)("p",null,[(0,n.Uk)(" Place Pollen on a white, folded piece of paper. "),(0,n._)("a",{"data-mdb-toggle":"tooltip",title:"Please use DINA4 paper.",class:"col_green customtooltip","data-mdb-html":"true","data-mdb-placement":"bottom",href:"#!"},[(0,n._)("i",{class:"fas fa-1x fa-info-circle"})])])]),(0,n._)("li",null,[(0,n._)("span",{class:"fa-li"},[(0,n._)("i",{class:"fas fa-check col_green"})]),(0,n._)("p",null,[(0,n.Uk)(" Pollen should not overlap. "),(0,n._)("a",{"data-mdb-toggle":"tooltip",title:"Overlapping pollen cannot be analyzed.",class:"col_green customtooltip",href:"#!"},[(0,n._)("i",{class:"fas fa-1x fa-info-circle"})])])]),(0,n._)("li",null,[(0,n._)("span",{class:"fa-li"},[(0,n._)("i",{class:"fas fa-check col_green"})]),(0,n._)("p",null,"Avoid casting any shadows.")]),(0,n._)("li",null,[(0,n._)("span",{class:"fa-li"},[(0,n._)("i",{class:"fas fa-check col_green"})]),(0,n._)("p",null,"Avoid flashlight.")])],-1))),ue=re((()=>(0,n._)("div",{class:"row justify-content-evenly"},[(0,n._)("div",{class:"col-4 text-center"},[(0,n._)("a",{class:"btn btn-primary btn-lg btn-floating btn-dark",href:"#!",role:"button"},[(0,n._)("i",{class:"fas fa-camera",style:{}})])]),(0,n._)("div",{class:"col-4 text-center"},[(0,n._)("a",{class:"btn btn-primary btn-lg btn-floating btn-dark",href:"#!",role:"button"},[(0,n._)("i",{class:"fas fa-file-upload",style:{}})])])],-1))),he={class:"row justify-content-evenly"},pe={class:"col-4 text-center small p-1"},me=(0,n.Uk)("Open Camera "),ve=(0,n.Uk)("CAMLINK"),fe=re((()=>(0,n._)("div",{class:"col-4 text-center small p-1"},"Upload File",-1)));function be(e,t,a,i,s,o){const l=(0,n.up)("MDBCardTitle"),r=(0,n.up)("MDBCardText"),d=(0,n.up)("router-link"),c=(0,n.up)("MDBCardBody"),u=(0,n.up)("MDBCard");return(0,n.wg)(),(0,n.j4)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(l,null,{default:(0,n.w5)((()=>[de])),_:1}),(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[ce])),_:1}),ue,(0,n._)("div",he,[(0,n._)("div",pe,[me,(0,n.Wm)(d,{to:"/cam"},{default:(0,n.w5)((()=>[ve])),_:1})]),fe])])),_:1})])),_:1})}var ge={name:"MyCard3",data(){return{date:null}},components:{MDBCard:A.MDBCard,MDBCardBody:A.MDBCardBody,MDBCardTitle:A.MDBCardTitle,MDBCardText:A.MDBCardText}};const De=(0,l.Z)(ge,[["render",be],["__scopeId","data-v-408a26fe"]]);var we=De,ye={data(){return{cardId:0,showCards:[!0,!1,!1],prevDisabled:!0,nextDisabled:!1}},methods:{nextCard(){this.showCards[this.cardId]=!1,this.cardId++,this.showCards[this.cardId]=!0,0===this.cardId?(this.prevDisabled=!0,this.nextDisabled=!1):2===this.cardId?(this.prevDisabled=!1,this.nextDisabled=!0):(this.prevDisabled=!1,this.nextDisabled=!1)},previousCard(){this.showCards[this.cardId]=!1,this.cardId--,this.showCards[this.cardId]=!0,0===this.cardId?(this.prevDisabled=!0,this.nextDisabled=!1):2===this.cardId?(this.prevDisabled=!1,this.nextDisabled=!0):(this.prevDisabled=!1,this.nextDisabled=!1)}},name:"HomeView",components:{MyFooter:F,MyCard1:V,MyCard2:le,MyCard3:we,MDBCol:A.MDBCol,MDBRow:A.MDBRow,MDBContainer:A.MDBContainer}};const Ce=(0,l.Z)(ye,[["render",b]]);var xe=Ce;const _e=e=>((0,n.dD)("data-v-2bfde6a0"),e=e(),(0,n.Cn)(),e),ke={style:{height:"100%",width:"100%"}},Me=_e((()=>(0,n._)("div",{class:"error-container"},"fehlermeldungen ",-1))),Be={ref:"maincamcontainer"},We={ref:"maindatacontainer",style:{display:"none"}};function Te(e,t,a,i,s,o){const l=(0,n.up)("MainCam"),r=(0,n.up)("MainData");return(0,n.wg)(),(0,n.iD)("div",ke,[Me,(0,n._)("div",Be,[(0,n.Wm)(l,{onPhotoTaken:t[0]||(t[0]=e=>o.onPhotoTaken(e))})],512),(0,n._)("div",We,[(0,n.Wm)(r,{pollenData:s.pollenData},null,8,["pollenData"])],512)])}const Ie=e=>((0,n.dD)("data-v-4ea6067e"),e=e(),(0,n.Cn)(),e),Pe={class:"wrapper d-flex align-items-center justify-content-center"},Ae={ref:"videocanvas",class:"video-canvas"},He={ref:"particlediv",class:"particle-div"},$e={class:"video",ref:"videoviewer"},Se={class:"photo-button-container d-block text-center my-3"},je=Ie((()=>(0,n._)("i",{class:"fas fa-camera",style:{}},null,-1))),ze=[je];function Fe(e,t,a,i,s,o){return(0,n.wg)(),(0,n.iD)("div",Pe,[(0,n._)("canvas",Ae,null,512),(0,n._)("div",He,null,512),(0,n._)("video",$e,null,512),(0,n._)("div",Se,[(0,n._)("button",{class:"button photo-button",onClick:t[0]||(t[0]=(...e)=>o.TakePhoto&&o.TakePhoto(...e))},ze)])])}var Oe=a(8905),Ee={components:{},data(){return{mediaStream:null,videoDevices:[],data:null}},props:{},methods:{async StartRecording(){let e=this.$refs.videoviewer;e.style.display="block",this.mediaStream=navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:4096},height:{ideal:2160}}}).catch((()=>{emit("error","No Camera found.")})).then((t=>(this.mediaStream=t,e.srcObject=this.mediaStream,e.play().catch((()=>{emit("error","No Camera found.")})))))},async TakePhoto(){let e=this.$refs.videoviewer,t=this.$refs.videocanvas,a=this.$refs.particlediv;const i=t.getContext("2d");i.canvas.width=e.videoWidth,i.canvas.height=e.videoHeight;let n=e.videoWidth,s=e.videoHeight;i.drawImage(e,0,0,e.videoWidth,e.videoHeight);let o=e.clientWidth,l=(e.clientHeight,t.toDataURL()),r=e.videoHeight/e.videoWidth;e.style.display="none",t.style.display="block",t.style.width="100%",a.style.display="block",a.innerHTML="",a.style.width=o+"px",a.style.height=o*r+"px";var d={particleColor:"#fff",background:l,interactive:!0,speed:"fast",density:"high"};new Oe.ParticleNetwork(a,d);const c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({img:l})};fetch("https://chicks.ddnss.org:5000/find_pollen",c).then((e=>{let t=e.json();return a.innerHTML="",t})).then((e=>{console.log("emitted"),e["dataURL"]=l,e["imgWidth"]=n,e["imgHeight"]=s,this.$emit("photoTaken",e)})).catch((e=>{this.$emit("error","Server not reached: "+e),a.innerHTML=""}));const u=this.mediaStream.getVideoTracks();u.forEach((e=>{e.stop()}))}},async mounted(){const e=await navigator.mediaDevices.enumerateDevices().catch((e=>{console.log(e)}));this.videoDevices=e.filter((e=>"videoinput"===e.kind)),await this.StartRecording(1===this.videoDevices.length?"user":"environment").catch((e=>{console.log(e)}))}};const Ne=(0,l.Z)(Ee,[["render",Fe],["__scopeId","data-v-4ea6067e"]]);var Le=Ne;const Re={ref:"datawrapper"},Ve=(0,n._)("img",{class:"mx-auto my-4",style:{"max-width":"500px"},src:h},null,-1),Ze={key:0},Ue={ref:"annotationcanvas",class:"annotation-canvas"},qe={key:0},Ge={ref:"forcegraph",style:{width:"100%",height:"400px"}},Ke={key:0},Ye={ref:"barcanvascontainer"},Xe={ref:"barcanvas",class:"bar-canvas"},Je={class:"m-3"};function Qe(e,t,a,s,o,l){const r=(0,n.up)("MDBRow"),d=(0,n.up)("MDBCol"),c=(0,n.up)("v-zoomer"),u=(0,n.up)("MDBCardText"),h=(0,n.up)("MDBCardBody"),p=(0,n.up)("MDBCard"),m=(0,n.up)("vue3-slider"),v=(0,n.up)("MDBContainer"),f=(0,n.up)("CamFooter");return(0,n.wg)(),(0,n.iD)("div",Re,[(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{md:"12",class:"mx-auto"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[Ve])),_:1}),(0,n.Wm)(r)])),_:1})])),_:1}),(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i.uT,{appear:"",name:"bounce"},{default:(0,n.w5)((()=>[o.showCards[0]?((0,n.wg)(),(0,n.iD)("p",Ze,[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{style:{width:"100%",border:"solid 1px silver"}},{default:(0,n.w5)((()=>[(0,n._)("canvas",Ue,null,512)])),_:1})])),_:1})])),_:1})])),_:1})])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(i.uT,{appear:"",name:"bounce",onAfterEnter:t[0]||(t[0]=e=>l.showForceGraph())},{default:(0,n.w5)((()=>[o.showCards[1]?((0,n.wg)(),(0,n.iD)("p",qe,[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n._)("div",Ge,null,512)])),_:1})])),_:1})])),_:1})])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(i.uT,{appear:"",name:"bounce",onAfterEnter:t[2]||(t[2]=e=>l.showClusters(this.nCluster))},{default:(0,n.w5)((()=>[o.showCards[2]?((0,n.wg)(),(0,n.iD)("p",Ke,[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n._)("div",Ye,[(0,n._)("canvas",Xe,null,512)],512),(0,n._)("div",Je,[(0,n.Wm)(m,{trackColor:"#ffa820",color:"#97be11",tooltip:!0,onDragEnd:l.showClusters,modelValue:o.nCluster,"onUpdate:modelValue":t[1]||(t[1]=e=>o.nCluster=e),handleScale:2.1,min:1,alwaysShowHandle:!0,sticky:!0,max:o.maxClusters,disabled:o.inProgress},null,8,["onDragEnd","modelValue","handleScale","max","disabled"])])])),_:1})])),_:1})])),_:1})])):(0,n.kq)("",!0)])),_:1})])),_:1})])),_:1}),(0,n.Wm)(f,{onNextCard:t[3]||(t[3]=e=>l.nextCard()),onPreviousCard:t[4]||(t[4]=e=>l.previousCard()),onRedo:t[5]||(t[5]=t=>e.StartRecording()),prevDisabled:e.prevDisabled,nextDisabled:e.nextDisabled,redoDisabled:e.redoDisabled},null,8,["prevDisabled","nextDisabled","redoDisabled"])],512)}const et={style:{color:"white",position:"fixed",bottom:"0",width:"100%"},class:"d-block d-md-none"},tt={class:"text-center p-1",style:{"background-image":"linear-gradient(to top,rgba(151, 190, 17, 1),rgba(151, 190, 17, 0.3),rgba(251,252,235, 0))"}},at={key:0,class:"text-center bgcol_green",style:{width:"100%","min-height":"1em"}},it={style:{width:"100%"},class:"d-none d-md-block text-center"},nt={style:{color:"white",position:"fixed",bottom:"0",width:"100%"}},st={key:0,class:"text-center bgcol_dark text-smaller",style:{width:"100%","min-height":"1em"}};function ot(e,t,a,i,s,o){const l=(0,n.up)("CamControls");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",et,[(0,n._)("div",tt,[(0,n.Wm)(l,{onNextCard:t[0]||(t[0]=t=>e.$emit("nextCard")),onPreviousCard:t[1]||(t[1]=t=>e.$emit("previousCard")),nextDisabled:a.nextDisabled,prevDisabled:a.prevDisabled},null,8,["nextDisabled","prevDisabled"])]),((0,n.wg)(),(0,n.iD)("div",at," © 2022 Pollenyzer "))]),(0,n._)("div",it,[(0,n.Wm)(l,{onNextCard:t[2]||(t[2]=t=>e.$emit("nextCard")),onPreviousCard:t[3]||(t[3]=t=>e.$emit("previousCard")),onRedo:t[4]||(t[4]=t=>e.$emit("redo")),nextDisabled:a.nextDisabled,prevDisabled:a.prevDisabled,redoDisabled:a.redoDisabled},null,8,["nextDisabled","prevDisabled","redoDisabled"]),(0,n._)("div",nt,[((0,n.wg)(),(0,n.iD)("div",st," © 2022 Pollenyzer "))])])],64)}const lt={class:"d-block d-md-none"},rt={class:"mx-2"},dt={class:"mx-2"},ct={class:"mx-2"},ut={class:"d-none d-md-block"},ht={class:"m-5"},pt={class:"m-5"},mt={class:"m-5"};function vt(e,t,a,i,s,o){const l=(0,n.up)("MDBIcon"),r=(0,n.up)("MDBBtn");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",lt,[(0,n._)("span",rt,[(0,n.Wm)(r,{onClick:t[0]||(t[0]=t=>e.$emit("previousCard")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.prevDisabled},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{icon:"angle-left"})])),_:1},8,["disabled"])]),(0,n._)("span",dt,[(0,n.Wm)(r,{onClick:t[1]||(t[1]=t=>e.$emit("redo")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.redoDisabled},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{icon:"redo"})])),_:1},8,["disabled"])]),(0,n._)("span",ct,[(0,n.Wm)(r,{onClick:t[2]||(t[2]=t=>e.$emit("nextCard")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.nextDisabled},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{icon:"angle-right"})])),_:1},8,["disabled"])])]),(0,n._)("div",ut,[(0,n._)("span",ht,[(0,n.Wm)(r,{onClick:t[3]||(t[3]=t=>e.$emit("previousCard")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.prevDisabled},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{icon:"angle-left"})])),_:1},8,["disabled"])]),(0,n._)("span",pt,[(0,n.Wm)(r,{onClick:t[4]||(t[4]=t=>e.$emit("redo")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.redoDisabled},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{icon:"redo"})])),_:1},8,["disabled"])]),(0,n._)("span",mt,[(0,n.Wm)(r,{onClick:t[5]||(t[5]=t=>e.$emit("nextCard")),class:"mx-auto btn-dark mx-2",floating:"",disabled:a.nextDisabled},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{icon:"angle-right"})])),_:1},8,["disabled"])])])])}var ft={data(){return{}},props:{prevDisabled:Boolean,nextDisabled:Boolean,redoDisabled:Boolean},name:"CamControls",components:{MDBBtn:A.MDBBtn,MDBIcon:A.MDBIcon}};const bt=(0,l.Z)(ft,[["render",vt]]);var gt=bt,Dt={name:"CamFooter",components:{CamControls:gt},props:{prevDisabled:Boolean,nextDisabled:Boolean,redoDisabled:Boolean}};const wt=(0,l.Z)(Dt,[["render",ot],["__scopeId","data-v-36de13ee"]]);var yt=wt,Ct=a(2996),xt=a(856),_t=a(1716),kt=a.n(_t),Mt=a(741);Mt.kL.register(Mt.qi,Mt.jn,Mt.ZL,Mt.od,Mt.vn,Mt.N0,Mt.jI,Mt.ST,Mt.tt,Mt.CV,Mt.Xi,Mt.ho,Mt.uw,Mt.f$,Mt.WV,Mt.l7,Mt.FB,Mt.RM,Mt.WY,Mt.Gu,Mt.De,Mt.Dx,Mt.u,Mt.DK);var Bt={components:{MDBCol:A.MDBCol,MDBRow:A.MDBRow,MDBContainer:A.MDBContainer,MDBCard:A.MDBCard,MDBCardBody:A.MDBCardBody,MDBCardTitle:A.MDBCardTitle,MDBCardText:A.MDBCardText,CamFooter:yt,"vue3-slider":kt()},props:{pollenData:Object},data(){return{showCards:[!0,!1,!1],cardId:0,maxClusters:2,nCluster:1,barChart:null,inProgress:!1}},mounted(){this.showAnnotations()},watch:{pollenData(e,t){this.showAnnotations(e)}},methods:{async showClusters(e){if(console.log("show clusters wir K=",e),this.inProgress)return;this.inProgress=!0;let t=this.pollenData.pollen.annotations.lab_colors,a=this.pollenData.pollen.annotations.rgb_colors;this.pollenData.pollen.annotations.str_colors;this.maxClusters=a.length,console.log("clusters",t),console.log(t[0]);let i=(0,xt.eM)({data:t});console.log(i);let n=[];console.log(i.clustersGivenK);let s=i.clustersGivenK[e].length;for(let d=0;d<s;d++)i.clustersGivenK[e][d].forEach((e=>{console.log("pollenID",e);let t=new Array(s).fill(null);t[d]=1,n.push({backgroundColor:"rgba("+a[e][0]+","+a[e][1]+","+a[e][2]+",1)",borderWidth:1,data:t})}));console.log(n);let o=this.$refs.barcanvas,l=this.$refs.barcanvascontainer;o.remove(),l.innerHTML="<canvas ref='barcanvas' id='barcanvas' class='bar-canvas'></canvas>",o=document.getElementById("barcanvas");const r=o.getContext("2d");this.barChart&&this.barChart.destroy(),this.barChart=new Mt.kL(r,{type:"bar",data:{labels:[...new Array(e).keys()].map((e=>"")),datasets:n},options:{plugins:{tooltip:{enabled:!1},legend:{display:!1},title:{display:!0,text:a.length+" pollen in "+e+" clusters"}},scales:{x:{stacked:!0},y:{stacked:!0}},responsive:!0}}),await setTimeout((()=>{this.inProgress=!1}),1200)},showForceGraph(){console.log(this.pollenData.pollen.force_graph);let e=this.$refs.forcegraph;const t=(0,Ct.Z)()(e).width(e.clientWidth).height(e.clientHeight).cooldownTicks(200).graphData(this.pollenData.pollen.force_graph);t.d3Force("center",null),t.onEngineStop((()=>t.zoomToFit(400)))},showAnnotations(e){if(e){let a=this.$refs.annotationcanvas;const i=a.getContext("2d");console.log("DATAT",e),i.canvas.width=e.imgWidth,i.canvas.height=e.imgHeight;var t=new Image;t.onload=function(){i.drawImage(t,0,0,e.imgWidth,e.imgHeight);for(let t=0;t<e.pollen.annotations.coords.length;t++){let n=e.pollen.annotations.coords[t],s=e.pollen.annotations.str_colors[t];const o=n.x,l=n.y,r=.008*a.clientWidth;console.log(o,l,s),i.beginPath(),i.arc(o,l,r,0,2*Math.PI,!1),i.fillStyle=s,i.fill()}},t.src=e.dataURL}},nextCard(){this.showCards[this.cardId]=!1,this.cardId++,this.showCards[this.cardId]=!0,0===this.cardId?(this.prevDisabled=!0,this.nextDisabled=!1):2===this.cardId?(this.prevDisabled=!1,this.nextDisabled=!0):(this.prevDisabled=!1,this.nextDisabled=!1),0==this.cardId?this.showAnnotations(this.pollenData):this.cardId},previousCard(){this.showCards[this.cardId]=!1,this.cardId--,this.showCards[this.cardId]=!0,0===this.cardId?(this.prevDisabled=!0,this.nextDisabled=!1):2===this.cardId?(this.prevDisabled=!1,this.nextDisabled=!0):(this.prevDisabled=!1,this.nextDisabled=!1),0==this.cardId?this.showAnnotations(this.pollenData):1==this.cardId&&this.showForceGraph()}}};const Wt=(0,l.Z)(Bt,[["render",Qe]]);var Tt=Wt,It={components:{MainCam:Le,MainData:Tt},mounted(){},setup(){},data(){return{pollenData:void 0}},methods:{onError(){},onPhotoTaken(e){console.log("data retrieved"),this.$refs.maincamcontainer.style.display="none",this.$refs.maindatacontainer.style.display="block",this.pollenData=e},errorReset(){setTimeout((()=>this.error_msg=""),2e3)}}};const Pt=(0,l.Z)(It,[["render",Te],["__scopeId","data-v-2bfde6a0"]]);var At=Pt,Ht=a(7139);const $t={style:{"background-color":"black",width:"100%",height:"100%"},class:"d-flex align-items-center justify-content-center"},St={class:"my-video-container"};function jt(e,t,a,i,s,o){return(0,n.wg)(),(0,n.iD)("div",$t,[(0,n._)("div",St,(0,Ht.zw)(this.height)+" "+(0,Ht.zw)(this.width),1)])}a(8597);function zt(e,t,a,s,o,l){const r=(0,n.up)("MyPhoto");return(0,n.wg)(),(0,n.j4)(i.W3,{class:"photos-container",name:"list-animated"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.photos,(e=>((0,n.wg)(),(0,n.j4)(r,{class:"list-animated-item",key:e.id,src:e.src},null,8,["src"])))),128))])),_:1})}const Ft=["src"];function Ot(e,t,a,i,s,o){return(0,n.wg)(),(0,n.iD)("img",{src:a.src},null,8,Ft)}var Et={props:{src:{type:String,default:null}}};const Nt=(0,l.Z)(Et,[["render",Ot],["__scopeId","data-v-0d97a684"]]);var Lt=Nt,Rt={components:{MyPhoto:Lt},props:{photos:{type:Array,default:()=>[]}}};const Vt=(0,l.Z)(Rt,[["render",zt],["__scopeId","data-v-dfd9391a"]]);var Zt=Vt;const Ut={setup(){const e=210/148;let t=(0,ne.iH)(window.innerWidth),a=(0,ne.iH)(window.innerHeight);const i=()=>{t.value=window.innerWidth,a.value=window.innerHeight};(0,n.bv)((()=>window.addEventListener("resize",i))),(0,n.Ah)((()=>window.removeEventListener("resize",i)));const s=(0,n.Fl)((()=>a.value/t.value<e?a.value/e+"px":t.value+"px")),o=(0,n.Fl)((()=>a.value/t.value<e?a.value+"px":t.value*e+"px"));return{width:s,height:o}},components:{PhotosGallery:Zt},data(){return{videoContainerHeight:"90%"}},methods:{async mounted(){}}},qt=()=>{(0,i.sj)((e=>({"43ba6d18":e.height,"13888fb5":e.width})))},Gt=Ut.setup;Ut.setup=Gt?(e,t)=>(qt(),Gt(e,t)):qt;var Kt=Ut;const Yt=(0,l.Z)(Kt,[["render",jt],["__scopeId","data-v-577ddbb0"]]);var Xt=Yt;const Jt=[{path:"/",name:"home",component:xe},{path:"/about",name:"about",component:()=>a.e(443).then(a.bind(a,9757))},{path:"/main",name:"main",component:At},{path:"/testcam",name:"testcam",component:Xt}],Qt=(0,u.p7)({history:(0,u.r5)(),routes:Jt});var ea=Qt,ta=a(6735);(0,i.ri)(d).use(ea).use(ta.Z).mount("#app")},5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},5042:function(){}},t={};function a(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}a.m=e,function(){a.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){a.amdO={}}(),function(){var e=[];a.O=function(t,i,n,s){if(!i){var o=1/0;for(c=0;c<e.length;c++){i=e[c][0],n=e[c][1],s=e[c][2];for(var l=!0,r=0;r<i.length;r++)(!1&s||o>=s)&&Object.keys(a.O).every((function(e){return a.O[e](i[r])}))?i.splice(r--,1):(l=!1,s<o&&(o=s));if(l){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[i,n,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,i){return a.f[i](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/about.cbd8c785.js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="pollenyzer:";a.l=function(i,n,s,o){if(e[i])e[i].push(n);else{var l,r;if(void 0!==s)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+s){l=u;break}}l||(r=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",t+s),l.src=i),e[i]=[n];var h=function(t,a){l.onerror=l.onload=null,clearTimeout(p);var n=e[i];if(delete e[i],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),r&&document.head.appendChild(l)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){var e={143:0};a.f.j=function(t,i){var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var s=new Promise((function(a,i){n=e[t]=[a,i]}));i.push(n[2]=s);var o=a.p+a.u(t),l=new Error,r=function(i){if(a.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var s=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;l.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",l.name="ChunkLoadError",l.type=s,l.request=o,n[1](l)}};a.l(o,r,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,s,o=i[0],l=i[1],r=i[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(r)var c=r(a)}for(t&&t(i);d<o.length;d++)s=o[d],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(c)},i=self["webpackChunkpollenyzer"]=self["webpackChunkpollenyzer"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(8862)}));i=a.O(i)})();
//# sourceMappingURL=app.bbc68e62.js.map