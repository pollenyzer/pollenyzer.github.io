(self["webpackChunkpollenyzer"]=self["webpackChunkpollenyzer"]||[]).push([[998],{9662:function(e,t,n){var r=n(614),i=n(6330),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a function")}},6077:function(e,t,n){var r=n(614),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw o("Can't set "+i(e)+" as a prototype")}},5787:function(e,t,n){var r=n(7976),i=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw i("Incorrect invocation")}},9670:function(e,t,n){var r=n(111),i=String,o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not an object")}},4019:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(e,t,n){"use strict";var r,i,o,a=n(4019),s=n(9781),l=n(7854),u=n(614),c=n(111),h=n(2597),d=n(648),p=n(6330),f=n(8880),m=n(8052),g=n(3070).f,b=n(7976),v=n(9518),y=n(7674),x=n(5112),w=n(9711),k=n(9909),_=k.enforce,S=k.get,C=l.Int8Array,I=C&&C.prototype,O=l.Uint8ClampedArray,T=O&&O.prototype,N=C&&v(C),E=I&&v(I),D=Object.prototype,$=l.TypeError,A=x("toStringTag"),R=w("TYPED_ARRAY_TAG"),M="TypedArrayConstructor",F=a&&!!y&&"Opera"!==d(l.opera),P=!1,j={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},L=function(e){if(!c(e))return!1;var t=d(e);return"DataView"===t||h(j,t)||h(B,t)},z=function(e){var t=v(e);if(c(t)){var n=S(t);return n&&h(n,M)?n[M]:z(t)}},V=function(e){if(!c(e))return!1;var t=d(e);return h(j,t)||h(B,t)},U=function(e){if(V(e))return e;throw $("Target is not a typed array")},W=function(e){if(u(e)&&(!y||b(N,e)))return e;throw $(p(e)+" is not a typed array constructor")},H=function(e,t,n,r){if(s){if(n)for(var i in j){var o=l[i];if(o&&h(o.prototype,e))try{delete o.prototype[e]}catch(a){try{o.prototype[e]=t}catch(u){}}}E[e]&&!n||m(E,e,n?t:F&&I[e]||t,r)}},G=function(e,t,n){var r,i;if(s){if(y){if(n)for(r in j)if(i=l[r],i&&h(i,e))try{delete i[e]}catch(o){}if(N[e]&&!n)return;try{return m(N,e,n?t:F&&N[e]||t)}catch(o){}}for(r in j)i=l[r],!i||i[e]&&!n||m(i,e,t)}};for(r in j)i=l[r],o=i&&i.prototype,o?_(o)[M]=i:F=!1;for(r in B)i=l[r],o=i&&i.prototype,o&&(_(o)[M]=i);if((!F||!u(N)||N===Function.prototype)&&(N=function(){throw $("Incorrect invocation")},F))for(r in j)l[r]&&y(l[r],N);if((!F||!E||E===D)&&(E=N.prototype,F))for(r in j)l[r]&&y(l[r].prototype,E);if(F&&v(T)!==E&&y(T,E),s&&!h(E,A))for(r in P=!0,g(E,A,{get:function(){return c(this)?this[R]:void 0}}),j)l[r]&&f(l[r],R,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:F,TYPED_ARRAY_TAG:P&&R,aTypedArray:U,aTypedArrayConstructor:W,exportTypedArrayMethod:H,exportTypedArrayStaticMethod:G,getTypedArrayConstructor:z,isView:L,isTypedArray:V,TypedArray:N,TypedArrayPrototype:E}},1318:function(e,t,n){var r=n(5656),i=n(1400),o=n(6244),a=function(e){return function(t,n,a){var s,l=r(t),u=o(l),c=i(a,u);if(e&&n!=n){while(u>c)if(s=l[c++],s!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},9671:function(e,t,n){var r=n(9974),i=n(8361),o=n(7908),a=n(6244),s=function(e){var t=1==e;return function(n,s,l){var u,c,h=o(n),d=i(h),p=r(s,l),f=a(d);while(f-- >0)if(u=d[f],c=p(u,f,h),c)switch(e){case 0:return u;case 1:return f}return t?-1:void 0}};e.exports={findLast:s(0),findLastIndex:s(1)}},206:function(e,t,n){var r=n(1702);e.exports=r([].slice)},4326:function(e,t,n){var r=n(1702),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},648:function(e,t,n){var r=n(1694),i=n(614),o=n(4326),a=n(5112),s=a("toStringTag"),l=Object,u="Arguments"==o(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=l(e),s))?n:u?o(t):"Object"==(r=o(t))&&i(t.callee)?"Arguments":r}},7741:function(e,t,n){var r=n(1702),i=Error,o=r("".replace),a=function(e){return String(i(e).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,l=s.test(a);e.exports=function(e,t){if(l&&"string"==typeof e&&!i.prepareStackTrace)while(t--)e=o(e,s,"");return e}},9920:function(e,t,n){var r=n(2597),i=n(3887),o=n(1236),a=n(3070);e.exports=function(e,t,n){for(var s=i(t),l=a.f,u=o.f,c=0;c<s.length;c++){var h=s[c];r(e,h)||n&&r(n,h)||l(e,h,u(t,h))}}},8544:function(e,t,n){var r=n(7293);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},8880:function(e,t,n){var r=n(9781),i=n(3070),o=n(9114);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7045:function(e,t,n){var r=n(6339),i=n(3070);e.exports=function(e,t,n){return n.get&&r(n.get,t,{getter:!0}),n.set&&r(n.set,t,{setter:!0}),i.f(e,t,n)}},8052:function(e,t,n){var r=n(614),i=n(3070),o=n(6339),a=n(3072);e.exports=function(e,t,n,s){s||(s={});var l=s.enumerable,u=void 0!==s.name?s.name:t;if(r(n)&&o(n,u,s),s.global)l?e[t]=n:a(t,n);else{try{s.unsafe?e[t]&&(l=!0):delete e[t]}catch(c){}l?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},3072:function(e,t,n){var r=n(7854),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},9781:function(e,t,n){var r=n(7293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(e,t,n){var r=n(7854),i=n(111),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},3678:function(e){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},6833:function(e,t,n){var r=n(8113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},5268:function(e,t,n){var r=n(4326),i=n(7854);e.exports="process"==r(i.process)},8113:function(e,t,n){var r=n(5005);e.exports=r("navigator","userAgent")||""},7392:function(e,t,n){var r,i,o=n(7854),a=n(8113),s=o.process,l=o.Deno,u=s&&s.versions||l&&l.version,c=u&&u.v8;c&&(r=c.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),e.exports=i},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:function(e,t,n){var r=n(7293),i=n(9114);e.exports=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)}))},2109:function(e,t,n){var r=n(7854),i=n(1236).f,o=n(8880),a=n(8052),s=n(3072),l=n(9920),u=n(4705);e.exports=function(e,t){var n,c,h,d,p,f,m=e.target,g=e.global,b=e.stat;if(c=g?r:b?r[m]||s(m,{}):(r[m]||{}).prototype,c)for(h in t){if(p=t[h],e.dontCallGetSet?(f=i(c,h),d=f&&f.value):d=c[h],n=u(g?h:m+(b?".":"#")+h,e.forced),!n&&void 0!==d){if(typeof p==typeof d)continue;l(p,d)}(e.sham||d&&d.sham)&&o(p,"sham",!0),a(c,h,p,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},2104:function(e,t,n){var r=n(4374),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(o):function(){return a.apply(o,arguments)})},9974:function(e,t,n){var r=n(1702),i=n(9662),o=n(4374),a=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},4374:function(e,t,n){var r=n(7293);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:function(e,t,n){var r=n(4374),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(e,t,n){var r=n(9781),i=n(2597),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),l=s&&"something"===function(){}.name,u=s&&(!r||r&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:u}},1702:function(e,t,n){var r=n(4374),i=Function.prototype,o=i.bind,a=i.call,s=r&&o.bind(a,a);e.exports=r?function(e){return e&&s(e)}:function(e){return e&&function(){return a.apply(e,arguments)}}},5005:function(e,t,n){var r=n(7854),i=n(614),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e]):r[e]&&r[e][t]}},8173:function(e,t,n){var r=n(9662);e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},7854:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(e,t,n){var r=n(1702),i=n(7908),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},3501:function(e){e.exports={}},490:function(e,t,n){var r=n(5005);e.exports=r("document","documentElement")},4664:function(e,t,n){var r=n(9781),i=n(7293),o=n(317);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:function(e,t,n){var r=n(1702),i=n(7293),o=n(4326),a=Object,s=r("".split);e.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?s(e,""):a(e)}:a},9587:function(e,t,n){var r=n(614),i=n(111),o=n(7674);e.exports=function(e,t,n){var a,s;return o&&r(a=t.constructor)&&a!==n&&i(s=a.prototype)&&s!==n.prototype&&o(e,s),e}},2788:function(e,t,n){var r=n(1702),i=n(614),o=n(5465),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},8340:function(e,t,n){var r=n(111),i=n(8880);e.exports=function(e,t){r(t)&&"cause"in t&&i(e,"cause",t.cause)}},9909:function(e,t,n){var r,i,o,a=n(8536),s=n(7854),l=n(1702),u=n(111),c=n(8880),h=n(2597),d=n(5465),p=n(6200),f=n(3501),m="Object already initialized",g=s.TypeError,b=s.WeakMap,v=function(e){return o(e)?i(e):r(e,{})},y=function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw g("Incompatible receiver, "+e+" required");return n}};if(a||d.state){var x=d.state||(d.state=new b),w=l(x.get),k=l(x.has),_=l(x.set);r=function(e,t){if(k(x,e))throw new g(m);return t.facade=e,_(x,e,t),t},i=function(e){return w(x,e)||{}},o=function(e){return k(x,e)}}else{var S=p("state");f[S]=!0,r=function(e,t){if(h(e,S))throw new g(m);return t.facade=e,c(e,S,t),t},i=function(e){return h(e,S)?e[S]:{}},o=function(e){return h(e,S)}}e.exports={set:r,get:i,has:o,enforce:v,getterFor:y}},614:function(e){e.exports=function(e){return"function"==typeof e}},4705:function(e,t,n){var r=n(7293),i=n(614),o=/#|\.prototype\./,a=function(e,t){var n=l[s(e)];return n==c||n!=u&&(i(t)?r(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},l=a.data={},u=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},111:function(e,t,n){var r=n(614);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},1913:function(e){e.exports=!1},2190:function(e,t,n){var r=n(5005),i=n(614),o=n(7976),a=n(3307),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&o(t.prototype,s(e))}},6244:function(e,t,n){var r=n(7466);e.exports=function(e){return r(e.length)}},6339:function(e,t,n){var r=n(7293),i=n(614),o=n(2597),a=n(9781),s=n(6530).CONFIGURABLE,l=n(2788),u=n(9909),c=u.enforce,h=u.get,d=Object.defineProperty,p=a&&!r((function(){return 8!==d((function(){}),"length",{value:8}).length})),f=String(String).split("String"),m=e.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!o(e,"name")||s&&e.name!==t)&&(a?d(e,"name",{value:t,configurable:!0}):e.name=t),p&&n&&o(n,"arity")&&e.length!==n.arity&&d(e,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?a&&d(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var r=c(e);return o(r,"source")||(r.source=f.join("string"==typeof t?t:"")),e};Function.prototype.toString=m((function(){return i(this)&&h(this).source||l(this)}),"toString")},4758:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},133:function(e,t,n){var r=n(7392),i=n(7293);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},8536:function(e,t,n){var r=n(7854),i=n(614),o=n(2788),a=r.WeakMap;e.exports=i(a)&&/native code/.test(o(a))},6277:function(e,t,n){var r=n(1340);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},3070:function(e,t,n){var r=n(9781),i=n(4664),o=n(3353),a=n(9670),s=n(4948),l=TypeError,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",p="writable";t.f=r?o?function(e,t,n){if(a(e),t=s(t),a(n),"function"===typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var r=c(e,t);r&&r[p]&&(e[t]=n.value,n={configurable:d in n?n[d]:r[d],enumerable:h in n?n[h]:r[h],writable:!1})}return u(e,t,n)}:u:function(e,t,n){if(a(e),t=s(t),a(n),i)try{return u(e,t,n)}catch(r){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var r=n(9781),i=n(6916),o=n(5296),a=n(9114),s=n(5656),l=n(4948),u=n(2597),c=n(4664),h=Object.getOwnPropertyDescriptor;t.f=r?h:function(e,t){if(e=s(e),t=l(t),c)try{return h(e,t)}catch(n){}if(u(e,t))return a(!i(o.f,e,t),e[t])}},8006:function(e,t,n){var r=n(6324),i=n(748),o=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},9518:function(e,t,n){var r=n(2597),i=n(614),o=n(7908),a=n(6200),s=n(8544),l=a("IE_PROTO"),u=Object,c=u.prototype;e.exports=s?u.getPrototypeOf:function(e){var t=o(e);if(r(t,l))return t[l];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof u?c:null}},7976:function(e,t,n){var r=n(1702);e.exports=r({}.isPrototypeOf)},6324:function(e,t,n){var r=n(1702),i=n(2597),o=n(5656),a=n(1318).indexOf,s=n(3501),l=r([].push);e.exports=function(e,t){var n,r=o(e),u=0,c=[];for(n in r)!i(s,n)&&i(r,n)&&l(c,n);while(t.length>u)i(r,n=t[u++])&&(~a(c,n)||l(c,n));return c}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},7674:function(e,t,n){var r=n(1702),i=n(9670),o=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(n,[]),t=n instanceof Array}catch(a){}return function(n,r){return i(n),o(r),t?e(n,r):n.__proto__=r,n}}():void 0)},2140:function(e,t,n){var r=n(6916),i=n(614),o=n(111),a=TypeError;e.exports=function(e,t){var n,s;if("string"===t&&i(n=e.toString)&&!o(s=r(n,e)))return s;if(i(n=e.valueOf)&&!o(s=r(n,e)))return s;if("string"!==t&&i(n=e.toString)&&!o(s=r(n,e)))return s;throw a("Can't convert object to primitive value")}},3887:function(e,t,n){var r=n(5005),i=n(1702),o=n(8006),a=n(5181),s=n(9670),l=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?l(t,n(e)):t}},2626:function(e,t,n){var r=n(3070).f;e.exports=function(e,t,n){n in e||r(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}},7066:function(e,t,n){"use strict";var r=n(9670);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},4488:function(e){var t=TypeError;e.exports=function(e){if(void 0==e)throw t("Can't call method on "+e);return e}},6200:function(e,t,n){var r=n(2309),i=n(9711),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5465:function(e,t,n){var r=n(7854),i=n(3072),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},2309:function(e,t,n){var r=n(1913),i=n(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.24.1",mode:r?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"})},261:function(e,t,n){var r,i,o,a,s=n(7854),l=n(2104),u=n(9974),c=n(614),h=n(2597),d=n(7293),p=n(490),f=n(206),m=n(317),g=n(8053),b=n(6833),v=n(5268),y=s.setImmediate,x=s.clearImmediate,w=s.process,k=s.Dispatch,_=s.Function,S=s.MessageChannel,C=s.String,I=0,O={},T="onreadystatechange";try{r=s.location}catch(A){}var N=function(e){if(h(O,e)){var t=O[e];delete O[e],t()}},E=function(e){return function(){N(e)}},D=function(e){N(e.data)},$=function(e){s.postMessage(C(e),r.protocol+"//"+r.host)};y&&x||(y=function(e){g(arguments.length,1);var t=c(e)?e:_(e),n=f(arguments,1);return O[++I]=function(){l(t,void 0,n)},i(I),I},x=function(e){delete O[e]},v?i=function(e){w.nextTick(E(e))}:k&&k.now?i=function(e){k.now(E(e))}:S&&!b?(o=new S,a=o.port2,o.port1.onmessage=D,i=u(a.postMessage,a)):s.addEventListener&&c(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!d($)?(i=$,s.addEventListener("message",D,!1)):i=T in m("script")?function(e){p.appendChild(m("script"))[T]=function(){p.removeChild(this),N(e)}}:function(e){setTimeout(E(e),0)}),e.exports={set:y,clear:x}},1400:function(e,t,n){var r=n(9303),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},5656:function(e,t,n){var r=n(8361),i=n(4488);e.exports=function(e){return r(i(e))}},9303:function(e,t,n){var r=n(4758);e.exports=function(e){var t=+e;return t!==t||0===t?0:r(t)}},7466:function(e,t,n){var r=n(9303),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},7908:function(e,t,n){var r=n(4488),i=Object;e.exports=function(e){return i(r(e))}},7593:function(e,t,n){var r=n(6916),i=n(111),o=n(2190),a=n(8173),s=n(2140),l=n(5112),u=TypeError,c=l("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var n,l=a(e,c);if(l){if(void 0===t&&(t="default"),n=r(l,e,t),!i(n)||o(n))return n;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},4948:function(e,t,n){var r=n(7593),i=n(2190);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},1694:function(e,t,n){var r=n(5112),i=r("toStringTag"),o={};o[i]="z",e.exports="[object z]"===String(o)},1340:function(e,t,n){var r=n(648),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},6330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},9711:function(e,t,n){var r=n(1702),i=0,o=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},3307:function(e,t,n){var r=n(133);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,n){var r=n(9781),i=n(7293);e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(e){var t=TypeError;e.exports=function(e,n){if(e<n)throw t("Not enough arguments");return e}},5112:function(e,t,n){var r=n(7854),i=n(2309),o=n(2597),a=n(9711),s=n(133),l=n(3307),u=i("wks"),c=r.Symbol,h=c&&c["for"],d=l?c:c&&c.withoutSetter||a;e.exports=function(e){if(!o(u,e)||!s&&"string"!=typeof u[e]){var t="Symbol."+e;s&&o(c,e)?u[e]=c[e]:u[e]=l&&h?h(t):d(t)}return u[e]}},9191:function(e,t,n){"use strict";var r=n(5005),i=n(2597),o=n(8880),a=n(7976),s=n(7674),l=n(9920),u=n(2626),c=n(9587),h=n(6277),d=n(8340),p=n(7741),f=n(2914),m=n(9781),g=n(1913);e.exports=function(e,t,n,b){var v="stackTraceLimit",y=b?2:1,x=e.split("."),w=x[x.length-1],k=r.apply(null,x);if(k){var _=k.prototype;if(!g&&i(_,"cause")&&delete _.cause,!n)return k;var S=r("Error"),C=t((function(e,t){var n=h(b?t:e,void 0),r=b?new k(e):new k;return void 0!==n&&o(r,"message",n),f&&o(r,"stack",p(r.stack,2)),this&&a(_,this)&&c(r,this,C),arguments.length>y&&d(r,arguments[y]),r}));if(C.prototype=_,"Error"!==w?s?s(C,S):l(C,S,{name:!0}):m&&v in k&&(u(C,k,v),u(C,k,"prepareStackTrace")),l(C,k),!g)try{_.name!==w&&o(_,"name",w),_.constructor=C}catch(I){}return C}}},1703:function(e,t,n){var r=n(2109),i=n(7854),o=n(2104),a=n(9191),s="WebAssembly",l=i[s],u=7!==Error("e",{cause:7}).cause,c=function(e,t){var n={};n[e]=a(e,t,u),r({global:!0,constructor:!0,arity:1,forced:u},n)},h=function(e,t){if(l&&l[e]){var n={};n[e]=a(s+"."+e,t,u),r({target:s,stat:!0,constructor:!0,arity:1,forced:u},n)}};c("Error",(function(e){return function(t){return o(e,this,arguments)}})),c("EvalError",(function(e){return function(t){return o(e,this,arguments)}})),c("RangeError",(function(e){return function(t){return o(e,this,arguments)}})),c("ReferenceError",(function(e){return function(t){return o(e,this,arguments)}})),c("SyntaxError",(function(e){return function(t){return o(e,this,arguments)}})),c("TypeError",(function(e){return function(t){return o(e,this,arguments)}})),c("URIError",(function(e){return function(t){return o(e,this,arguments)}})),h("CompileError",(function(e){return function(t){return o(e,this,arguments)}})),h("LinkError",(function(e){return function(t){return o(e,this,arguments)}})),h("RuntimeError",(function(e){return function(t){return o(e,this,arguments)}}))},6314:function(e,t,n){var r=n(2109),i=n(2597);r({target:"Object",stat:!0},{hasOwn:i})},2087:function(e,t,n){var r=n(7854),i=n(9781),o=n(7045),a=n(7066),s=n(7293),l=r.RegExp,u=l.prototype,c=i&&s((function(){var e=!0;try{l(".","d")}catch(c){e=!1}var t={},n="",r=e?"dgimsy":"gimsy",i=function(e,r){Object.defineProperty(t,e,{get:function(){return n+=r,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var a in e&&(o.hasIndices="d"),o)i(a,o[a]);var s=Object.getOwnPropertyDescriptor(u,"flags").get.call(t);return s!==r||n!==r}));c&&o(u,"flags",{configurable:!0,get:a})},8675:function(e,t,n){"use strict";var r=n(260),i=n(6244),o=n(9303),a=r.aTypedArray,s=r.exportTypedArrayMethod;s("at",(function(e){var t=a(this),n=i(t),r=o(e),s=r>=0?r:n+r;return s<0||s>=n?void 0:t[s]}))},4590:function(e,t,n){"use strict";var r=n(260),i=n(9671).findLastIndex,o=r.aTypedArray,a=r.exportTypedArrayMethod;a("findLastIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},3408:function(e,t,n){"use strict";var r=n(260),i=n(9671).findLast,o=r.aTypedArray,a=r.exportTypedArrayMethod;a("findLast",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},1118:function(e,t,n){n(4590)},7380:function(e,t,n){n(3408)},1091:function(e,t,n){var r=n(2109),i=n(7854),o=n(261).clear;r({global:!0,bind:!0,enumerable:!0,forced:i.clearImmediate!==o},{clearImmediate:o})},2801:function(e,t,n){"use strict";var r=n(2109),i=n(7854),o=n(5005),a=n(9114),s=n(3070).f,l=n(2597),u=n(5787),c=n(9587),h=n(6277),d=n(3678),p=n(7741),f=n(9781),m=n(1913),g="DOMException",b=o("Error"),v=o(g),y=function(){u(this,x);var e=arguments.length,t=h(e<1?void 0:arguments[0]),n=h(e<2?void 0:arguments[1],"Error"),r=new v(t,n),i=b(t);return i.name=g,s(r,"stack",a(1,p(i.stack,1))),c(r,this,y),r},x=y.prototype=v.prototype,w="stack"in b(g),k="stack"in new v(1,2),_=v&&f&&Object.getOwnPropertyDescriptor(i,g),S=!!_&&!(_.writable&&_.configurable),C=w&&!S&&!k;r({global:!0,constructor:!0,forced:m||C},{DOMException:C?y:v});var I=o(g),O=I.prototype;if(O.constructor!==I)for(var T in m||s(O,"constructor",a(1,I)),d)if(l(d,T)){var N=d[T],E=N.s;l(I,E)||s(I,E,a(6,N.c))}},4633:function(e,t,n){n(1091),n(2986)},2986:function(e,t,n){var r=n(2109),i=n(7854),o=n(261).set;r({global:!0,bind:!0,enumerable:!0,forced:i.setImmediate!==o},{setImmediate:o})},856:function(e,t){"use strict";t.eM=void 0;const n=(e,t)=>{const n=Math.min(e.length,t.length);let r=0;for(let i=0;i<n;i++)r+=(e[i]-t[i])*(e[i]-t[i]);return Math.sqrt(r)};const r=(e,t,n)=>{let r=0;for(const i of e)for(const e of t)r+=n[i][e];return r/e.length/t.length};const i=(e,t,n)=>{const r=e/2+t/2;"function"===typeof n&&n(r),"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&postMessage(r)},o=e=>console.log("Clustering: ",(100*e).toFixed(1)+"%"),a=({data:e=[],key:t="",distance:a=n,linkage:s=r,onProgress:l=o})=>{t&&(e=e.map((e=>e[t])));const u=e.map(((t,n)=>(i(0,n/(e.length-1),l),e.map((e=>a(t,e)))))),c=e.map(((e,t)=>({height:0,indexes:[Number(t)]})));let h=[];for(let n=0;n<e.length;n++){if(i(1,(n+1)/e.length,l),h.push(c.map((e=>e.indexes))),n>=e.length-1)break;let t=1/0,r=0,o=0;for(let e=0;e<c.length;e++)for(let n=e+1;n<c.length;n++){const i=s(c[e].indexes,c[n].indexes,u);i<t&&(t=i,r=e,o=n)}const a={indexes:[...c[r].indexes,...c[o].indexes],height:t,children:[c[r],c[o]]};c.splice(Math.max(r,o),1),c.splice(Math.min(r,o),1),c.push(a)}return h=[[],...h.reverse()],{clusters:c[0],clusters:c,distances:u,order:c[0].indexes,clustersGivenK:h}};t.eM=a},8597:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,{assertParamsValid:function(){return Ia},computeFlatOffset:function(){return Ba},computeOutShape:function(){return Ta},getNormalizedAxes:function(){return $a},isSliceContinous:function(){return ja},maskToAxes:function(){return Oa},parseSliceParams:function(){return La},sliceInfo:function(){return za},startForAxis:function(){return Fa},startIndicesWithElidedDims:function(){return Aa},stopForAxis:function(){return Pa},stopIndicesWithElidedDims:function(){return Ra},stridesForAxis:function(){return Ma},stridesWithElidedDims:function(){return Na}});var i={};n.r(i),n.d(i,{collectGatherOpShapeInfo:function(){return $f},computeOutShape:function(){return Df},segOpComputeOptimalWindowSize:function(){return Ef}});var o={};n.r(o),n.d(o,{ERF_A1:function(){return qp},ERF_A2:function(){return Yp},ERF_A3:function(){return Xp},ERF_A4:function(){return Kp},ERF_A5:function(){return Jp},ERF_P:function(){return Gp},PARALLELIZE_THRESHOLD:function(){return $p},SELU_SCALE:function(){return Hp},SELU_SCALEALPHA:function(){return Wp},applyActivation:function(){return yh},assertAndGetBroadcastShape:function(){return _a},assertAxesAreInnerMostDims:function(){return Ou},assertParamsConsistent:function(){return Ep},assignToTypedArray:function(){return rf},axesAreInnerMostDims:function(){return _u},calculateShapes:function(){return Up},checkEinsumDimSizes:function(){return pf},checkPadOnDimRoundingMode:function(){return $s},combineLocations:function(){return Su},complexWithEvenIndex:function(){return ef},complexWithOddIndex:function(){return tf},computeConv2DInfo:function(){return vs},computeConv3DInfo:function(){return ys},computeDefaultPad:function(){return ks},computeDilation2DInfo:function(){return ms},computeOptimalWindowSize:function(){return Ap},computeOutAndReduceShapes:function(){return Cu},computeOutShape:function(){return Dp},computePool2DInfo:function(){return gs},computePool3DInfo:function(){return bs},convertConv2DDataFormat:function(){return Ds},decodeEinsumEquation:function(){return hf},eitherStridesOrDilationsAreOne:function(){return Es},expandShapeToKeepDim:function(){return Iu},exponent:function(){return af},exponents:function(){return of},fromStringArrayToUint8:function(){return Rf},fromUint8ToStringArray:function(){return Af},getAxesPermutation:function(){return Tu},getBroadcastDims:function(){return wa},getComplexWithIndex:function(){return nf},getEinsumComputePath:function(){return ff},getEinsumPermutation:function(){return df},getFusedBiasGradient:function(){return vh},getFusedDyActivation:function(){return bh},getImageCenter:function(){return Rp},getInnerMostAxes:function(){return Eu},getPermuted:function(){return Fp},getReductionAxes:function(){return ka},getReshaped:function(){return Mp},getReshapedPermuted:function(){return Pp},getSliceBeginCoords:function(){return jp},getSliceSize:function(){return Bp},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return vf},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return yf},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return xf},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return _f},getSparseReshapeInputOutputMismatchErrorMessage:function(){return Cf},getSparseReshapeInputOutputMultipleErrorMessage:function(){return Sf},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return wf},getSparseReshapeNegativeOutputDimErrorMessage:function(){return kf},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return Nf},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return If},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return Of},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return Tf},getUndoAxesPermutation:function(){return Nu},isIdentityPermutation:function(){return mf},log:function(){return xr},mergeRealAndImagArrays:function(){return Zp},prepareAndValidate:function(){return Lp},prepareSplitSize:function(){return bf},segment_util:function(){return i},shouldFuse:function(){return xh},slice_util:function(){return r},splitRealAndImagArrays:function(){return Qp},tupleValuesAreOne:function(){return Ns},upcastType:function(){return Ei},validateInput:function(){return Vp},validateUpdateShape:function(){return zp},warn:function(){return yr}});var a={};n.r(a),n.d(a,{addImpl:function(){return PI},bincountImpl:function(){return UO},bincountReduceImpl:function(){return WO},ceilImpl:function(){return XO},concatImpl:function(){return nT},equalImpl:function(){return eN},expImpl:function(){return hN},expm1Impl:function(){return gN},floorImpl:function(){return PN},gatherNdImpl:function(){return qN},gatherV2Impl:function(){return KN},greaterEqualImpl:function(){return nE},greaterImpl:function(){return QN},lessEqualImpl:function(){return gE},lessImpl:function(){return pE},linSpaceImpl:function(){return yE},logImpl:function(){return kE},maxImpl:function(){return BE},maximumImpl:function(){return VE},minimumImpl:function(){return oD},multiplyImpl:function(){return WT},negImpl:function(){return bD},notEqualImpl:function(){return ND},prodImpl:function(){return HD},rangeImpl:function(){return YD},rsqrtImpl:function(){return d$},scatterImpl:function(){return m$},sigmoidImpl:function(){return SI},simpleAbsImpl:function(){return qI},sliceImpl:function(){return jO},sparseFillEmptyRowsImpl:function(){return z$},sparseReshapeImpl:function(){return W$},sparseSegmentReductionImpl:function(){return q$},sqrtImpl:function(){return nA},squaredDifferenceImpl:function(){return aA},stridedSliceImpl:function(){return hA},stringNGramsImpl:function(){return mA},stringSplitImpl:function(){return yA},stringToHashBucketFastImpl:function(){return kA},subImpl:function(){return kN},tileImpl:function(){return NA},topKImpl:function(){return RA},transposeImpl:function(){return nO},uniqueImpl:function(){return qA}});n(1703);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const s=1e-7,l=1e-4;class u{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class c{refCount(e){return h("refCount")}incRef(e){return h("incRef")}timerAvailable(){return!0}time(e){return h("time")}read(e){return h("read")}readSync(e){return h("readSync")}readToGPU(e,t){return h("readToGPU")}numDataIds(){return h("numDataIds")}disposeData(e,t){return h("disposeData")}write(e,t,n){return h("write")}move(e,t,n,r,i){return h("move")}memory(){return h("memory")}floatPrecision(){return h("floatPrecision")}epsilon(){return 32===this.floatPrecision()?s:l}dispose(){return h("dispose")}}function h(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}n(2087),n(8675),n(7380),n(1118);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function d(e){let t=e.length,n=0;while(t>0)n=Math.random()*t|0,t--,m(e,t,n)}function p(e,t,n){return Math.max(e,Math.min(t,n))}function f(e){return e%2===0?e:e+1}function m(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function g(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function b(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function v(e,t,n=""){b(k(e,t),(()=>n+` Shapes ${e} and ${t} must match`))}function y(e){b(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function x(e,t=[],n=!1){if(null==t&&(t=[]),Array.isArray(e)||M(e)&&!n)for(let r=0;r<e.length;++r)x(e[r],t,n);else t.push(e);return t}function w(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function k(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function _(e){return e%1===0}function S(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function C(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function I(e,t=(e=>0),n){return new Promise(((r,i)=>{let o=0;const a=()=>{if(e())return void r();o++;const s=t(o);null!=n&&o>=n?i():setTimeout(a,s)};a()}))}function O(e,t){let n=1,r=-1;for(let o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${o}`);r=o}else if(e[o]<0)throw Error(`Shapes can not be < 0. Found ${e[o]} at dim ${o}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const i=e.slice();return i[r]=t/n,i}function T(e,t){const n=t.length;return e=null==e?t.map(((e,t)=>t)):[].concat(e),b(e.every((e=>e>=-n&&e<n)),(()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`)),b(e.every((e=>_(e))),(()=>`All values in axis param must be integers but got axis ${e}`)),e.map((e=>e<0?n+e:e))}function N(e,t){const n=[],r=[],i=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||i?null:T(t,e).sort();let a=0;for(let s=0;s<e.length;++s){if(null!=o){if(o[a]===s&&1!==e[s])throw new Error(`Can't squeeze axis ${s} since its dim '${e[s]}' is not 1`);(null==o[a]||o[a]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[a]<=s&&a++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function E(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error(`Unknown data type ${e}`);n=new Uint8Array(t)}return n}function D(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);n=new Array(t)}return n}function $(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function A(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function R(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function M(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function F(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function P(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}function j(e){return"string"===typeof e||e instanceof String}function B(e){return"boolean"===typeof e}function L(e){return"number"===typeof e}function z(e){return Array.isArray(e)?z(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":L(e)?"float32":j(e)?"string":B(e)?"bool":"float32"}function V(e){return!!(e&&e.constructor&&e.call&&e.apply)}function U(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function W(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function H(e,t,n,r=!1){const i=new Array;if(1===t.length){const o=t[0]*(r?2:1);for(let t=0;t<o;t++)i[t]=n[e+t]}else{const o=t[0],a=t.slice(1),s=a.reduce(((e,t)=>e*t))*(r?2:1);for(let t=0;t<o;t++)i[t]=H(e+t*s,a,n,r)}return i}function G(e,t,n=!1){if(0===e.length)return t[0];const r=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return H(0,e,t,n)}function q(e,t){const n=Y(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function Y(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function X(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return G(e,new Float32Array(n));if("int32"===t)return G(e,new Int32Array(n));if("bool"===t)return G(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function K(e){e.forEach((t=>{b(Number.isInteger(t)&&t>=0,(()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`))}))}function J(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=n[i]*e[i];return r}function Z(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(e/n[i]),e-=r[i]*n[i];return r[r.length-1]=e,r}function Q(e){return e&&e.then&&"function"===typeof e.then}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ee="tfjsflags";class te{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=ne,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(oe().getBool("IS_TEST")||oe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];oe().getBool("IS_TEST")||oe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(Q(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(ee in e){const t=e[ee].split(",");t.forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=ie(t,n)}))}}}function ne(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,((e,...n)=>(re(t,n[0],n[1]),n.join("=")))),t}function re(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function ie(e,t){if(t=t.toLowerCase(),"true"===t||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}function oe(){return se}let ae,se=null;function le(e){se=e}function ue(){if(null==ae){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}ae=e}return ae}function ce(){const e=ue();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}function he(e,t){const n=ce();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const de="Abs",pe="Acos",fe="Acosh",me="Add",ge="AddN",be="All",ve="Any",ye="ArgMax",xe="ArgMin",we="Asin",ke="Asinh",_e="Atan",Se="Atanh",Ce="Atan2",Ie="AvgPool",Oe="AvgPoolGrad",Te="AvgPool3D",Ne="AvgPool3DGrad",Ee="BatchMatMul",De="BatchToSpaceND",$e="Bincount",Ae="BroadcastTo",Re="BroadcastArgs",Me="Cast",Fe="Ceil",Pe="ClipByValue",je="Complex",Be="ComplexAbs",Le="Concat",ze="Conv2D",Ve="Conv2DBackpropFilter",Ue="Conv2DBackpropInput",We="Conv3D",He="Conv3DBackpropFilterV2",Ge="Conv3DBackpropInputV2",qe="Cos",Ye="Cosh",Xe="Cumprod",Ke="Cumsum",Je="CropAndResize",Ze="DenseBincount",Qe="DepthToSpace",et="DepthwiseConv2dNative",tt="DepthwiseConv2dNativeBackpropFilter",nt="DepthwiseConv2dNativeBackpropInput",rt="Diag",it="Dilation2D",ot="Dilation2DBackpropInput",at="Dilation2DBackpropFilter",st="RealDiv",lt="Einsum",ut="Elu",ct="EluGrad",ht="Erf",dt="Equal",pt="Exp",ft="ExpandDims",mt="Expm1",gt="FFT",bt="Fill",vt="FlipLeftRight",yt="Floor",xt="FloorDiv",wt="FusedBatchNorm",kt="GatherV2",_t="GatherNd",St="Greater",Ct="GreaterEqual",It="Identity",Ot="IFFT",Tt="Imag",Nt="IsFinite",Et="IsInf",Dt="IsNan",$t="LeakyRelu",At="Less",Rt="LessEqual",Mt="LinSpace",Ft="Log",Pt="Log1p",jt="LogicalAnd",Bt="LogicalNot",Lt="LogicalOr",zt="LogSoftmax",Vt="LRN",Ut="LRNGrad",Wt="Max",Ht="Maximum",Gt="MaxPool",qt="MaxPoolGrad",Yt="MaxPool3D",Xt="MaxPool3DGrad",Kt="MaxPoolWithArgmax",Jt="Mean",Zt="Min",Qt="Minimum",en="MirrorPad",tn="Mod",nn="Multinomial",rn="Multiply",on="Neg",an="NotEqual",sn="NonMaxSuppressionV3",ln="NonMaxSuppressionV4",un="NonMaxSuppressionV5",cn="OnesLike",hn="OneHot",dn="Pack",pn="PadV2",fn="Pow",mn="Prelu",gn="Prod",bn="Range",vn="Real",yn="Reciprocal",xn="Relu",wn="Reshape",kn="ResizeNearestNeighbor",_n="ResizeNearestNeighborGrad",Sn="ResizeBilinear",Cn="ResizeBilinearGrad",In="Relu6",On="Reverse",Tn="Round",Nn="Rsqrt",En="ScatterNd",Dn="SearchSorted",$n="Select",An="Selu",Rn="Slice",Mn="Sin",Fn="Sinh",Pn="Sign",jn="Sigmoid",Bn="Softplus",Ln="Sqrt",zn="Sum",Vn="SpaceToBatchND",Un="SplitV",Wn="Softmax",Hn="SparseFillEmptyRows",Gn="SparseReshape",qn="SparseSegmentMean",Yn="SparseSegmentSum",Xn="SparseToDense",Kn="SquaredDifference",Jn="Square",Zn="StridedSlice",Qn="StringNGrams",er="StringSplit",tr="StringToHashBucketFast",nr="Sub",rr="Tan",ir="Tanh",or="Tile",ar="TopK",sr="Transform",lr="Transpose",ur="Unique",cr="Unpack",hr="UnsortedSegmentSum",dr="ZerosLike",pr="Step",fr="FromPixels",mr="RotateWithOffset",gr="_FusedMatMul",br="FusedConv2D",vr="FusedDepthwiseConv2D";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function yr(...e){oe().getBool("IS_TEST")||oe().getBool("PROD")||console.warn(...e)}function xr(...e){oe().getBool("IS_TEST")||oe().getBool("PROD")||console.log(...e)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const wr=he("kernelRegistry",(()=>new Map)),kr=he("gradRegistry",(()=>new Map));function _r(e,t){const n=Tr(e,t);return wr.get(n)}function Sr(e){return kr.get(e)}function Cr(e){const t=wr.entries(),n=[];while(1){const{done:r,value:i}=t.next();if(r)break;const[o,a]=i,[s]=o.split("_");s===e&&n.push(a)}return n}function Ir(e){const{kernelName:t,backendName:n}=e,r=Tr(t,n);wr.has(r)&&yr(`The kernel '${t}' for backend '${n}' is already registered`),wr.set(r,e)}function Or(e){const{kernelName:t}=e;kr.has(t)&&oe().getBool("DEBUG")&&yr(`Overriding the gradient for '${t}'`),kr.set(t,e)}function Tr(e,t){return`${t}_${e}`}var Nr=n(9438),Er=n.n(Nr);
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Dr=Er()||Nr;function $r(e){return Dr.fromString(e,!0,16)}const Ar=$r("c3a5c85c97cb3127"),Rr=$r("b492b66fbe98f273"),Mr=$r("9ae16a3b2f90404f");function Fr(e){return e.xor(e.shru(47))}function Pr(e,t,n){const r=e.slice(t,t+n);return Dr.fromBytes(Array.from(r),!0,!0)}function jr(e,t){return Pr(e,t,8)}function Br(e,t){return Pr(e,t,4)}function Lr(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function zr(e,t,n=$r("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let i=t.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function Vr(e,t,n,r,i,o){i=i.add(e),o=Lr(o.add(i).add(r),21);const a=i;return i=i.add(t),i=i.add(n),o=o.add(Lr(i,44)),[i.add(r),o.add(a)]}function Ur(e,t,n,r){return Vr(jr(e,t),jr(e,t+8),jr(e,t+16),jr(e,t+24),n,r)}function Wr(e,t=e.length){if(t>=8){const n=Mr.add(2*t),r=jr(e,0).add(Mr),i=jr(e,t-8),o=Lr(i,37).mul(n).add(r),a=Lr(r,25).add(i).mul(n);return zr(o,a,n)}if(t>=4){const n=Mr.add(2*t),r=Br(e,0);return zr(r.shl(3).add(t),Br(e,t-4),n)}if(t>0){const n=e[0],r=e[t>>1],i=e[t-1],o=n+(r<<8),a=t+(i<<2);return Fr(Mr.mul(o).xor(Ar.mul(a))).mul(Mr)}return Mr}function Hr(e,t=e.length){const n=Mr.add(2*t),r=jr(e,0).mul(Rr),i=jr(e,8),o=jr(e,t-8).mul(n),a=jr(e,t-16).mul(Mr);return zr(Lr(r.add(i),43).add(Lr(o,30)).add(a),r.add(Lr(i.add(Mr),18)).add(o),n)}function Gr(e,t=e.length){const n=Mr.add(2*t),r=jr(e,0).mul(Mr),i=jr(e,8),o=jr(e,t-8).mul(n),a=jr(e,t-16).mul(Mr),s=Lr(r.add(i),43).add(Lr(o,30)).add(a),l=zr(s,r.add(Lr(i.add(Mr),18)).add(o),n),u=jr(e,16).mul(n),c=jr(e,24),h=s.add(jr(e,t-32)).mul(n),d=l.add(jr(e,t-24)).mul(n);return zr(Lr(u.add(c),43).add(Lr(h,30)).add(d),u.add(Lr(c.add(r),18)).add(h),n)}function qr(e,t=e.length){const n=Dr.fromNumber(81,!0);if(t<=32)return t<=16?Wr(e,t):Hr(e,t);if(t<=64)return Gr(e,t);let r=n,i=n.mul(Rr).add(113),o=Fr(i.mul(Mr).add(113)).mul(Mr),a=[Dr.UZERO,Dr.UZERO],s=[Dr.UZERO,Dr.UZERO];r=r.mul(Mr).add(jr(e,0));let l=0;const u=64*(t-1>>6),c=u+(t-1&63)-63;do{r=Lr(r.add(i).add(a[0]).add(jr(e,l+8)),37).mul(Rr),i=Lr(i.add(a[1]).add(jr(e,l+48)),42).mul(Rr),r=r.xor(s[1]),i=i.add(a[0]).add(jr(e,l+40)),o=Lr(o.add(s[0]),33).mul(Rr),a=Ur(e,l,a[1].mul(Rr),r.add(s[0])),s=Ur(e,l+32,o.add(s[1]),i.add(jr(e,l+16))),[o,r]=[r,o],l+=64}while(l!==u);const h=Rr.add(o.and(255).shl(1));return l=c,s[0]=s[0].add(t-1&63),a[0]=a[0].add(s[0]),s[0]=s[0].add(a[0]),r=Lr(r.add(i).add(a[0]).add(jr(e,l+8)),37).mul(h),i=Lr(i.add(a[1]).add(jr(e,l+48)),42).mul(h),r=r.xor(s[1].mul(9)),i=i.add(a[0].mul(9).add(jr(e,l+40))),o=Lr(o.add(s[0]),33).mul(h),a=Ur(e,l,a[1].mul(h),r.add(s[0])),s=Ur(e,l+32,o.add(s[1]),i.add(jr(e,l+16))),[o,r]=[r,o],zr(zr(a[0],s[0],h).add(Fr(i).mul(Ar)).add(o),zr(a[1],s[1],h).add(r),h)}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Yr(e,t){return"string"===t?Zr(e):Kr([e],t)}function Xr(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}function Kr(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=x(e)),oe().getBool("DEBUG")&&$(e,t),Xr(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error(`Unknown data type ${t}`)}function Jr(){return oe().platform.now()}function Zr(e,t="utf-8"){return t=t||"utf-8",oe().platform.encode(e,t)}function Qr(e,t="utf-8"){return t=t||"utf-8",oe().platform.decode(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ei{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new ni)}profileKernel(e,t,n){let r;const i=()=>{r=n()};let o;const a=Jr();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const e of r)e.dataSync();o=Promise.resolve({kernelMs:Jr()-a})}if(oe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<r.length;l++){const t=r[l];t.data().then((n=>{ti(n,t.dtype,e)}))}const s={kernelName:e,outputs:r,inputs:t,timeMs:o.then((e=>e.kernelMs)),extraInfo:o.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))};return s}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:i,extraInfo:o}=e;n.forEach((e=>{Promise.all([e.data(),r,o]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],i,n[2])}))}))}}function ti(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){const t=e[r];if(isNaN(t)||!isFinite(t))return console.warn(`Found ${t} in the result of '${n}'`),!0}return!1}class ni{logKernelProfile(e,t,n,r,i,o){const a="number"===typeof r?C(`${r}ms`,9):r["error"],s=C(e,25),l=t.rank,u=t.size,c=C(t.shape.toString(),14);let h="";for(const d in i){const e=i[d];if(null!=e){const n=e.shape||t.shape,r=n.length;h+=`${d}: ${r}D ${r>0?n:""} `}}console.log(`%c${s}\t%c${a}\t%c${l}D ${c}\t%c${u}\t%c${h}\t%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ri(e,t,n){const r={},i={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){const n=e[l],o=n.inputs;for(const e in o){const a=o[e];let s=!1;for(let e=0;e<t.length;e++)if(r[a.id]){n.outputs.forEach((e=>r[e.id]=!0)),s=!0,i[n.id]=!0;break}if(s)break}}const o={};o[n.id]=!0;const a={};for(let l=e.length-1;l>=0;l--){const t=e[l],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(o[t.outputs[e].id]){for(const e in n)o[n[e].id]=!0,a[t.id]=!0;break}}const s=[];for(let l=0;l<e.length;l++){const t=e[l];if(i[t.id]&&a[t.id]){const e={};for(const i in t.inputs){const n=t.inputs[i];r[n.id]&&(e[i]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,s.push(n)}}return s}function ii(e,t,n,r){for(let i=t.length-1;i>=0;i--){const o=t[i],a=[];if(o.outputs.forEach((t=>{const n=e[t.id];null!=n?a.push(n):a.push(null)})),null==o.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);const s=o.gradient(a);for(const t in o.inputs){if(!(t in s))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(s)}.`);const i=n((()=>s[t]()));if("float32"!==i.dtype)throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${i.dtype}'`);const a=o.inputs[t];if(!k(i.shape,a.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${t}' has shape '${i.shape}', which does not match the shape of the input '${a.shape}'`);if(null==e[a.id])e[a.id]=i;else{const t=e[a.id];e[a.id]=r(t,i),t.dispose()}}}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const oi=20,ai=3,si=7;function li(e,t,n,r){const i=W(t),o=ui(e,t,n,i),a=t.length,s=di(e,t,n,i,o),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${a}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(s.map((e=>"    "+e)).join("\n")),l.join("\n")}function ui(e,t,n,r){const i=w(t),o=r[r.length-1],a=new Array(o).fill(0),s=t.length,l="complex64"===n?pi(e):e;if(s>1)for(let u=0;u<i/o;u++){const e=u*o;for(let t=0;t<o;t++)a[t]=Math.max(a[t],ci(l[e+t],0,n).length)}return a}function ci(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(si))} + ${parseFloat(e[1].toFixed(si))}j`:j(e)?`'${e}'`:"bool"===n?hi(e):parseFloat(e.toFixed(si)).toString(),C(r,t)}function hi(e){return 0===e?"false":"true"}function di(e,t,n,r,i,o=!0){const a="complex64"===n?2:1,s=t[0],l=t.length;if(0===l){if("complex64"===n){const t=pi(e);return[ci(t[0],0,n)]}return"bool"===n?[hi(e[0])]:[e[0].toString()]}if(1===l){if(s>oi){const t=ai*a;let r=Array.from(e.slice(0,t)),o=Array.from(e.slice((s-ai)*a,s*a));return"complex64"===n&&(r=pi(r),o=pi(o)),["["+r.map(((e,t)=>ci(e,i[t],n))).join(", ")+", ..., "+o.map(((e,t)=>ci(e,i[s-ai+t],n))).join(", ")+"]"]}const t="complex64"===n?pi(e):Array.from(e);return["["+t.map(((e,t)=>ci(e,i[t],n))).join(", ")+"]"]}const u=t.slice(1),c=r.slice(1),h=r[0]*a,d=[];if(s>oi){for(let t=0;t<ai;t++){const r=t*h,o=r+h;d.push(...di(e.slice(r,o),u,n,c,i,!1))}d.push("...");for(let t=s-ai;t<s;t++){const r=t*h,o=r+h;d.push(...di(e.slice(r,o),u,n,c,i,t===s-1))}}else for(let m=0;m<s;m++){const t=m*h,r=t+h;d.push(...di(e.slice(t,r),u,n,c,i,m===s-1))}const p=2===l?",":"";d[0]="["+d[0]+p;for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+p;let f=",\n";for(let m=2;m<l;m++)f+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(o?"":f),d}function pi(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class fi{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=w(e),null!=n){const e=n.length;b(e===this.size,(()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||D(t,this.size),this.strides=W(e)}set(e,...t){0===t.length&&(t=[0]),b(t.length===this.rank,(()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`));const n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(const r of e){if(r<0||r>=this.shape[t]){const t=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(t)}t++}let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return mi().makeTensor(this.values,this.shape,this.dtype)}}let mi=null,gi=null,bi=null;function vi(e){mi=e}function yi(e){gi=e}function xi(e){bi=e}class wi{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=w(e),this.strides=W(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return gi.buffer(this.shape,this.dtype,e)}bufferSync(){return gi.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return G(this.shape,e,"complex64"===this.dtype)}arraySync(){return G(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=mi().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map((e=>Qr(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),mi().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=mi().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>Qr(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await mi().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(mi().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return gi.print(this,e)}clone(){return this.throwIfDisposed(),gi.clone(this)}toString(e=!1){const t=this.dataSync();return li(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),gi.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),mi().makeVariable(this,e,t,n)}}function ki(){return he("Tensor",(()=>wi))}Object.defineProperty(wi,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),ki();class _i extends wi{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!k(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);mi().disposeTensor(this),this.dataId=e.dataId,mi().incRef(this,null)}dispose(){mi().disposeVariable(this),this.isDisposedInternal=!0}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var Si,Ci,Ii,Oi,Ti;Object.defineProperty(_i,Symbol.hasInstance,{value:e=>e instanceof wi&&null!=e.assign&&e.assign instanceof Function}),function(e){e["R0"]="R0",e["R1"]="R1",e["R2"]="R2",e["R3"]="R3",e["R4"]="R4",e["R5"]="R5",e["R6"]="R6"}(Si||(Si={})),function(e){e["float32"]="float32",e["int32"]="int32",e["bool"]="int32",e["complex64"]="complex64"}(Ci||(Ci={})),function(e){e["float32"]="float32",e["int32"]="int32",e["bool"]="bool",e["complex64"]="complex64"}(Ii||(Ii={})),function(e){e["float32"]="float32",e["int32"]="float32",e["bool"]="float32",e["complex64"]="complex64"}(Oi||(Oi={})),function(e){e["float32"]="complex64",e["int32"]="complex64",e["bool"]="complex64",e["complex64"]="complex64"}(Ti||(Ti={}));const Ni={float32:Oi,int32:Ci,bool:Ii,complex64:Ti};function Ei(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return Ni[e][t]}function Di(e){return Ei(e,"int32")}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function $i(e,t){if(e.dtype===t.dtype)return[e,t];const n=Ei(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Ai(e,t){return t.some((t=>t.id===e.id))}function Ri(e){const t=[],n=new Set;return Mi(e,t,n),t}function Mi(e,t,n){if(null==e)return;if(e instanceof wi)return void t.push(e);if(!Fi(e))return;const r=e;for(const i in r){const e=r[i];n.has(e)||(n.add(e),Mi(e,t,n))}}function Fi(e){return Array.isArray(e)||"object"===typeof e}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Pi(e){return null!=e.kernelName}class ji{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Bi{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new ji}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],r=await this.initializeBackend(n).success;if(r)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(yr(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e),r=n?await t:t;if(!r)return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new ei(this.backendInstance),!0}setupRegisteredKernels(){const e=Cr(this.backendName);e.forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){const t=Cr(e);t.forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof c||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,yr(`Initialization of backend ${e} failed`),yr(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return yr(`Initialization of backend ${e} failed`),yr(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:i}=this.initializeBackend(n);if(i||r)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,i=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,i,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return Bi.nextTensorId++}nextVariableId(){return Bi.nextVariableId++}clone(e){const t=Vi.runKernel(It,{x:e}),n={x:e},r=e=>({x:()=>{const t="float32",n={x:e},r={dtype:t};return Vi.runKernel(Me,n,r)}}),i=[];return this.addTapeNode(this.state.activeScope.name,n,[t],r,i,{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;const r=null!=_r(e,this.backendName);if(!r)throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let i=0;n.forEach((e=>{i+="complex64"===e.dtype?3:1}));const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=r-t-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;let a,s;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=Pi(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(Pi(e)){const{kernelName:t,inputs:i,attrs:o}=e;null==this.backendName&&this.backend;const l=_r(t,this.backendName);b(null!=l,(()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`)),a=()=>{const e=this.backend.numDataIds();s=l.kernelFunc({inputs:i,attrs:o,backend:this.backend});const a=Array.isArray(s)?s:[s];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,a);const u=a.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(r){const e=this.getTensorsForGradient(t,i,u);n=this.saveTensorsForBackwardMode(e)}return u}}else{const{forwardFunc:t}=e,i=e=>{r&&(n=e.map((e=>this.keep(this.clone(e)))))};a=()=>{const e=this.backend.numDataIds();s=this.tidy((()=>t(this.backend,i)));const n=Array.isArray(s)?s:[s];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:u,attrs:c}=e,h=Pi(e)?null:e.backwardsFunc;let d;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(d=this.profiler.profileKernel(l,u,(()=>a())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),t=d.outputs):t=a()})),r&&this.addTapeNode(l,u,t,h,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map((e=>null!=u[e]?u[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(s)?t:t[0]}saveTensorsForBackwardMode(e){const t=e.map((e=>this.keep(this.clone(e))));return t}getTensorsForGradient(e,t,n){const r=Sr(e);if(null!=r){const e=r.inputsToSave||[],i=r.outputsToSave||[];let o;r.saveAllInputs?(b(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),o=Object.keys(t).map((e=>t[e]))):o=e.map((e=>t[e]));const a=n.filter(((e,t)=>i[t]));return o.concat(a)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let i=e;"string"===n&&j(e[0])&&(i=e.map((e=>Zr(e))));const o=r.write(i,t,n),a=new wi(t,n,o,this.nextTensorId());if(this.trackTensor(a,r),"string"===n){const e=this.state.tensorInfo.get(o),t=P(i);this.state.numBytes+=t-e.bytes,e.bytes=t}return a}makeTensorFromDataId(e,t,n,r){n=n||"float32";const i={dataId:e,shape:t,dtype:n};return this.makeTensorFromTensorInfo(i,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:i}=e,o=new wi(r,i,n,this.nextTensorId());return this.trackTensor(o,t),o}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const i=new _i(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*F(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof _i||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*F(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,i,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:i},s=Sr(e);null!=s&&(r=s.gradFunc),null!=r&&(a.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],r=Y(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})),r(e.length>1?e:e[0],i,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=Ri(e),n=new Set(t.map((e=>e.id)));for(let i=0;i<this.state.activeScope.track.length;i++){const e=this.state.activeScope.track[i];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==r.id||this.track(e)}))}gradients(e,t,n,r=!1){if(b(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const i=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));b(i instanceof wi,(()=>"The result y returned by f() must be a tensor."));const o=ri(this.state.activeTape,t,i);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[i.id]=null==n?Li(i.shape):n,ii(e,o,(e=>this.tidy(e)),Ui);const r=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:i,grads:r}}))}customGrad(e){return b(V(e),(()=>"The f passed in customGrad(f) must be a function.")),(...t)=>{let n;b(t.every((e=>e instanceof wi)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const r={};t.forEach(((e,t)=>{r[t]=e}));const i=(r,i)=>(n=e(...t,i),b(n.value instanceof wi,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),b(V(n.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),n.value),o=(e,r)=>{const i=n.gradFunc(e,r),o=Array.isArray(i)?i:[i];b(o.length===t.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),b(o.every((e=>e instanceof wi)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const a={};return o.forEach(((e,t)=>{a[t]=()=>e})),a};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:r})}}readSync(e){const t=this.state.tensorInfo.get(e);return t.backend.readSync(e)}read(e){const t=this.state.tensorInfo.get(e);return t.backend.read(e)}readToGPU(e,t){const n=this.state.tensorInfo.get(e);return n.backend.readToGPU(e,t)}async time(e){const t=Jr(),n=await this.backend.time(e);return n.wallMs=Jr()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new ji;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function Li(e){const t=q(w(e),"float32");return Vi.makeTensor(t,e,"float32")}function zi(){const e=ue();if(null==e._tfengine){const t=new te(e);e._tfengine=new Bi(t)}return le(e._tfengine.ENV),vi((()=>e._tfengine)),e._tfengine}Bi.nextTensorId=0,Bi.nextVariableId=0;const Vi=zi();function Ui(e,t){const n={a:e,b:t};return Vi.runKernel(me,n)}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Wi(){return"undefined"!==typeof navigator&&null!=navigator}let Hi;function Gi(e){if(void 0!==Hi)return Hi;if(e||Wi()){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function qi(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Yi=oe();Yi.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Yi.registerFlag("IS_BROWSER",(()=>qi())),Yi.registerFlag("IS_NODE",(()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node)),Yi.registerFlag("IS_CHROME",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),Yi.registerFlag("PROD",(()=>!1)),Yi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>Yi.getBool("DEBUG"))),Yi.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),Yi.registerFlag("IS_TEST",(()=>!1)),Yi.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>!0)),Yi.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),Yi.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));n(2801);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Xi(e,t){let n=e;if(M(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];const r=[];while(Array.isArray(n)||M(n)&&"string"!==t)r.push(n.length),n=n[0];return Array.isArray(e)&&oe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Ki(e,r,[]),r}function Ki(e,t,n){if(n=n||[],!Array.isArray(e)&&!M(e))return void b(0===t.length,(()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`));b(t.length>0,(()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`)),b(e.length===t[0],(()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`));const r=t.slice(1);for(let i=0;i<e.length;++i)Ki(e[i],r,n.concat(i))}function Ji(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function Zi(e,t,n,r="numeric"){if(e instanceof wi)return Ji(r,e.dtype,t,n),e;let i=z(e);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),Ji(r,i,t,n),null==e||!M(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}const o=Xi(e,i);M(e)||Array.isArray(e)||(e=[e]);const a=!0,s="string"!==i?Kr(e,i):x(e,[],a);return Vi.makeTensor(s,o,i)}function Qi(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);const i=e;return i.map(((e,i)=>Zi(e,`${t}[${i}]`,n,r)))}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const eo="__op";function to(e){const t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=eo;const i=(...e)=>{Vi.startScope(n);try{const t=r(...e);return Q(t)&&console.error("Cannot return a Promise inside of tidy."),Vi.endScope(t),t}catch(t){throw Vi.endScope(null),t}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function no(e,t){const n=Zi(e,"real","complex"),r=Zi(t,"imag","complex");v(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return Vi.runKernel(je,i)}const ro=to({complex_:no});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function io(e,t,n,r){if(null==r&&(r=z(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!M(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){K(t);const e=w(t),r=w(n);b(e===r,(()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`));for(let i=0;i<n.length;++i){const e=n[i],r=i!==n.length-1||e!==w(t.slice(i));b(n[i]===t[i]||!r,(()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `))}}return M(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?Kr(e,r):x(e,[],!0),Vi.makeTensor(e,t,r)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function oo(e,t,n){const r=Xi(e,n);return io(e,t,r,n)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ao=4;async function so(e,t){const n=[],r=[],i=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let a=0;a<i.length;++a){const o=i[a],s=Array.isArray(e)?e[a].tensor:e[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error(`Unsupported dtype in weight '${o}': ${s.dtype}`);const l={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){const e=new Promise((async e=>{const t=await s.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+ao*t.length,r=new Uint8Array(n);let i=0;for(let o=0;o<t.length;o++){const e=t[o],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,i),i+=ao,r.set(e,i),i+=e.length}e(r)}));r.push(e)}else r.push(s.data());null!=t&&(l.group=t),n.push(l)}const o=await Promise.all(r);return{data:lo(o),specs:n}}function lo(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)}));const r=new Uint8Array(t);let i=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),i),i+=e.byteLength})),r.buffer}const uo="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function co(e){return uo?Buffer.byteLength(e):new Blob([e]).size}function ho(e){if(uo)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,i=t.length;r<i;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function po(e){if(uo){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}function fo(e){if(1===e.length)return e[0];let t=0;e.forEach((e=>{t+=e.byteLength}));const n=new Uint8Array(t);let r=0;return e.forEach((e=>{n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function mo(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function go(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),null!=e.weightsManifest){const[r,i]=await t(e.weightsManifest);n.weightSpecs=r,n.weightData=i}return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),n}function bo(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:co(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:co(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class vo{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==vo.instance&&(vo.instance=new vo),vo.instance}static registerSaveRouter(e){vo.getInstance().saveRouters.push(e)}static registerLoadRouter(e){vo.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return vo.getHandlers(e,"save")}static getLoadHandlers(e,t){return vo.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[],i="load"===t?vo.getInstance().loadRouters:vo.getInstance().saveRouters;return i.forEach((t=>{const i=t(e,n);null!==i&&r.push(i)})),r}}const yo=e=>vo.getSaveHandlers(e),xo="tensorflowjs",wo=1,ko="models_store",_o="model_info_store";function So(){if(!oe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Co(e){const t=e.result;t.createObjectStore(ko,{keyPath:"modelPath"}),t.createObjectStore(_o,{keyPath:"modelPath"})}class Io{constructor(e){if(this.indexedDB=So(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(xo,wo);r.onupgradeneeded=()=>Co(r),r.onsuccess=()=>{const i=r.result;if(null==t){const t=i.transaction(ko,"readonly"),r=t.objectStore(ko),o=r.get(this.modelPath);o.onsuccess=()=>{if(null==o.result)return i.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(o.result.modelArtifacts)},o.onerror=e=>(i.close(),n(o.error)),t.oncomplete=()=>i.close()}else{const r=bo(t),o=i.transaction(_o,"readwrite");let a=o.objectStore(_o);const s=a.put({modelPath:this.modelPath,modelArtifactsInfo:r});let l;s.onsuccess=()=>{l=i.transaction(ko,"readwrite");const s=l.objectStore(ko),u=s.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r});u.onsuccess=()=>e({modelArtifactsInfo:r}),u.onerror=e=>{a=o.objectStore(_o);const t=a.delete(this.modelPath);t.onsuccess=()=>(i.close(),n(u.error)),t.onerror=e=>(i.close(),n(u.error))}},s.onerror=e=>(i.close(),n(s.error)),o.oncomplete=()=>{null==l?i.close():l.oncomplete=()=>i.close()}}},r.onerror=e=>n(r.error)}))}}Io.URL_SCHEME="indexeddb://";const Oo=e=>oe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Io.URL_SCHEME)?To(e.slice(Io.URL_SCHEME.length)):null;function To(e){return new Io(e)}function No(e){return e.startsWith(Io.URL_SCHEME)?e.slice(Io.URL_SCHEME.length):e}vo.registerSaveRouter(Oo),vo.registerLoadRouter(Oo);class Eo{constructor(){this.indexedDB=So()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(xo,wo);n.onupgradeneeded=()=>Co(n),n.onsuccess=()=>{const r=n.result,i=r.transaction(_o,"readonly"),o=i.objectStore(_o),a=o.getAll();a.onsuccess=()=>{const t={};for(const e of a.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},a.onerror=e=>(r.close(),t(a.error)),i.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){return e=No(e),new Promise(((t,n)=>{const r=this.indexedDB.open(xo,wo);r.onupgradeneeded=()=>Co(r),r.onsuccess=()=>{const i=r.result,o=i.transaction(_o,"readwrite"),a=o.objectStore(_o),s=a.get(e);let l;s.onsuccess=()=>{if(null==s.result)return i.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const r=a.delete(e),o=()=>{l=i.transaction(ko,"readwrite");const r=l.objectStore(ko),o=r.delete(e);o.onsuccess=()=>t(s.result.modelArtifactsInfo),o.onerror=e=>n(s.error)};r.onsuccess=o,r.onerror=e=>(o(),i.close(),n(s.error))}},s.onerror=e=>(i.close(),n(s.error)),o.oncomplete=()=>{null==l?i.close():l.oncomplete=()=>i.close()}},r.onerror=e=>n(r.error)}))}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Do="/",$o="tensorflowjs_models",Ao="info",Ro="model_topology",Mo="weight_specs",Fo="weight_data",Po="model_metadata";function jo(e){return{info:[$o,e,Ao].join(Do),topology:[$o,e,Ro].join(Do),weightSpecs:[$o,e,Mo].join(Do),weightData:[$o,e,Fo].join(Do),modelMetadata:[$o,e,Po].join(Do)}}function Bo(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function Lo(e){const t=e.split(Do);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(Do)}function zo(e){return e.startsWith(Vo.URL_SCHEME)?e.slice(Vo.URL_SCHEME.length):e}class Vo{constructor(e){if(!oe().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=jo(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=bo(e);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,ho(e.weightData));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:i}}catch(t){throw Bo(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const e=JSON.parse(i);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(null==o)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=po(o),t}}Vo.URL_SCHEME="localstorage://";const Uo=e=>oe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Vo.URL_SCHEME)?Wo(e.slice(Vo.URL_SCHEME.length)):null;function Wo(e){return new Vo(e)}vo.registerSaveRouter(Uo),vo.registerLoadRouter(Uo);class Ho{constructor(){b(oe().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),b("undefined"===typeof window||"undefined"!==typeof window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=$o+Do,n=Do+Ao;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);if(i.startsWith(t)&&i.endsWith(n)){const t=Lo(i);e[t]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=zo(e);const t=jo(e);if(null==this.LS.getItem(t.info))throw new Error(`Cannot find model at path '${e}'`);const n=JSON.parse(this.LS.getItem(t.info));return Bo(t),n}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Go="://";class qo{constructor(){this.managers={}}static getInstance(){return null==qo.instance&&(qo.instance=new qo),qo.instance}static registerManager(e,t){b(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(Go)&&(e=e.slice(0,e.indexOf(Go))),b(e.length>0,(()=>"scheme must not be an empty string."));const n=qo.getInstance();b(null==n.managers[e],(()=>`A model store manager is already registered for scheme '${e}'.`)),n.managers[e]=t}static getManager(e){const t=qo.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(qo.getInstance().managers)}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Yo{fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}}if(oe().get("IS_BROWSER")){oe().setPlatform("browser",new Yo);try{qo.registerManager(Vo.URL_SCHEME,new Ho)}catch(mY){}try{qo.registerManager(Io.URL_SCHEME,new Eo)}catch(mY){}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Xo={importFetch:()=>n(5410)};let Ko;class Jo{constructor(){this.util=n(8628),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=oe().global.fetch?oe().global.fetch(e,t):(null==Ko&&(Ko=Xo.importFetch()),Ko(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Zo(e,t="float32",n){return t=t||"float32",K(e),new fi(e,t,n)}
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Qo(e,t){const n=Zi(e,"x","cast");if(!A(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:t};return Vi.runKernel(Me,r,i)}oe().get("IS_NODE")&&!oe().get("IS_BROWSER")&&oe().setPlatform("node",new Jo);const ea=to({cast_:Qo});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ta(e){const t=Zi(e,"x","clone","string_or_numeric"),n={x:t};return Vi.runKernel(It,n)}const na=to({clone_:ta});
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ra(e,t=!1){console.log(e.toString(t))}
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
zi();const ia={buffer:Zo,cast:ea,clone:na,print:ra};yi(ia);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const oa="model",aa=".json",sa=".weights.bin";function la(e){return new Promise((e=>setTimeout(e))).then(e)}class ua{constructor(e){if(!oe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(ua.URL_SCHEME)&&(e=e.slice(ua.URL_SCHEME.length)),null!=e&&0!==e.length||(e=oa),this.modelJsonFileName=e+aa,this.weightDataFileName=e+sa}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r=mo(e,n),i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=i,await la((()=>o.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=t,await la((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:bo(e)}}}}ua.URL_SCHEME="downloads://";const ca=e=>oe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ua.URL_SCHEME)?ha(e.slice(ua.URL_SCHEME.length)):null;function ha(e="model"){return new ua(e)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function da(e,t,n,r){a(e),n=null==n?0:n,r=null==r?1:r,s(n,r);let i=0;const o=o=>(o.then((o=>{const a=n+ ++i/e.length*(r-n);return t(a),o})),o);function a(e){b(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}function s(e,t){b(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`)),b(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${t}`)),b(t>=e,(()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`))}return Promise.all(e.map(o))}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function pa(e,t){null==t&&(t={});const n=null==t.fetchFunc?oe().platform.fetch:t.fetchFunc,r=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),i=0,o=.5,a=null==t.onProgress?await Promise.all(r):await da(r,t.onProgress,i,o),s=a.map((e=>e.arrayBuffer())),l=.5,u=1,c=null==t.onProgress?await Promise.all(s):await da(s,t.onProgress,l,u);return c}vo.registerSaveRouter(ca);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const fa="application/octet-stream",ma="application/json";class ga{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(b("function"===typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=oe().platform.fetch,b(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&b(2===e.length,(()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`)),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r=mo(e,n);t.body.append("model.json",new Blob([JSON.stringify(r)],{type:ma}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:fa}),"model.weights.bin");const i=await this.fetch(this.path,t);if(i.ok)return{modelArtifactsInfo:bo(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(i){let e=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return go(t,(e=>this.loadWeights(e)))}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=ba(t),i=this.weightPathPrefix||n,o=[];for(const u of e)o.push(...u.weights);const a=[],s=[];for(const u of e)for(const e of u.paths)null!=this.weightUrlConverter?s.push(this.weightUrlConverter(e)):a.push(i+e+r);this.weightUrlConverter&&a.push(...await Promise.all(s));const l=await pa(a,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,fo(l)]}}function ba(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),i=n>t?e.substring(n):"";return[r+"/",i]}function va(e){return null!=e.match(ga.URL_SCHEME_REGEX)}ga.URL_SCHEME_REGEX=/^https?:\/\//;const ya=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>va(e))):va(e),n)return xa(e,t)}return null};function xa(e,t){return new ga(e,t)}vo.registerSaveRouter(ya),vo.registerLoadRouter(ya);
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function wa(e,t){const n=e.length,r=[];for(let i=0;i<n;i++){const o=n-1-i,a=e[o]||1,s=t[t.length-1-i]||1;s>1&&1===a&&r.unshift(o)}return r}function ka(e,t){const n=[];for(let r=0;r<t.length;r++){const i=e[e.length-r-1],o=t.length-r-1,a=t[o];(null==i||1===i&&a>1)&&n.unshift(o)}return n}function _a(e,t){const n=[],r=Math.max(e.length,t.length);for(let i=0;i<r;i++){let r=e[e.length-i-1];null==r&&(r=1);let o=t[t.length-i-1];if(null==o&&(o=1),1===r)n.unshift(o);else if(1===o)n.unshift(r);else{if(r!==o){const n=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(n)}n.unshift(r)}}return n}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Sa=-2,Ca=-1;function Ia(e,t,n){const r=e.shape.length;b(r===t.length,(()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`)),b(r===n.length,(()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`));for(let i=0;i<r;++i)b(t[i]+n[i]<=e.shape[i],(()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${t[i]+n[i]}) would overflow input.shape[${i}] (${e.shape[i]})`))}function Oa(e){const t=[];let n=0;while(e>0)1&e&&t.push(n),e/=2,n++;return t}function Ta(e,t,n){const r=[];for(let i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function Na(e,t,n,r){const i=[...e];for(let o=i.length;o<r.length;o++)i.push(1);for(let o=0;o<n;o++)0===o?i[t]=1:(i.splice(t,0,1),i.pop());return i}function Ea(e,t,n){return n<=e?n:n-(t-1)}function Da(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function $a(e,t,n,r,i,o,a,s,l){const u=e.length;let c=new Array(u),h=new Array(u),d=new Array(u);if(t.length&&n>0){const l=t[0],u=n+1;c=Aa(a,l,u,r,e),h=Ra(s,l,u,i,e),d=Na(o,l,u,e)}else for(let p=0;p<u;p++)c[p]=Fa(a,r,o,e,p,l),h[p]=Pa(s,i,o,e,p,l),d[p]=Ma(o,p,l);return{begin:c,end:h,strides:d}}function Aa(e,t,n,r,i){const o=[...i],a=Da(n,t);for(let s=0;s<o.length;s++)if(a.indexOf(s)>-1)o[s]=0;else{const i=Ea(t,n,s);let a=r[i];e&1<<i&&(a=0),o[s]=a}return o}function Ra(e,t,n,r,i){const o=[...i],a=Da(n,t);for(let s=0;s<o.length;s++)if(a.indexOf(s)>-1)o[s]=Number.MAX_SAFE_INTEGER;else{const i=Ea(t,n,s);let a=r[i];e&1<<i&&(a=Number.MAX_SAFE_INTEGER),o[s]=a}for(let s=0;s<o.length;s++){const e=i[s];o[s]<0&&(o[s]+=e),o[s]=p(0,o[s],i[s])}return o}function Ma(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function Fa(e,t,n,r,i,o){let a=t[i];const s=n[i]||1;(e&1<<i||o&1<<i||null==a)&&(a=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),a=p(0,a,l-1),a}function Pa(e,t,n,r,i,o){let a=t[i];const s=n[i]||1;(e&1<<i||o&1<<i||null==a)&&(a=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),a=s>0?p(0,a,l):p(-1,a,l-1),a}function ja(e,t,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function Ba(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function La(e,t,n){let r;const i=e.shape.length;let o;return r="number"===typeof t?[t,...new Array(i-1).fill(0)]:t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice(),r.forEach((e=>{b(-1!==e,(()=>"slice() does not support negative begin indexing."))})),o=null==n?new Array(i).fill(-1):"number"===typeof n?[n,...new Array(i-1).fill(-1)]:n.length<i?n.concat(new Array(i-n.length).fill(-1)):n,o=o.map(((t,n)=>t>=0?t:(b(-1===t,(()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`)),e.shape[n]-r[n]))),[r,o]}function za(e,t,n,r,i,o,a,s,l){let u;if(null==r?(u=new Array(t.length),u.fill(1)):u=r,null!=a&&0!==(a&a-1))throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const h={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:i,endMask:o,ellipsisMask:a,newAxisMask:s,shrinkAxisMask:l};for(let y=0;y<h.dims;y++)c&&0!==(1<<y&s)&&h.numAddAxisAfterEllipsis++,1<<y&a&&(c=!0);c||(h.ellipsisMask|=1<<h.dims,h.dims++);const d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};Va(h,d);let p=!0,f=!0,m=!0;const g=[],b=[];for(let y=0;y<e.length;++y){if(0===d.strides[y])throw Error(`strides[${y}] must be non-zero`);const t=!!(d.shrinkAxisMask&1<<y),n=e[y];if(-1===n){g.push(t?1:-1);continue}const r=[d.beginMask&1<<y,d.endMask&1<<y],i=[d.strides[y]>0?0:-1,d.strides[y]>0?n:n-1];if(t&&d.strides[y]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===d.strides[y];const o=!!(d.beginMask&1<<y&&d.endMask&1<<y);if(d.beginValid&&d.endValid){if(t){const e=d.begin[y]<0?n+d.begin[y]:d.begin[y];if(d.begin[y]=e,d.end[y]=d.begin[y]+1,e<0||e>=n)throw Error(`slice index ${d.begin[y]} of dimension ${y} out of bounds.`)}else d.begin[y]=Ua(d.begin[y],0,d.strides[y],n,r,i),d.end[y]=Ua(d.end[y],1,d.strides[y],n,r,i);const e=1===d.strides[y]&&0===d.begin[y]&&d.end[y]===n;p=p&&e,f=f&&(0===y&&1===d.strides[y]||e)}else p=p&&1===d.strides[y]&&o,f=f&&(0===y&&1===d.strides[y]||o);let a,s=!1;if(d.beginValid&&d.endValid?(a=d.end[y]-d.begin[y],s=!0):t?(a=1,s=!0):o&&n>=0&&(a=d.strides[y]<0?-n:n,s=!0),s){let e;e=0===a||a<0!==d.strides[y]<0?0:Math.trunc(a/d.strides[y])+(a%d.strides[y]!==0?1:0),g.push(e)}else g.push(-1)}for(let y=0;y<d.finalShapeGatherIndices.length;++y){const e=d.finalShapeGatherIndices[y];e>=0?b.push(g[e]):e===Sa&&b.push(1)}const v=b.filter(((e,t)=>d.finalShapeGatherIndices[t]!==Sa));return{finalShapeSparse:v,finalShape:b,isIdentity:p,sliceDim0:f,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function Va(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const i=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<i;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(Sa),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(Ca),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}function Ua(e,t,n,r,i,o){if(i[t])return n>0?o[t]:o[t+1&1];{const t=e<0?r+e:e;return t<o[0]?o[0]:t>o[1]?o[1]:t}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Wa{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class Ha{constructor(){this.classNameMap={}}static getMap(){return null==Ha.instance&&(Ha.instance=new Ha),Ha.instance}static register(e){Ha.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Ga(e){b(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),b("string"===typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),b(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),Ha.register(e)}function qa(e){oe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Ya(){return Vi}function Xa(){return Vi.memory()}function Ka(e,t){return Vi.tidy(e,t)}function Ja(e){const t=Ri(e);t.forEach((e=>e.dispose()))}function Za(e){return Vi.keep(e)}function Qa(e,t,n=1){return Vi.registerBackend(e,t,n)}function es(){return Vi.backend}function ts(e,t){b(V(e),(()=>"The f passed in variableGrads(f) must be a function")),b(null==t||Array.isArray(t)&&t.every((e=>e instanceof _i)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in Vi.registeredVariables)t.push(Vi.registeredVariables[e])}const r=n?t.filter((e=>!e.trainable)):null,i=t.length;t=t.filter((e=>e.trainable)),b(t.length>0,(()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`));const o=!0,{value:a,grads:s}=Vi.gradients(e,t,null,o);b(s.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),b(0===a.rank,(()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`));const l={};return t.forEach(((e,t)=>{null!=s[t]&&(l[e.name]=s[t])})),null!=r&&r.forEach((e=>l[e.name]=null)),{value:a,grads:l}}function ns(e){return Vi.customGrad(e)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function rs(e,t){if((M(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&M(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");const n=[],r=[];return io(e,n,r,t)}xi(qa);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class is extends Wa{minimize(e,t=!1,n){const{value:r,grads:i}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:i[e.name]})));this.applyGradients(e)}else this.applyGradients(i);return Ja(i),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return ts(e,t)}dispose(){null!=this.iterations_&&Ja(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:rs(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function os(e){const t=Zi(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return Vi.runKernel(Be,e)}{const e={x:t};return Vi.runKernel(de,e)}}Object.defineProperty(is,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});const as=to({abs_:os});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ss(e,t){let n=Zi(e,"a","add"),r=Zi(t,"b","add");[n,r]=$i(n,r);const i={a:n,b:r};return Vi.runKernel(me,i)}const ls=to({add_:ss});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function us(e,t=null,n=!1){const r=Zi(e,"x","all","bool"),i={x:r},o={axis:t,keepDims:n};return Vi.runKernel(be,i,o)}const cs=to({all_:us});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function hs(e,t=null,n=!1){const r=Zi(e,"x","any","bool"),i={x:r},o={axis:t,keepDims:n};return Vi.runKernel(ve,i,o)}const ds=to({any_:hs});
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ps(e,t=0){const n=Zi(e,"x","argMax"),r={x:n},i={axis:t};return Vi.runKernel(ye,r,i)}const fs=to({argMax_:ps});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ms(e,t,n,r,i="NHWC",o){const a=e[3],s=[...t,a],l=Ds(i);return vs(e,s,n,o,r,null,null,l)}function gs(e,t,n,r,i,o,a="channelsLast"){const[s,l]=_s(t);let u;if("channelsLast"===a)u=[s,l,e[3],e[3]];else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);u=[s,l,e[1],e[1]]}return vs(e,u,n,r,i,o,!1,a)}function bs(e,t,n,r,i,o,a="NDHWC"){const[s,l,u]=Ss(t);let c,h;if("NDHWC"===a)h="channelsLast",c=[s,l,u,e[4],e[4]];else{if("NCDHW"!==a)throw new Error(`Unknown dataFormat ${a}`);h="channelsFirst",c=[s,l,u,e[1],e[1]]}return ys(e,c,n,r,i,!1,h,o)}function vs(e,t,n,r,i,o,a=!1,s="channelsLast"){let[l,u,c,h]=[-1,-1,-1,-1];if("channelsLast"===s)[l,u,c,h]=e;else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);[l,h,u,c]=e}const[d,p,,f]=t,[m,g]=_s(n),[b,v]=_s(r),y=Cs(d,b),x=Cs(p,v),{padInfo:w,outHeight:k,outWidth:_}=Is(i,u,c,m,g,y,x,o,s),S=a?f*h:f;let C;return"channelsFirst"===s?C=[l,S,k,_]:"channelsLast"===s&&(C=[l,k,_,S]),{batchSize:l,dataFormat:s,inHeight:u,inWidth:c,inChannels:h,outHeight:k,outWidth:_,outChannels:S,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:p,effectiveFilterHeight:y,effectiveFilterWidth:x,dilationHeight:b,dilationWidth:v,inShape:e,outShape:C,filterShape:t}}function ys(e,t,n,r,i,o=!1,a="channelsLast",s){let[l,u,c,h,d]=[-1,-1,-1,-1,-1];if("channelsLast"===a)[l,u,c,h,d]=e;else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);[l,d,u,c,h]=e}const[p,f,m,,g]=t,[b,v,y]=Ss(n),[x,w,k]=Ss(r),_=Cs(p,x),S=Cs(f,w),C=Cs(m,k),{padInfo:I,outDepth:O,outHeight:T,outWidth:N}=Os(i,u,c,h,b,v,y,_,S,C,s),E=o?g*d:g;let D;return"channelsFirst"===a?D=[l,E,O,T,N]:"channelsLast"===a&&(D=[l,O,T,N,E]),{batchSize:l,dataFormat:a,inDepth:u,inHeight:c,inWidth:h,inChannels:d,outDepth:O,outHeight:T,outWidth:N,outChannels:E,padInfo:I,strideDepth:b,strideHeight:v,strideWidth:y,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:_,effectiveFilterHeight:S,effectiveFilterWidth:C,dilationDepth:x,dilationHeight:w,dilationWidth:k,inShape:e,outShape:D,filterShape:t}}function xs(e,t,n,r,i){null==r&&(r=ks(e,t,n));const o=e[0],a=e[1],s=Ts((o-t+2*r)/n+1,i),l=Ts((a-t+2*r)/n+1,i);return[s,l]}function ws(e,t,n,r,i,o){null==i&&(i=ks(e,t,r));const a=e[0],s=e[1],l=e[2],u=Ts((a-t+2*i)/r+1,o),c=Ts((s-t+2*i)/r+1,o),h=Ts((l-t+2*i)/r+1,o);return[u,c,h,n]}function ks(e,t,n,r=1){const i=Cs(t,r);return Math.floor((e[0]*(n-1)-n+i)/2)}function _s(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Ss(e){return"number"===typeof e?[e,e,e]:e}function Cs(e,t){return t<=1?e:e+(e-1)*(t-1)}function Is(e,t,n,r,i,o,a,s,l){let u,c,h;if("number"===typeof e){const i=0===e?"VALID":"NUMBER";u={top:e,bottom:e,left:e,right:e,type:i};const a=xs([t,n],o,r,e,s);c=a[0],h=a[1]}else if("same"===e){c=Math.ceil(t/r),h=Math.ceil(n/i);const e=Math.max(0,(c-1)*r+o-t),s=Math.max(0,(h-1)*i+a-n),l=Math.floor(e/2),d=e-l,p=Math.floor(s/2),f=s-p;u={top:l,bottom:d,left:p,right:f,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-o+1)/r),h=Math.ceil((n-a+1)/i);else{if("object"!==typeof e)throw Error(`Unknown padding parameter: ${e}`);{const d="channelsLast"===l?e[1][0]:e[2][0],p="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1],g=0===d&&0===p&&0===f&&0===m?"VALID":"EXPLICIT";u={top:d,bottom:p,left:f,right:m,type:g},c=Ts((t-o+d+p)/r+1,s),h=Ts((n-a+f+m)/i+1,s)}}return{padInfo:u,outHeight:c,outWidth:h}}function Os(e,t,n,r,i,o,a,s,l,u,c){let h,d,p,f;if("number"===typeof e){const o=0===e?"VALID":"NUMBER";h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:o};const a=ws([t,n,r,1],s,1,i,e,c);d=a[0],p=a[1],f=a[2]}else if("same"===e){d=Math.ceil(t/i),p=Math.ceil(n/o),f=Math.ceil(r/a);const e=(d-1)*i+s-t,c=(p-1)*o+l-n,m=(f-1)*a+u-r,g=Math.floor(e/2),b=e-g,v=Math.floor(c/2),y=c-v,x=Math.floor(m/2),w=m-x;h={top:v,bottom:y,left:x,right:w,front:g,back:b,type:"SAME"}}else{if("valid"!==e)throw Error(`Unknown padding parameter: ${e}`);h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-s+1)/i),p=Math.ceil((n-l+1)/o),f=Math.ceil((r-u+1)/a)}return{padInfo:h,outDepth:d,outHeight:p,outWidth:f}}function Ts(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function Ns(e){const[t,n,r]=_s(e);return 1===t&&1===n&&1===r}function Es(e,t){return Ns(e)||Ns(t)}function Ds(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function $s(e,t,n){if(null!=n){if("string"===typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if("number"===typeof t)b(_(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`));else{if("object"!==typeof t)throw Error(`Error in ${e}: Unknown padding parameter: ${t}`);t.forEach((t=>{t.forEach((t=>{b(_(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`))}))}))}}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function As(e,t){const n=Zi(e,"x","reshape","string_or_numeric"),r={x:n},i={shape:t};return Vi.runKernel(wn,r,i)}const Rs=to({reshape_:As});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ms(e,t,n,r,i){const o=Zi(e,"x","avgPool","float32"),a=1;b(Es(n,a),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`));let s=o,l=!1;3===o.rank&&(l=!0,s=Rs(o,[1,o.shape[0],o.shape[1],o.shape[2]])),b(4===s.rank,(()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`)),$s("avgPool",r,i);const u={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i};let h=Vi.runKernel(Ie,u,c);return h=ea(h,o.dtype),l?Rs(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const Fs=to({avgPool_:Ms});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ps(e,t,n,r,i,o="NDHWC"){const a=Zi(e,"x","avgPool3d","float32");let s=a,l=!1;4===a.rank&&(l=!0,s=Rs(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),b(5===s.rank,(()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`)),b("NDHWC"===o,(()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`)),$s("avgPool3d",r,i);const u={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:o};let h=Vi.runKernel(Te,u,c);return h=ea(h,s.dtype),l?Rs(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const js=to({avgPool3d_:Ps});function Bs(e){let t;return t=0===e.rank||1===e.rank?Rs(e,[1,1,1,e.size]):2===e.rank?Rs(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Rs(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ls(e,t,n,r,i,o){null==o&&(o=.001);const a=Zi(e,"x","batchNorm"),s=Zi(t,"mean","batchNorm"),l=Zi(n,"variance","batchNorm");let u,c;null!=i&&(u=Zi(i,"scale","batchNorm")),null!=r&&(c=Zi(r,"offset","batchNorm")),b(s.rank===l.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),b(null==c||s.rank===c.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),b(null==u||s.rank===u.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const h=Bs(a),d={x:h,scale:u,offset:c,mean:s,variance:l},p={varianceEpsilon:o},f=Vi.runKernel(wt,d,p);return Rs(f,a.shape)}const zs=to({batchNorm_:Ls});function Vs(e,t,n,r,i,o){const a=Zi(e,"x","batchNorm"),s=Zi(t,"mean","batchNorm"),l=Zi(n,"variance","batchNorm");let u,c;return null!=i&&(u=Zi(i,"scale","batchNorm")),null!=r&&(c=Zi(r,"offset","batchNorm")),b(2===a.rank,(()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`)),b(2===s.rank||1===s.rank,(()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`)),b(2===l.rank||1===l.rank,(()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`)),null!=u&&b(2===u.rank||1===u.rank,(()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`)),null!=c&&b(2===c.rank||1===c.rank,(()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`)),zs(a,s,l,c,u,o)}const Us=to({batchNorm2d_:Vs});function Ws(e,t,n,r,i,o){const a=Zi(e,"x","batchNorm"),s=Zi(t,"mean","batchNorm"),l=Zi(n,"variance","batchNorm");let u,c;return null!=i&&(u=Zi(i,"scale","batchNorm")),null!=r&&(c=Zi(r,"offset","batchNorm")),b(3===a.rank,(()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`)),b(3===s.rank||1===s.rank,(()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`)),b(3===l.rank||1===l.rank,(()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`)),null!=u&&b(3===u.rank||1===u.rank,(()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`)),null!=c&&b(3===c.rank||1===c.rank,(()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`)),zs(a,s,l,c,u,o)}const Hs=to({batchNorm3d_:Ws});function Gs(e,t,n,r,i,o){const a=Zi(e,"x","batchNorm"),s=Zi(t,"mean","batchNorm"),l=Zi(n,"variance","batchNorm");let u,c;return null!=i&&(u=Zi(i,"scale","batchNorm")),null!=r&&(c=Zi(r,"offset","batchNorm")),b(4===a.rank,(()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`)),b(4===s.rank||1===s.rank,(()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`)),b(4===l.rank||1===l.rank,(()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`)),null!=u&&b(4===u.rank||1===u.rank,(()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`)),null!=c&&b(4===c.rank||1===c.rank,(()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`)),zs(a,s,l,c,u,o)}const qs=to({batchNorm4d_:Gs});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ys(e,t,n){const r=Zi(e,"x","clipByValue");b(t<=n,(()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`));const i={x:r},o={clipValueMin:t,clipValueMax:n};return Vi.runKernel(Pe,i,o)}const Xs=to({clipByValue_:Ys});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ks(e,t=0){b(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=Qi(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)})),1===n.length)return na(n[0]);const r=n,i={axis:t};return Vi.runKernel(Le,r,i)}const Js=to({concat_:Ks});function Zs(e){return Js(e,0)}const Qs=to({concat1d_:Zs});function el(e,t){return Js(e,t)}const tl=to({concat2d_:el});function nl(e,t){return Js(e,t)}const rl=to({concat3d_:nl});function il(e,t){return Js(e,t)}const ol=to({concat4d_:il});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function al(e,t,n,r,i="NHWC",o=[1,1],a){const s=Zi(e,"x","conv2d","float32"),l=Zi(t,"filter","conv2d","float32");let u=s,c=!1;3===s.rank&&(c=!0,u=Rs(s,[1,s.shape[0],s.shape[1],s.shape[2]])),b(4===u.rank,(()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`)),b(4===l.rank,(()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`)),$s("conv2d",r,a);const h="NHWC"===i?u.shape[3]:u.shape[1];b(h===l.shape[2],(()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`)),b(Es(n,o),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`));const d={x:u,filter:l},p={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a},f=Vi.runKernel(ze,d,p);return c?Rs(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const sl=to({conv2d_:al});function ll(e,t,n,r,i="NWC",o=1,a){const s=Zi(e,"x","conv1d"),l=Zi(t,"filter","conv1d");let u=s,c=!1;2===s.rank&&(c=!0,u=Rs(s,[1,s.shape[0],s.shape[1]])),b(3===u.rank,(()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`)),b(3===l.rank,(()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`)),$s("conv1d",r,a),b(u.shape[2]===l.shape[1],(()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`)),b(Es(n,o),(()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${o}'`)),b("NWC"===i,(()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`));const h=Rs(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=Rs(u,[u.shape[0],1,u.shape[1],u.shape[2]]),p=[1,n],f=[1,o],m="NHWC",g=sl(d,h,p,r,m,f,a);return Rs(g,c?[g.shape[2],g.shape[3]]:[g.shape[0],g.shape[2],g.shape[3]])}const ul=to({conv1d_:ll});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function cl(e,t,n,r,i,o="NHWC",a){b(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let s=e,l=t,u=!1;3===t.rank&&(u=!0,l=Rs(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),b(4===s.length,(()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`)),b(4===l.rank,(()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`)),b(4===n.rank,(()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`));const c="NHWC"===o?s[3]:s[1],h="NHWC"===o?l.shape[3]:l.shape[1];b(c===n.shape[2],(()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`)),b(h===n.shape[3],(()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`)),$s("conv2dDerInput",i,a);const d={dy:l,filter:n},p={strides:r,pad:i,dataFormat:o,dimRoundingMode:a,inputShape:s},f=Vi.runKernel(Ue,d,p);return u?Rs(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const hl=to({conv2DBackpropInput_:cl});function dl(e,t,n,r,i,o){const a=Zi(e,"x","conv2dTranspose"),s=Zi(t,"filter","conv2dTranspose");return hl(n,a,s,r,i,"NHWC",o)}const pl=to({conv2dTranspose_:dl});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function fl(e,t,n,r,i="NDHWC",o=[1,1,1]){const a=Zi(e,"x","conv3d"),s=Zi(t,"filter","conv3d");let l=a,u=!1;4===a.rank&&(u=!0,l=Rs(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),b(5===l.rank,(()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`)),b(5===s.rank,(()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`)),b(l.shape[4]===s.shape[3],(()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`)),b(Es(n,o),(()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`)),b("NDHWC"===i,(()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`));const c={x:l,filter:s},h={strides:n,pad:r,dataFormat:i,dilations:o},d=Vi.runKernel(We,c,h);return u?Rs(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const ml=to({conv3d_:fl});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function gl(e,t,n,r,i){b(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let o=e,a=t,s=!1;4===t.rank&&(s=!0,a=Rs(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);const l=o[4],u=a.shape[4];b(5===o.length,(()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`)),b(5===a.rank,(()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`)),b(5===n.rank,(()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`)),b(l===n.shape[3],(()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`)),b(u===n.shape[4],(()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`));const c={dy:a,filter:n},h={pad:i,strides:r,inputShape:o},d=Vi.runKernel(Ge,c,h);return s?Rs(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const bl=to({conv3DBackpropInput_:gl});function vl(e,t,n,r,i){const o=Zi(e,"x","conv3dTranspose"),a=Zi(t,"filter","conv3dTranspose");return bl(n,o,a,r,i)}const yl=to({conv3dTranspose_:vl});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function xl(e,t,n,r,i="NHWC",o=[1,1],a){const s=Zi(e,"x","depthwiseConv2d","float32"),l=Zi(t,"filter","depthwiseConv2d","float32");let u=s,c=!1;3===s.rank&&(c=!0,u=Rs(s,[1,s.shape[0],s.shape[1],s.shape[2]])),b(4===u.rank,(()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`)),b(4===l.rank,(()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`));const h="NHWC"===i?u.shape[3]:u.shape[1];b(h===l.shape[2],(()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${l.shape[2]}.`)),$s("depthwiseConv2d",r,a);const d={x:u,filter:l},p={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a},f=Vi.runKernel(et,d,p);return c?Rs(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const wl=to({depthwiseConv2d_:xl});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function kl(e,t){let n=Zi(e,"a","floorDiv"),r=Zi(t,"b","floorDiv");[n,r]=$i(n,r);const i={a:n,b:r};return Vi.runKernel(xt,i)}const _l=to({floorDiv_:kl});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Sl(e,t){let n=Zi(e,"a","div"),r=Zi(t,"b","div");if([n,r]=$i(n,r),"int32"===n.dtype&&"int32"===r.dtype)return _l(n,r);const i={a:n,b:r},o={};return Vi.runKernel(st,i,o)}const Cl=to({div_:Sl});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Il(e){const t=Zi(e,"x","elu","float32"),n={x:t};return Vi.runKernel(ut,n)}const Ol=to({elu_:Il});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Tl(e,t){let n=Zi(e,"a","equal","string_or_numeric"),r=Zi(t,"b","equal","string_or_numeric");[n,r]=$i(n,r),_a(n.shape,r.shape);const i={a:n,b:r};return Vi.runKernel(dt,i)}const Nl=to({equal_:Tl});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function El(e){const t=Zi(e,"x","exp"),n={x:t};return Vi.runKernel(pt,n)}const Dl=to({exp_:El});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function $l(e,t=0){const n=Zi(e,"x","expandDims","string_or_numeric");b(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const r={input:n},i={dim:t};return Vi.runKernel(ft,r,i)}const Al=to({expandDims_:$l});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Rl(e,t){const n=Zi(e,"x","tile","string_or_numeric");b(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`));const r={x:n},i={reps:t};return Vi.runKernel(or,r,i)}const Ml=to({tile_:Rl});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Fl(e,t,n,r="float32"){null==t&&(t=e);const i=Zo([e,t],r),o=e<=t?e:t;for(let s=0;s<o;++s)i.set(1,s,s);const a=Rs(i.toTensor(),[e,t]);if(null==n)return a;if(1===n.length)return Ml(Al(a,0),[n[0],1,1]);if(2===n.length)return Ml(Al(Al(a,0),0),[n[0],n[1],1,1]);if(3===n.length)return Ml(Al(Al(Al(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const Pl=to({eye_:Fl});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function jl(e,t,n){const r={shape:e,value:t,dtype:n};return Vi.runKernel(bt,{},r)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Bl(e){const t=Zi(e,"x","floor","float32"),n={x:t};return Vi.runKernel(yt,n)}const Ll=to({floor_:Bl});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zl(e,t,n=0,r=0){const i=Zi(e,"x","gather"),o=Zi(t,"indices","gather","int32"),a={x:i,indices:o},s={axis:n,batchDims:r};return Vi.runKernel(kt,a,s)}const Vl=to({gather_:zl});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ul(e,t){let n=Zi(e,"a","greater","string_or_numeric"),r=Zi(t,"b","greater","string_or_numeric");[n,r]=$i(n,r),_a(n.shape,r.shape);const i={a:n,b:r};return Vi.runKernel(St,i)}const Wl=to({greater_:Ul});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Hl(e,t){let n=Zi(e,"a","greaterEqual","string_or_numeric"),r=Zi(t,"b","greaterEqual","string_or_numeric");[n,r]=$i(n,r),_a(n.shape,r.shape);const i={a:n,b:r};return Vi.runKernel(Ct,i)}const Gl=to({greaterEqual_:Hl});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ql(e,t=.2){const n=Zi(e,"x","leakyRelu"),r={x:n},i={alpha:t};return Vi.runKernel($t,r,i)}const Yl=to({leakyRelu_:ql});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Xl(e){const t=Zi(e,"x","log","float32"),n={x:t};return Vi.runKernel(Ft,n)}const Kl=to({log_:Xl});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Jl(e){const t=Zi(e,"x","log1p"),n={x:t};return Vi.runKernel(Pt,n)}const Zl=to({log1p_:Jl});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ql(e,t=null,n=!1){const r=Zi(e,"x","max"),i={x:r},o={reductionIndices:t,keepDims:n};return Vi.runKernel(Wt,i,o)}const eu=to({max_:Ql});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function tu(e,t){let n=Zi(e,"a","mul"),r=Zi(t,"b","mul");[n,r]=$i(n,r);const i={a:n,b:r};return Vi.runKernel(rn,i)}const nu=to({mul_:tu});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ru(e,t){let n=Zi(e,"a","sub"),r=Zi(t,"b","sub");[n,r]=$i(n,r);const i={a:n,b:r};return Vi.runKernel(nr,i)}const iu=to({sub_:ru});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ou(e,t=null,n=!1){let r=Zi(e,"x","sum");"bool"===r.dtype&&(r=ea(r,"int32"));const i={x:r},o={axis:t,keepDims:n};return Vi.runKernel(zn,i,o)}const au=to({sum_:ou});
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function su(e,t=-1){const n=Zi(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);const r=ns(((e,n)=>{const r=!0,i=eu(e,t,!0),o=iu(e,i),a=iu(ea(o,"float32"),Kl(au(Dl(o),t,r)));n([a]);const s=(e,n)=>{const[r]=n,i=!0,o=Dl(r);return iu(e,nu(au(e,t,i),o))};return{value:a,gradFunc:s}}));return r(n)}const lu=to({logSoftmax_:su});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function uu(e,t){const n=Zi(e,"a","logicalAnd","bool"),r=Zi(t,"b","logicalAnd","bool");_a(n.shape,r.shape);const i={a:n,b:r};return Vi.runKernel(jt,i)}const cu=to({logicalAnd_:uu});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function hu(e,t,n=!1,r=!1){let i=Zi(e,"a","matMul"),o=Zi(t,"b","matMul");[i,o]=$i(i,o);const a={a:i,b:o},s={transposeA:n,transposeB:r};return Vi.runKernel(Ee,a,s)}const du=to({matMul_:hu});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pu(e,t,n,r,i){const o=Zi(e,"x","maxPool"),a=1;let s=o,l=!1;3===o.rank&&(l=!0,s=Rs(o,[1,o.shape[0],o.shape[1],o.shape[2]])),b(4===s.rank,(()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`)),b(Es(n,a),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`)),$s("maxPool",r,i);const u={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i},h=Vi.runKernel(Gt,u,c);return l?Rs(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const fu=to({maxPool_:pu});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mu(e,t=[1,1,1],n,r,i,o="NDHWC"){const a=Zi(e,"x","maxPool3d");let s=a,l=!1;4===a.rank&&(l=!0,s=Rs(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),b(5===s.rank,(()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`)),b("NDHWC"===o,(()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`)),$s("maxPool3d",r,i);const u={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:o},h=Vi.runKernel(Yt,u,c);return l?Rs(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const gu=to({maxPool3d_:mu});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function bu(e,t){let n=Zi(e,"a","maximum"),r=Zi(t,"b","maximum");[n,r]=$i(n,r),"bool"===n.dtype&&(n=ea(n,"int32"),r=ea(r,"int32")),_a(n.shape,r.shape);const i={a:n,b:r};return Vi.runKernel(Ht,i)}const vu=to({maximum_:bu});
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function yu(e,t=null,n=!1){const r=Zi(e,"x","mean"),i={x:r},o={axis:t,keepDims:n};return Vi.runKernel(Jt,i,o)}const xu=to({mean_:yu});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function wu(e,t){let n=Zi(e,"a","minimum"),r=Zi(t,"b","minimum");[n,r]=$i(n,r),"bool"===n.dtype&&(n=ea(n,"int32"),r=ea(r,"int32")),_a(n.shape,r.shape);const i={a:n,b:r};return Vi.runKernel(Qt,i)}const ku=to({minimum_:wu});
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function _u(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Su(e,t,n){const r=e.length+t.length,i=[];let o=0,a=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?i.push(e[o++]):i.push(t[a++]);return i}function Cu(e,t){const n=[],r=e.length;for(let o=0;o<r;o++)-1===t.indexOf(o)&&n.push(e[o]);const i=t.map((t=>e[t]));return[n,i]}function Iu(e,t){const n=t.map((e=>1));return Su(e,n,t)}function Ou(e,t,n){b(_u(t,n),(()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`))}function Tu(e,t){if(_u(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((e=>n.push(e))),n}function Nu(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function Eu(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Du(e){const t=Zi(e,"x","square"),n={};return Vi.runKernel("Square",{x:t},n)}const $u=to({square_:Du});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Au(e,t=null,n=!1){e=Zi(e,"x","moments");const r=T(t,e.shape),i=xu(e,r,n);let o=i.shape;n||(o=Iu(i.shape,r));const a=$u(iu(ea(e,"float32"),Rs(i,o))),s=xu(a,r,n);return{mean:i,variance:s}}const Ru=to({moments_:Au});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Mu(e){const t=Zi(e,"x","neg"),n={x:t};return Vi.runKernel(on,n)}const Fu=to({neg_:Mu});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Pu(e,t){let n=Zi(e,"a","notEqual","string_or_numeric"),r=Zi(t,"b","notEqual","string_or_numeric");[n,r]=$i(n,r),_a(n.shape,r.shape);const i={a:n,b:r};return Vi.runKernel(an,i)}const ju=to({notEqual_:Pu});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Bu(e,t,n=1,r=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const i=Zi(e,"indices","oneHot","int32"),o={indices:i},a={depth:t,onValue:n,offValue:r};return Vi.runKernel(hn,o,a)}const Lu=to({oneHot_:Bu});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zu(e,t="float32"){if("complex64"===t){const t=zu(e,"float32"),n=zu(e,"float32");return ro(t,n)}const n=Y(w(e),t);return Vi.makeTensor(n,e,t)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Vu(e,t="float32"){if("complex64"===t){const t=Vu(e,"float32"),n=zu(e,"float32");return ro(t,n)}const n=q(w(e),t);return Vi.makeTensor(n,e,t)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Uu(e){const t=Zi(e,"x","onesLike"),n={x:t};return Vi.runKernel(cn,n)}const Wu=to({onesLike_:Uu});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Hu(e,t,n=0){const r=Zi(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:t,constantValue:n},o={x:r};return Vi.runKernel(pn,o,i)}const Gu=to({pad_:Hu});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function qu(e,t){const n=Zi(e,"x","prelu"),r=Zi(t,"alpha","prelu"),i={x:n,alpha:r};return Vi.runKernel(mn,i)}const Yu=to({prelu_:qu});var Xu=n(4332);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ku{constructor(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=i||Math.random();this.random=Xu.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;while(!n){let r,i,o;do{r=2*this.random()-1,i=2*this.random()-1,o=r*r+i*i}while(o>=1||0===o);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*r*a,t=this.mean+this.stdDev*i*a,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Ju{constructor(e=0,t=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"===typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=Xu.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Zu(e,t=0,n=1,r,i){if(null!=r&&"bool"===r)throw new Error(`Unsupported data type ${r}`);const o=new Ku(t,n,r,!1,i),a=Zo(e,r);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}const Qu=to({randomNormal_:Zu});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ec(e,t=0,n=1,r="float32",i){const o=Zo(e,r),a=new Ju(t,n,null,i);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const tc=to({randomUniform_:ec});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function nc(e){const t=Zi(e,"x","relu"),n={x:t};return Vi.runKernel(xn,n)}const rc=to({relu_:nc});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ic(e,t){const n=Zi(e,"x","reverse"),r={x:n},i={dims:t};return Vi.runKernel(On,r,i)}const oc=to({reverse_:ic});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ac(e){const t=Zi(e,"x","selu"),n={x:t};return Vi.runKernel(An,n)}const sc=to({selu_:ac});function lc(e,t,n,r,i,o=[1,1],a="NHWC"){const s=Zi(e,"x","separableConv2d"),l=Zi(t,"depthwiseFilter","separableConv2d"),u=Zi(n,"pointwiseFilter","separableConv2d");let c=s,h=!1;if(3===s.rank&&(h=!0,c=Rs(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");b(4===c.rank,(()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`)),b(4===l.rank,(()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`)),b(4===u.rank,(()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`)),b(1===u.shape[0],(()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`)),b(1===u.shape[1],(()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`));const d=l.shape[2],p=l.shape[3];b(u.shape[2]===d*p,(()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*p}, but got ${u.shape[2]}.`));const f=wl(c,l,r,i,a,o),m=1,g=sl(f,u,m,"valid",a);return h?Rs(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const uc=to({separableConv2d_:lc});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function cc(e){const t=Zi(e,"x","sigmoid","float32"),n={x:t};return Vi.runKernel(jn,n)}const hc=to({sigmoid_:cc});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function dc(e,t,n){const r=Zi(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const i={x:r},o={begin:t,size:n};return Vi.runKernel(Rn,i,o)}const pc=to({slice_:dc});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function fc(e,t,n){const r=Zi(e,"x","slice1d");return b(1===r.rank,(()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`)),pc(r,[t],[n])}const mc=to({slice1d_:fc});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function gc(e,t,n){const r=Zi(e,"x","slice2d");return b(2===r.rank,(()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`)),pc(r,t,n)}const bc=to({slice2d_:gc});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function vc(e,t,n){const r=Zi(e,"x","slice3d");return b(3===r.rank,(()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`)),pc(r,t,n)}const yc=to({slice3d_:vc});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function xc(e,t,n){const r=Zi(e,"x","slice4d");return b(4===r.rank,(()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`)),pc(r,t,n)}const wc=to({slice4d_:xc});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function kc(e,t=-1){const n=Zi(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const r={logits:n},i={dim:t};return Vi.runKernel(Wn,r,i)}const _c=to({softmax_:kc});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Sc(e){const t=Zi(e,"x","softplus"),n={x:t};return Vi.runKernel(Bn,n)}const Cc=to({softplus_:Sc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ic(e,t,n=0){const r=Zi(e,"x","split"),i={x:r},o={numOrSizeSplits:t,axis:n};return Vi.runKernel(Un,i,o)}const Oc=to({split_:Ic});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Tc(e){const t=Zi(e,"x","sqrt","float32"),n={x:t};return Vi.runKernel(Ln,n)}const Nc=to({sqrt_:Tc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ec(e,t){const n=Zi(e,"x","squeeze","string_or_numeric");return Rs(n,N(n.shape,t).newShape)}const Dc=to({squeeze_:Ec});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function $c(e,t=0){const n=Qi(e,"tensors","stack","string_or_numeric");b(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&b(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const r=n,i={axis:t};return Vi.runKernel(dn,r,i)}const Ac=to({stack_:$c});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Rc(e){const t=Zi(e,"x","tanh","float32"),n={x:t};return Vi.runKernel(ir,n)}const Mc=to({tanh_:Rc});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Fc(e,t){y(e);const n=Xi(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");const r=null;return io(e,r,n,t)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Pc(e,t=0,n=1,r,i){if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const o=new Ku(t,n,r,!0,i),a=Zo(e,r);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}const jc=to({truncatedNormal_:Pc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Bc(e,t=0){const n=Zi(e,"x","unstack","string_or_numeric");b(t>=-n.shape.length&&t<n.shape.length,(()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`));const r={value:n},i={axis:t};return Vi.runKernel(cr,r,i)}const Lc=to({unstack_:Bc});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zc(e,t=!0,n,r){return Vi.makeVariable(e,t,n,r)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Vc(e,t){let n=Zi(e,"broadcastTo","x");const r=n.shape;if(t.some((e=>!(e>0)||e%1!==0)))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();while(e.length<t.length)e.unshift(1);n=Rs(n,e)}const i=n.shape,o=Array.from(t);for(let u=t.length-1;u>=0;u--)if(i[u]===t[u])o[u]=1;else if(1!==n.shape[u])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);const a=o.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0));if(0===a.length)return na(n);const s={x:n},l={reps:o};return Vi.runKernel(or,s,l)}const Uc=to({broadcastTo_:Vc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Wc(e,t,n){const r=Zi(t,"a","where"),i=Zi(n,"b","where"),o=Zi(e,"condition","where","bool"),a=_a(_a(o.shape,r.shape),i.shape),s=Uc(o,a),l=Uc(r,a),u=Uc(i,a),c={condition:s,t:l,e:u};return Vi.runKernel($n,c)}const Hc=to({where_:Wc});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Gc(e){const t=Zi(e,"x","zerosLike"),n={x:t};return Vi.runKernel(dr,n)}const qc=to({zerosLike_:Gc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Yc(e){const t=Zi(e,"input","imag"),n={input:t};return Vi.runKernel(Tt,n)}const Xc=to({imag_:Yc});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Kc(e){const t=Zi(e,"input","real"),n={input:t};return Vi.runKernel(vn,n)}const Jc=to({real_:Kc});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Zc(e,t,n){const r=Zi(e,"x","transpose");if(null==t&&(t=r.shape.map(((e,t)=>t)).reverse()),b(r.rank===t.length,(()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`)),t.forEach((e=>{b(e>=0&&e<r.rank,(()=>"All entries in 'perm' must be between 0 and "+(r.rank-1)+` but got ${t}`))})),r.rank<=1)return r.clone();const i={x:r},o={perm:t};return"complex64"===r.dtype?Ka((()=>{let e=Jc(r),t=Xc(r);return e=Vi.runKernel(lr,{x:e},o),t=Vi.runKernel(lr,{x:t},o),n&&(t=Fu(t)),ro(e,t)})):Vi.runKernel(lr,i,o)}const Qc=to({transpose_:Zc});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function eh(e,t){if(null==t)return e.shape.slice();if(k(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function th(e,t,n,r){const i=Zi(e,"x","dropout");if(b("float32"===i.dtype,(()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`)),b(t>=0&&t<1,(()=>`rate must be a float in the range [0, 1), but got ${t}.`)),0===t)return e instanceof wi?i.clone():i;const o=eh(i,n),a=1-t,s=Cl(Ll(ls(tc(o,0,1,"float32",r),a)),a);return nu(i,s)}const nh=to({dropout_:th});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function rh(e){b("complex64"===e.dtype,(()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`));const t={input:e};return Vi.runKernel(gt,t)}const ih=to({fft_:rh});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function oh(e,t){b("float32"===e.dtype,(()=>`The dtype for rfft() must be real value but got ${e.dtype}`));let n=e.shape[e.shape.length-1];const r=e.size/n;let i;if(null!=t&&t<n){const r=e.shape.map((e=>0)),o=e.shape.map((e=>e));o[e.shape.length-1]=t,i=pc(e,r,o),n=t}else if(null!=t&&t>n){const r=e.shape.map((e=>e));r[e.shape.length-1]=t-n,i=Js([e,zu(r)],e.shape.length-1),n=t}else i=e;const o=qc(i),a=Rs(ro(i,o),[r,n]),s=ih(a),l=Math.floor(n/2)+1,u=Jc(s),c=Xc(s),h=Oc(u,[l,n-l],u.shape.length-1),d=Oc(c,[l,n-l],c.shape.length-1),p=i.shape.slice();return p[i.shape.length-1]=l,Rs(ro(h[0],d[0]),p)}const ah=to({rfft_:oh});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function sh(e){b("complex64"===e.dtype,(()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`));const t={input:e};return Vi.runKernel(Ot,t)}const lh=to({ifft_:sh});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function uh(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const i=Rs(e,[n,t]);r=lh(i)}else{const i=[n,2*(t-1)],o=Rs(Jc(e),[n,t]),a=Rs(Xc(e),[n,t]),s=oc(pc(o,[0,1],[n,t-2]),1),l=nu(oc(pc(a,[0,1],[n,t-2]),1),rs(-1)),u=Js([o,s],1),c=Js([a,l],1),h=Rs(ro(u,c),[i[0],i[1]]);r=lh(h)}if(r=Jc(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=Rs(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}const ch=to({irfft_:uh});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function hh(e,t,n,r,i,o="NHWC",a){let s=e;3===e.rank&&(s=Rs(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=Rs(t,[1,t.shape[0],t.shape[1],t.shape[2]])),b(4===s.rank,(()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`)),b(4===l.rank,(()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`)),b(4===n.length,(()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`));const u="NHWC"===o?s.shape[3]:s.shape[1],c="NHWC"===o?l.shape[3]:l.shape[1];b(u===n[2],(()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`)),b(c===n[3],(()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`)),$s("conv2dDerFilter",i,a);const h={x:s,dy:l},d={strides:r,pad:i,dataFormat:o,dimRoundingMode:a,filterShape:n};return Vi.runKernel(Ve,h,d)}const dh=to({conv2DBackpropFilter_:hh});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ph(e){const t=Zi(e,"x","relu6"),n={x:t};return Vi.runKernel(In,n)}const fh=to({relu6_:ph});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mh(e,t=0){const n=Zi(e,"x","step"),r={x:n},i={alpha:t};return Vi.runKernel(pr,r,i)}const gh=to({step_:mh});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function bh(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return nu(e,gh(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function vh(e,t){let n=t;const r=ka(e.shape,t.shape);return r.length>0&&(n=au(n,r)),Rs(n,e.shape)}function yh(e,t,n,r){if("linear"===t)return e;if("relu"===t)return rc(e);if("elu"===t)return Ol(e);if("relu6"===t)return fh(e);if("prelu"===t)return Yu(e,n);if("leakyrelu"===t)return Yl(e,r);if("sigmoid"===t)return hc(e);throw new Error(`Unknown fused activation ${t}.`)}const xh=(e,t)=>{const n=e>0;return!n||"linear"===t};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function wh({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:o=[1,1],dimRoundingMode:a,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",!1===xh(Vi.state.gradientDepth,l)){b("NHWC"===i,(()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`));let h=sl(e,t,n,r,i,o,a);return null!=s&&(h=ls(h,s)),yh(h,l,u,c)}const h=Zi(e,"x","conv2d","float32"),d=Zi(t,"filter","conv2d","float32");let p=h,f=!1;3===h.rank&&(f=!0,p=Rs(h,[1,h.shape[0],h.shape[1],h.shape[2]])),b(4===p.rank,(()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`)),b(4===d.rank,(()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`)),$s("fused conv2d",r,a);const m="NHWC"===i?p.shape[3]:p.shape[1];b(d.shape[2]===m,(()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${d.shape[2]}.`)),b(Es(n,o),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`));const g=vs(p.shape,d.shape,n,o,r,a);let v,y;if(null!=s&&(v=Zi(s,"bias","fused conv2d"),[v]=$i(v,h),"NHWC"===i?_a(g.outShape,v.shape):(b(v.shape.length<=1,(()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`)),b(0===v.shape.length||v.shape[0]===g.outChannels||1===v.shape[0],(()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${g.outChannels})`)))),null!=u){const e=u.shape;if(b(e.length<=1||3===e.length,(()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${e.length}.`)),1===e.length)b(1===e[0]||e[0]===g.outChannels,(()=>`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the number of output channels (${g.outChannels}).`));else if(3===e.length)try{_a(e,g.outShape)}catch(_){const t=`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(t)}y=Zi(u,"prelu weights","fused conv2d")}const x=(e,t)=>{b("NHWC"===i,(()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`));const[a,s,u,c]=t,h=bh(e,u,l);b(Ns(o),(()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`));const d=hl(s.shape,h,a,n,r),p=dh(s,h,a.shape,n,r),f=[d,p];if(null!=c){const e=vh(c,h);f.push(e)}return f},w={x:p,filter:d,bias:v,preluActivationWeights:y},k={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a,activation:l,leakyreluAlpha:c};if(null==s){const e=ns(((e,t,n)=>{let r=Vi.runKernel(br,w,k);return n([t,e,r]),f&&(r=Rs(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:x}}));return e(p,d)}{const e=ns(((e,t,n,r)=>{let i=Vi.runKernel(br,w,k);return r([t,e,i,n]),f&&(i=Rs(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:x}}));return e(p,d,v)}}const kh=to({fusedConv2d_:wh});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function _h(e,t,n,r,i,o=[1,1],a){let s=e;3===e.rank&&(s=Rs(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=Rs(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:s,dy:l},c={strides:r,pad:i,dimRoundingMode:a,dilations:o,filterShape:n};return Vi.runKernel(tt,u,c)}const Sh=to({depthwiseConv2dNativeBackpropFilter_:_h});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ch(e,t,n,r,i,o=[1,1],a){let s=t,l=!1;3===t.rank&&(l=!0,s=Rs(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:s,filter:n},c={strides:r,pad:i,dimRoundingMode:a,dilations:o,inputShape:e},h=Vi.runKernel(nt,u,c);return l?Rs(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const Ih=to({depthwiseConv2dNativeBackpropInput_:Ch});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Oh({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:o=[1,1],dimRoundingMode:a,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(!1===xh(Vi.state.gradientDepth,l)){let h=wl(e,t,n,r,i,o,a);return null!=s&&(h=ls(h,s)),yh(h,l,u,c)}const h=Zi(e,"x","depthwiseConv2d","float32"),d=Zi(t,"filter","depthwiseConv2d","float32");let p=h,f=!1;3===h.rank&&(f=!0,p=Rs(h,[1,h.shape[0],h.shape[1],h.shape[2]])),b(4===p.rank,(()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${p.rank}.`)),b(4===d.rank,(()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`)),b(p.shape[3]===d.shape[2],(()=>`Error in fused depthwiseConv2d: number of input channels (${p.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`)),null==o&&(o=[1,1]),b(Es(n,o),(()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`)),$s("fused depthwiseConv2d",r,a);const m=vs(p.shape,d.shape,n,o,r,a,!0);let g,v;null!=s&&(g=Zi(s,"bias","fused conv2d"),[g]=$i(g,h),_a(m.outShape,g.shape)),null!=u&&(v=Zi(u,"prelu weights","fused depthwiseConv2d"));const y=(e,t)=>{b(Ns(o),(()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`));const[i,s,u,c]=t,h=bh(e,u,l),d=Ih(s.shape,h,i,n,r,o,a),p=Sh(s,h,i.shape,n,r,o,a);if(null!=c){const e=vh(g,h);return[d,p,e]}return[d,p]},x={x:p,filter:d,bias:g,preluActivationWeights:v},w={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a,activation:l,leakyreluAlpha:c};if(null==s){const e=ns(((e,t,n)=>{let r=Vi.runKernel(vr,x,w);return n([t,e,r]),f&&(r=Rs(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:y}}));return e(p,d)}{const e=ns(((e,t,n,r)=>{let i=Vi.runKernel(vr,x,w);return r([t,e,i,n]),f&&(i=Rs(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:y}}));return e(p,d,g)}}to({fusedDepthwiseConv2d_:Oh});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Th({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:i,activation:o="linear",preluActivationWeights:a,leakyreluAlpha:s=.2}){if(!1===xh(Vi.state.gradientDepth,o)){let l=du(e,t,n,r);return null!=i&&(l=ls(l,i)),yh(l,o,a,s)}let l=Zi(e,"a","fused matMul"),u=Zi(t,"b","fused matMul");[l,u]=$i(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],h=r?u.shape[u.rank-1]:u.shape[u.rank-2],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],p=r?u.shape[u.rank-2]:u.shape[u.rank-1],f=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=w(f),v=w(m);b(c===h,(()=>`Error in fused matMul: inner shapes (${c}) and (${h}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`));const y=_a(l.shape.slice(0,-2),u.shape.slice(0,-2)),x=y.concat([d,p]),k=Rs(l,n?[g,c,d]:[g,d,c]),_=Rs(u,r?[v,p,h]:[v,h,p]);let S,C;null!=i&&(S=Zi(i,"bias","fused matMul"),[S]=$i(S,l),_a(x,S.shape)),null!=a&&(C=Zi(a,"prelu weights","fused matMul"));const I=(e,t)=>{const[a,s,l,u]=t,c=bh(Rs(e,l.shape),l,o);let h,d;if(n||r?!n&&r?(h=du(c,s,!1,!1),d=du(c,a,!0,!1)):n&&!r?(h=du(s,c,!1,!0),d=du(a,c,!1,!1)):(h=du(s,c,!0,!0),d=du(c,a,!0,!0)):(h=du(c,s,!1,!0),d=du(a,c,!0,!1)),null!=i){const e=vh(u,c);return[h,d,e]}return[h,d]},O={a:k,b:_,bias:S,preluActivationWeights:C},T={transposeA:n,transposeB:r,activation:o,leakyreluAlpha:s};if(null==i){const e=ns(((e,t,n)=>{const r=Vi.runKernel(gr,O,T);return n([e,t,r]),{value:Rs(r,x),gradFunc:I}}));return e(k,_)}{const e=ns(((e,t,n,r)=>{const i=Vi.runKernel(gr,O,T);return r([e,t,i,n]),{value:Rs(i,x),gradFunc:I}}));return e(k,_,S)}}const Nh=to({fusedMatMul_:Th});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Eh(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Dh(e,t,n){const r=1-e%2,i=new Float32Array(e);for(let o=0;o<e;++o){const a=2*Math.PI*o/(e+r-1);i[o]=t-n*Math.cos(a)}return Fc(i,"float32")}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function $h(e){return Dh(e,.54,.46)}to({hammingWindow_:$h});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ah(e){return Dh(e,.5,.5)}const Rh=to({hannWindow_:Ah});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Mh(e,t,n){if(y(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=Xi(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return io(e,t,r,n)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Fh(e,t,n,r=!1,i=0){let o=0;const a=[];while(o+t<=e.size)a.push(pc(e,o,t)),o+=n;if(r)while(o<e.size){const r=o+t-e.size,s=Js([pc(e,o,t-r),jl([r],i)]);a.push(s),o+=n}return 0===a.length?Mh([],[0,t]):Rs(Js(a),[a.length,t])}const Ph=to({frame_:Fh});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function jh(e,t,n,r,i=Rh){null==r&&(r=Eh(t));const o=Ph(e,t,n),a=nu(o,i(t));return ah(a,r)}to({stft_:jh});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Bh(e,t,n,r,i="bilinear",o=0){const a=Zi(e,"image","cropAndResize"),s=Zi(t,"boxes","cropAndResize","float32"),l=Zi(n,"boxInd","cropAndResize","int32"),u=s.shape[0];b(4===a.rank,(()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`)),b(2===s.rank&&4===s.shape[1],(()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${s.shape}.`)),b(1===l.rank&&l.shape[0]===u,(()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${s.shape}.`)),b(2===r.length,(()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`)),b(r[0]>=1&&r[1]>=1,(()=>`cropSize must be atleast [1,1], but was ${r}`)),b("bilinear"===i||"nearest"===i,(()=>`method must be bilinear or nearest, but was ${i}`));const c={image:a,boxes:s,boxInd:l},h={method:i,extrapolationValue:o,cropSize:r},d=Vi.runKernel(Je,c,h);return d}const Lh=to({cropAndResize_:Bh});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zh(e){const t=Zi(e,"image","flipLeftRight","float32");b(4===t.rank,(()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`));const n={image:t},r=Vi.runKernel(vt,n,{});return r}const Vh=to({flipLeftRight_:zh});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Uh(e){const t=Zi(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];b(t.rank>=2,(()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`)),b(1===r,(()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`));const i=new Array(t.rank);return i.fill(1,0,n),i[n]=3,Ml(t,i)}const Wh=to({grayscaleToRGB_:Uh});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Hh(e,t,n=0,r=.5){const i=Zi(e,"image","rotateWithOffset","float32");b(4===i.rank,(()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`));const o={image:i},a={radians:t,fillValue:n,center:r},s=Vi.runKernel(mr,o,a);return s}const Gh=to({rotateWithOffset_:Hh});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function qh(e,t,n,r,i,o){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==o&&(o=0);const a=e.shape[0];return n=Math.min(n,a),b(0<=r&&r<=1,(()=>`iouThreshold must be in [0, 1], but was '${r}'`)),b(2===e.rank,(()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`)),b(4===e.shape[1],(()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`)),b(1===t.rank,(()=>"scores must be a 1D tensor")),b(t.shape[0]===a,(()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${t.shape[0]}`)),b(0<=o&&o<=1,(()=>`softNmsSigma must be in [0, 1], but was '${o}'`)),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Yh(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){const o=Zi(e,"boxes","nonMaxSuppression","float32"),a=Zi(t,"scores","nonMaxSuppression","float32"),s=qh(o,a,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return Vi.runKernel(sn,{boxes:o,scores:a},l)}const Xh=to({nonMaxSuppression_:Yh});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Kh(e,t,n){const r=Jh(e,t,n),i=r<0?-(r+1):r;e.splice(i,0,t)}function Jh(e,t,n){return Qh(e,t,n||Zh)}function Zh(e,t){return e>t?1:e<t?-1:0}function Qh(e,t,n){let r=0,i=e.length,o=0,a=!1;while(r<i){o=r+(i-r>>>1);const s=n(t,e[o]);s>0?r=o+1:(i=o,a=!s)}return a?r:-r-1}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ed(e,t,n,r,i){return rd(e,t,n,r,i,0)}function td(e,t,n,r,i,o){return rd(e,t,n,r,i,0,!1,o,!0)}function nd(e,t,n,r,i,o){return rd(e,t,n,r,i,o,!0)}function rd(e,t,n,r,i,o,a=!1,s=!1,l=!1){const u=[];for(let g=0;g<t.length;g++)t[g]>i&&u.push({score:t[g],boxIndex:g,suppressBeginIndex:0});u.sort(ad);const c=o>0?-.5/o:0,h=[],d=[];while(h.length<n&&u.length>0){const t=u.pop(),{score:n,boxIndex:o,suppressBeginIndex:a}=t;if(n<i)break;let s=!1;for(let l=h.length-1;l>=a;--l){const n=id(e,o,h[l]);if(n>=r){s=!0;break}if(t.score=t.score*od(r,c,n),t.score<=i)break}t.suppressBeginIndex=h.length,s||(t.score===n?(h.push(o),d.push(t.score)):t.score>i&&Kh(u,t,ad))}const p=h.length,f=n-p;s&&f>0&&(h.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));const m={selectedIndices:h};return a&&(m["selectedScores"]=d),l&&(m["validOutputs"]=p),m}function id(e,t,n){const r=e.subarray(4*t,4*t+4),i=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),p=(s-o)*(l-a),f=(h-u)*(d-c);if(p<=0||f<=0)return 0;const m=Math.max(o,u),g=Math.max(a,c),b=Math.min(s,h),v=Math.min(l,d),y=Math.max(b-m,0)*Math.max(v-g,0);return y/(p+f-y)}function od(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function ad(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function sd(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){const o=Zi(e,"boxes","nonMaxSuppressionAsync"),a=Zi(t,"scores","nonMaxSuppressionAsync"),s=qh(o,a,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const l=await Promise.all([o.data(),a.data()]),u=l[0],c=l[1],{selectedIndices:h}=ed(u,c,n,r,i);return o!==e&&o.dispose(),a!==t&&a.dispose(),Fc(h,"int32")}const ld=sd;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ud(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,o=0){const a=Zi(e,"boxes","nonMaxSuppression"),s=Zi(t,"scores","nonMaxSuppression"),l=qh(a,s,n,r,i,o);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma;const u={boxes:a,scores:s},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o},h=Vi.runKernel(un,u,c);return{selectedIndices:h[0],selectedScores:h[1]}}const cd=to({nonMaxSuppressionWithScore_:ud});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function hd(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,o=0){const a=Zi(e,"boxes","nonMaxSuppressionAsync"),s=Zi(t,"scores","nonMaxSuppressionAsync"),l=qh(a,s,n,r,i,o);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma;const u=await Promise.all([a.data(),s.data()]),c=u[0],h=u[1],{selectedIndices:d,selectedScores:p}=nd(c,h,n,r,i,o);return a!==e&&a.dispose(),s!==t&&s.dispose(),{selectedIndices:Fc(d,"int32"),selectedScores:Fc(p)}}const dd=hd;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pd(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,o=!1){const a=Zi(e,"boxes","nonMaxSuppression"),s=Zi(t,"scores","nonMaxSuppression"),l=qh(a,s,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,h=l.scoreThreshold,d={boxes:a,scores:s},p={maxOutputSize:u,iouThreshold:c,scoreThreshold:h,padToMaxOutputSize:o},f=Vi.runKernel(ln,d,p);return{selectedIndices:f[0],validOutputs:f[1]}}const fd=to({nonMaxSuppressionPadded_:pd});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function md(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,o=!1){const a=Zi(e,"boxes","nonMaxSuppressionAsync"),s=Zi(t,"scores","nonMaxSuppressionAsync"),l=qh(a,s,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,h=l.scoreThreshold,[d,p]=await Promise.all([a.data(),s.data()]),{selectedIndices:f,validOutputs:m}=td(d,p,u,c,h,o);return a!==e&&a.dispose(),s!==t&&s.dispose(),{selectedIndices:Fc(f,"int32"),validOutputs:rs(m,"int32")}}const gd=md;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function bd(e,t,n=!1,r=!1){const i=Zi(e,"images","resizeBilinear");b(3===i.rank||4===i.rank,(()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`)),b(2===t.length,(()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`)),b(!1===r||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let o=i,a=!1;3===i.rank&&(a=!0,o=Rs(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const[]=t,s={images:o},l={alignCorners:n,halfPixelCenters:r,size:t},u=Vi.runKernel(Sn,s,l);return a?Rs(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const vd=to({resizeBilinear_:bd});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function yd(e,t,n=!1,r=!1){const i=Zi(e,"images","resizeNearestNeighbor");b(3===i.rank||4===i.rank,(()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`)),b(2===t.length,(()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`)),b("float32"===i.dtype||"int32"===i.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),b(!1===r||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let o=i,a=!1;3===i.rank&&(a=!0,o=Rs(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const[]=t,s={images:o},l={alignCorners:n,halfPixelCenters:r,size:t},u=Vi.runKernel(kn,s,l);return a?Rs(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const xd=to({resizeNearestNeighbor_:yd});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function wd(e,t,n){const r=Zi(e,"x","bincount"),i=Zi(t,"weights","bincount");b("int32"===r.dtype,(()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`)),b(n>=0,(()=>`size must be non-negative, but got ${n}.`)),b(i.size===r.size||0===i.size,(()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`));const o={x:r,weights:i},a={size:n};return Vi.runKernel($e,o,a)}const kd=to({bincount_:wd});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function _d(e,t){let n=Zi(e,"a","lessEqual","string_or_numeric"),r=Zi(t,"b","lessEqual","string_or_numeric");[n,r]=$i(n,r),_a(n.shape,r.shape);const i={a:n,b:r};return Vi.runKernel(Rt,i)}const Sd=to({lessEqual_:_d});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Cd(e){const t=Zi(e,"x","round"),n={x:t};return Vi.runKernel(Tn,n)}const Id=to({round_:Cd});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Od(e,t,n=1,r="float32"){if(0===n)throw new Error("Cannot have a step of zero");const i={start:e,stop:t,step:n,dtype:r};return Vi.runKernel(bn,{},i)}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Td(e,t="binary",n=!1,r=.5){const i=Zi(e,"image","threshold"),o=.2989,a=.587,s=.114,l=i.shape[0]*i.shape[1];let u,c,h,d,p=nu(Fc([r]),255);if(b(3===i.rank,(()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`)),b(3===i.shape[2]||1===i.shape[2],(()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`)),b("int32"===i.dtype||"float32"===i.dtype,(()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`)),b("otsu"===t||"binary"===t,(()=>`Method must be binary or otsu, but was ${t}`)),3===i.shape[2]){[u,c,h]=Oc(i,[1,1,1],-1);const e=nu(u,o),t=nu(c,a),n=nu(h,s);d=ls(ls(e,t),n)}else d=e;if("otsu"===t){const e=kd(ea(Id(d),"int32"),oo([]),256);p=Nd(e,l)}const f=n?Sd(d,p):Wl(d,p),m=ea(nu(f,255),"int32");return m}function Nd(e,t){let n,r,i,o,a,s,l=Fc([-1]),u=Fc([0]),c=Fc([0]);for(let h=0;h<e.size-1;h++){n=pc(e,0,h+1),r=pc(e,h+1),a=Cl(au(n),t),s=Cl(au(r),t);const d=au(nu(n,Od(0,n.size)));i=Cl(d,au(n));const p=jl(r.shape,n.size),f=ls(Od(0,r.size),p),m=nu(r,f);o=Cl(au(m),au(r));const g=iu(i,o),b=iu(i,o),v=nu(a,s);c=nu(nu(v,g),b);const y=Wl(c,u);u=Hc(y,c,u),l=Hc(y,Fc([h]),l)}return l}const Ed=to({threshold_:Td});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Dd(e,t,n="nearest",r="constant",i=0,o){const a=Zi(e,"image","transform","float32"),s=Zi(t,"transforms","transform","float32");b(4===a.rank,(()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`)),b(2===s.rank&&(s.shape[0]===a.shape[0]||1===s.shape[0])&&8===s.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),b(null==o||2===o.length,(()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`));const l={image:a,transforms:s},u={interpolation:n,fillMode:r,fillValue:i,outputShape:o};return Vi.runKernel(sr,l,u)}const $d=to({transform_:Dd});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ad(e,t,n){b(t%1===0,(()=>`bandPart(): numLower must be an integer, got ${t}.`)),b(n%1===0,(()=>`bandPart(): numUpper must be an integer, got ${n}.`));const r=Zi(e,"a","bandPart");b(r.rank>=2,(()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`));const i=r.shape,[o,a]=r.shape.slice(-2);if(!(t<=o))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${o}).`);if(!(n<=a))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`);t<0&&(t=o),n<0&&(n=a);const s=Rs(Od(0,o,1,"int32"),[-1,1]),l=Od(0,a,1,"int32"),u=iu(s,l),c=cu(Sd(u,rs(+t,"int32")),Gl(u,rs(-n,"int32"))),h=zu([o,a],r.dtype);return Rs(Ac(Lc(Rs(r,[-1,o,a])).map((e=>Hc(c,e,h)))),i)}const Rd=to({bandPart_:Ad});
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Md(e,t=null,n=!1){const r=Zi(e,"x","min"),i={x:r},o={axis:t,keepDims:n};return Vi.runKernel(Zt,i,o)}const Fd=to({min_:Md});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Pd(e,t){let n=Zi(e,"base","pow"),r=Zi(t,"exp","pow");[n,r]=$i(n,r);const i={a:n,b:r};return Vi.runKernel(fn,i)}const jd=to({pow_:Pd});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Bd(e,t="euclidean",n=null,r=!1){e=Zi(e,"x","norm");const i=Ld(e,t,n);let o=i.shape;if(r){const t=T(n,e.shape);o=Iu(i.shape,t)}return Rs(i,o)}function Ld(e,t,n=null){if(0===e.rank)return as(e);if(1!==e.rank&&null===n)return Ld(Rs(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return au(as(e),n);if(t===1/0)return eu(as(e),n);if(t===-1/0)return Fd(as(e),n);if("euclidean"===t||2===t)return Nc(au(jd(as(e),rs(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&2===n.length){if(1===t)return eu(au(as(e),n[0]),n[1]-1);if(t===1/0)return eu(au(as(e),n[1]),n[0]);if(t===-1/0)return Fd(au(as(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Nc(au($u(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const zd=to({norm_:Bd});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Vd(e){let t;if(Array.isArray(e)){t=!1,b(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)b(e[t].shape[0]===n,(()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`))}else t=!0,e=Oc(e,e.shape[0],0).map((e=>Dc(e,[0])));b(e.length<=e[0].shape[0],(()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`));const n=[],r=e;for(let i=0;i<e.length;++i)n.push(Vi.tidy((()=>{let e=r[i];if(i>0)for(let t=0;t<i;++t){const r=nu(au(nu(n[t],e)),n[t]);e=iu(e,r)}return Cl(e,zd(e,"euclidean"))})));return t?Ac(n,0):n}const Ud=to({gramSchmidt_:Vd});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Wd(e,t=!1){if(b(e.rank>=2,(()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`)),2===e.rank)return Hd(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),r=Lc(Rs(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],o=[];r.forEach((e=>{const[n,r]=Hd(e,t);i.push(n),o.push(r)}));const a=Rs(Ac(i,0),e.shape),s=Rs(Ac(o,0),e.shape);return[a,s]}}function Hd(e,t=!1){return Vi.tidy((()=>{b(2===e.shape.length,(()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`));const n=e.shape[0],r=e.shape[1];let i=Pl(n),o=na(e);const a=Mh([[1]],[1,1]);let s=na(a);const l=n>=r?r:n;for(let e=0;e<l;++e){const t=o,l=s,u=i;[s,o,i]=Vi.tidy((()=>{const t=pc(o,[e,e],[n-e,1]),l=zd(t),u=pc(o,[e,e],[1,1]),c=Hc(Wl(u,0),Mh([[-1]]),Mh([[1]])),h=iu(u,nu(c,l)),d=Cl(t,h);s=1===d.shape[0]?na(a):Js([a,pc(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);const p=Fu(Cl(du(c,h),l)),f=pc(o,[e,0],[n-e,r]),m=nu(p,s),g=Qc(s);if(0===e)o=iu(f,du(m,du(g,f)));else{const t=iu(f,du(m,du(g,f)));o=Js([pc(o,[0,0],[e,r]),t],0)}const b=Qc(m),v=pc(i,[0,e],[n,i.shape[1]-e]);if(0===e)i=iu(v,du(du(v,s),b));else{const t=iu(v,du(du(v,s),b));i=Js([pc(i,[0,0],[n,e]),t],1)}return[s,o,i]})),Ja([t,l,u])}return!t&&n>r&&(i=pc(i,[0,0],[n,r]),o=pc(o,[0,0],[r,r])),[i,o]}))}const Gd=to({qr_:Wd});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var qd;function Yd(e,t,n=qd.SUM_BY_NONZERO_WEIGHTS){const r=Zi(e,"losses","computeWeightedLoss");let i=null;null!=t&&(i=Zi(t,"weights","computeWeightedLoss"));const o=null==i?r:nu(r,i);if(n===qd.NONE)return o;if(n===qd.SUM)return au(o);if(n===qd.MEAN){if(null==i)return xu(o);{const e=r.size/i.size,t=Cl(au(o),au(i));return e>1?Cl(t,rs(e)):t}}if(n===qd.SUM_BY_NONZERO_WEIGHTS){if(null==i)return Cl(au(o),rs(r.size));{const e=nu(i,Vu(r.shape)),t=ea(au(ju(e,rs(0))),"float32");return Cl(au(o),t)}}throw Error(`Unknown reduction: ${n}`)}(function(e){e[e["NONE"]=0]="NONE",e[e["MEAN"]=1]="MEAN",e[e["SUM"]=2]="SUM",e[e["SUM_BY_NONZERO_WEIGHTS"]=3]="SUM_BY_NONZERO_WEIGHTS"})(qd||(qd={}));const Xd=to({computeWeightedLoss_:Yd});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Kd(e,t,n,r=qd.SUM_BY_NONZERO_WEIGHTS){const i=Zi(e,"labels","absoluteDifference"),o=Zi(t,"predictions","absoluteDifference");let a=null;null!=n&&(a=Zi(n,"weights","absoluteDifference")),v(i.shape,o.shape,"Error in absoluteDifference: ");const s=as(iu(i,o));return Xd(s,a,r)}to({absoluteDifference_:Kd});function Jd(e,t,n,r,i=qd.SUM_BY_NONZERO_WEIGHTS){const o=Zi(e,"labels","cosineDistance"),a=Zi(t,"predictions","cosineDistance");let s=null;null!=r&&(s=Zi(r,"weights","cosineDistance")),v(o.shape,a.shape,"Error in cosineDistance: ");const l=rs(1),u=iu(l,au(nu(o,a),n,!0));return Xd(u,s,i)}to({cosineDistance_:Jd});function Zd(e,t,n,r=qd.SUM_BY_NONZERO_WEIGHTS){let i=Zi(e,"labels","hingeLoss");const o=Zi(t,"predictions","hingeLoss");let a=null;null!=n&&(a=Zi(n,"weights","hingeLoss")),v(i.shape,o.shape,"Error in hingeLoss: ");const s=rs(1);i=iu(nu(rs(2),i),s);const l=rc(iu(s,nu(i,o)));return Xd(l,a,r)}to({hingeLoss_:Zd});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Qd(e,t,n,r=1,i=qd.SUM_BY_NONZERO_WEIGHTS){const o=Zi(e,"labels","huberLoss"),a=Zi(t,"predictions","huberLoss");let s=null;null!=n&&(s=Zi(n,"weights","huberLoss")),v(o.shape,a.shape,"Error in huberLoss: ");const l=rs(r),u=as(iu(a,o)),c=ku(u,l),h=iu(u,c),d=ls(nu(rs(.5),$u(c)),nu(l,h));return Xd(d,s,i)}to({huberLoss_:Qd});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ep(e,t,n,r=1e-7,i=qd.SUM_BY_NONZERO_WEIGHTS){const o=Zi(e,"labels","logLoss"),a=Zi(t,"predictions","logLoss");let s=null;null!=n&&(s=Zi(n,"weights","logLoss")),v(o.shape,a.shape,"Error in logLoss: ");const l=rs(1),u=rs(r),c=Fu(nu(o,Kl(ls(a,u)))),h=nu(iu(l,o),Kl(ls(iu(l,a),u))),d=iu(c,h);return Xd(d,s,i)}to({logLoss_:ep});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function tp(e,t){let n=Zi(e,"a","squaredDifference"),r=Zi(t,"b","squaredDifference");[n,r]=$i(n,r),_a(n.shape,r.shape);const i={a:n,b:r},o={};return Vi.runKernel(Kn,i,o)}const np=to({squaredDifference_:tp});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function rp(e,t,n,r=qd.SUM_BY_NONZERO_WEIGHTS){const i=Zi(e,"labels","meanSquaredError"),o=Zi(t,"predictions","meanSquaredError");let a=null;null!=n&&(a=Zi(n,"weights","meanSquaredError")),v(i.shape,o.shape,"Error in meanSquaredError: ");const s=np(i,o);return Xd(s,a,r)}to({meanSquaredError_:rp});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ip(e,t){const n=Zi(e,"labels","sigmoidCrossEntropyWithLogits"),r=Zi(t,"logits","sigmoidCrossEntropyWithLogits");v(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=rc(r),o=nu(r,n),a=Zl(Dl(Fu(as(r))));return ls(iu(i,o),a)}function op(e,t,n,r=0,i=qd.SUM_BY_NONZERO_WEIGHTS){let o=Zi(e,"multiClassLabels","sigmoidCrossEntropy");const a=Zi(t,"logits","sigmoidCrossEntropy");let s=null;if(null!=n&&(s=Zi(n,"weights","sigmoidCrossEntropy")),v(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){const e=rs(r),t=rs(1),n=rs(.5);o=ls(nu(o,iu(t,e)),nu(n,e))}const l=ip(o,a);return Xd(l,s,i)}to({sigmoidCrossEntropy_:op});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ap(e,t=null,n=!1){const r=Zi(e,"x","logSumExp"),i=T(t,r.shape),o=eu(r,i,!0),a=iu(r,o),s=Dl(a),l=au(s,i),u=Kl(l),c=ls(Rs(o,u.shape),u);if(n){const e=Iu(c.shape,i);return Rs(c,e)}return c}const sp=to({logSumExp_:ap});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function lp(e,t,n=-1){if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);const r=ns(((e,t,r)=>{const i=!0,o=sp(t,[n],i),a=iu(ea(t,"float32"),o);r([e,a]);const s=Fu(nu(a,e)),l=au(s,[n]),u=(e,t)=>{const[r,i]=t,o=Iu(e.shape,[n]);return[nu(Rs(e,o),iu(ea(r,"float32"),Dl(i))),nu(Rs(e,o),iu(Dl(i),ea(r,"float32")))]};return{value:l,gradFunc:u}}));return r(e,t)}function up(e,t,n,r=0,i=qd.SUM_BY_NONZERO_WEIGHTS){let o=Zi(e,"onehotLabels","softmaxCrossEntropy");const a=Zi(t,"logits","softmaxCrossEntropy");let s=null;if(null!=n&&(s=Zi(n,"weights","softmaxCrossEntropy")),v(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){const e=rs(r),t=rs(1),n=rs(o.shape[1]);o=ls(nu(o,iu(t,e)),Cl(e,n))}const l=lp(o,a);return Xd(l,s,i)}to({softmaxCrossEntropy_:up});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function cp(e,t,n,r){const i=Zi(e,"indices","sparseFillEmptyRows","int32"),o=Zi(t,"values","sparseFillEmptyRows"),a=Zi(n,"denseShape","sparseFillEmptyRows","int32"),s=Zi(r,"defaultValue","sparseFillEmptyRows",o.dtype);if(2!==i.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${i.shape}`);if(1!==o.rank)throw new Error(`Values should be Tensor1D but received shape ${o.shape}`);if(1!==a.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${a.shape}`);if(0!==s.rank)throw new Error(`Default value should be a scalar but received shape ${s.shape}`);const l={indices:i,values:o,denseShape:a,defaultValue:s},u=Vi.runKernel(Hn,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}to({sparseFillEmptyRows_:cp});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function hp(e,t,n){const r=Zi(e,"inputIndices","sparseReshape","int32"),i=Zi(t,"inputShape","sparseReshape","int32"),o=Zi(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${r.shape}`);if(1!==i.rank)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(1!==o.rank)throw new Error(`New shape should be Tensor1D but received shape ${o.shape}`);const a={inputIndices:r,inputShape:i,newShape:o},s=Vi.runKernel(Gn,a);return{outputIndices:s[0],outputShape:s[1]}}to({sparseReshape_:hp});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function dp(e,t,n){const r=Zi(e,"data","sparseSegmentMean"),i=Zi(t,"indices","sparseSegmentMean","int32"),o=Zi(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${i.shape}`);if(1!==o.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${o.shape}`);const a={data:r,indices:i,segmentIds:o};return Vi.runKernel(qn,a)}to({sparseSegmentMean_:dp});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pp(e,t,n){const r=Zi(e,"data","sparseSegmentSum"),i=Zi(t,"indices","sparseSegmentSum","int32"),o=Zi(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${i.shape}`);if(1!==o.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${o.shape}`);const a={data:r,indices:i,segmentIds:o};return Vi.runKernel(Yn,a)}to({sparseSegmentSum_:pp});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function fp(e,t,n,r,i,o,a,s){const l=Zi(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=Zi(t,"dataSplits","stringNGrams");if("int32"!==u.dtype)throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:i,rightPad:o,padWidth:a,preserveShortSequences:s},h={data:l,dataSplits:u},d=Vi.runKernel(Qn,h,c);return{nGrams:d[0],nGramsSplits:d[1]}}to({stringNGrams_:fp});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mp(e,t,n=!0){const r=Zi(e,"input","stringSplit","string"),i=Zi(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(0!==i.rank)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);const o={skipEmpty:n},a={input:r,delimiter:i},s=Vi.runKernel(er,a,o);return{indices:s[0],values:s[1],shape:s[2]}}to({stringSplit_:mp});
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function gp(e,t){const n=Zi(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const i={input:n};return Vi.runKernel(tr,i,r)}to({stringToHashBucketFast_:gp});const bp={flipLeftRight:Vh,grayscaleToRGB:Wh,resizeNearestNeighbor:xd,resizeBilinear:vd,rotateWithOffset:Gh,cropAndResize:Lh,nonMaxSuppression:Xh,nonMaxSuppressionAsync:ld,nonMaxSuppressionWithScore:cd,nonMaxSuppressionWithScoreAsync:dd,nonMaxSuppressionPadded:fd,nonMaxSuppressionPaddedAsync:gd,threshold:Ed,transform:$d},vp={bandPart:Rd,gramSchmidt:Ud,qr:Gd};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class yp extends is{constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=Vi.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);t.forEach(((t,n)=>{const r=Vi.registeredVariables[t],i=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${t}/accum_grad`,variable:Ka((()=>qc(r).variable(i)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${t}/accum_var`,variable:Ka((()=>qc(r).variable(i)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const a=this.accumulatedGrads[n].variable,s=this.accumulatedUpdates[n].variable;Ka((()=>{const e=ls(nu(a,this.rho),nu($u(o),1-this.rho)),t=nu(Cl(Nc(ls(s,this.epsilon)),Nc(ls(a,this.epsilon))),o),n=ls(nu(s,this.rho),nu($u(t),1-this.rho));a.assign(e),s.assign(n);const i=ls(nu(t,-this.learningRate),r);r.assign(i)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(Ja(this.accumulatedGrads.map((e=>e.variable))),Ja(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=e.length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t["learningRate"],t["rho"],t["epsilon"])}}yp.className="Adadelta",Ga(yp);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class xp extends is{constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);t.forEach(((t,n)=>{const r=Vi.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:`${t}/accumulator`,variable:Ka((()=>jl(r.shape,this.initialAccumulatorValue).variable(e)))}}const i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;const o=this.accumulatedGrads[n].variable;Ka((()=>{const e=ls(o,$u(i));o.assign(e);const t=ls(nu(Cl(i,Nc(ls(e,Vi.backend.epsilon()))),-this.learningRate),r);r.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&Ja(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(t)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t["learningRate"],t["initialAccumulatorValue"])}}xp.className="Adagrad",Ga(xp);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class wp extends is{constructor(e,t,n,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Ka((()=>{this.accBeta1=rs(t).variable(),this.accBeta2=rs(n).variable()})),null==r&&(this.epsilon=Vi.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);Ka((()=>{const n=iu(1,this.accBeta1),r=iu(1,this.accBeta2);t.forEach(((t,i)=>{const o=Vi.registeredVariables[t],a=!1;null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:`${t}/m`,variable:Ka((()=>qc(o).variable(a)))}),null==this.accumulatedSecondMoment[i]&&(this.accumulatedSecondMoment[i]={originalName:`${t}/v`,variable:Ka((()=>qc(o).variable(a)))});const s=Array.isArray(e)?e[i].tensor:e[t];if(null==s)return;const l=this.accumulatedFirstMoment[i].variable,u=this.accumulatedSecondMoment[i].variable,c=ls(nu(l,this.beta1),nu(s,1-this.beta1)),h=ls(nu(u,this.beta2),nu($u(s),1-this.beta2)),d=Cl(c,n),p=Cl(h,r);l.assign(c),u.assign(h);const f=ls(nu(Cl(d,ls(Nc(p),this.epsilon)),-this.learningRate),o);o.assign(f)})),this.accBeta1.assign(nu(this.accBeta1,this.beta1)),this.accBeta2.assign(nu(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Ja(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&Ja(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),Ka((()=>{this.accBeta1.assign(jd(this.beta1,this.iterations_+1)),this.accBeta2.assign(jd(this.beta2,this.iterations_+1))}));const t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t["learningRate"],t["beta1"],t["beta2"],t["epsilon"])}}wp.className="Adam",Ga(wp);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class kp extends is{constructor(e,t,n,r=null,i=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Ka((()=>{this.iteration=rs(0).variable(),this.accBeta1=rs(t).variable()})),null==r&&(this.epsilon=Vi.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);Ka((()=>{const n=iu(1,this.accBeta1),r=Cl(-this.learningRate,ls(nu(this.iteration,this.decay),1));t.forEach(((t,i)=>{const o=Vi.registeredVariables[t],a=!1;null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:`${t}/m`,variable:qc(o).variable(a)}),null==this.accumulatedWeightedInfNorm[i]&&(this.accumulatedWeightedInfNorm[i]={originalName:`${t}/v`,variable:qc(o).variable(a)});const s=Array.isArray(e)?e[i].tensor:e[t];if(null==s)return;const l=this.accumulatedFirstMoment[i].variable,u=this.accumulatedWeightedInfNorm[i].variable,c=ls(nu(l,this.beta1),nu(s,1-this.beta1)),h=nu(u,this.beta2),d=as(s),p=vu(h,d);l.assign(c),u.assign(p);const f=ls(nu(Cl(r,n),Cl(c,ls(p,this.epsilon))),o);o.assign(f)})),this.iteration.assign(ls(this.iteration,1)),this.accBeta1.assign(nu(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Ja(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&Ja(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t["learningRate"],t["beta1"],t["beta2"],t["epsilon"],t["decay"])}}kp.className="Adamax",Ga(kp);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class _p extends is{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);t.forEach(((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const i=Vi.registeredVariables[t];Ka((()=>{const e=ls(nu(this.c,r),i);i.assign(e)}))})),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Za(rs(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),0!==e.length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t["learningRate"])}}_p.className="SGD",Ga(_p);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Sp extends _p{constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=rs(this.momentum)}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);t.forEach(((t,n)=>{const r=Vi.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:`${t}/momentum`,variable:Ka((()=>qc(r).variable(e)))}}const i=this.accumulations[n].variable,o=Array.isArray(e)?e[n].tensor:e[t];null!=o&&Ka((()=>{let e;const t=ls(nu(this.m,i),o);e=this.useNesterov?ls(nu(this.c,ls(o,nu(t,this.m))),r):ls(nu(this.c,t),r),i.assign(t),r.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&Ja(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(t)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t["learningRate"],t["momentum"],t["useNesterov"])}}Sp.className="Momentum",Ga(Sp);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Cp extends is{constructor(e,t=.9,n=0,r=null,i=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,null==r&&(this.epsilon=Vi.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);t.forEach(((t,n)=>{const r=Vi.registeredVariables[t],i=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${t}/rms`,variable:Ka((()=>qc(r).variable(i)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${t}/momentum`,variable:Ka((()=>qc(r).variable(i)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${t}/mg`,variable:Ka((()=>qc(r).variable(i)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const a=this.accumulatedMeanSquares[n].variable,s=this.accumulatedMoments[n].variable;Ka((()=>{const e=ls(nu(a,this.decay),nu($u(o),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,i=ls(nu(t,this.decay),nu(o,1-this.decay)),l=Cl(nu(o,this.learningRate),Nc(iu(e,ls($u(i),this.epsilon)))),u=ls(nu(s,this.momentum),l);a.assign(e),t.assign(i),s.assign(u);const c=iu(r,u);r.assign(c)}else{const e=ls(nu(a,this.decay),nu($u(o),1-this.decay)),t=ls(nu(s,this.momentum),Cl(nu(o,this.learningRate),Nc(ls(e,this.epsilon))));a.assign(e),s.assign(t);const n=iu(r,t);r.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&Ja(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&Ja(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&Ja(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t["learningRate"],t["decay"],t["momentum"],t["epsilon"],t["centered"])}}Cp.className="RMSProp",Ga(Cp);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Ip{static sgd(e){return new _p(e)}static momentum(e,t,n=!1){return new Sp(e,t,n)}static rmsprop(e,t=.9,n=0,r=null,i=!1){return new Cp(e,t,n,r,i)}static adam(e=.001,t=.9,n=.999,r=null){return new wp(e,t,n,r)}static adadelta(e=.001,t=.95,n=null){return new yp(e,t,n)}static adamax(e=.002,t=.9,n=.999,r=null,i=0){return new kp(e,t,n,r,i)}static adagrad(e,t=.1){return new xp(e,t)}}const Op={sgd:Ip.sgd,momentum:Ip.momentum,adadelta:Ip.adadelta,adagrad:Ip.adagrad,rmsprop:Ip.rmsprop,adamax:Ip.adamax,adam:Ip.adam};n(4633);
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Tp=(()=>"undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:e=>e())();function Np(){return new Promise((e=>Tp((()=>e()))))}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ep(e,t){const n=e[0].length;e.forEach(((e,t)=>{b(e.length===n,(()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`))})),b(t>=0&&t<n,(()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`));const r=e[0];e.forEach(((e,i)=>{for(let o=0;o<n;o++)b(o===t||e[o]===r[o],(()=>`Error in concat${n}D: Shape of tensors[${i}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`))}))}function Dp(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const $p=30;function Ap(e){return e<=$p?e:U(e,Math.floor(Math.sqrt(e)))}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Rp(e,t,n){const r=n*("number"===typeof e?e:e[0]),i=t*("number"===typeof e?e:e[1]);return[r,i]}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Mp(e,t,n,r=!0){let i=[];if(r)i=i.concat(t.slice(0)),i.push(e[0]/n),i=i.concat(e.slice(1));else{i=i.concat(e[0]);const n=t.length;for(let r=0;r<n;++r)i=i.concat([e[r+1]/t[r],t[r]]);i=i.concat(e.slice(n+1))}return i}function Fp(e,t,n=!0){const r=[];if(n){r.push(t);for(let n=t+1;n<e;++n)n<=2*t?(r.push(n),r.push(n-(t+1))):r.push(n)}else{const n=[],i=[];for(let r=1;r<e;++r)r>=2*t+1||r%2===1?i.push(r):n.push(r);r.push(...n),r.push(0),r.push(...i)}return r}function Pp(e,t,n,r=!0){const i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(let o=1;o<e.length;++o)o<=t.length?r?i.push(t[o-1]*e[o]):i.push(e[o]/t[o-1]):i.push(e[o]);return i}function jp(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function Bp(e,t,n){const r=e.slice(0,1);for(let i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}function Lp(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===w(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const i=t.shape,o=i[i.length-1];let a=1;for(let h=0;h<i.length-1;++h)a*=i[h];const s=e.shape,l=i.slice();l.pop();let u=1;for(let h=o;h<n;++h)u*=s[h],l.push(s[h]);const c=[...W(e.shape).map((e=>e/u)),1].slice(0,o);return[l,a,u,c]}function zp(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(o+` update.rank < ${i}. `);if(e.length<r+(n.rank-i))throw new Error(o+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+e.length-r)throw new Error(o+" update.rank != "+(i+e.length-r));for(let a=0;a<i;++a)if(n.shape[a]!==t.shape[a])throw new Error(o+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${t.shape[a]}).`);for(let a=0;a<n.rank-i;++a)if(n.shape[a+i]!==e[a+r])throw new Error(o+` updates.shape[${a+i}] (${n.shape[a+i]}) != shape[${a+i}] (${e[a+i]})`)}function Vp(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}zp(n,t,e)}function Up(e,t,n){const r=t.shape.length,i=r>1?t.shape[r-1]:1,o=n.length;let a=1;for(let h=i;h<o;++h)a*=n[h];const s=i<1?1:i,l=w(t.shape)/s,u=[...W(n.slice(0,i)),1],c=w(n);return{sliceRank:i,numUpdates:l,sliceSize:a,strides:u,outputSize:c}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Wp=1.7580993408473768,Hp=1.0507009873554805,Gp=.3275911,qp=.254829592,Yp=-.284496736,Xp=1.421413741,Kp=-1.453152027,Jp=1.061405429;
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Zp(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Qp(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function ef(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=0;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function tf(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=2;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function nf(e,t){const n=e[2*t],r=e[2*t+1];return{real:n,imag:r}}function rf(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function of(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let i=0;i<Math.ceil(e/2);i++){const o=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:n,imag:r}}function af(e,t,n){const r=(n?2:-2)*Math.PI*(e/t),i=Math.cos(r),o=Math.sin(r);return{real:i,imag:o}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const sf="->",lf=/->/g,uf=",",cf="...";function hf(e,t){e=e.replace(/\s/g,"");const n=(e.length-e.replace(lf,"").length)/sf.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${sf}").`);const[r,i]=e.split(sf);b(-1===r.indexOf(cf),(()=>`The ellipsis notation ("${cf}") is not supported yet.`));const o=r.split(uf),a=o.length;if(t!==a)throw new Error(`Expected ${a} input tensors, received ${t}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let d=0;d<i.length;++d){const e=i[d];if(!o.some((t=>-1!==t.indexOf(e))))throw new Error(`Output subscripts contain the label ${e} not present in the input subscripts.`);-1===s.indexOf(e)&&s.push(e)}for(let d=0;d<r.length;++d){const e=r[d];-1===s.indexOf(e)&&e!==uf&&s.push(e)}const l=new Array(o.length);for(let d=0;d<a;++d){if(new Set(o[d].split("")).size!==o[d].length)throw new Error(`Found duplicate axes in input component ${o[d]}. Support for duplicate axes in input is not implemented yet.`);l[d]=[];for(let e=0;e<o[d].length;++e)l[d].push(s.indexOf(o[d][e]))}const u=s.length,c=i.length,h=[];for(let d=c;d<u;++d)h.push(d);return{allDims:s,summedDims:h,idDims:l}}function df(e,t){let n=new Array(e);n.fill(-1);for(let i=0;i<t.length;++i)n[t[i]]=i;const r=[];for(let i=0;i<e;++i)-1===n[i]&&r.push(i);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:r}}function pf(e,t,n){const r=new Array(e);for(let i=0;i<n.length;++i){const e=n[i].shape;for(let n=0;n<t[i].length;++n)void 0===r[t[i][n]]?r[t[i][n]]=e[n]:b(r[t[i][n]]===e[n],(()=>`Expected dimension ${r[t[i][n]]} at axis ${n} of input shaped ${JSON.stringify(e)}, but got dimension ${e[n]}`))}}function ff(e,t){const n=e,r=[];let i=0;0===e.length&&n.push(-1),i=e.length+1;for(let a=0;a<i;++a)r.push([]);const o=[];for(let a=0;a<n.length;++a){const e=n[a],i=gf(t,e);for(const t of i)-1===o.indexOf(t)&&(r[a].push(t),o.push(t))}return{path:n,steps:r}}function mf(e){return e.every(((e,t)=>e===t))}function gf(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function bf(e,t,n=0){let r=[];if("number"===typeof t)b(e.shape[n]%t===0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(t).fill(e.shape[n]/t);else{const i=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);b(i<=1,(()=>"There should be only one negative value in split array."));const o=t.indexOf(-1);if(-1!==o){const r=t.reduce(((e,t)=>t>0?e+t:e));t[o]=e.shape[n]-r}b(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=t}return r}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function vf(e){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${e}`}function yf(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function xf(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function wf(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function kf(e,t){return`size ${e} must be non-negative, not ${t}`}function _f(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Sf(e,t){const n=w(e),r=w(t);return`Input to reshape is a SparseTensor with ${n}\n  dense values, but the requested shape requires a multiple of ${r}. inputShape=${e} outputShape= ${t}`}function Cf(e,t){const n=w(e),r=w(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${e} outputShape=${t}`}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function If(){return"segment ids must be >= 0"}function Of(){return"segment ids are not increasing"}function Tf(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function Nf(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ef(e,t){let n,r=!1;e<=$p?(n=e,r=!0):n=U(e,Math.floor(Math.sqrt(e)));while(!r)n>t||n===e?r=!0:n=U(e,n+1);return n}function Df(e,t,n){const r=[],i=e.length;for(let o=0;o<i;o++)o!==t?r.push(e[o]):r.push(n);return r}function $f(e,t,n,r){const i=t.shape.length,o=e.shape.length;if(0!==r&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>o)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${o}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let h=0;h<r;++h)if(e.shape[h]!==t.shape[h])throw new Error(`x.shape[${h}]: ${e.shape[h]} should be equal to indices.shape[${h}]: ${t.shape[h]}.`);const a=e.shape[n],s=[];let l=1,u=1,c=1;for(let h=0;h<r;++h)s.push(e.shape[h]),l*=e.shape[h];for(let h=r;h<n;h++)s.push(e.shape[h]),u*=e.shape[h];for(let h=r;h<i;h++)s.push(t.shape[h]);for(let h=n+1;h<o;h++)s.push(e.shape[h]),c*=e.shape[h];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:a,outputShape:s}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Af(e){try{return e.map((e=>Qr(e)))}catch(mY){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${mY}`)}}function Rf(e){return e.map((e=>Zr(e)))}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Mf(e,t){const n=[];for(let o=0;o<t.length;o++)t[o]&&n.push(o);const r=Zo(e,"int32"),i=Zo([n.length,e.length],"int32");for(let o=0;o<n.length;o++){const t=r.indexToLoc(n[o]),a=o*e.length;i.values.set(t,a)}return i.toTensor()}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Ff={kernelName:de,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nu(e,gh(ea(n,"float32"),-1))}}},Pf={kernelName:pe,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=$u(ea(n,"float32")),r=Nc(iu(rs(1),t));return Fu(Cl(e,r))}}}},jf={kernelName:fe,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Nc(iu($u(ea(n,"float32")),1));return Cl(e,t)}}}},Bf={kernelName:me,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=_a(n.shape,r.shape),o=()=>{let t=e;const r=ka(n.shape,i);return r.length>0&&(t=au(t,r)),Rs(t,n.shape)},a=()=>{let t=e;const n=ka(r.shape,i);return n.length>0&&(t=au(t,n)),Rs(t,r.shape)};return{a:o,b:a}}},Lf={kernelName:ge,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach(((t,r)=>{n[r]=()=>e.clone()})),n}},zf={kernelName:ye,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>qc(n)}}},Vf={kernelName:xe,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>qc(n)}}},Uf={kernelName:we,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Cl(e,Nc(iu(rs(1),$u(ea(n,"float32")))))}}},Wf={kernelName:ke,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Nc(ls(rs(1),$u(ea(n,"float32"))));return Cl(e,t)}}}},Hf={kernelName:Ce,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=_a(n.shape,r.shape),o=()=>{const t=ls($u(n),$u(r));let o=nu(e,Cl(r,t));const a=ka(n.shape,i);return a.length>0&&(o=au(o,a)),Rs(o,n.shape)},a=()=>{const t=ls($u(n),$u(r));let o=Fu(nu(e,Cl(n,t)));const a=ka(r.shape,i);return a.length>0&&(o=au(o,a)),Rs(o,r.shape)};return{a:o,b:a}}},Gf={kernelName:_e,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Cl(e,ls($u(ea(n,"float32")),1))}}},qf={kernelName:Se,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Cl(e,iu(rs(1),$u(ea(n,"float32"))))}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Yf(e,t,n,r,i,o){const a=Zi(e,"dy","avgPool3dGrad"),s=Zi(t,"input","avgPool3dGrad");let l=a,u=s,c=!1;4===s.rank&&(c=!0,l=Rs(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),u=Rs(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),b(5===l.rank,(()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`)),b(5===u.rank,(()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`)),$s("avgPool3dGrad",i,o);const h={dy:l,input:u},d={filterSize:n,strides:r,pad:i,dimRoundingMode:o},p=Vi.runKernel(Ne,h,d);return c?Rs(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const Xf=to({avgPool3dGrad_:Yf}),Kf={kernelName:Te,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:o,pad:a,dimRoundingMode:s}=n;return{x:()=>Xf(e,r,i,o,a,s)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Jf(e,t,n,r,i){const o=Zi(e,"dy","avgPoolGrad"),a=Zi(t,"input","avgPoolGrad");b(a.rank===o.rank,(()=>`Rank of input (${a.rank}) does not match rank of dy (${o.rank})`));let s=a,l=o,u=!1;3===a.rank&&(u=!0,s=Rs(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=Rs(o,[1,o.shape[0],o.shape[1],o.shape[2]])),b(4===l.rank,(()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`)),b(4===s.rank,(()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${s.rank}.`));const c={dy:l,input:s},h={filterSize:n,strides:r,pad:i},d=Vi.runKernel(Oe,c,h);return u?Rs(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Zf=to({avgPoolGrad_:Jf}),Qf={kernelName:Ie,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:o,pad:a}=n;return{x:()=>Zf(e,r,i,o,a)}}},em={kernelName:Ee,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,i]=t,{transposeA:o,transposeB:a}=n;return o||a?!o&&a?{a:()=>du(e,i,!1,!1),b:()=>du(e,r,!0,!1)}:o&&!a?{a:()=>du(i,e,!1,!0),b:()=>du(r,e,!1,!1)}:{a:()=>du(i,e,!0,!0),b:()=>du(e,r,!0,!0)}:{a:()=>du(e,i,!1,!0),b:()=>du(r,e,!0,!1)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function tm(e,t,n){const r=Zi(e,"x","spaceToBatchND");b(r.rank>=1+t.length,(()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`)),b(n.length===t.length,(()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`)),b(r.shape.reduce(((e,r,i)=>i>0&&i<=t.length?e&&(r+n[i-1][0]+n[i-1][1])%t[i-1]===0:e),!0),(()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`));const i={x:r},o={blockShape:t,paddings:n};return Vi.runKernel(Vn,i,o)}const nm=to({spaceToBatchND_:tm}),rm={kernelName:De,gradFunc:(e,t,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>nm(e,r,i)}}},im={kernelName:Ae,gradFunc:(e,t,n)=>{const r=n,i=r.inputShape,o=r.shape,a=Array.from(o);for(let l=i.length-1;l>=0;l--)if(i[l]===o[l])a[l]=1;else if(1!==i[l])throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${o}].`);const s=[];for(let l=0;l<a.length;l++)a[l]>1&&s.push(l);return{x:()=>au(e,s,!0)}}},om={kernelName:Me,gradFunc:e=>({x:()=>e.clone()})},am={kernelName:Fe,gradFunc:e=>({x:()=>qc(e)})},sm={kernelName:Pe,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:i,clipValueMax:o}=n;return{x:()=>Hc(cu(Gl(r,i),Sd(r,o)),e,qc(e))}}},lm={kernelName:Be,inputsToSave:["x"],gradFunc:Ff.gradFunc},um={kernelName:Le,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map((e=>e.shape)),{axis:i}=n,o=T(i,t[0].shape)[0],a=r.map((e=>e[o])),s=Oc(e,a,o);return s.map((e=>()=>e))}},cm={kernelName:ze,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{dilations:o,strides:a,pad:s,dataFormat:l}=n;return b(Ns(o),(()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`)),{x:()=>hl(r.shape,e,i,a,s,l),filter:()=>dh(r,e,i.shape,a,s,l)}}},hm={kernelName:Ue,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{strides:o,pad:a,dataFormat:s,dimRoundingMode:l}=n;return{dy:()=>sl(e,i,o,a,s,1,l),filter:()=>dh(e,r,i.shape,o,a,s,l)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function dm(e,t,n,r,i){let o=e;4===e.rank&&(o=Rs(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let a=t;4===a.rank&&(a=Rs(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),b(5===o.rank,(()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${o.shape}.`)),b(5===a.rank,(()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`)),b(5===n.length,(()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`)),b(o.shape[4]===n[3],(()=>`Error in conv3dDerFilter: depth of input ${o.shape[4]}) must match input depth in filter (${n[3]}.`)),b(a.shape[4]===n[4],(()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`));const s={x:o,dy:a},l={strides:r,pad:i,filterShape:n};return Vi.runKernel(He,s,l)}const pm=to({conv3DBackpropFilter_:dm}),fm={kernelName:We,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:o}=n;b(Ns(r),(()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`));const[a,s]=t;return{x:()=>bl(a.shape,e,s,i,o),filter:()=>pm(a,e,s.shape,i,o)}}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mm(e){const t=Zi(e,"x","sin","float32"),n={x:t};return Vi.runKernel(Mn,n)}const gm=to({sin_:mm}),bm={kernelName:qe,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nu(Fu(gm(ea(n,"float32"))),e)}}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function vm(e){const t=Zi(e,"x","sinh"),n={x:t};return Vi.runKernel(Fn,n)}const ym=to({sinh_:vm}),xm={kernelName:Ye,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nu(ym(ea(n,"float32")),e)}}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function wm(e,t=0,n=!1,r=!1){const i=Zi(e,"x","cumsum"),o={x:i},a={axis:t,exclusive:n,reverse:r};return Vi.runKernel(Ke,o,a)}const km=to({cumsum_:wm}),_m={kernelName:Ke,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i,exclusive:o,reverse:a}=n;return{x:()=>{const t=Tu([i],r.rank);let n=km(e,i,o,!a);return null!=t&&(n=Qc(n,t)),n}}}},Sm={kernelName:et,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:o,dimRoundingMode:a}=n,s=null==r?[1,1]:r;b(Ns(s),(()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`));const[l,u]=t;return b(4===l.rank,(()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`)),b(4===u.rank,(()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`)),b(l.shape[3]===u.shape[2],(()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`)),b(Es(i,s),(()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${s}'.`)),$s("depthwiseConv2d",o,a),{x:()=>Ih(l.shape,e,u,i,o,s,a),filter:()=>Sh(l,e,u.shape,i,o,s,a)}}},Cm={kernelName:it,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,o={x:r,filter:i,dy:e},a={x:r,filter:i,dy:e};return{x:()=>Vi.runKernel(ot,o,n),filter:()=>Vi.runKernel(at,a,n)}}},Im={kernelName:ut,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>Vi.runKernel(ct,r)}}},Om={kernelName:ht,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=nu(Dl(Fu($u(n))),2/Math.sqrt(Math.PI));return{x:()=>nu(e,r)}}},Tm={kernelName:pt,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nu(e,n)}}},Nm={kernelName:ft,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>Rs(e,n.shape)}}},Em={kernelName:mt,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nu(e,Dl(n))}}},Dm={kernelName:yt,gradFunc:e=>({x:()=>qc(e)})},$m={kernelName:xt,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=_a(n.shape,r.shape),o=()=>{const t=Cl(e,ea(r,"float32")),o=ka(n.shape,i);return o.length>0?Rs(au(t,o),n.shape):t},a=()=>{let t=nu(e,ea(n,"float32"));const o=ka(r.shape,i);o.length>0&&(t=Rs(au(t,o),r.shape));const a=$u(r);return Fu(Cl(t,ea(a,"float32")))};return{a:o,b:a}}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Am(e){const t=Zi(e,"x","rsqrt","float32"),n={x:t};return Vi.runKernel(Nn,n)}const Rm=to({rsqrt_:Am}),Mm={kernelName:wt,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[i,o,a,s]=t,l=null==s?rs(1):s,u=ka(o.shape,i.shape),c=[];if(1===o.rank){for(let e=0;e<i.shape.length-1;++e)c.push(i.shape[e]);c.push(1)}const h=iu(i,o),d=nu(e,l),p=Rm(ls(a,rs(r))),f=nu(nu(nu(p,p),p),rs(-.5)),m=()=>1===o.rank?Rs(nu(nu(e,Ml(Rs(p,[1,1,1,o.shape[0]]),c)),l),i.shape):Rs(nu(nu(e,p),l),i.shape),g=()=>{let e=nu(nu(p,rs(-1)),d);return 1===o.rank&&(e=au(e,u)),Rs(e,o.shape)},b=()=>{let e=nu(nu(f,h),d);return 1===o.rank&&(e=au(e,u)),Rs(e,o.shape)},v=()=>{const t=nu(h,p);let n=nu(e,t);return 1===o.rank&&(n=au(n,u)),Rs(n,o.shape)},y=()=>{let t=e;return 1===o.rank&&(t=au(t,u)),Rs(t,o.shape)};return{x:m,mean:g,variance:b,scale:v,offset:y}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Fm(e,t,n){const r=Zi(e,"x","unsortedSegmentSum"),i=Zi(t,"segmentIds","unsortedSegmentSum","int32");b(_(n),(()=>"numSegments must be of dtype int"));const o={x:r,segmentIds:i},a={numSegments:n};return Vi.runKernel(hr,o,a)}const Pm=to({unsortedSegmentSum_:Fm}),jm={kernelName:kt,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,i]=t,{axis:o}=n,a=T(o,r.shape)[0],s=()=>{const t=r.shape,n=i.size,s=t.slice(0,a),l=s.length,u=t.slice(o,t.length).slice(1),c=u.length,h=Bm(0,l),d=Bm(l+1,l+1+c),p=Lm([s,[n],u]),f=Rs(e,p),m=Rs(i,[n]),g=Lm([[l],h,d]),b=Qc(f,g);let v=Pm(b,m,r.shape[a]);const y=Nu(g);return v=Qc(v,y),v};return{x:s,indices:()=>i}}};function Bm(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function Lm(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const zm={kernelName:Ct,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>qc(n),b:()=>qc(r)}}},Vm={kernelName:It,gradFunc:e=>({x:()=>ea(e,"float32")})},Um={kernelName:Nt,gradFunc:e=>({x:()=>qc(e)})},Wm={kernelName:Et,gradFunc:e=>({x:()=>qc(e)})},Hm={kernelName:Dt,gradFunc:e=>({x:()=>qc(e)})},Gm={kernelName:$t,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:i}=n,o=Wl(r,0);return{x:()=>Hc(o,e,nu(e,i))}}},qm={kernelName:Pt,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Cl(e,ls(n,1))}}},Ym={kernelName:Ft,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Cl(e,ea(n,"float32"))}}},Xm={kernelName:zt,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;return{logits:()=>{const t=!0,n=Dl(r);return iu(e,nu(au(e,i,t),n))}}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Km(e,t,n,r=5,i=1,o=1,a=.5){const s={x:e,y:t,dy:n},l={depthRadius:r,bias:i,alpha:o,beta:a};return Vi.runKernel(Ut,s,l)}const Jm=to({localResponseNormalizationBackprop_:Km}),Zm={kernelName:Vt,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{depthRadius:o,bias:a,alpha:s,beta:l}=n;return{x:()=>Jm(r,i,e,o,a,s,l)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Qm(e,t,n,r){return t.rank<n.rank&&(t=Rs(t,Iu(t.shape,r))),e.rank<n.rank&&(e=Rs(e,Iu(e.shape,r))),{x:()=>{const r=nu(e,ea(Nl(n,t),e.dtype));return r}}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const eg={kernelName:Wt,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:i}=r,o=t[0],a=t[1],s=T(i,o.shape),l=Qm(e,a,o,s);return{x:()=>l["x"]()}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function tg(e,t){let n=Zi(e,"a","less","string_or_numeric"),r=Zi(t,"b","less","string_or_numeric");[n,r]=$i(n,r),_a(n.shape,r.shape);const i={a:n,b:r};return Vi.runKernel(At,i)}const ng=to({less_:tg}),rg={kernelName:Ht,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=()=>nu(e,ea(Gl(n,r),"float32")),o=()=>nu(e,ea(ng(n,r),"float32"));return{a:i,b:o}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ig(e,t,n,r,i,o,a){const s=Zi(e,"dy","maxPool3dGrad"),l=Zi(t,"input","maxPool3dGrad"),u=Zi(n,"output","maxPool3dGrad");let c=s,h=l,d=u,p=!1;4===l.rank&&(p=!0,c=Rs(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),h=Rs(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=Rs(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),b(5===c.rank,(()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`)),b(5===h.rank,(()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`)),b(5===d.rank,(()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`)),$s("maxPool3dGrad",o,a);const f={dy:c,input:h,output:d},m={filterSize:r,strides:i,pad:o,dimRoundingMode:a},g=Vi.runKernel(Xt,f,m);return p?Rs(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const og=to({maxPool3dGrad_:ig}),ag={kernelName:Yt,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=n;return{x:()=>og(e,r,i,o,a,s,l)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function sg(e,t,n,r,i,o,a){const s=Zi(e,"dy","maxPoolGrad"),l=Zi(t,"input","maxPoolGrad"),u=Zi(n,"output","maxPoolGrad");b(l.rank===s.rank,(()=>`Rank of input (${l.rank}) does not match rank of dy (${s.rank})`)),b(4===s.rank,(()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${s.rank}.`)),b(4===l.rank,(()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`)),$s("maxPoolGrad",o,a);const c={dy:s,input:l,output:u},h={filterSize:r,strides:i,pad:o,dimRoundingMode:a};return Vi.runKernel(qt,c,h)}const lg=to({maxPoolGrad_:sg}),ug={kernelName:Gt,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:o,strides:a,pad:s}=n;return{x:()=>lg(e,r,i,o,a,s)}}},cg={kernelName:Jt,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n,o=T(i,r.shape),a=Cu(r.shape,o),s=a[1],l=w(s),u=()=>{const t=r.shape.slice();o.forEach((e=>{t[e]=1}));const n=Rs(e,t),i=Cl(nu(n,Vu(r.shape,"float32")),l);return i};return{x:u}}},hg={kernelName:Zt,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:i}=r,[o,a]=t,s=T(i,o.shape),l=Qm(e,a,o,s);return{x:()=>l["x"]()}}},dg={kernelName:Qt,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=()=>nu(e,ea(Sd(n,r),"float32")),o=()=>nu(e,ea(Wl(n,r),"float32"));return{a:i,b:o}}},pg={kernelName:en,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,o=i.map((e=>e[0]));return{x:()=>pc(e,o,r.shape)}}},fg={kernelName:tn,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=_a(n.shape,r.shape),o=()=>{const t=ka(n.shape,i);return t.length>0?Rs(au(e,t),n.shape):e},a=()=>{const t=nu(e,Fu(Ll(Cl(n,r)))),o=ka(r.shape,i);return o.length>0?Rs(au(t,o),r.shape):t};return{a:o,b:a}}},mg={kernelName:rn,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=_a(n.shape,r.shape),o=()=>{const t=nu(e,ea(r,"float32")),o=ka(n.shape,i);return o.length>0?Rs(au(t,o),n.shape):t},a=()=>{const t=nu(e,ea(n,"float32")),o=ka(r.shape,i);return o.length>0?Rs(au(t,o),r.shape):t};return{a:o,b:a}}},gg={kernelName:on,gradFunc:e=>({x:()=>Fu(e)})},bg={kernelName:hn,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>zu(n.shape,"float32")}}},vg={kernelName:cn,gradFunc:e=>({x:()=>qc(e)})},yg={kernelName:dn,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n,i=Lc(e,r);return i.map((e=>()=>e))}},xg={kernelName:pn,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,o=i.map((e=>e[0]));return{x:()=>pc(e,o,r.shape)}}},wg={kernelName:fn,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,i]=t,o=n,a=r,s=_a(o.shape,a.shape),l=()=>{const t=ea(a,"float32");let n=nu(e,nu(t,jd(o,iu(t,rs(1)))));const r=ka(o.shape,s);return r.length>0&&(n=au(n,r)),Rs(n,o.shape)},u=()=>{const t=Wl(o,0),n=Hc(t,Kl(o),qc(o));let r=nu(e,nu(i,n));const l=ka(a.shape,s);return l.length>0&&(r=au(r,l)),Rs(r,a.shape)};return{a:l,b:u}}},kg={kernelName:mn,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,i=Wl(n,0);return{x:()=>Hc(i,e,nu(e,r)),alpha:()=>{let t=Hc(i,qc(e),nu(e,n));const o=ka(r.shape,e.shape);return o.length>0&&(t=au(t,o)),Rs(t,r.shape)}}}};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function _g(e,t=0,n=!1,r=!1){const i=Zi(e,"x","cumprod"),o={x:i},a={axis:t,exclusive:n,reverse:r};return Vi.runKernel(Xe,o,a)}const Sg=to({cumprod_:_g});
/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Cg(e,t,n){const r=e.shape.slice();r[n]=1;const i=Rs(t,r),o=Sg(e,n,!0,!1),a=Sg(e,n,!0,!0),s=nu(o,a);return nu(i,s)}function Ig(e,t,n){const r=e.shape.length,i=r-n.length,o=Tu(n,r);let a=e;null!=o&&(a=Qc(e,o));const s=a.shape.slice(),l=s.splice(r-n.length,n.length),u=l.reduce(((e,t)=>e*t),1);s.push(u);const c=a.reshape(s);let h=Cg(c,t,i);if(h=h.reshape(a.shape),null!=o){const e=Nu(o);h=Qc(h,e)}return h}const Og={kernelName:gn,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;let o=[];return o=void 0===i||null===i?r.shape.map(((e,t)=>t)):"number"===typeof i?[i]:i,{x:()=>Ig(r,e,o)}}},Tg={kernelName:st,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=_a(n.shape,r.shape),o=()=>{const t=Cl(e,ea(r,"float32")),o=ka(n.shape,i);return o.length>0?Rs(au(t,o),n.shape):t},a=()=>{let t=nu(e,ea(n,"float32"));const o=ka(r.shape,i);o.length>0&&(t=Rs(au(t,o),r.shape));const a=$u(r);return Fu(Cl(t,ea(a,"float32")))};return{a:o,b:a}}},Ng={kernelName:yn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Cl(e,Fu($u(n)))}}},Eg={kernelName:In,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=nu(Sd(n,6),gh(n));return{x:()=>nu(e,ea(r,"float32"))}}},Dg={kernelName:xn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nu(e,ea(gh(n),"float32"))}}},$g={kernelName:wn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Rs(e,n.shape)}}},Ag={kernelName:Sn,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r},o=()=>Vi.runKernel(Cn,i,n);return{images:o}}},Rg={kernelName:kn,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r},o=()=>Vi.runKernel(_n,i,n);return{images:o}}},Mg={kernelName:On,gradFunc:(e,t,n)=>{const{dims:r}=n,i=T(r,e.shape);return{x:()=>oc(e,i)}}},Fg={kernelName:Tn,gradFunc:e=>({x:()=>qc(e)})},Pg={kernelName:Nn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Fu(Cl(e,nu(jd(n,1.5),2)))}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function jg(e){const t=Zi(e,"x","logicalNot","bool"),n={x:t};return Vi.runKernel(Bt,n)}const Bg=to({logicalNot_:jg}),Lg={kernelName:$n,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>ea(qc(n),"float32"),t:()=>nu(e,ea(n,e.dtype)),e:()=>nu(e,ea(Bg(n),e.dtype))}}},zg={kernelName:An,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Wl(n,rs(0)),r=rs(Wp),i=rs(Hp),o=nu(e,i),a=nu(nu(e,r),Dl(ea(n,"float32")));return Hc(t,o,a)}}}},Vg={kernelName:jn,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nu(e,nu(n,iu(rs(1),n)))}}},Ug={kernelName:Pn,gradFunc:e=>({x:()=>qc(e)})};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Wg(e){const t=Zi(e,"x","cos","float32"),n={x:t};return Vi.runKernel(qe,n)}const Hg=to({cos_:Wg}),Gg={kernelName:Mn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nu(Hg(ea(n,"float32")),e)}}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function qg(e){const t=Zi(e,"x","cosh","float32"),n={x:t};return Vi.runKernel(Ye,n)}const Yg=to({cosh_:qg}),Xg={kernelName:Fn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nu(Yg(ea(n,"float32")),e)}}},Kg={kernelName:Rn,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:i,size:o}=n,a=r.shape,[s,l]=La(r,i,o),u=[];for(let c=0;c<e.rank;c++)u.push([s[c],a[c]-s[c]-l[c]]);return{x:()=>Gu(e,u)}}},Jg={kernelName:Wn,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:i}=n,o=!0,a=nu(e,r);return{logits:()=>iu(a,nu(au(a,[i],o),r))}}},Zg={kernelName:Bn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nu(e,hc(n))}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Qg(e,t,n){const r=Zi(e,"x","batchToSpaceND"),i=t.reduce(((e,t)=>e*t));b(r.rank>=1+t.length,(()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`)),b(n.length===t.length,(()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`)),b(r.shape[0]%i===0,(()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${i}`));const o={x:r},a={blockShape:t,crops:n};return Vi.runKernel(De,o,a)}const eb=to({batchToSpaceND_:Qg}),tb={kernelName:Vn,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>eb(e,r,i)}}},nb={kernelName:Un,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>Js(e,r)}}},rb={kernelName:Ln,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Cl(e,nu(Nc(ea(n,"float32")),2))}}},ib={kernelName:Jn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nu(e,nu(ea(n,"float32"),2))}}},ob={kernelName:Kn,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=rs(2),o=()=>nu(e,nu(i,iu(n,r))),a=()=>nu(e,nu(i,iu(r,n)));return{a:o,b:a}}},ab={kernelName:pr,gradFunc:e=>({x:()=>qc(e)})},sb={kernelName:nr,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=_a(n.shape,r.shape),o=()=>{let t=e;const r=ka(n.shape,i);return r.length>0&&(t=au(t,r)),Rs(t,n.shape)},a=()=>{let t=e;const n=ka(r.shape,i);return n.length>0&&(t=au(t,n)),Rs(Fu(t),r.shape)};return{a:o,b:a}}},lb={kernelName:zn,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,i=r.shape.slice(),{axis:o}=n,a=T(o,r.shape);a.forEach((e=>{i[e]=1}));const s=Rs(e,i),l=nu(s,Vu(r.shape,"float32"));return{x:()=>l}}},ub={kernelName:rr,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Cl(e,$u(Hg(n)))}}},cb={kernelName:ir,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nu(iu(rs(1),$u(n)),e)}}},hb={kernelName:or,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:i}=n,o=()=>{let t=qc(r);if(1===r.rank)for(let n=0;n<i[0];++n)t=ls(t,pc(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)t=ls(t,pc(e,[n*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)for(let a=0;a<i[2];++a)t=ls(t,pc(e,[n*r.shape[0],o*r.shape[1],a*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)for(let a=0;a<i[2];++a)for(let s=0;s<i[3];++s)t=ls(t,pc(e,[n*r.shape[0],o*r.shape[1],a*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t};return{x:o}}},db={kernelName:lr,gradFunc:(e,t,n)=>{const r=n,{perm:i}=r,o=Nu(i);return{x:()=>Qc(e,o)}}},pb={kernelName:cr,gradFunc:(e,t,n)=>{const r=n,{axis:i}=r;return{value:()=>Ac(e,i)}}},fb={kernelName:hr,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t,r=()=>mb(e,n);return{x:r}}};function mb(e,t){const n=vu(t,qc(t)),r=Vl(e,n);let i=Gl(t,rs(0,"int32"));const o=r.rank-i.rank;for(let s=0;s<o;++s)i=Al(i,s+1);i=cu(i,Vu(r.shape,"bool"));const a=qc(r);return Hc(i,r,a)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const gb={kernelName:dr,gradFunc:e=>({x:()=>qc(e)})},bb=[Ff,Pf,jf,Bf,Lf,zf,Vf,Uf,Wf,Hf,Gf,qf,Kf,Qf,em,rm,im,om,am,sm,lm,um,hm,cm,fm,bm,xm,_m,Sm,Cm,Tg,Im,Om,Tm,Nm,Em,$m,Dm,Mm,jm,zm,Vm,Um,Wm,Hm,Gm,qm,Ym,Xm,Zm,eg,eg,rg,ag,ug,cg,hg,dg,pg,fg,mg,gg,bg,vg,yg,xg,xg,wg,kg,Og,Ng,Eg,Dg,$g,Ag,Rg,Mg,Fg,Pg,Lg,zg,Vg,Ug,Gg,Xg,Kg,Jg,Zg,tb,tb,nb,nb,rb,ob,ib,ab,sb,lb,ub,cb,hb,db,pb,fb,gb];for(const gY of bb)Or(gY);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function vb(e){const t=Zi(e,"x","acos"),n={x:t};return Vi.runKernel(pe,n)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.abs=function(){return this.throwIfDisposed(),as(this)};const yb=to({acos_:vb});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function xb(e){const t=Zi(e,"x","acosh"),n={x:t};return Vi.runKernel(fe,n)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.acos=function(){return this.throwIfDisposed(),yb(this)};const wb=to({acosh_:xb});
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function kb(e,t=0){const n=Zi(e,"x","argMin"),r={x:n},i={axis:t};return Vi.runKernel(xe,r,i)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.acosh=function(){return this.throwIfDisposed(),wb(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.add=function(e){return this.throwIfDisposed(),ls(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.all=function(e,t){return this.throwIfDisposed(),cs(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.any=function(e,t){return this.throwIfDisposed(),ds(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.argMax=function(e){return this.throwIfDisposed(),fs(this,e)};const _b=to({argMin_:kb});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Sb(e){const t=Zi(e,"x","asin"),n={x:t};return Vi.runKernel(we,n)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.argMin=function(e){return this.throwIfDisposed(),_b(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.asScalar=function(){return this.throwIfDisposed(),b(1===this.size,(()=>"The array must have only 1 element.")),Rs(this,[])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.asType=function(e){return this.throwIfDisposed(),ea(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.as1D=function(){return this.throwIfDisposed(),Rs(this,[this.size])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.as2D=function(e,t){return this.throwIfDisposed(),Rs(this,[e,t])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Rs(this,[e,t,n])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),Rs(this,[e,t,n,r])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),Rs(this,[e,t,n,r,i])};const Cb=to({asin_:Sb});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ib(e){const t=Zi(e,"x","asinh"),n={x:t};return Vi.runKernel(ke,n)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.asin=function(){return this.throwIfDisposed(),Cb(this)};const Ob=to({asinh_:Ib});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Tb(e){const t=Zi(e,"x","atan"),n={x:t};return Vi.runKernel(_e,n)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.asinh=function(){return this.throwIfDisposed(),Ob(this)};const Nb=to({atan_:Tb});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Eb(e,t){let n=Zi(e,"a","atan2"),r=Zi(t,"b","atan2");[n,r]=$i(n,r);const i={a:n,b:r};return Vi.runKernel(Ce,i)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.atan=function(){return this.throwIfDisposed(),Nb(this)};const Db=to({atan2_:Eb});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function $b(e){const t=Zi(e,"x","atanh"),n={x:t};return Vi.runKernel(Se,n)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.atan2=function(e){return this.throwIfDisposed(),Db(this,e)};const Ab=to({atanh_:$b});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Rb(e){const t=Zi(e,"x","ceil","float32"),n={x:t};return Vi.runKernel(Fe,n)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.atanh=function(){return this.throwIfDisposed(),Ab(this)},ki().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Fs(this,e,t,n,r)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),eb(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.batchNorm=function(e,t,n,r,i){return this.throwIfDisposed(),zs(this,e,t,n,r,i)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Uc(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.cast=function(e){return this.throwIfDisposed(),ea(this,e)};const Mb=to({ceil_:Rb});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Fb(e,t,n="NHWC"){const r=Zi(e,"x","depthToSpace","float32"),i="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],a="NHWC"===n?r.shape[3]:r.shape[1];b(t>1,(()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`)),b(i*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${i} and ${t}  for depthToSpace with input shape\n    ${r.shape}`)),b(o*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${o} and ${t} for depthToSpace with input shape\n        ${r.shape}`)),b(a%(t*t)===0,(()=>`Dimension size must be evenly divisible by ${t*t} but is ${a} for depthToSpace with input shape ${r.shape}`));const s={x:r},l={blockSize:t,dataFormat:n};return Vi.runKernel(Qe,s,l)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.ceil=function(){return this.throwIfDisposed(),Mb(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Xs(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof wi&&(e=[e]),Js([this,...e],t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.conv1d=function(e,t,n,r,i,o){return this.throwIfDisposed(),ul(this,e,t,n,r,i,o)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),pl(this,e,t,n,r,i)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.conv2d=function(e,t,n,r,i,o){return this.throwIfDisposed(),sl(this,e,t,n,r,i,o)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.cos=function(){return this.throwIfDisposed(),Hg(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.cosh=function(){return this.throwIfDisposed(),Yg(this)},
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),Sg(this,e,t,n)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),km(this,e,t,n)};const Pb=to({depthToSpace_:Fb});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function jb(e,t,n,r,i=[1,1],o="NHWC"){const a=Zi(e,"x","dilation2d"),s=Zi(t,"filter","dilation2d");b(3===a.rank||4===a.rank,(()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`)),b(3===s.rank,(()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`)),b("NHWC"===o,(()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${o}`));let l=a,u=!1;3===a.rank&&(l=Rs(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=!0);const c={x:l,filter:s},h={strides:n,pad:r,dilations:i},d=Vi.runKernel(it,c,h);return u?Rs(d,[d.shape[1],d.shape[2],d.shape[3]]):d}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Pb(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.depthwiseConv2d=function(e,t,n,r,i,o){return this.throwIfDisposed(),wl(this,e,t,n,r,i,o)};const Bb=to({dilation2d_:jb});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Lb(e,t){let n=Zi(e,"a","div"),r=Zi(t,"b","div");[n,r]=$i(n,r);const i=Cl(n,r),o=qc(i),a=Nl(r,o);return Hc(a,o,i)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.dilation2d=function(e,t,n,r,i){return this.throwIfDisposed(),Bb(this,e,t,n,r,i)};const zb=to({divNoNan_:Lb});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Vb(e,t){const n=Zi(e,"t1","dot"),r=Zi(t,"t2","dot");b((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`));const i=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];if(b(i===o,(()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${o}.`)),1===n.rank&&1===r.rank){const e=Rs(n,[1,-1]),t=Rs(r,[-1,1]),i=du(e,t);return Rs(i,[])}if(1===n.rank&&2===r.rank){const e=Rs(n,[1,-1]),t=Rs(r,[r.shape[0],r.shape[1]]),i=du(e,t);return Rs(i,[i.size])}if(2===n.rank&&1===r.rank){const e=Rs(r,[-1,1]),t=du(n,e);return Rs(t,[t.size])}{const e=Rs(r,[r.shape[0],r.shape[1]]),t=du(n,e);return t}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.divNoNan=function(e){return this.throwIfDisposed(),zb(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.div=function(e){return this.throwIfDisposed(),Cl(this,e)};const Ub=to({dot_:Vb});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Wb(e){let t=Zi(e,"x","erf");b("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=ea(t,"float32"));const n={x:t};return Vi.runKernel(ht,n)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.dot=function(e){return this.throwIfDisposed(),Ub(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.elu=function(){return this.throwIfDisposed(),Ol(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.equal=function(e){return this.throwIfDisposed(),Nl(this,e)};const Hb=to({erf_:Wb});
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Gb(e,t=null,n=!1){return zd(e,"euclidean",t,n)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.erf=function(){return this.throwIfDisposed(),Hb(this)};const qb=to({euclideanNorm_:Gb});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Yb(e){const t=Zi(e,"x","expm1"),n={x:t};return Vi.runKernel(mt,n)}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),qb(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.exp=function(){return this.throwIfDisposed(),Dl(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.expandDims=function(e){return this.throwIfDisposed(),Al(this,e)};const Xb=to({expm1_:Yb});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Kb(e){const t=Zi(e,"x","isFinite"),n={x:t};return Vi.runKernel(Nt,n)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.expm1=function(){return this.throwIfDisposed(),Xb(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.fft=function(){return this.throwIfDisposed(),ih(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.flatten=function(){return this.throwIfDisposed(),Rs(this,[this.size])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.floor=function(){return this.throwIfDisposed(),Ll(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.floorDiv=function(e){return this.throwIfDisposed(),_l(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.gather=function(e,t){return this.throwIfDisposed(),Vl(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Gl(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.greater=function(e){return this.throwIfDisposed(),Wl(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.ifft=function(){return this.throwIfDisposed(),lh(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.irfft=function(){return this.throwIfDisposed(),ch(this)};const Jb=to({isFinite_:Kb});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Zb(e){const t=Zi(e,"x","isInf"),n={x:t};return Vi.runKernel(Et,n)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.isFinite=function(){return this.throwIfDisposed(),Jb(this)};const Qb=to({isInf_:Zb});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ev(e){const t=Zi(e,"x","isNaN"),n={x:t};return Vi.runKernel(Dt,n)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.isInf=function(){return this.throwIfDisposed(),Qb(this)};const tv=to({isNaN_:ev});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function nv(e,t=5,n=1,r=1,i=.5){const o=Zi(e,"x","localResponseNormalization");b(4===o.rank||3===o.rank,(()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${o.rank}.`)),b(_(t),(()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`));let a=o,s=!1;3===o.rank&&(s=!0,a=Rs(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const l={x:a},u={depthRadius:t,bias:n,alpha:r,beta:i},c=Vi.runKernel(Vt,l,u);return s?Rs(c,[c.shape[1],c.shape[2],c.shape[3]]):c}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.isNaN=function(){return this.throwIfDisposed(),tv(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.leakyRelu=function(e){return this.throwIfDisposed(),Yl(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.lessEqual=function(e){return this.throwIfDisposed(),Sd(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.less=function(e){return this.throwIfDisposed(),ng(this,e)};const rv=to({localResponseNormalization_:nv});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function iv(e){const t=Zi(e,"x","logSigmoid"),n=ns((e=>{const t=Fu(Cc(Fu(e))),n=t=>{const n=nu(t,hc(Fu(e)));return n};return{value:t,gradFunc:n}}));return n(t)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),rv(this,e,t,n,r)};const ov=to({logSigmoid_:iv});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function av(e,t){const n=Zi(e,"a","logicalOr","bool"),r=Zi(t,"b","logicalOr","bool");_a(n.shape,r.shape);const i={a:n,b:r};return Vi.runKernel(Lt,i)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.logSigmoid=function(){return this.throwIfDisposed(),ov(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.logSoftmax=function(e){return this.throwIfDisposed(),lu(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),sp(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.log=function(){return this.throwIfDisposed(),Kl(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.log1p=function(){return this.throwIfDisposed(),Zl(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.logicalAnd=function(e){return this.throwIfDisposed(),cu(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.logicalNot=function(){return this.throwIfDisposed(),Bg(this)};const sv=to({logicalOr_:av});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function lv(e,t){const n=Zi(e,"a","logicalXor","bool"),r=Zi(t,"b","logicalXor","bool");return _a(n.shape,r.shape),cu(sv(e,t),Bg(cu(e,t)))}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.logicalOr=function(e){return this.throwIfDisposed(),sv(this,e)};const uv=to({logicalXor_:lv});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function cv(e,t,n){b("reflect"===n||"symmetric"===n,(()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`));const r=Zi(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");b(t.length===r.rank,(()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`));const i="reflect"===n?1:0;for(let s=0;s<r.rank;s++)b(2===t[s].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),b(t[s][0]>=0&&t[s][0]<=r.shape[s]-i&&t[s][1]>=0&&t[s][1]<=r.shape[s]-i,(()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-i} or less than 0 for input of shape ${r.shape}`));const o={paddings:t,mode:n},a={x:r};return Vi.runKernel(en,a,o)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.logicalXor=function(e){return this.throwIfDisposed(),uv(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),du(this,e,t,n)},ki().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),fu(this,e,t,n,r)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.max=function(e,t){return this.throwIfDisposed(),eu(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.maximum=function(e){return this.throwIfDisposed(),vu(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.mean=function(e,t){return this.throwIfDisposed(),xu(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.min=function(e,t){return this.throwIfDisposed(),Fd(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.minimum=function(e){return this.throwIfDisposed(),ku(this,e)};const hv=to({mirrorPad_:cv});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function dv(e,t){let n=Zi(e,"a","mod"),r=Zi(t,"b","mod");[n,r]=$i(n,r);const i={a:n,b:r};return Vi.runKernel(tn,i)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),hv(this,e,t)};const pv=to({mod_:dv});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function fv(e,t,n,r,i,o,a){null==i&&(i=[1,1]),null==o&&(o=1),0===r&&(r="valid");const s=Zi(e,"x","maxPool");let l=s,u=!1;3===s.rank&&(u=!0,l=Rs(s,[1,s.shape[0],s.shape[1],s.shape[2]])),b(Es(o,i),(()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${i}'`));const c=gs(l.shape,t,o,i,r),h=[c.dilationHeight,c.dilationWidth];let d;d="same"===r?gv([c.filterHeight,c.filterWidth],h):[[0,0],[0,0]];const p=1===h[0]&&1===h[1],[f,m]=mv([c.inHeight,c.inWidth],h,d),g=p?r:"valid",v=p?l:nm(l,h,f),y="avg"===n?()=>Fs(v,t,o,g,a):()=>fu(v,t,o,g,a),x=y(),w=p?x:eb(x,h,m);return u?Rs(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function mv(e,t,n){const r=n.map((e=>e[0])),i=n.map((e=>e[1])),o=e.concat(r,i),a=t.map(((e,t)=>(e-o[t]%e)%e)),s=i.map(((e,t)=>e+a[t])),l=t.map(((e,t)=>[r[t],s[t]])),u=t.map(((e,t)=>[0,a[t]]));return[l,u]}function gv(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))),r=n.map((e=>e-1)),i=r.map((e=>Math.floor(e/2))),o=r.map(((e,t)=>e-i[t]));return r.map(((e,t)=>[i[t],o[t]]))}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.mod=function(e){return this.throwIfDisposed(),pv(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.mul=function(e){return this.throwIfDisposed(),nu(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.neg=function(){return this.throwIfDisposed(),Fu(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.norm=function(e,t,n){return this.throwIfDisposed(),zd(this,e,t,n)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.notEqual=function(e){return this.throwIfDisposed(),ju(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),Lu(this,e,t,n)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.onesLike=function(){return this.throwIfDisposed(),Wu(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.pad=function(e,t){return this.throwIfDisposed(),Gu(this,e,t)};const bv=to({pool_:fv});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function vv(e,t=null,n=!1){let r=Zi(e,"x","prod");"bool"===r.dtype&&(r=ea(r,"int32"));const i={x:r},o={axis:t,keepDims:n};return Vi.runKernel(gn,i,o)}ki().prototype.pool=function(e,t,n,r,i,o){return this.throwIfDisposed(),bv(this,e,t,n,r,i,o)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.pow=function(e){return this.throwIfDisposed(),jd(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.prelu=function(e){return this.throwIfDisposed(),Yu(this,e)};const yv=to({prod_:vv});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function xv(e){const t=Zi(e,"x","reciprocal"),n={x:t};return Vi.runKernel(yn,n)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.prod=function(e,t){return this.throwIfDisposed(),yv(this,e,t)};const wv=to({reciprocal_:xv});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function kv(e){const t=Zi(e,"x","sign"),n={x:t};return Vi.runKernel(Pn,n)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.reciprocal=function(){return this.throwIfDisposed(),wv(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.relu=function(){return this.throwIfDisposed(),rc(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.relu6=function(){return this.throwIfDisposed(),fh(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Rs(this,e.shape)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.reshape=function(e){return this.throwIfDisposed(),Rs(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),vd(this,e,t,n)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),xd(this,e,t,n)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.reverse=function(e){return this.throwIfDisposed(),oc(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.rfft=function(){return this.throwIfDisposed(),ah(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.round=function(){return this.throwIfDisposed(),Id(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.rsqrt=function(){return this.throwIfDisposed(),Rm(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.selu=function(){return this.throwIfDisposed(),sc(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.separableConv2d=function(e,t,n,r,i,o){return this.throwIfDisposed(),uc(this,e,t,n,r,i,o)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.sigmoid=function(){return this.throwIfDisposed(),hc(this)};const _v=to({sign_:kv});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Sv(e,t,n,r,i=0,o=0,a=0,s=0,l=0){const u=Zi(e,"x","stridedSlice","string_or_numeric"),c={x:u},h={begin:t,end:n,strides:r,beginMask:i,endMask:o,ellipsisMask:a,newAxisMask:s,shrinkAxisMask:l};return Vi.runKernel(Zn,c,h)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.sign=function(){return this.throwIfDisposed(),_v(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.sin=function(){return this.throwIfDisposed(),gm(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.sinh=function(){return this.throwIfDisposed(),ym(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.slice=function(e,t){return this.throwIfDisposed(),pc(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.softmax=function(e){return this.throwIfDisposed(),_c(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.softplus=function(){return this.throwIfDisposed(),Cc(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),nm(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.split=function(e,t){return this.throwIfDisposed(),Oc(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.sqrt=function(){return this.throwIfDisposed(),Nc(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.square=function(){return this.throwIfDisposed(),$u(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.squaredDifference=function(e){return this.throwIfDisposed(),np(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.squeeze=function(e){return this.throwIfDisposed(),Dc(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof wi?[this,e]:[this,...e];return Ac(n,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.step=function(e){return this.throwIfDisposed(),gh(this,e)};const Cv=to({stridedSlice_:Sv});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Iv(e){const t=Zi(e,"x","tan","float32"),n={x:t};return Vi.runKernel(rr,n)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.stridedSlice=function(e,t,n,r,i,o,a,s){return this.throwIfDisposed(),Cv(this,e,t,n,r,i,o,a,s)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.sub=function(e){return this.throwIfDisposed(),iu(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.sum=function(e,t){return this.throwIfDisposed(),au(this,e,t)};const Ov=to({tan_:Iv});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Tv(e,t=1,n=!0){const r=Zi(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${t}`);const o={x:r},a={k:t,sorted:n},[s,l]=Vi.runKernel(ar,o,a);return{values:s,indices:l}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.tan=function(){return this.throwIfDisposed(),Ov(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.tanh=function(){return this.throwIfDisposed(),Mc(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.tile=function(e){return this.throwIfDisposed(),Ml(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.toBool=function(){return this.throwIfDisposed(),ea(this,"bool")},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.toFloat=function(){return this.throwIfDisposed(),ea(this,"float32")},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.toInt=function(){return this.throwIfDisposed(),ea(this,"int32")};const Nv=to({topk_:Tv});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ev(e,t=0){const n=Zi(e,"x","unique","string_or_numeric");b(n.rank>0,(()=>"The input tensor must be at least 1D"));const r={x:n},i={axis:t},[o,a]=Vi.runKernel(ur,r,i);return{values:o,indices:a}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.topk=function(e,t){return this.throwIfDisposed(),Nv(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.transpose=function(e){return this.throwIfDisposed(),Qc(this,e)};const Dv=to({unique_:Ev});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.unique=function(e){return this.throwIfDisposed(),Dv(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Pm(this,e,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.unstack=function(e){return this.throwIfDisposed(),Lc(this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.where=function(e,t){return this.throwIfDisposed(),Hc(e,this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
ki().prototype.zerosLike=function(){return this.throwIfDisposed(),qc(this)};
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class $v extends Error{constructor(e){super(e),Object.setPrototypeOf(this,$v.prototype)}}class Av extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Av.prototype)}}class Rv extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Rv.prototype)}}class Mv extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Mv.prototype)}}class Fv extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Fv.prototype)}}Error;
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class Pv{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function jv(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function Bv(e,t){if(!e)throw new Fv(t)}function Lv(e,t){let n=0;for(const r of e)r===t&&n++;return n}function zv(e){return 1===e.length?e[0]:e}function Vv(e){return Array.isArray(e)?e:[e]}function Uv(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2"),n=t.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==n[0]?n:"private"+n}function Wv(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,((e,t)=>t.toUpperCase()))}let Hv={};function Gv(e){if(null===e||void 0===e)return null;const t={};return t["className"]=e.getClassName(),t["config"]=e.getConfig(),t}function qv(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((e=>qv(e)));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"===typeof t&&(Array.isArray(t)||"ndarray"!==t["type"]||"number"!==typeof t["value"]?qv(t):e[n]=t["value"])}}}function Yv(e,t={},n={},r="object",i=!1){if("string"===typeof e){const i=e;let o;if(i in n)o=n[i];else if(i in Hv)o=Hv[i];else if(o=t[i],null==o)throw new Rv(`Unknown ${r}: ${e}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}{const o=e;if(null==o["className"]||null==o["config"])throw new Rv(`${r}: Improper config format: ${JSON.stringify(o)}.\n'className' and 'config' must set.`);const a=o["className"];let s,l;if(a in n?[s,l]=n[a]:a in Hv?[s,l]=Hv["className"]:a in t&&([s,l]=t[a]),null==s)throw new Rv(`Unknown ${r}: ${a}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=l){const e={};for(const n of Object.keys(Hv))e[n]=Hv[n];for(const i of Object.keys(n))e[i]=n[i];const t=o["config"];t["customObjects"]=e;const r=Object.assign({},Hv);for(const i of Object.keys(n))Hv[i]=n[i];qv(o["config"]);const a=l(s,o["config"],n,i);return Hv=Object.assign({},r),a}{const e=Object.assign({},Hv);for(const r of Object.keys(n))Hv[r]=n[r];const t=new s(o["config"]);return Hv=Object.assign({},e),t}}}function Xv(e,t){return e<t?-1:e>t?1:0}function Kv(e,t){return-1*Xv(e,t)}function Jv(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function Zv(e){if(null==e)throw new Rv(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function Qv(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new Rv(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function ey(e,t,n=0,r=1/0){return Bv(n>=0),Bv(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((e=>typeof e===t))}function ty(e,t){Array.isArray(e)?(b(e.length>0,(()=>`${t} is unexpectedly an empty array.`)),e.forEach(((e,n)=>ty(e,`element ${n+1} of ${t}`)))):b(Number.isInteger(e)&&e>0,(()=>`Expected ${t} to be a positive integer, but got ${ny(e)}.`))}function ny(e){return null===e?"null":Array.isArray(e)?"["+e.map((e=>ny(e))).join(",")+"]":"string"===typeof e?`"${e}"`:`${e}`}function ry(e,t,n){let r,i=null!=n?n():Jr();const o=(...o)=>{const a=null!=n?n():Jr();return a-i<t||(i=a,r=e(...o)),r};return o}function iy(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
let oy=0;function ay(){return oy++}const sy={};function ly(e=""){return e in sy||(sy[e]=0),sy[e]+=1,e+sy[e].toString()}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
const uy=["channelsFirst","channelsLast"],cy=["nearest","bilinear"],hy=["valid","same","causal"],dy=["max","avg"],py=["sum","mul","concat","ave"],fy=new Map;function my(e){Qv(uy,"DataFormat",e)}function gy(e){Qv(cy,"InterpolationFormat",e)}function by(e){Qv(hy,"PaddingMode",e)}function vy(e){Qv(dy,"PoolMode",e)}const yy=[],xy="/";function wy(e,t){yy.push(e);try{const e=t();return yy.pop(),e}catch(n){throw yy.pop(),n}}function ky(){return 0===yy.length?"":yy.join(xy)+xy}function _y(e){if(!Iy(e))throw new Error("Not a valid tensor name: '"+e+"'");return ky()+e}function Sy(e){if(!Iy(e))throw new Error("Not a valid tensor name: '"+e+"'");fy.has(e)||fy.set(e,0);const t=fy.get(e);if(fy.set(e,fy.get(e)+1),t>0){const n=`${e}_${t}`;return fy.set(n,1),n}return e}const Cy=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Iy(e){return!!e.match(Cy)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Oy(e){return e===parseInt(e.toString(),10)}function Ty(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let i=t;i<n;++i)r*=e[i];return r}function Ny(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function Ey(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function Dy(e,t){if(t<e)throw new Rv(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let r=e;r<t;++r)n.push(r);return n}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
let $y;function Ay(){return null==$y&&($y=es().epsilon()),$y}function Ry(){return"channelsLast"}function My(e,t){return ea(e,t)}function Fy(e,t=-1){const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Rs(e,n)}function Py(e,t){return Ka((()=>{if(2!==e.shape.length)throw new Rv(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);const n=Fy(e,1);return Hy(n,[1,t,1])}))}function jy(e){const t=[Ty(e.shape)];return Rs(e,t)}function By(e){if(e.rank<=1)throw new Rv(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],Ty(e.shape,1)];return Rs(e,t)}function Ly(e,t,n){return Ka((()=>{switch(e.rank){case 1:return mc(e,t,n);case 2:return bc(e,[t,0],[n,e.shape[1]]);case 3:return yc(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return wc(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return pc(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return pc(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new Rv(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function zy(e,t,n){return Ka((()=>{switch(e.rank){case 1:return mc(e,t,n);case 2:return bc(e,[0,t],[e.shape[0],n]);case 3:return yc(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return wc(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new Rv(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function Vy(e,t,n,r){return Ka((()=>{switch(e.rank){case 1:return mc(e,t,n);case 2:switch(r){case 1:return Ly(e,t,n);case 2:return zy(e,t,n);default:throw new Rv(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Ly(e,t,n);case 2:return yc(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return zy(e,t,n);default:throw new Rv(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Ly(e,t,n);case 2:return wc(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return wc(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return zy(e,t,n);default:throw new Rv(`The axis is not within the rank of the tensor ${r}`)}default:throw new Rv(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function Uy(e,t=-1){let n;return t<0&&(n=e[0].rank,t=0!==n?n:0),t===e[0].rank&&(t=-1),Js(e,t)}function Wy(e,t){switch(e.rank){case 1:return Qs([e,t]);case 2:return tl([e,t],0);case 3:return rl([e,t],0);case 4:return ol([e,t],0);default:throw new Rv(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function Hy(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new Rv(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return Ml(e,t)}function Gy(e,t=0,n=1,r,i){return Qu(e,t,n,r,i)}function qy(e,t,n,r){if(e.rank<2||t.rank<2)throw new Mv(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){const n=e.shape.slice(-1)[0],r=t.shape.slice(-2)[0];if(n!==r)throw new Mv(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(2===e.rank&&2===t.rank){const i=!1,o=!1;return Nh({a:e,b:t,transposeA:i,transposeB:o,bias:r?Ky(e.rank,r,Ry()):null,activation:n})}{const i=e.shape.slice(),o=i.pop();e=Rs(e,[-1,o]);const a=t.shape.slice(),s=a.pop(),l=a.pop(),u=[...a,s],c=Array.from({length:t.rank},((e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n));t=Rs(Qc(t,c),[l,-1]);const h=[...i,...u],d=!1,p=!1;return Rs(Nh({a:e,b:t,transposeA:d,transposeB:p,bias:r?Ky(e.rank,r,Ry()):null,activation:n}),h)}}function Yy(e,t,n){return Ka((()=>(t=Array.isArray(t)?Fc(t,"int32"):ea(t,"int32"),Vl(e,t,n))))}function Xy(e){return nu(e,e)}function Ky(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new Rv(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return 1===r.length?Rs(t,[1,r[0],1,1,1]):Rs(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?Rs(t,[1,1,1,1,r[0]]):Rs(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?Rs(t,[1,r[0],1,1]):Rs(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?Rs(t,[1,1,1,r[0]]):Rs(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?Rs(t,[1,r[0],1]):Rs(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?Rs(t,[1,1,r[0]]):Rs(t,[1].concat(r))}else if(e<3)return t;throw new Rv(`Unsupported input rank by biasAdd: ${t.rank}`)}function Jy(e,t,n){return Ka((()=>(null==n&&(n=Ry()),my(n),ls(e,Ky(e.rank,t,n)))))}function Zy(e,t=1){if(1!==t)throw new Mv(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return Ol(e)}function Qy(e){return Ka((()=>Cl(e,ls(as(e),1))))}function ex(e,t,n,r){return Ka((()=>nh(e,t,n,r)))}function tx(e){return Ka((()=>{const t=ls(.5,nu(.2,e));return Xs(t,0,1)}))}function nx(e,t,n=!1){return n?e():t()}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
const rx=["fanIn","fanOut","fanAvg"],ix=["normal","uniform","truncatedNormal"];
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function ox(e){Qv(rx,"FanMode",e)}function ax(e){Qv(ix,"Distribution",e)}class sx extends Wa{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class lx extends sx{apply(e,t){return zu(e,t)}}lx.className="Zeros",Ga(lx);class ux extends sx{apply(e,t){return Vu(e,t)}}ux.className="Ones",Ga(ux);class cx extends sx{constructor(e){if(super(),"object"!==typeof e)throw new Rv(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new Rv(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return Ka((()=>nu(rs(this.value),Vu(e,t))))}getConfig(){return{value:this.value}}}cx.className="Constant",Ga(cx);class hx extends sx{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return tc(e,this.minval,this.maxval,t)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}hx.className="RandomUniform",Ga(hx);class dx extends sx{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32","float32"!==t&&"int32"!==t)throw new Mv(`randomNormal does not support dType ${t}.`);return Gy(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}dx.className="RandomNormal",Ga(dx);class px extends sx{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32","float32"!==t&&"int32"!==t)throw new Mv(`truncatedNormal does not support dType ${t}.`);return jc(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}px.className="TruncatedNormal",Ga(px);class fx extends sx{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return Ka((()=>{if(2!==e.length||e[0]!==e[1])throw new Rv("Identity matrix initializer can only be used for 2D square matrices.");return nu(this.gain,Pl(e[0]))}))}getConfig(){return{gain:this.gain}}}function mx(e,t="channelsLast"){let n,r;if(my(t),2===e.length)n=e[0],r=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===t){const t=Ty(e,2);n=e[1]*t,r=e[0]*t}else if("channelsLast"===t){const t=Ty(e,0,e.length-2);n=e[e.length-2]*t,r=e[e.length-1]*t}}else{const t=Ty(e);n=Math.sqrt(t),r=Math.sqrt(t)}return[n,r]}fx.className="Identity",Ga(fx);class gx extends sx{constructor(e){if(super(),e.scale<0)throw new Rv(`scale must be a positive float. Got: ${e.scale}`);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,ox(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,ax(this.distribution),this.seed=e.seed}apply(e,t){const n=mx(e),r=n[0],i=n[1];let o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,r):"fanOut"===this.mode?o/=Math.max(1,i):o/=Math.max(1,(r+i)/2),"normal"===this.distribution){const n=Math.sqrt(o);if(t=t||"float32","float32"!==t&&"int32"!==t)throw new Mv(`${this.getClassName()} does not support dType ${t}.`);return jc(e,0,n,t,this.seed)}{const n=Math.sqrt(3*o);return tc(e,-n,n,t)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}gx.className="VarianceScaling",Ga(gx);class bx extends gx{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return gx.className}}bx.className="GlorotUniform",Ga(bx);class vx extends gx{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return gx.className}}vx.className="GlorotNormal",Ga(vx);class yx extends gx{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return gx.className}}yx.className="HeNormal",Ga(yx);class xx extends gx{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return gx.className}}xx.className="HeUniform",Ga(xx);class wx extends gx{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return gx.className}}wx.className="LeCunNormal",Ga(wx);class kx extends gx{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return gx.className}}kx.className="LeCunNormal",Ga(kx);class _x extends sx{constructor(e){if(super(),this.DEFAULT_GAIN=1,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed,null!=this.seed)throw new Mv("Random seed is not implemented for Orthogonal Initializer yet.")}apply(e,t){return Ka((()=>{if(e.length<2)throw new Mv("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${e[0]*e[1]}) elements: Slowness may result.`);const t=e[0]>e[1]?[e[1],e[0]]:e,n=Gy(t,0,1,"float32");let r=vp.gramSchmidt(n);return e[0]>e[1]&&(r=Qc(r)),nu(this.gain,r)}))}getConfig(){return{gain:this.gain,seed:this.seed}}}_x.className="Orthogonal",Ga(_x);const Sx={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Cx(e,t={}){return Yv(e,Ha.getMap().classNameMap,t,"initializer")}function Ix(e){return Gv(e)}function Ox(e){if("string"===typeof e){const t=e in Sx?Sx[e]:e;if("GlorotNormal"===t)return new vx;if("GlorotUniform"===t)return new bx;if("HeNormal"===t)return new yx;if("HeUniform"===t)return new xx;if("LeCunNormal"===t)return new wx;if("LeCunUniform"===t)return new kx;{const e={};return e["className"]=t,e["config"]={},Cx(e)}}return e instanceof sx?e:Cx(e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Tx(e){return Array.isArray(e)&&Array.isArray(e[0])}function Nx(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function Ex(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new Rv(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function Dx(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new Rv(`Expected exactly 1 Shape; got ${e.length}`)}return e}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function $x(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce(((e,t)=>e*t));return t}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
const Ax="Variable";class Rx{constructor(e,t="float32",n=Ax,r=!0,i=null){this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=ay(),n=null==n?Ax:n,this.originalName=_y(n),this.name=Sy(this.originalName),this.trainable_=r,this.constraint=i,this.val=zc(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),Mx(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function Mx(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function Fx(e){return e.map((e=>e.read()))}function Px(e){e.forEach((e=>{const t=e[0];t.write(e[1])}))}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class jx{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Bx{constructor(e,t,n,r,i,o,a){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=a,this.id=ay(),null!=o&&(this.originalName=_y(o),this.name=Sy(this.originalName)),this.rank=t.length}}let Lx=0;class zx{constructor(e,t){this.callArgs=t,this.id=Lx++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let Vx=0;class Ux extends Wa{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Vx++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=Uv(e)+"_"+ly(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new Av(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new Rv(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return zv(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return zv(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new $v(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new $v(`Layer ${this.name} is not connected, no input to return.`);return zv(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new $v(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new $v(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return zv(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map((e=>e()))}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach((t=>t.trainable=e)),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter((e=>e.trainable)):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter((e=>!e.trainable)).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=Vv(e),null==this.inputSpec||0===this.inputSpec.length)return;const t=Vv(this.inputSpec);if(e.length!==t.length)throw new Rv(`Layer ${this.name} expects ${t.length} inputs, but it received ${e.length} input tensors. Input received: ${e}`);for(let n=0;n<e.length;n++){const r=e[n],i=t[n];if(null==i)continue;const o=r.rank;if(null!=i.ndim&&o!==i.ndim)throw new Rv(`Input ${n} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${o}`);if(null!=i.maxNDim&&o>i.maxNDim)throw new Rv(`Input ${n} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${o}`);if(null!=i.minNDim&&o<i.minNDim)throw new Rv(`Input ${n} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${o}.`);if(null!=i.dtype&&r.dtype!==i.dtype)throw new Rv(`Input ${n} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${r.dtype}.`);if(i.axes){const e=r.shape;for(const t in i.axes){const r=Number(t),o=i.axes[t],a=r>=0?e[r]:e[e.length+r];if(null!=o&&-1===[o,null].indexOf(a))throw new Rv(`Input ${n} is incompatible with layer ${this.name}: expected axis ${r} of input shape to have value ${o} but got shape ${e}.`)}}if(null!=i.shape)for(let e=0;e<i.shape.length;++e){const t=i.shape[e],o=r.shape[e];if(null!=t&&null!=o&&t!==o)throw new Rv(`Input ${n} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${r.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=Vv(e);let r=!0;for(const o of n)if(!(o instanceof Bx)){r=!1;break}let i=!0;for(const o of n)if(o instanceof Bx){i=!1;break}if(r===i)throw new Rv("Arguments to apply() must be all SymbolicTensors or all Tensors");return wy(this.name,(()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of Vv(e))t.push(n.shape);this.build(zv(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let r=this.call(e,t);const i=Vv(r),o=[];for(let e of i)-1!==n.indexOf(e)&&(e=e.clone()),o.push(e);if(r=zv(o),null!=this.activityRegularizer)throw new Mv("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=Wx(e),r=this.computeOutputShape(n);let i;const o=Hx(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),i=null!=r&&r.length>0&&Array.isArray(r[0])?r.map(((n,r)=>new Bx(o,n,this,Vv(e),t,this.name,r))):new Bx(o,r,this,Vv(e),t,this.name),this.addInboundNode(e,i,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new Mv("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}}))}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach(((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new $v(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new $v(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Av(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return $x(this.weights)}build(e){this.built=!0}getWeights(e=!1){return Fx(e?this.trainableWeights:this.weights)}setWeights(e){Ka((()=>{const t=this.weights;if(t.length!==e.length)throw new Rv(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(0===t.length)return;const n=[],r=Fx(t);for(let i=0;i<r.length;++i){const o=r[i],a=t[i],s=e[i];if(!k(o.shape,s.shape))throw new Rv(`Layer weight shape ${o.shape} not compatible with provided weight shape ${s.shape}`);n.push([a,s])}Px(n)}))}addWeight(e,t,n,r,i,o,a,s){if(-1!==this._addedWeightNames.indexOf(e))throw new Rv(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():Ox("zeros"));const l=r.apply(t,n),u=new Rx(l,n,e,o,a);return l.dispose(),null!=i&&this.addLoss((()=>i.apply(u.read()))),null==o&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=Vv(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);t.forEach((e=>{if(null!=e)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)}))}return null}return t}addInboundNode(e,t,n,r,i,o,a=null){const s=Vv(e);t=Vv(t),n=Vv(n),r=Vv(r),i=Nx(i),o=Nx(o);const l=[],u=[],c=[];for(const h of s)l.push(h.sourceLayer),u.push(h.nodeIndex),c.push(h.tensorIndex);new zx({outboundLayer:this,inboundLayers:l,nodeIndices:u,tensorIndices:c,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:o},a);for(let h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e["batchInputShape"]=this.batchInputShape),null!=this.dtype&&(e["dtype"]=this.dtype),e}disposeWeights(){return this.weights.forEach((e=>e.dispose())),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function Wx(e){e=Vv(e);const t=[];for(const n of e)t.push(n.shape);return zv(t)}function Hx(e){return"float32"}function Gx(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const r=e.inputTensors[n],i=e.inboundLayers[n],o=e.nodeIndices[n],a=Gx(r,i,o);for(const e of a)-1===t.indexOf(e)&&t.push(e)}return t}}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class qx extends Ux{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:ly("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new Rv("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new Rv("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new Rv("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new Bx(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new zx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new Rv(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function Yx(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new Rv("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;null==n&&(n="float32");const r=new qx({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}),i=r.inboundNodes[0].outputTensors;return i[0]}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Xx(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return ea(t,e.dtype)}catch(mY){throw new Rv(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}qx.className="InputLayer",Ga(qx);class Kx{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Kx)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new Rv(`Duplicate key: name=${e.name}, id=${e.id}`);return this.id2Value[e.id]=Xx(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Bx){if(null==this.id2Value[e.id])throw new Rv(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new Rv(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof Bx){if(null==this.id2Value[e.id])throw new Rv(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new Rv(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&Ja(this.id2Mask)}}const Jx=new Pv,Zx=new Pv;function Qx(e){null!=Jx&&Jx.setMaxEntries(e),null!=Zx&&Zx.setMaxEntries(e)}function ew(e,t,n,r){const i=null!=n&&n["training"],o=Array.isArray(e),a=o?e:[e],s=a.map((e=>e.name)),l=[],u=t.names();for(const f of s)-1!==u.indexOf(f)?l.push(t.getValue(f)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const c=s.join(",")+"|"+t.names().sort().join(",");let h,d=Jx.get(c);if(null==d){const e=tw(a,t);d=e.sorted,h=e.recipientCounts,Jx.put(c,d),Zx.put(c,h)}h={},i||Object.assign(h,Zx.get(c));const p=new Kx(t);for(let f=0;f<d.length;++f){if(null!=r){const e=Xa().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}const e=d[f],o=e.sourceLayer;if(o instanceof qx)continue;const a=[],u=[],c=[];let m=!1;for(const n of e.inputs){const e=p.getValue(n),r=p.getMask(n);a.push(e),u.push(r),null!=r&&(m=!0),i||(h[n.name]--,0!==h[n.name]||t.hasKey(n)||-1!==s.indexOf(n.name)||e.isDisposed||!0===n.sourceLayer.stateful||c.push(e))}m&&(n=n||{},n["mask"]=u[0]);const g=Vv(o.apply(a,n));let b=null;o.supportsMasking&&(b=o.computeMask(a,u));const v=iw(e),y=Array.isArray(v)?v:[v];for(let t=0;t<y.length;++t){p.hasKey(y[t])||p.add(y[t],g[t],Array.isArray(b)?b[0]:b);const e=s.indexOf(y[t].name);-1!==e&&(l[e]=g[t])}i||Ja(c)}return p.disposeMasks(),o?l:l[0]}function tw(e,t){b(null!=e&&e.length>0,(()=>"Expected at least one fetch, got none"));let n=[],r={};if(1===e.length){const i=rw(e[0],t);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const o of e){const{sorted:e,recipientMap:a}=rw(o,t);for(const t of e)i.has(t.name)||(n.push(t),i.add(t.name));for(const t in a)null==r[t]&&(r[t]=new Set),a[t].forEach((e=>r[t].add(e)))}}return{sorted:n,recipientCounts:nw(r)}}function nw(e){const t={};for(const n in e)t[n]=e[n].size;return t}function rw(e,t){const n=new Set,r=[],i={};for(const s of t.names())n.add(s);const o=[],a=[];o.push(e);while(o.length>0){const e=o[o.length-1];if(n.has(e.name)){o.pop();continue}const t=a[a.length-1]===o.length-1;if(0===e.inputs.length||t)o.pop(),r.push(e),n.add(e.name),t&&a.pop();else{a.push(o.length-1);for(const t of e.inputs)null==i[t.name]&&(i[t.name]=new Set),i[t.name].add(e.name),n.has(t.name)||o.push(t)}}return{sorted:r,recipientMap:i}}function iw(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ow=oe();
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function aw(e,t){return Ka((()=>Nc(au(nu(e,e),t,!0))))}ow.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(()=>100),Qx);class sw extends Wa{getConfig(){return{}}}class lw extends sw{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Ka((()=>{const t=aw(e,this.axis),n=Xs(t,0,this.maxValue);return nu(e,Cl(n,ls(Ay(),t)))}))}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}lw.className="MaxNorm",Ga(lw);class uw extends sw{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Ka((()=>Cl(e,ls(Ay(),aw(e,this.axis)))))}getConfig(){return{axis:this.axis}}}uw.className="UnitNorm",Ga(uw);class cw extends sw{apply(e){return rc(e)}}cw.className="NonNeg",Ga(cw);class hw extends sw{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Ka((()=>{const t=aw(e,this.axis),n=ls(nu(this.rate,Xs(t,this.minValue,this.maxValue)),nu(1-this.rate,t));return nu(e,Cl(n,ls(Ay(),t)))}))}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}hw.className="MinMaxNorm",Ga(hw);const dw={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function pw(e){return Gv(e)}function fw(e,t={}){return Yv(e,Ha.getMap().classNameMap,t,"constraint")}function mw(e){if(null==e)return null;if("string"===typeof e){const t=e in dw?dw[e]:e,n={className:t,config:{}};return fw(n)}return e instanceof sw?e:fw(e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
async function gw(e){if(null==e)return;const t=[],n=[],r=[];for(const i in e){const o=e[i];if("number"!==typeof o){const e=o;t.push(e.data()),n.push(i),r.push(e)}}if(t.length>0){const i=await Promise.all(t);for(let t=0;t<i.length;++t)e[n[t]]=i[t][0];Ja(r)}}function bw(e){if(null!=e)for(const t in e){const n=e[t];"number"!==typeof n&&n.dispose()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
var vw;(function(e){e[e["SILENT"]=0]="SILENT",e[e["VERBOSE"]=1]="VERBOSE"})(vw||(vw={}));const yw=125;class xw{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class ww{constructor(e,t=10){null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class kw extends xw{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t["size"]?0:t["size"];this.seen+=n;for(const r in t){const e=t[r];if("number"===typeof e)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+e*n;else{let t;r in this.totals?t=this.totals[r]:this.totals[r]=0;const i=Ka((()=>ls(this.totals[r],nu(e,n))));this.totals[r]=i,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const n of this.params["metrics"])null!=this.totals[n]&&("number"===typeof this.totals[n]?t[n]=this.totals[n]/this.seen:Ka((()=>{const e=nu(Cl(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),Za(t[n])})))}}class _w extends xw{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){const e=[],t=[],n=[];for(const i in this.history){const r=this.history[i];for(let o=0;o<r.length;++o)if("number"!==typeof r[o]){const a=r[o];e.push(a.data()),t.push(i),n.push(o)}}const r=await Promise.all(e);for(let i=0;i<r.length;++i){const e=this.history[t[i]][n[i]];e.dispose(),this.history[t[i]][n[i]]=r[i][0]}}}class Sw extends xw{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||Np,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=yw),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");L(this.yieldEvery)&&(this.maybeWait=ry(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await gw(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await gw(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await gw(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await gw(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await gw(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):L(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await gw(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await gw(e),await this.trainEnd(e))}}function Cw(e,t){if(null==e&&(e={}),e instanceof xw)return[e];if(Array.isArray(e)&&e[0]instanceof xw)return e;const n=Vv(e);return n.map((e=>new Sw(e,t)))}class Iw{constructor(){}static registerCallbackConstructor(e,t){b(e>=0&&Number.isInteger(e),(()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`)),Iw.checkForDuplicate(t),null==Iw.constructors[e]&&(Iw.constructors[e]=[]),Iw.constructors[e].push(t)}static checkForDuplicate(e){for(const t in Iw.constructors){const n=Iw.constructors[+t];n.forEach((t=>{if(t===e)throw new Rv("Duplicate callback constructor.")}))}}static clear(){Iw.constructors={}}static createCallbacks(e){const t=[];for(const n in Iw.constructors){const r=+n;e>=r&&t.push(...Iw.constructors[r])}return t.map((e=>new e))}}function Ow(e,t,n,r,i,o,a,s,l){const u=new _w,c=[new kw,...Iw.createCallbacks(t)];null!=e&&c.push(...e),c.push(u);const h=new ww(c);return h.setParams({epochs:n,initialEpoch:r,samples:i,steps:o,batchSize:a,verbose:t,doValidation:s,metrics:l}),{callbackList:h,history:u}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Tw(e,t={},n=!1){return Yv(e,Ha.getMap().classNameMap,t,"layer",n)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Nw(e,t){return Ka((()=>{"float32"!==e.dtype&&(e=ea(e,"float32"));const n=au(Xy(e),t,!0),r=jl(n.shape,Ay()),i=Nc(vu(n,r));return Cl(e,i)}))}function Ew(e,t){return Ka((()=>xu(Xy(iu(t,e)),-1)))}function Dw(e,t){return Ka((()=>xu(as(iu(t,e)),-1)))}function $w(e,t){return Ka((()=>{const n=iu(e,t),r=Xs(as(e),Ay(),Number.MAX_VALUE),i=as(Cl(n,r));return nu(100,xu(i,-1))}))}function Aw(e,t){return Ka((()=>{const n=Xs(t,Ay(),Number.MAX_VALUE),r=Kl(ls(1,n)),i=Xs(e,Ay(),Number.MAX_VALUE),o=Kl(ls(1,i));return xu(Xy(iu(r,o)),-1)}))}function Rw(e,t){return Ka((()=>{const n=vu(0,iu(1,nu(e,t)));return xu(Xy(n),-1)}))}function Mw(e,t){return Ka((()=>{const n=vu(0,iu(1,nu(e,t)));return xu(n,-1)}))}function Fw(e,t){return Ka((()=>{const n=au(nu(e,t),-1),r=eu(nu(iu(1,e),t),-1);return vu(0,ls(1,iu(r,n)))}))}function Pw(e,t){return Ka((()=>{const n=Math.log(2),r=iu(t,e),i=iu(ls(r,Cc(nu(-2,r))),n);return xu(i,-1)}))}function jw(e,t,n=!1){return Ka((()=>{if(n)t=_c(t);else{const e=au(t,t.shape.length-1,!0);t=Cl(t,e)}return t=Xs(t,Ay(),1-Ay()),Fu(au(nu(ea(e,"float32"),Kl(t)),t.shape.length-1))}))}function Bw(e,t,n=!1){return Ka((()=>{const r=ea(Ll(jy(e)),"int32");t=Xs(t,Ay(),1-Ay());const i=t.shape,o=Rs(Lu(r,i[i.length-1]),i);return jw(o,t,n)}))}function Lw(e,t){if(!k(e.shape,t.shape))throw new Rv(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return Ka((()=>{const n=rc(t),r=Fu(as(t));return ls(iu(n,nu(t,e)),Zl(Dl(r)))}))}function zw(e,t){return Ka((()=>{let n;return n=Xs(t,Ay(),1-Ay()),n=Kl(Cl(n,iu(1,n))),xu(Lw(e,n),-1)}))}function Vw(e,t){return Ka((()=>{const n=Xs(e,Ay(),1),r=Xs(t,Ay(),1);return au(nu(e,Kl(Cl(n,r))),-1)}))}function Uw(e,t){return Ka((()=>{const n=Kl(ls(Ay(),t));return xu(iu(t,nu(e,n)),-1)}))}function Ww(e,t){return Ka((()=>{const n=Nw(e,-1),r=Nw(t,-1),i=nu(n,r);return Fu(au(i,-1))}))}Iw.constructors={};const Hw={meanSquaredError:Ew,meanAbsoluteError:Dw,meanAbsolutePercentageError:$w,meanSquaredLogarithmicError:Aw,squaredHinge:Rw,hinge:Mw,categoricalHinge:Fw,logcosh:Pw,categoricalCrossentropy:jw,sparseCategoricalCrossentropy:Bw,binaryCrossentropy:zw,kullbackLeiblerDivergence:Vw,poisson:Uw,cosineProximity:Ww};function Gw(e){if("string"===typeof e){if(e in Hw)return Hw[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Rv(t)}return e}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function qw(e,t){return Ka((()=>{const n=nu(.5,Wu(t)),r=My(Wl(t,n),e.dtype);return xu(Nl(e,r),-1)}))}function Yw(e,t){return Ka((()=>My(Nl(fs(e,-1),fs(t,-1)),"float32")))}function Xw(e,t){return Ka((()=>ea(au(cu(Nl(e,1),Nl(t,1))),"float32")))}function Kw(e,t){return Ka((()=>ea(au(cu(Nl(e,0),Nl(t,1))),"float32")))}function Jw(e,t){return Ka((()=>{const n=Xw(e,t),r=Kw(e,t),i=ls(n,r);return ea(Hc(Wl(i,0),Cl(n,i),0),"float32")}))}function Zw(e,t){return zw(e,t)}function Qw(e,t){return e.rank===t.rank&&(e=Dc(e,[e.rank-1])),t=fs(t,-1),t.dtype!==e.dtype&&(t=ea(t,e.dtype)),ea(Nl(e,t),"float32")}const ek=Ew,tk=Ew,nk=Dw,rk=Dw,ik=$w,ok=$w,ak=jw,sk=Ww,lk=Bw,uk={binaryAccuracy:qw,categoricalAccuracy:Yw,precision:Jw,categoricalCrossentropy:ak,sparseCategoricalCrossentropy:lk,mse:ek,MSE:tk,mae:nk,MAE:rk,mape:ik,MAPE:ok,cosine:sk};function ck(e){if("string"===typeof e&&e in uk)return uk[e];if("string"!==typeof e&&null!=e)return e;throw new Rv(`Unknown metric ${e}`)}function hk(e){if(Bv(null!==e,`Unknown LossOrMetricFn ${e}`),"string"===typeof e)return e;{let t;for(const n of Object.keys(Hw))if(Hw[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(uk))if(uk[n]===e){t=n;break}return void 0!==t?t:e.name}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function dk(e){const t={Adagrad:()=>Op.adagrad(.01),Adadelta:()=>Op.adadelta(1,.95,Ay()),Adam:()=>Op.adam(.001,.9,.999,Ay()),Adamax:()=>Op.adamax(.002,.9,.999,Ay(),0),RMSProp:()=>Op.rmsprop(.001,.9,0,Ay()),SGD:()=>Op.sgd(.01)};if(t["adagrad"]=t["Adagrad"],t["adadelta"]=t["Adadelta"],t["adam"]=t["Adam"],t["adamax"]=t["Adamax"],t["rmsprop"]=t["RMSProp"],t["sgd"]=t["SGD"],e in t)return t[e]();throw new Rv(`Unknown Optimizer ${e}`)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
const pk=1048576;function fk(e,t,n=!1){if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!mk(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>pk&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${pk}.`)}}function mk(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!==typeof n)return!1;if(!mk(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!mk(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function gk(e,t,n,r=console.log){const i=vk(e),o=["Layer (type)","Input Shape","Output shape","Param #"];let a;if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((e=>Math.floor(t*e)))),!i){o.push("Receives inputs"),a=[];for(const t in e.nodesByDepth)a.push(...e.nodesByDepth[t])}r("_".repeat(t)),yk(o,n,r),r("=".repeat(t));const s=e.layers;for(let c=0;c<s.length;++c)i?xk(s[c],n,r):wk(s[c],n,a,r),r((c===s.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=bk(e),u=$x(e.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(t))}function bk(e){let t;return t=null!=e.collectedTrainableWeights?$x(e.collectedTrainableWeights):$x(e.trainableWeights),t}function vk(e){let t=!0;const n=[],r=[];for(const i in e.nodesByDepth)n.push(e.nodesByDepth[i]);for(const i of n){if(i.length>1||1===i.length&&i[0].inboundLayers.length>1){t=!1;break}r.push(...i)}if(t)for(const i of e.layers){let e=!1;for(const n of i.inboundNodes)if(-1!==r.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}function yk(e,t,n=console.log){let r="";for(let i=0;i<e.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=e[i],r=r.slice(0,t[i]),r+=" ".repeat(t[i]-r.length);n(r)}function xk(e,t,n){let r,i;try{i=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(mY){i="multiple"}try{r=JSON.stringify(e.outputShape)}catch(mY){r="multiple"}const o=e.name,a=e.getClassName(),s=[`${o} (${a})`,i,r,e.countParams().toString()];yk(s,t,n)}function wk(e,t,n,r){let i,o;try{o=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(mY){o="multiple"}try{i=JSON.stringify(e.outputShape)}catch(mY){i="multiple"}const a=[];for(const h of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(h)))for(let e=0;e<h.inboundLayers.length;++e){const t=h.inboundLayers[e].name,n=h.nodeIndices[e],r=h.tensorIndices[e];a.push(`${t}[${n}][${r}]`)}const s=e.name,l=e.getClassName(),u=0===a.length?"":a[0],c=[`${s} (${l})`,o,i,e.countParams().toString(),u];yk(c,t,r);for(let h=1;h<a.length;++h)yk(["","","","",a[h]],t,r)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function kk(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function _k(e,t){if(null===e)return null;if("string"===typeof e)return Wv(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const r=e[i];kk(t,i,r)?n.push(r):n.push(_k(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"===typeof r)t[n]=r;else{const e=Wv(n);t[e]=_k(r,e)}}return t}}function Sk(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return Uv(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const r=e[i];kk(t,i,r)?n.push(r):n.push(Sk(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n],i=Uv(n);t[i]="name"!==n&&"className"!==n||"string"!==typeof r?Sk(r,n):r}return t}}
/** @license See the LICENSE file. */
const Ck="3.19.0";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class Ik extends Ux{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=ly(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Jv(this.inputs).length!==this.inputs.length)throw new Rv(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map((e=>e.name))}`);Jv(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map((e=>e.name))}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const b of this.outputs){const e=b.sourceLayer,t=b.nodeIndex,n=b.tensorIndex;this.outputLayers.push(e),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(n)}for(const b of this.inputs){const e=b.sourceLayer,t=b.nodeIndex,n=b.tensorIndex;Bv(0===t,"input layer has >1 nodes"),Bv(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){const t=this.inputLayers[b];if(!(t instanceof qx))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${b} (0-based) originates from layer type ${t.getClassName()}.`);this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(const b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map((e=>e.shape)),this.internalOutputShapes=this.outputs.map((e=>e.shape));const t={},n={},r={},i={},o={},a=[],s=(e,t,n,r,i,l)=>{null!=r&&null!=i&&null!=l||(r=e.sourceLayer,i=e.nodeIndex,l=e.tensorIndex);const u=r.inboundNodes[i];if(-1!==n.indexOf(u))throw new Av(`The tensor ${e.name} at layer "${r.name}" is part of a cycle.`);if(-1!==t.indexOf(u))return;this.containerNodes.add(Ik.nodeKey(r,i)),r.id in o||(o[r.id]=Object.keys(o).length),-1===n.indexOf(u)&&n.push(u);const c=u.inboundLayers.length;for(let o=0;o<c;o++){const e=u.inputTensors[o],r=u.inboundLayers[o],i=u.nodeIndices[o],a=u.tensorIndices[o];s(e,t,n,r,i,a)}t.push(u);while(n.indexOf(u)>=0)n.splice(n.indexOf(u),1);a.push(u)},l=[],u=[];for(const b of this.outputs)s(b,l,u);const c=a.slice().reverse();for(const b of c){n[b.id]=b,b.id in t||(t[b.id]=0);let e=t[b.id];const o=null==r[b.outboundLayer.id]?0:r[b.outboundLayer.id];e=Math.max(e,o),r[b.outboundLayer.id]=e,i[b.outboundLayer.id]=b.outboundLayer,t[b.id]=e;for(let r=0;r<b.inboundLayers.length;r++){const i=b.inboundLayers[r],o=b.nodeIndices[r],a=i.inboundNodes[o],s=null==t[a.id]?0:t[a.id];t[a.id]=Math.max(e+1,s),n[a.id]=a}}const h={};for(const b in t){const e=t[b];e in h||(h[e]=[]),h[e].push(n[b])}const d={};for(const b in r){const e=r[b];e in d||(d[e]=[]),d[e].push(i[b])}let p=Object.keys(d).map((e=>parseInt(e,10))).sort(Kv);this.layers=[];for(const b of p){const e=d[b];e.sort(((e,t)=>{const n=o[e.id],r=o[t.id];return n<r?-1:n>r?1:0}));for(const t of e)t instanceof Ik&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=d,p=Object.keys(h).map((e=>parseInt(e,10))).sort(Kv);const f=this.inputs.slice(),m=[];for(const b of p)for(const e of h[b]){const t=e.outboundLayer;if(null!=t){for(const n of e.inputTensors)if(-1===f.indexOf(n))throw new Av(`Graph disconnected: cannot obtain value for tensor ${n} at layer "${t.name}". The following previous layers were accessed without issue: ${m}`);for(const t of e.outputTensors)f.push(t);m.push(t.name)}}this.nodesByDepth=h;const g=this.layers.map((e=>e.name));for(const b of g){const e=g.filter((e=>e===b)).length;if(1!==e)throw new Av(`The name "${b}" is used ${e} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new zx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map((e=>null)),outputMasks:this.outputs.map((e=>null)),inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs.map((e=>e.shape))}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach((t=>{t._trainableWeights.forEach((t=>t.trainable=e))})),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Rv("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){const n={};let r=0;for(const o of this.layers)for(const e of o.weights){if(null!=n[e.originalName])throw new Rv(`Duplicate weight name: ${e.originalName}`);n[e.originalName]=e,r++}const i=[];for(const o in e){let r=o;if(null==n[o]){const e=o.split("/"),t=e.slice(0,-2).concat([e[e.length-1]]);r=t.join("/")}if(null!=n[r])i.push([n[r],e[o]]);else if(t)throw new Rv(`Provided weight data has no target variable: ${o}`);delete n[r]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new Rv(`${e.length} of ${r} weights are not set: ${e}`)}Px(i)}updatedConfig(){const e=this.getConfig(),t={};return t["className"]=this.getClassName(),t["config"]=e,t["kerasVersion"]=`tfjs-layers ${Ck}`,t["backend"]="TensorFlow.js",t}toJSON(e,t=!0){const n=Sk(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return Ka((()=>{e=Vv(e);const n=new Kx;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return ew(this.outputs,n,t)}))}computeMask(e,t){return Ka((()=>{let n;return e=Vv(e),n=null==t?jv(null,e.length):Vv(t),this.runInternalGraph(e,n)[1]}))}computeOutputShape(e){const t=Nx(e);if(t.length!==this.inputLayers.length)throw new Rv(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let a=0;a<t.length;a++){const e=this.inputLayers[a],r=t[a],i=e.name+"_0_0";n[i]=r}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(Kv);if(r.length>1)for(const a of r){const e=this.nodesByDepth[a];for(const t of e){const e=t.outboundLayer;if(-1!==this.inputLayers.map((e=>e.id)).indexOf(e.id))continue;const r=[];for(let s=0;s<t.inboundLayers.length;s++){const e=t.inboundLayers[s],i=t.nodeIndices[s],o=t.tensorIndices[s],a=`${e.name}_${i}_${o}`,l=n[a];r.push(l)}const i=e.computeOutputShape(zv(r)),o=Nx(i),a=e.inboundNodes.indexOf(t);for(let t=0;t<o.length;t++){const r=`${e.name}_${a}_${t}`;n[r]=o[t]}}}const i=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const e=this.outputLayers[a],t=this.outputLayersNodeIndices[a],n=this.outputLayersTensorIndices[a],r=`${e.name}_${t}_${n}`;o.push(r)}for(let a=0;a<o.length;a++){const e=o[a];Bv(e in n),i.push(n[e])}return zv(i)}runInternalGraph(e,t){null==t&&(t=jv(null,e.length));const n={};for(let s=0;s<this.inputs.length;++s){const r=this.inputs[s],i=e[s],o=t[s];n[r.id]=[i,o]}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(Kv);for(const s of r){const e=this.nodesByDepth[s];for(const t of e){const e=t.outboundLayer,r=t.inputTensors,i=t.outputTensors,o=new Array;for(const t of r)t.id in n&&o.push(n[t.id]);if(o.length===r.length){let r,a,s,l,u={};if(null!=t.callArgs&&(u=t.callArgs),1===o.length){const[t,n]=o[0];null==u["mask"]&&(u["mask"]=n),s=Vv(e.call(t,u)),l=Vv(e.computeMask(t,n)),r=[t],a=[n]}else r=o.map((e=>e[0])),a=o.map((e=>e[1])),null==u["mask"]&&(u["mask"]=a),s=Vv(e.call(r,u)),l=Vv(e.computeMask(r,a));if(e.activityRegularizer)throw new Mv("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<i.length;++e){const t=i[e],r=s[e],o=l[e];n[t.id]=[r,o]}}}}const i=[],o=[],a=[];for(const s of this.outputs){Bv(s.id in n,`Could not compute output ${s.name} : ${s.id}`);const[e,t]=n[s.id];a.push(e.shape),i.push(e),o.push(t)}return[i,o,a]}buildNodeConversionMap(e){const t={};let n;for(const r of this.layers){n=r instanceof Ik?1:0;for(let e=0;e<r.inboundNodes.length;e++){const i=Ik.nodeKey(r,e);this.containerNodes.has(i)&&(t[i]=n,n+=1)}}return t}getLayer(e,t){if(null!=t){if(this.layers.length<=t)throw new Rv(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}if(null==e)throw new Rv("Provide either a layer name or layer index");for(const n of this.layers)if(n.name===e)return n;throw new Rv(`No such layer: ${e}`)}calculateLosses(){return Ka((()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=Ik.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e}))}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const o of this.layers){const e=o.getClassName(),r=o.getConfig(),i=[];for(let n=0;n<o.inboundNodes.length;n++){const e=o.inboundNodes[n],r=Ik.nodeKey(o,n);let a={};if(this.containerNodes.has(r)){if(e.callArgs)try{JSON.stringify(e.callArgs),a=e.callArgs}catch(mY){console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${e.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),a={}}if(e.inboundLayers.length>0){const n=[];for(let r=0;r<e.inboundLayers.length;r++){const i=e.inboundLayers[r],o=e.nodeIndices[r],s=e.tensorIndices[r],l=Ik.nodeKey(i,o);let u=t[l];null==u&&(u=0),n.push([i.name,u,s,a])}i.push(n)}}}const a={};a["name"]=o.name,a["className"]=e,a["config"]=r,a["inboundNodes"]=i,n.push(a)}e["layers"]=n;const r=[];for(let o=0;o<this.inputLayers.length;o++){const e=this.inputLayers[o],n=this.inputLayersNodeIndices[o],i=Ik.nodeKey(e,n);if(!this.containerNodes.has(i))continue;let a=t[i];null!==a&&void 0!==a||(a=0);const s=this.inputLayersTensorIndices[o];r.push([e.name,a,s])}e["inputLayers"]=r;const i=[];for(let o=0;o<this.outputLayers.length;o++){const e=this.outputLayers[o],n=this.outputLayersNodeIndices[o],r=Ik.nodeKey(e,n);if(!this.containerNodes.has(r))continue;let a=t[r];null!==a&&void 0!==a||(a=0);const s=this.outputLayersTensorIndices[o];i.push([e.name,a,s])}return e["outputLayers"]=i,e}static fromConfig(e,t,n={},r=!1){const i={},o={};function a(e,t){e.name in o?o[e.name].push(t):o[e.name]=[t]}function s(e,t){const n=[];let r;for(const o of t){const s=o[0],l=o[1],u=o[2];if(r=null==o[3]?{}:o[3],!(s in i))return void a(e,t);const c=i[s];if(c.inboundNodes.length<=l)return void a(e,t);const h=c.inboundNodes[l];n.push(h.outputTensors[u])}n.length>0&&e.apply(zv(n),r)}function l(e){const n=e["name"],o=Tw(e,null!=t["customObjects"]?t["customObjects"]:{});o.setFastWeightInitDuringBuild(r),i[n]=o;const s=e["inboundNodes"];s.forEach((e=>{if(!(e instanceof Array))throw new Rv(`Corrupted configuration, expected array for nodeData: ${e}`);a(o,e)}))}const u=t["name"],c=t["layers"];for(const m of c)l(m);while(!Zv(o))for(const e of c){const t=i[e["name"]];if(t.name in o){const e=o[t.name];delete o[t.name];for(const n of e)s(t,n)}}const h=[],d=[],p=t["inputLayers"];for(const m of p){const e=m[0],t=m[1],n=m[2];Bv(e in i);const r=i[e],o=r.inboundNodes[t].outputTensors;h.push(o[n])}const f=t["outputLayers"];for(const m of f){const e=m[0],t=m[1],n=m[2];Bv(e in i);const r=i[e],o=r.inboundNodes[t].outputTensors;d.push(o[n])}return new e({inputs:h,outputs:d,name:u})}get stateful(){if(this._stateful)throw new Rv("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Ka((()=>{this.layers.forEach((e=>{e.stateful&&e.resetStates()}))}))}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Ok(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>null));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){const n=[];return t.forEach((t=>{t in e?n.push(e[t]):n.push(null)})),n}throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}function Tk(e,t){return Ok(e,t,"classWeight")}async function Nk(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=Ka((()=>{if(1===e.shape.length)return na(e);if(2===e.shape.length){if(e.shape[1]>1){const t=1;return fs(e,t)}if(1===e.shape[1])return Rs(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)})),r=Array.from(await t.data());Ja(t);const i=[];return r.forEach((e=>{if(null==n[e])throw new Error(`classWeight must contain all classes in the training data. The class ${e} exists in the data but not in classWeight`);i.push(n[e])})),Fc(i,"float32")}return null}function Ek(e,t){return nu(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
const Dk=32;function $k(e,t){let n,r;const i=t;n=i["xs"],r=i["ys"],b(null!=n&&null!=r,(()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`));const o=Ak("input",e.inputNames,n),a=Ak("output",e.outputNames,r),s=o[0].shape[0];b(o.length===e.inputs.length,(()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${o.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`)),b(a.length===e.outputs.length,(()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`));for(let l=0;l<o.length;l++)b(o[l].shape[0]===s,(()=>`Batch size mismatch: input ${e.inputNames[l]} has ${o[l].shape[0]}; expected  ${s} based on input ${e.inputNames[0]}.`));for(let l=0;l<a.length;l++)b(a[l].shape[0]===s,(()=>`Batch size mismatch: output ${e.outputNames[l]} has ${a[l].shape[0]}; expected  ${s} based on input ${e.inputNames[0]}.`));return{xs:o,ys:a}}function Ak(e,t,n){if(n instanceof wi)return[n];if(Array.isArray(n))return b(n.length===t.length,(()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`)),n;{const r=[];for(const i of t){if(null==n[i])throw new Rv(`The feature data generated by the dataset lacks the required ${e} key '${i}'.`);r.push(n[i])}return r}}function Rk(e){if(3===e.length)throw new Mv("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}async function Mk(e,t,n){const r=null!=n.batchesPerEpoch;if(b(null!=e.optimizer,(()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig).")),b(null!=n,(()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call.")),b(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),(()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`)),b(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),(()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`)),b(null==n["validationSplit"],(()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead.")),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const i=null!=n.validationData;let o,a;if(i)if(Pk(n.validationData))b(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),(()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`));else{const e=Rk(n.validationData);o=e.xs,a=e.ys}const s=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let u;u=i?l.slice().concat(l.map((e=>"val_"+e))):l.slice();const c=Cw(n.callbacks,n.yieldEvery),h=null==n.verbose?1:n.verbose,{callbackList:d,history:p}=Ow(c,h,n.epochs,null,null,Fk(t,n),null,i,u);d.setModel(e),e.history=p,await d.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,m=await t.iterator();while(f<n.epochs){const u={};await d.onEpochBegin(f);let c=0,h=0;r||(m=await t.iterator());while(!r||c<n.batchesPerEpoch){const t=await m.next();if(r&&t.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${c} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, `+n.batchesPerEpoch*n.epochs+" batches). You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:r,ys:i}=$k(e,t.value),o={};o["batch"]=h,o["size"]=r[0].shape[0],await d.onBatchBegin(h,o);const a=[];if(null!=n.classWeight){const t=Tk(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)a.push(await Nk(i[e],null,t[e]))}const u=r.concat(i).concat(a),p=s(u);Ja(u);for(let e=0;e<l.length;++e){const t=l[e],n=p[e];o[t]=n,Za(n)}await d.onBatchEnd(h,o),bw(o),h++,c++}if(r?c>=n.batchesPerEpoch:t.done){if(i){let t;t=Pk(n.validationData)?Vv(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):Vv(e.evaluate(o,a,{batchSize:null==n.validationBatchSize?Dk:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)u[`val_${e.metricsNames[n]}`]=t[n]}break}if(e.stopTraining_)break}if(await d.onEpochEnd(f,u),f++,e.stopTraining_)break}return await d.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function Fk(e,t){let n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function Pk(e){return"function"===typeof e.iterator}function jk(e){return"function"===typeof e.next}async function Bk(e,t,n){n=n||{};const r=null!=n.batches,i=e.testFunction;let o=[];if(n.verbose>0)throw new Mv("Verbose mode is not implemented yet.");b(!r||n.batches>0&&Number.isInteger(n.batches),(()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`));const a=jk(t)?t:await t.iterator();let s=0,l=0;while(!r||l<n.batches){const t=await a.next();if(o=Ka((()=>{if(t.value){const{xs:n,ys:r}=$k(e,t.value),a=n.concat(r),u=Ka((()=>i(a)));if(Ja(a),0===l)for(let e=0;e<u.length;++e)o.push(rs(0));const c=a[0].shape[0];for(let e=0;e<u.length;++e){const t=u[e],n=o[e];o[e]=Ka((()=>ls(o[e],nu(c,t)))),l>0&&Ja(n)}Ja(u),s+=c,++l}return o})),t.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<o.length;++u){const e=o[u];o[u]=Cl(o[u],s),Ja(e)}return zv(o)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Lk(e){b(e>0&&Number.isInteger(e),(()=>`batchSize is required to be a positive integer, but got ${e}`))}function zk(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((e=>Ly(e,t,n-t))):Ly(e,t,n-t)}function Vk(e,t){return Ka((()=>null==e?null:Array.isArray(e)?e.map((e=>Vk(e,t))):Yy(e,"int32"===t.dtype?t:ea(t,"int32"))))}function Uk(e,t){const n=[];let r=0,i=null;while(r<e)i=r+t,i>=e&&(i=e),n.push([r,i]),r=i;return n}async function Wk(e,t,n,r,i,o,a,s,l,u,c,h,p,f,m){null==i&&(i=32),null==o&&(o=1),null==c&&(c=!0),null==p&&(p=0);let g=!1;if(null!=l&&null!=u&&(g=!0),null!=m&&(g=!0,null==f))throw new Rv("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const b=e.checkNumSamples(n,i,f,"steps_per_epoch");let v;null!=b&&(v=Dy(0,b)),null==a&&(a=1);const{callbackList:y,history:x}=Ow(s,a,o,p,b,f,i,g,h);y.setModel(e),e.history=x,await y.onTrainBegin(),e.stopTraining_=!1;for(let w=p;w<o;++w){await y.onEpochBegin(w);const o={};if(null!=f)throw new Mv("stepsPerEpoch mode is not implemented yet.");{if("batch"===c)throw new Mv("batch shuffling is not implemneted yet");c&&d(v);const a=Fc(v),s=Uk(b,i);for(let c=0;c<s.length;++c){const h={};if(await y.onBatchBegin(c,h),Ka((()=>{const d=s[c][0],p=s[c][1],f=Ly(a,d,p-d);h["batch"]=c,h["size"]=p-d;const m=Vk(n,f),b=t(m);for(let e=0;e<r.length;++e){const t=r[e],n=b[e];h[t]=n,Za(n)}if(c===s.length-1&&g){const t=e.testLoop(l,u,i);for(let e=0;e<r.length;++e){const n=r[e],i=t[e];Za(i),o["val_"+n]=i}}})),await y.onBatchEnd(c,h),bw(h),e.stopTraining_)break}a.dispose()}if(await y.onEpochEnd(w,o),e.stopTraining_)break}return await y.onTrainEnd(),await e.history.syncData(),e.history}async function Hk(e,t,n,r={}){if(e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let i,o,a,s,l,u,c,h,d;e.isTraining=!0;try{const p=null==r.batchSize?32:r.batchSize;Lk(p);const f=!1,m=await e.standardizeUserData(t,n,r.sampleWeight,r.classWeight,f,p);i=m[0],o=m[1],d=m[2];let g,b=!1;if(null!=r.validationData&&r.validationData.length>0){if(b=!0,2!==r.validationData.length)throw 3===r.validationData.length?new Mv("validationData including sample weights is not supported yet."):new Rv(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);l=r.validationData[0],u=r.validationData[1];const t=!0,n=await e.standardizeUserData(l,u,null,null,t,p);c=n[0],h=n[1],g=c.concat(h)}else if(null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1){b=!0;const e=Math.floor(i[0].shape[0]*(1-r.validationSplit)),t=i[0].shape[0];c=zk(i,e,t),a=i,i=zk(i,0,e),h=zk(o,e,t),s=o,o=zk(o,0,e),g=c.concat(h)}else null!=r.validationSteps&&(b=!0);const v=i.concat(o).concat(d);e.checkTrainableWeightsConsistency();const y=e.makeTrainFunction(),x=e.getDedupedMetricsNames();let w,k;b?(e.makeTestFunction(),w=e.testFunction,k=x.slice().concat(x.map((e=>"val_"+e)))):(w=null,g=[],k=x.slice());const _=Cw(r.callbacks,r.yieldEvery),S=await Wk(e,y,v,x,p,r.epochs,r.verbose,_,w,g,r.shuffle,k,r.initialEpoch,null,null);return S}finally{e.isTraining=!1,qk(i,t),qk(o,n),qk(a,t),qk(s,n),qk(c,l),qk(h,u),null!=d&&Ja(d)}}function Gk(e){const t=[];e instanceof wi&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(Fy(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function qk(e,t){if(null==e)return;const n=[];if(t instanceof wi)n.push(t.id);else if(Array.isArray(t))t.forEach((e=>n.push(e.id)));else if(null!=t)for(const i in t){const e=t[i];n.push(e.id)}const r=[];if(e instanceof wi)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach((e=>{-1===n.indexOf(e.id)&&r.push(e)}));else if(null!=e)for(const i in e){const t=e[i];-1===n.indexOf(t.id)&&r.push(t)}r.forEach((e=>{e.isDisposed||e.dispose()}))}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Yk(e){return e instanceof wi}function Xk(e){return Array.isArray(e)}function Kk(e){return!Yk(e)&&!Xk(e)}function Jk(e,t,n,r=!0,i=""){if(null==t||0===t.length){if(null!=e){let t=!1;if(Xk(e)&&e.length>0)t=!0;else if(Kk(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new Rv(`Error when checking model ${i} expected no data, but got ${e}`)}return[]}if(null==e)return t.map((e=>null));let o;if(Kk(e)){o=[];for(const n of t){if(null==e[n])throw new Rv(`No data provided for "${n}". Need data for each key in: ${t}`);o.push(e[n])}}else if(Xk(e)){if(e.length!==t.length)throw new Rv(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);o=e}else{if(t.length>1)throw new Rv(`The model ${i} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);o=[e]}if(o=Gk(o),null!=n)for(let a=0;a<t.length;++a){if(null==n[a])continue;const e=o[a];if(e.shape.length!==n[a].length)throw new Rv(`Error when checking ${i}: expected ${t[a]} to have ${n[a].length} dimension(s). but got array with shape ${e.shape}`);for(let t=0;t<n[a].length;++t){if(0===t&&!r)continue;const o=e.shape[t],s=n[a][t];if(null!=s&&s>=0&&o!==s)throw new Rv(`${i} expected a batch of elements where each example has shape [${n[a].slice(1,n[a].length)}] (i.e.,tensor shape [*,${n[a].slice(1,n[a].length)}]) but the ${i} received an input with ${e.shape[0]} examples, each with shape [${e.shape.slice(1,e.shape.length)}] (tensor shape [${e.shape}])`)}}return o}function Zk(e,t,n){const r=Jv(e.map((e=>e.shape[0])));r.sort();const i=Jv(t.map((e=>e.shape[0])));if(i.sort(),r.length>1)throw new Rv(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map((e=>e.shape)))}`);if(i.length>1)throw new Rv(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map((e=>e.shape)))}`);if(r.length>0&&i.length>0&&!k(r,i))throw new Rv(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function Qk(e,t,n){const r=[Ew,zw,jw];for(let i=0;i<e.length;++i){const o=e[i],a=t[i],s=n[i];if(null!=a){if(a===jw&&1===o.shape[o.shape.length-1])throw new Rv(`You are passing a target array of shape ${o.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(a)){const e=o.shape.slice(1),t=s.slice(1);for(let n=0;n<e.length;++n){const r=e[n],i=t[n];if(null!=i&&r!==i)throw new Rv(`A target Tensor with shape ${o.shape} was passed for an output of shape ${s}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function e_(e,t,n,r=!0,i=""){let o;if(Array.isArray(e)){if(e.length!==t.length)throw new Rv(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);o=e}else{if(t.length>1)throw new Rv(`The model expects ${t.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);o=[e]}if(null!=n)for(let a=0;a<t.length;++a){if(null==n[a])continue;const e=o[a];if(e.shape.length!==n[a].length)throw new Rv(`Error when checking ${i}: expected ${t[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(e.shape)}`);for(let o=0;o<n[a].length;++o){if(0===o&&!r)continue;const s=e.shape[o],l=n[a][o];if(null!=l&&l!==s)throw new Rv(`Error when checking ${i}: expected ${t[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(e.shape)}.`)}}}function t_(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>[]));let n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);n=e}if(Array.isArray(n))return t.map((e=>n));{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}const n_="layers-model";class r_ extends Ik{constructor(e){super(e),this.isTraining=!1}summary(e,t,n=console.log){if(!this.built)throw new Rv("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");gk(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=dk(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof is))throw new Rv("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Rv(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);const n=e.loss;t=n.map((e=>Gw(e)))}else{const n=Gw(e.loss);this.outputs.forEach((e=>{t.push(n)}))}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new Rv(`Unknown entry in loss dictionary: "${t}". Only expected the following keys: ${this.outputNames}`);for(const n of this.outputNames)null==e.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),t.push(Gw(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const e=this.internalOutputShapes[o],t=this.outputNames[o];this.feedOutputNames.push(t),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[o])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],wy("loss",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}}));const r=t_(e.metrics,this.outputNames),i=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};wy("metric",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=r[e],o=t=>{const n="";let r,o,a;for(const s of t){if("string"===typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){const t=this.internalOutputShapes[e];let i;1===t[t.length-1]||this.lossFunctions[e]===zw?-1!==["accuracy","acc"].indexOf(s)?o=qw:-1!==["crossentropy","ce"].indexOf(s)&&(o=Zw):this.lossFunctions[e]===Bw?-1!==["accuracy","acc"].indexOf(s)?o=Qw:-1!==["crossentropy","ce"].indexOf(s)&&(o=lk):-1!==["accuracy","acc"].indexOf(s)?o=Yw:-1!==["crossentropy","ce"].indexOf(s)&&(o=ak),-1!==["accuracy","acc"].indexOf(s)?i="acc":-1!==["crossentropy","ce"].indexOf(s)&&(i="ce"),a=o,r=n+i}else{const e=ck(s);a=e,r=n+hk(s)}let t;wy(r,(()=>{t=a})),i(e,r,t)}};o(t)}})),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,n={}){const r=null==n.batchSize?32:n.batchSize;Lk(r);const i=!0,o=this.standardizeUserDataXY(e,t,i,r);try{const i=o[0].concat(o[1]);this.makeTestFunction();const a=this.testFunction,s=this.testLoop(a,i,r,n.verbose,n.steps);return zv(s)}finally{qk(o[0],e),qk(o[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),Bk(this,e,t)}checkNumSamples(e,t,n,r="steps"){let i;if(null!=n){if(i=null,null!=t)throw new Rv(`If ${r} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else{if(null==e)throw new Rv(`Either the input data should have a defined shape, or ${r} shoud be specified.`);i=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return i}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new Rv("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=n?t:[t],i=this.retrieveSymbolicTensors(r),o=new Kx;if(e instanceof wi&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Rv(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let t=0;t<this.inputs.length;++t)o.add(this.inputs[t],e[t])}else for(const s of this.inputs){const t=e[s.name];if(null==t)throw new Rv(`No value is provided for the model's input ${s.name}`);o.add(s,t)}const a=ew(i,o);return n?a:a[0]}retrieveSymbolicTensors(e){const t=jv(null,e.length);let n=e.length;for(const r of this.layers){const i=Array.isArray(r.output)?r.output:[r.output],o=i.map((e=>e.name));for(let r=0;r<e.length;++r){const a=o.indexOf(e[r]);if(-1!==a&&(t[r]=i[a],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach(((t,r)=>{null==t&&n.push(e[r])})),new Rv(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(n)}`)}return t}predictLoop(e,t=32,n=!1){return Ka((()=>{const r=this.checkNumSamples(e);if(n)throw new Mv("Verbose predictLoop() is not implemented yet.");const i=Uk(r,t),o=this.outputs.map((e=>[]));for(let t=0;t<i.length;++t){const n=Ka((()=>{const n=i[t][0],r=i[t][1],o=zk(e,n,r),a=[];if(Array.isArray(o))for(let e=0;e<o.length;++e)a.push({key:this.inputs[e],value:o[e]});else a.push({key:this.inputs[0],value:o});const s=new Kx(a);return ew(this.outputs,s)}));n.forEach(((e,t)=>o[t].push(e)))}return zv(o.map((e=>Js(e,0))))}))}predict(e,t={}){const n=Gk(e);e_(n,this.inputNames,this.feedInputShapes,!1);try{const r=null==t.batchSize?32:t.batchSize;return Lk(r),this.predictLoop(n,r)}finally{qk(n,e)}}predictOnBatch(e){e_(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,n=!0,r){if(null==this.optimizer_)throw new Av("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let o=0;o<this.feedOutputShapes.length;++o){const e=this.feedOutputShapes[o],t=this.feedLossFns[o];t===Bw?i.push(e.slice(0,e.length-1).concat([1])):i.push(e)}if(e=Jk(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=Jk(t,this.feedOutputNames,i,!1,"target"),Zk(e,t,null),Qk(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&e[0].shape[0]%r!==0)throw new Rv(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,n,r,i=!0,o){const[a,s]=this.standardizeUserDataXY(e,t,i,o);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const e=Tk(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await Nk(s[t],null,e[t]))}return[a,s,l]}testLoop(e,t,n,r=0,i){return Ka((()=>{const o=this.checkNumSamples(t,n,i,"steps"),a=[];if(r>0)throw new Mv("Verbose mode is not implemented yet.");if(null!=i)throw new Mv("steps mode in testLoop() is not implemented yet");{const r=Uk(o,n),i=Fc(Dy(0,o));for(let n=0;n<r.length;++n){const o=r[n][0],s=r[n][1],l=Ly(i,o,s-o),u=Vk(t,l),c=e(u);if(0===n)for(let e=0;e<c.length;++e)a.push(rs(0));for(let e=0;e<c.length;++e){const t=c[e];a[e]=ls(a[e],nu(s-o,t))}}for(let e=0;e<a.length;++e)a[e]=Cl(a[e],o)}return a}))}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let i=r;if(Lv(e,r)>1){const t=Lv(e.slice(0,n),r);i+=`_${t}`}t.push(i)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),o=[],a=()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const a=new Kx(e),s=ew(this.outputs,a,{training:!0});let l;for(let n=0;n<this.lossFunctions.length;++n){const e=this.lossFunctions[n];let o=e(r[n],s[n]);null!=i[n]&&(o=Ek(o,i[n]));const a=xu(o);t.push(a),l=0===n?o:ls(l,o)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{const t=this.metricsTensors[n][0],i=this.metricsTensors[n][1];e=xu(t(r[i],s[i]))}Za(e),o.push(e)}return l=xu(l),this.calculateLosses().forEach((e=>{l=ls(l,e)})),l},s=this.collectedTrainableWeights.map((e=>e.read())),l=!0,u=this.optimizer_.minimize(a,l,s);return[u].concat(o)}}makeTestFunction(){this.testFunction=e=>Ka((()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let e=0;e<this.inputs.length;++e)o.push({key:this.inputs[e],value:r[e]});const a=new Kx(o),s=ew(this.outputs,a);for(let e=0;e<this.lossFunctions.length;++e){const r=this.lossFunctions[e],o=xu(r(i[e],s[e]));n=0===e?o:ls(n,o),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],r=this.metricsTensors[e][1],o=xu(n(i[r],s[r]));t.push(o)}return t}))}async fit(e,t,n={}){return Hk(this,e,t,n)}async fitDataset(e,t){return Mk(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],i=n[1],o=this.makeTrainFunction(),a=o(r.concat(i)),s=[];for(const l of a){const e=await l.data();s.push(e[0])}return Ja(a),qk(n[0],e),qk(n[1],t),zv(s)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n);for(let o=0;o<r.length;++o)n&&!r[o].trainable||t.push({name:r[o].originalName,tensor:i[o]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=Xa().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-Xa().numTensors}return e}getLossIdentifiers(){let e;if("string"===typeof this.loss)e=Uv(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!==typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map((e=>Uv(e)))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!==typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=Uv(n[r])}}return e}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[Uv(hk(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((e=>Uv(hk(e))));{const e={};for(const t in this.metrics)e[t]=Uv(hk(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=_k(e.optimizer_config),n=Tw(t);let r,i;if("string"===typeof e.loss)r=Wv(e.loss);else if(Array.isArray(e.loss))r=e.loss.map((e=>Wv(e)));else if(null!=e.loss){r={};for(const t in e.loss)r[t]=Wv(e.loss[t])}if(Array.isArray(e.metrics))i=e.metrics.map((e=>Wv(e)));else if(null!=e.metrics){i={};for(const t in e.metrics)i[t]=Wv(e.metrics[t])}this.compile({loss:r,metrics:i,optimizer:n})}async save(e,t){if("string"===typeof e){const t=yo(e);if(0===t.length)throw new Rv(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Rv(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new Rv("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await so(this.getNamedWeights(t)),r=!1,i=null,o=this.toJSON(i,r),a={modelTopology:o,format:n_,generatedBy:`TensorFlow.js tfjs-layers v${Ck}`,convertedBy:null},s=null!=t&&t.includeOptimizer;if(s&&null!=this.optimizer){a.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:r}=await so(await this.optimizer.getWeights(),e);n.specs.push(...r),n.data=fo([n.data,t])}if(null!=this.userDefinedMetadata){const e=!0;fk(this.userDefinedMetadata,this.name,e),a.userDefinedMetadata=this.userDefinedMetadata}return a.weightData=n.data,a.weightSpecs=n.specs,e.save(a)}setUserDefinedMetadata(e){fk(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}r_.className="Model",Ga(r_);class i_ extends r_{}i_.className="Functional",Ga(i_);class o_ extends r_{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:ly("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){const t=e.inboundNodes[0].outputTensors[0].shape;if(t.some((e=>e<0)))throw new Rv(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof o_||e instanceof r_;let n;if(t){if(n=e,1!==n.outputs.length)throw new Rv("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new Rv("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new Rv("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=Yx({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new Rv(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new Rv("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Gx(this.outputs[0])}this.inboundNodes=[],new zx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:jv(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(Dx(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new r_({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,n=console.log){this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t,n={}){if(!this.built)throw new Av("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new Av("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,n={}){if(!this.built)throw new Av("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new Av("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,n={},r=!1){let i,o={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0]["className"])throw new Rv("Legacy serialization format not supported yet.");i=t}else b(null!=t["layers"],(()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field.")),i=t["layers"],delete t["layers"],o=t;const a=new e(o);if(!(a instanceof o_))throw new Mv(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const s of i){const e=void 0,t=Tw(s,e,r);r&&t.setFastWeightInitDuringBuild(!0),a.add(t)}return a}set stopTraining(e){if(null==this.model)throw new Rv("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new Rv("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n["className"]=t.getClassName(),n["config"]=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}o_.className="Sequential",Ga(o_);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class a_ extends Wa{getConfig(){return{}}}class s_ extends a_{apply(e,t=1){return Zy(e,t)}}s_.className="elu",Ga(s_);class l_ extends a_{apply(e){return sc(e)}}l_.className="selu",Ga(l_);class u_ extends a_{apply(e){return rc(e)}}u_.className="relu",Ga(u_);class c_ extends a_{apply(e){return Ka((()=>ku(6,rc(e))))}}c_.className="relu6",Ga(c_);class h_ extends a_{apply(e){return e}}h_.className="linear",Ga(h_);class d_ extends a_{apply(e){return hc(e)}}d_.className="sigmoid",Ga(d_);class p_ extends a_{apply(e){return tx(e)}}p_.className="hardSigmoid",Ga(p_);class f_ extends a_{apply(e){return Cc(e)}}f_.className="softplus",Ga(f_);class m_ extends a_{apply(e){return Qy(e)}}m_.className="softsign",Ga(m_);class g_ extends a_{apply(e){return Mc(e)}}g_.className="tanh",Ga(g_);class b_ extends a_{apply(e,t=-1){return _c(e,t)}}b_.className="softmax",Ga(b_);class v_ extends a_{apply(e,t=-1){return lu(e,t)}}v_.className="logSoftmax",Ga(v_);class y_ extends a_{apply(e,t=1){return Ka((()=>nu(hc(nu(e,t)),e)))}}y_.className="swish",Ga(y_);class x_ extends a_{apply(e){return Ka((()=>nu(e,Mc(Cc(e)))))}}function w_(e){return e.getClassName()}function k_(e,t={}){return Yv(e,Ha.getMap().classNameMap,t,"activation")}function __(e){if(null==e){const e={className:"linear",config:{}};return k_(e)}if("string"===typeof e){const t={};return t["className"]=e,t["config"]={},k_(t)}return e instanceof a_?e:k_(e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function S_(e){if(null!=e&&"object"!==typeof e)throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}x_.className="mish",Ga(x_);class C_ extends Wa{}class I_ extends C_{constructor(e){super(),S_(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return Ka((()=>{let t=zu([1]);return this.hasL1&&(t=ls(t,au(nu(this.l1,as(e))))),this.hasL2&&(t=ls(t,au(nu(this.l2,Xy(e))))),Rs(t,[])}))}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t["l1"],l2:t["l2"]})}}I_.className="L1L2",Ga(I_);const O_={l1l2:"L1L2"};function T_(e){return Gv(e)}function N_(e,t={}){return Yv(e,Ha.getMap().classNameMap,t,"regularizer")}function E_(e){if(null==e)return null;if("string"===typeof e){const t=e in O_?O_[e]:e,n={className:t,config:{}};return N_(n)}return e instanceof C_?e:N_(e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class D_ extends Ux{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=Ex(e);let n=rc(e);return null!=this.maxValue&&(n=Xs(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}D_.className="ReLU",Ga(D_);class $_ extends Ux{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=Ex(e);return Yl(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}$_.className="LeakyReLU",Ga($_);class A_ extends Ux{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Ox(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=E_(e.alphaRegularizer),this.alphaConstraint=mw(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new Rv(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`);this.sharedAxes=[e.sharedAxes]}}build(e){e=Dx(e);const t=e.slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new jx({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=Ex(e),Yu(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Ix(this.alphaInitializer),alphaRegularizer:T_(this.alphaRegularizer),alphaConstraint:pw(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}A_.className="PReLU",Ga(A_);class R_ extends Ux{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new Mv(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=Ex(e);return Ol(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}R_.className="ELU",Ga(R_);class M_ extends Ux{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=Ex(e);return nu(n,ea(Wl(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}M_.className="ThresholdedReLU",Ga(M_);class F_ extends Ux{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new b_).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){const n=Ex(e);return this.softmax(n,this.axis)}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function P_(e,t,n){if("number"===typeof e)return jv(e,t);if(e.length!==t)throw new Rv(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let r=0;r<t;++r){const i=e[r];if(!Oy(i))throw new Rv(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${i}`)}return e}function j_(e,t,n,r,i=1){if(null==e)return e;const o=t+(t-1)*(i-1);let a;return a="same"===n?e:e-o+1,Math.floor((a+r-1)/r)}function B_(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+Ey([n-t,0]);else{if("same"!==r)throw new Rv(`Unsupport padding mode: ${r}.`);e*=t}return e}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function L_(e,t){return Ka((()=>(my(t),"channelsFirst"===t?Qc(e,[0,2,3,1]):e)))}function z_(e,t){return Ka((()=>(my(t),"channelsFirst"===t?Qc(e,[0,2,3,4,1]):e)))}function V_(e,t,n,r=1,i="valid",o,a=1){return Ka((()=>{if(null==o&&(o=Ry()),my(o),3!==e.shape.length)throw new Rv(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(3!==t.shape.length)throw new Rv(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(null!=n&&1!==n.shape.length)throw new Rv(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if("channelsFirst"===o&&(e=Qc(e,[0,2,1])),"causal"===i)throw new Mv("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=ul(e,t,r,"same"===i?"same":"valid","NWC",a);return null!=n&&(s=Jy(s,n)),s}))}function U_(e,t,n,r=[1,1],i="valid",o,a,s=null){return Ka((()=>{if(null==o&&(o=Ry()),my(o),3!==e.rank&&4!==e.rank)throw new Rv(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(3!==t.rank&&4!==t.rank)throw new Rv(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=L_(e,o);if("causal"===i)throw new Mv("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=kh({x:l,filter:t,strides:r,pad:"same"===i?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===o&&(l=Qc(l,[0,3,1,2])),l}))}function W_(e,t,n,r=[1,1,1],i="valid",o,a){return Ka((()=>{if(null==o&&(o=Ry()),my(o),4!==e.rank&&5!==e.rank)throw new Rv(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(4!==t.rank&&5!==t.rank)throw new Rv(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let s=z_(e,o);if("causal"===i)throw new Mv("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=ml(s,t,r,"same"===i?"same":"valid","NDHWC",a),null!=n&&(s=Jy(s,n)),"channelsFirst"===o&&(s=Qc(s,[0,4,1,2,3])),s}))}F_.className="Softmax",Ga(F_);class H_ extends Ux{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",H_.verifyArgs(t),this.rank=e,ty(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new Mv(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=P_(t.kernelSize,e,"kernelSize"),this.strides=P_(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,by(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,my(this.dataFormat),this.activation=__(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=Ox(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=mw(t.biasConstraint),this.biasRegularizer=E_(t.biasRegularizer),this.activityRegularizer=E_(t.activityRegularizer),this.dilationRate=P_(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new Rv(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new Rv(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new Rv(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(e){if(Bv("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!ey(e.kernelSize,"number",1,3))throw new Rv(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:w_(this.activation),useBias:this.useBias,biasInitializer:Ix(this.biasInitializer),biasRegularizer:T_(this.biasRegularizer),activityRegularizer:T_(this.activityRegularizer),biasConstraint:pw(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class G_ extends H_{constructor(e,t){super(e,t),this.kernel=null,G_.verifyArgs(t),this.filters=t.filters,ty(this.filters,"filters"),this.kernelInitializer=Ox(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=mw(t.kernelConstraint),this.kernelRegularizer=E_(t.kernelRegularizer)}build(e){e=Dx(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Rv(`The channel dimension of the input should be defined. Found ${e[t]}`);const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return Ka((()=>{let t;e=Ex(e);const n=null==this.bias?null:this.bias.read(),r=iy(this.activation.getClassName());if(null!=r&&2===this.rank)t=U_(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=V_(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=U_(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new Mv("convolutions greater than 3D are not implemented yet.");t=W_(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t}))}computeOutputShape(e){e=Dx(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<n.length;++i){const e=j_(n[i],this.kernelSize[i],this.padding,this.strides[i],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[i]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:Ix(this.kernelInitializer),kernelRegularizer:T_(this.kernelRegularizer),kernelConstraint:pw(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new Rv(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class q_ extends G_{constructor(e){super(2,e),q_.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e["rank"],e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!ey(e.kernelSize,"number",1,2))throw new Rv(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}q_.className="Conv2D",Ga(q_);class Y_ extends G_{constructor(e){super(3,e),Y_.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e["rank"],e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new Rv(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}Y_.className="Conv3D",Ga(Y_);class X_ extends q_{constructor(e){if(super(e),this.inputSpec=[new jx({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new Rv(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Dx(e),4!==e.length)throw new Rv("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Rv("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new jx({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return Ka((()=>{let t=Ex(e);if(4!==t.shape.length)throw new Rv(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,r=n[0];let i,o;"channelsFirst"===this.dataFormat?(i=2,o=3):(i=1,o=2);const a=n[i],s=n[o],l=this.kernelSize[0],u=this.kernelSize[1],c=this.strides[0],h=this.strides[1],d=B_(a,c,l,this.padding),p=B_(s,h,u,this.padding),f=[r,d,p,this.filters];"channelsLast"!==this.dataFormat&&(t=Qc(t,[0,2,3,1]));let m=pl(t,this.kernel.read(),f,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(m=Qc(m,[0,3,1,2])),null!=this.bias&&(m=Jy(m,this.bias.read(),this.dataFormat)),null!=this.activation&&(m=this.activation.apply(m)),m}))}computeOutputShape(e){e=Dx(e);const t=e.slice();let n,r,i;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3):(n=3,r=1,i=2);const o=this.kernelSize[0],a=this.kernelSize[1],s=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[r]=B_(t[r],s,o,this.padding),t[i]=B_(t[i],l,a,this.padding),t}getConfig(){const e=super.getConfig();return delete e["dilationRate"],e}}X_.className="Conv2DTranspose",Ga(X_);class K_ extends Y_{constructor(e){if(super(e),this.inputSpec=[new jx({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new Rv(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Dx(e),5!==e.length)throw new Rv("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Rv("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new jx({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return Ka((()=>{let t=Ex(e);if(5!==t.shape.length)throw new Rv(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,r=n[0];let i,o,a;"channelsFirst"===this.dataFormat?(a=2,i=3,o=4):(a=1,i=2,o=3);const s=n[a],l=n[i],u=n[o],c=this.kernelSize[0],h=this.kernelSize[1],d=this.kernelSize[2],p=this.strides[0],f=this.strides[1],m=this.strides[2],g=B_(s,p,c,this.padding),b=B_(l,f,h,this.padding),v=B_(u,m,d,this.padding),y=[r,g,b,v,this.filters];"channelsLast"!==this.dataFormat&&(t=Qc(t,[0,2,3,4,1]));let x=yl(t,this.kernel.read(),y,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(x=Qc(x,[0,4,1,2,3])),null!==this.bias&&(x=Jy(x,this.bias.read(),this.dataFormat)),null!==this.activation&&(x=this.activation.apply(x)),x}))}computeOutputShape(e){e=Dx(e);const t=e.slice();let n,r,i,o;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3,o=4):(n=4,r=1,i=2,o=3);const a=this.kernelSize[0],s=this.kernelSize[1],l=this.kernelSize[2],u=this.strides[0],c=this.strides[1],h=this.strides[2];return t[n]=this.filters,t[r]=B_(t[r],u,a,this.padding),t[i]=B_(t[i],c,s,this.padding),t[o]=B_(t[o],h,l,this.padding),t}getConfig(){const e=super.getConfig();return delete e["dilationRate"],e}}K_.className="Conv3DTranspose",Ga(K_);class J_ extends G_{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new Rv("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new Rv("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new Rv(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=Ox(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=E_(t.depthwiseRegularizer),this.depthwiseConstraint=mw(t.depthwiseConstraint),this.pointwiseInitializer=Ox(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=E_(t.pointwiseRegularizer),this.pointwiseConstraint=mw(t.pointwiseConstraint)}build(e){if(e=Dx(e),e.length<this.rank+2)throw new Rv(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new Rv(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),i=[];for(let a=0;a<this.rank;++a)i.push(1);i.push(n*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new jx({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return Ka((()=>{let t;if(e=Ex(e),1===this.rank)throw new Mv("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=Qc(e,[0,2,3,1])),t=uc(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=Jy(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=Qc(t,[0,3,1,2])),t}))}getConfig(){const e=super.getConfig();return delete e["rank"],delete e["kernelInitializer"],delete e["kernelRegularizer"],delete e["kernelConstraint"],e["depthwiseInitializer"]=Ix(this.depthwiseInitializer),e["pointwiseInitializer"]=Ix(this.pointwiseInitializer),e["depthwiseRegularizer"]=T_(this.depthwiseRegularizer),e["pointwiseRegularizer"]=T_(this.pointwiseRegularizer),e["depthwiseConstraint"]=pw(this.depthwiseConstraint),e["pointwiseConstraint"]=pw(this.pointwiseConstraint),e}}J_.className="SeparableConv";class Z_ extends J_{constructor(e){super(2,e)}}Z_.className="SeparableConv2D",Ga(Z_);class Q_ extends G_{constructor(e){super(1,e),Q_.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e["rank"],delete e["dataFormat"],e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!ey(e.kernelSize,"number",1,1))throw new Rv(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}Q_.className="Conv1D",Ga(Q_);class eS extends Ux{constructor(e){super(e),"number"===typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return Ka((()=>{if(e=Ex(e),"channelsLast"===this.dataFormat){const t=Vy(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Vy(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=Vy(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Vy(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}}))}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}eS.className="Cropping2D",Ga(eS);class tS extends Ux{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,my(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,gy(this.interpolation)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return Ka((()=>{let t=Ex(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=Qc(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],i="nearest"===this.interpolation?bp.resizeNearestNeighbor(t,[e,r]):bp.resizeBilinear(t,[e,r]);return Qc(i,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?bp.resizeNearestNeighbor(t,[e,r]):bp.resizeBilinear(t,[e,r])}}))}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function nS(e,t,n=[1,1],r="valid",i,o){return Ka((()=>{null==i&&(i=Ry()),my(i);let a=L_(e,i);if(4!==e.rank)throw new Rv(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(4!==t.rank)throw new Rv(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return a=wl(a,t,n,"same"===r?"same":"valid","NHWC",o),"channelsFirst"===i&&(a=Qc(a,[0,3,1,2])),a}))}tS.className="UpSampling2D",Ga(tS);class rS extends H_{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=Ox(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=mw(e.depthwiseConstraint),this.depthwiseRegularizer=E_(e.depthwiseRegularizer)}build(e){if(e=Dx(e),e.length<4)throw new Rv(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new Rv(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);const n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Ka((()=>{e=Ex(e);let t=nS(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=Jy(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t}))}computeOutputShape(e){e=Dx(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=j_(t,this.kernelSize[0],this.padding,this.strides[0]),o=j_(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,i,o]:[e[0],i,o,r]}getConfig(){const e=super.getConfig();return e["depthMultiplier"]=this.depthMultiplier,e["depthwiseInitializer"]=Ix(this.depthwiseInitializer),e["depthwiseRegularizer"]=T_(this.depthwiseRegularizer),e["depthwiseConstraint"]=pw(this.depthwiseRegularizer),e}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function iS(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new Rv("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function i(e){return null==e||Array.isArray(e)?e:[e]}return t=i(t),n=i(n),{inputs:e,initialState:t,constants:n}}function oS(e,t,n,r=!1,i,o,a=!1,s=!1){return Ka((()=>{const l=t.shape.length;if(l<3)throw new Rv(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(Dy(2,l));if(t=Qc(t,u),null!=o)throw new Mv("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=i&&(i=ea(ea(i,"bool"),"float32"),i.rank===l-1&&(i=Al(i,-1)),i=Qc(i,u)),r&&(t=oc(t,0),null!=i&&(i=oc(i,0)));const c=[];let h,d=n;const p=t.shape[0],f=Lc(t);let m,g;null!=i&&(m=Lc(i));for(let t=0;t<p;++t){const n=f[t],r=Ka((()=>e(n,d)));if(null==i)h=r[0],d=r[1];else{const e=Ka((()=>{const e=m[t],n=iu(Wu(e),e),i=ls(nu(r[0],e),nu(d[0],n)),o=d.map(((t,i)=>ls(nu(r[1][i],e),nu(t,n))));return{output:i,newStates:o}}));h=e.output,d=e.newStates}s&&c.push(h)}if(s){const e=1;g=Ac(c,e)}return[h,g,d]}))}rS.className="DepthwiseConv2D",Ga(rS);class aS extends Ux{constructor(e){let t;if(super(e),null==e.cell)throw new Rv("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new fS({cells:e.cell}):e.cell,null==t.stateSize)throw new Rv("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new jx({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Dy(0,e).map((e=>null))}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){Tx(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return Ka((()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map((e=>null));return[e].concat(t)}return e}))}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){const t=null;if(null!=this.numConstants)throw new Mv("Constants support is not implemented in RNN yet.");Tx(e)&&(e=e[0]);const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new jx({shape:[n,null,...r]});const i=[e[0]].concat(e.slice(2));if(null!=t)throw new Mv("Constants support is not implemented in RNN yet.");let o;if(this.cell.build(i),o=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!k(this.stateSpec.map((e=>e.shape[e.shape.length-1])),o))throw new Rv(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=o.map((e=>new jx({shape:[null,e]})));this.stateful&&this.resetStates()}resetStates(e,t=!1){Ka((()=>{if(!this.stateful)throw new $v("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new Rv("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>zu([n,e]))):this.states_=[zu([n,this.cell.stateSize])];else if(null==e)Ja(this.states_),null!=this.keptStates&&(Ja(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>zu([n,e]))):this.states_[0]=zu([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Rv(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);!0===t?this.keptStates.push(this.states_.slice()):Ja(this.states_);for(let t=0;t<this.states_.length;++t){const r=e[t],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,o=[n,i];if(!k(r.shape,o))throw new Rv(`State ${t} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${r.shape}`);this.states_[t]=r}}this.states_=this.states_.map((e=>Za(e.clone())))}))}apply(e,t){let n=null==t?null:t["initialState"],r=null==t?null:t["constants"];null==t&&(t={});const i=iS(e,n,r,this.numConstants);e=i.inputs,n=i.initialState,r=i.constants;let o=[],a=[];if(null!=n){t["initialState"]=n,o=o.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new jx({shape:e.shape}));a=a.concat(this.stateSpec)}null!=r&&(t["constants"]=r,o=o.concat(r),this.numConstants=r.length);const s=o[0]instanceof Bx;if(s){const n=[e].concat(o),r=this.inputSpec.concat(a),i=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=i,s}return super.apply(e,t)}call(e,t){return Ka((()=>{const n=null==t?null:t["mask"],r=null==t?null:t["training"];let i=null==t?null:t["initialState"];e=Ex(e),null==i&&(i=this.stateful?this.states_:this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==o)throw new Rv(`RNN Layer has ${o} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:r},s=(e,t)=>{const n=this.cell.call([e].concat(t),a);return[n[0],n.slice(1)]},l=oS(s,e,i,this.goBackwards,n,null,this.unroll,this.returnSequences),u=l[0],c=l[1],h=l[2];this.stateful&&this.resetStates(h,r);const d=this.returnSequences?c:u;return this.returnState?[d].concat(h):d}))}getInitialState(e){return Ka((()=>{let t=zu(e.shape);return t=au(t,[1,2]),t=Fy(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map((e=>e>1?Hy(t,[1,e]):t)):this.cell.stateSize>1?[Hy(t,[1,this.cell.stateSize])]:[t]}))}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t["numConstants"]=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===aS.className&&(t["cell"]={className:this.cell.getClassName(),config:n}),Object.assign({},n,e,t)}static fromConfig(e,t,n={}){const r=t["cell"],i=Tw(r,n);return new e(Object.assign(t,{cell:i}))}}aS.className="RNN",Ga(aS);class sS extends Ux{}class lS extends sS{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,ty(this.units,"units"),this.activation=__(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Ox(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ox(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ox(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=E_(e.kernelRegularizer),this.recurrentRegularizer=E_(e.recurrentRegularizer),this.biasRegularizer=E_(e.biasRegularizer),this.kernelConstraint=mw(e.kernelConstraint),this.recurrentConstraint=mw(e.recurrentConstraint),this.biasConstraint=mw(e.biasConstraint),this.dropout=Ny([1,Ey([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Ny([1,Ey([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Dx(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Ka((()=>{if(2!==e.length)throw new Rv(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];const r=null!=t["training"]&&t["training"];let i;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=mS({ones:()=>Wu(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=mS({ones:()=>Wu(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;i=qy(null!=o?nu(e,o):e,this.kernel.read()),null!=this.bias&&(i=Jy(i,this.bias.read())),null!=a&&(n=nu(n,a));let s=ls(i,qy(n,this.recurrentKernel.read()));return null!=this.activation&&(s=this.activation.apply(s)),[s,s]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:w_(this.activation),useBias:this.useBias,kernelInitializer:Ix(this.kernelInitializer),recurrentInitializer:Ix(this.recurrentInitializer),biasInitializer:Ix(this.biasInitializer),kernelRegularizer:T_(this.kernelRegularizer),recurrentRegularizer:T_(this.recurrentRegularizer),biasRegularizer:T_(this.biasRegularizer),activityRegularizer:T_(this.activityRegularizer),kernelConstraint:pw(this.kernelConstraint),recurrentConstraint:pw(this.recurrentConstraint),biasConstraint:pw(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}lS.className="SimpleRNNCell",Ga(lS);class uS extends aS{constructor(e){e.cell=new lS(e),super(e)}call(e,t){return Ka((()=>{null!=this.cell.dropoutMask&&(Ja(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Ja(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t["mask"],r=null==t?null:t["training"],i=null==t?null:t["initialState"];return super.call(e,{mask:n,training:r,initialState:i})}))}static fromConfig(e,t){return new e(t)}}uS.className="SimpleRNN",Ga(uS);class cS extends sS{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Rv("GRUCell does not support reset_after parameter set to true.");this.units=e.units,ty(this.units,"units"),this.activation=__(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=__(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Ox(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ox(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ox(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=E_(e.kernelRegularizer),this.recurrentRegularizer=E_(e.recurrentRegularizer),this.biasRegularizer=E_(e.biasRegularizer),this.kernelConstraint=mw(e.kernelConstraint),this.recurrentConstraint=mw(e.recurrentConstraint),this.biasConstraint=mw(e.biasConstraint),this.dropout=Ny([1,Ey([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Ny([1,Ey([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Dx(e);const t=e[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Ka((()=>{if(2!==e.length)throw new Rv(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const n=null!=t["training"]&&t["training"];let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=mS({ones:()=>Wu(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=mS({ones:()=>Wu(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let a,s,l;0<this.dropout&&this.dropout<1&&(e=nu(e,i[0]));let u=qy(e,this.kernel.read());this.useBias&&(u=Jy(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=nu(r,o[0]));const c=this.recurrentKernel.read(),[h,d]=Oc(c,[2*this.units,this.units],c.rank-1),p=qy(r,h),[f,m,g]=Oc(u,3,u.rank-1),[b,v]=Oc(p,2,p.rank-1);a=this.recurrentActivation.apply(ls(f,b)),s=this.recurrentActivation.apply(ls(m,v));const y=qy(nu(s,r),d);l=this.activation.apply(ls(g,y));const x=ls(nu(a,r),nu(ls(1,Fu(a)),l));return[x,x]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:w_(this.activation),recurrentActivation:w_(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Ix(this.kernelInitializer),recurrentInitializer:Ix(this.recurrentInitializer),biasInitializer:Ix(this.biasInitializer),kernelRegularizer:T_(this.kernelRegularizer),recurrentRegularizer:T_(this.recurrentRegularizer),biasRegularizer:T_(this.biasRegularizer),activityRegularizer:T_(this.activityRegularizer),kernelConstraint:pw(this.kernelConstraint),recurrentConstraint:pw(this.recurrentConstraint),biasConstraint:pw(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}cS.className="GRUCell",Ga(cS);class hS extends aS{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new cS(e),super(e)}call(e,t){return Ka((()=>{null!=this.cell.dropoutMask&&(Ja(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Ja(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t["mask"],r=null==t?null:t["training"],i=null==t?null:t["initialState"];return super.call(e,{mask:n,training:r,initialState:i})}))}static fromConfig(e,t){return 0===t["implmentation"]&&(t["implementation"]=1),new e(t)}}hS.className="GRU",Ga(hS);class dS extends sS{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,ty(this.units,"units"),this.activation=__(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=__(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Ox(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ox(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ox(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=E_(e.kernelRegularizer),this.recurrentRegularizer=E_(e.recurrentRegularizer),this.biasRegularizer=E_(e.biasRegularizer),this.kernelConstraint=mw(e.kernelConstraint),this.recurrentConstraint=mw(e.recurrentConstraint),this.biasConstraint=mw(e.biasConstraint),this.dropout=Ny([1,Ey([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Ny([1,Ey([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;e=Dx(e);const n=e[e.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;r=new(t=class extends sx{apply(t,r){const i=e.apply([n]),o=(new ux).apply([n]),a=e.apply([2*n]);return Wy(Wy(i,o),a)}},t.className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return Ka((()=>{const n=null!=t["training"]&&t["training"];if(3!==e.length)throw new Rv(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=mS({ones:()=>Wu(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=mS({ones:()=>Wu(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let s,l,u,c;0<this.dropout&&this.dropout<1&&(e=nu(e,o[0]));let h=qy(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=nu(r,a[0])),h=ls(h,qy(r,this.recurrentKernel.read())),this.useBias&&(h=Jy(h,this.bias.read()));const[d,p,f,m]=Oc(h,4,h.rank-1);s=this.recurrentActivation.apply(d),l=this.recurrentActivation.apply(p),u=ls(nu(l,i),nu(s,this.activation.apply(f))),c=this.recurrentActivation.apply(m);const g=nu(c,this.activation.apply(u));return[g,g,u]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:w_(this.activation),recurrentActivation:w_(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Ix(this.kernelInitializer),recurrentInitializer:Ix(this.recurrentInitializer),biasInitializer:Ix(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:T_(this.kernelRegularizer),recurrentRegularizer:T_(this.recurrentRegularizer),biasRegularizer:T_(this.biasRegularizer),activityRegularizer:T_(this.activityRegularizer),kernelConstraint:pw(this.kernelConstraint),recurrentConstraint:pw(this.recurrentConstraint),biasConstraint:pw(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}dS.className="LSTMCell",Ga(dS);class pS extends aS{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new dS(e),super(e)}call(e,t){return Ka((()=>{null!=this.cell.dropoutMask&&(Ja(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Ja(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t["mask"],r=null==t?null:t["training"],i=null==t?null:t["initialState"];return super.call(e,{mask:n,training:r,initialState:i})}))}static fromConfig(e,t){return 0===t["implmentation"]&&(t["implementation"]=1),new e(t)}}pS.className="LSTM",Ga(pS);class fS extends sS{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return Ka((()=>{let n=e.slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const i=[];let o;for(let a=0;a<this.cells.length;++a){const s=this.cells[a];n=r[a],o=0===a?[e[0]].concat(n):[o[0]].concat(n),o=s.call(o,t),i.push(o.slice(1))}n=[];for(const e of i.slice().reverse())n.push(...e);return[o[0]].concat(n)}))}build(e){let t;Tx(e)&&(e=e[0]),this.cells.forEach(((n,r)=>{wy(`RNNCell_${r}`,(()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}getConfig(){const e=super.getConfig(),t=e=>({className:e.getClassName(),config:e.getConfig()}),n=this.cells.map(t),r={cells:n};return Object.assign({},e,r)}static fromConfig(e,t,n={}){const r=[];for(const i of t["cells"])r.push(Tw(i,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return Fx(e)}setWeights(e){const t=[];for(const n of this.cells){const r=n.weights.length,i=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],i[e]])}Px(t)}}function mS(e){const{ones:t,rate:n,training:r=!1,count:i=1,dropoutFunc:o}=e,a=()=>null!=o?o(t(),n):ex(t(),n),s=()=>nx(a,t,r);if(!i||i<=1)return Za(s().clone());const l=Array(i).fill(void 0).map(s);return l.map((e=>Za(e.clone())))}fS.className="StackedRNNCells",Ga(fS);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
var gS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class bS extends aS{constructor(e){if(e.unroll)throw new Mv("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Mv("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new jx({ndim:5})]}call(e,t){return Ka((()=>{if(null!=this.cell.dropoutMask&&(Ja(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Ja(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t["constants"])throw new Rv("ConvRNN2D cell does not support constants");const n=null==t?null:t["mask"],r=null==t?null:t["training"],i=null==t?null:t["initialState"];return super.call(e,{mask:n,training:r,initialState:i})}))}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return Ka((()=>{const{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),i=[r[0],...r.slice(2)],o=zu(i);return Array.isArray(t)?Array(t.length).fill(o):[o]}))}resetStates(e,t=!1){Ka((()=>{if(!this.stateful)throw new $v("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),i=[r[0],...r.slice(2)],o=n[0];if(null==o)throw new Rv("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>zu(i))):this.states_=[zu(i)];else if(null==e)Ja(this.states_),null!=this.keptStates&&(Ja(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>zu(i))):this.states_[0]=zu(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Rv(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):Ja(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],r=i;if(!k(n.shape,r))throw new Rv(`State ${t} is incompatible with layer ${this.name}: expected shape=${r}, received shape=${n.shape}`);this.states_[t]=n}}this.states_=this.states_.map((e=>Za(e.clone())))}))}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:i,strides:o,dilationRate:a}=this.cell,s="channelsFirst"===t,l=e[s?3:2],u=e[s?4:3],c=j_(l,r[0],i,o[0],a[0]),h=j_(u,r[1],i,o[1],a[1]),d=[...e.slice(0,2),...s?[n,c,h]:[c,h,n]];return d}}bS.className="ConvRNN2D";class vS extends dS{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:i,dataFormat:o,dilationRate:a}=e;super(Object.assign({},e,{units:t})),this.filters=t,ty(this.filters,"filters"),this.kernelSize=P_(n,2,"kernelSize"),this.kernelSize.forEach((e=>ty(e,"kernelSize"))),this.strides=P_(r||1,2,"strides"),this.strides.forEach((e=>ty(e,"strides"))),this.padding=i||"valid",by(this.padding),this.dataFormat=o||"channelsLast",my(this.dataFormat),this.dilationRate=P_(a||1,2,"dilationRate"),this.dilationRate.forEach((e=>ty(e,"dilationRate")))}build(e){var t;e=Dx(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new Rv(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=4,o=this.kernelSize.concat([r,this.filters*i]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new(t=class extends sx{apply(e,t){const i=n.apply([r]),o=Vu([r]),a=n.apply([2*r]);return Uy([i,o,a])}},t.className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return Ka((()=>{if(3!==e.length)throw new Rv(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const n=t["training"]||!1,r=e[0],i=e[1],o=e[2],a=4;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=mS({ones:()=>Wu(r),rate:this.dropout,training:n,count:a,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,l=(e,t,n)=>t&&t[n]?nu(t[n],e):e;let u=l(r,s,0),c=l(r,s,1),h=l(r,s,2),d=l(r,s,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=mS({ones:()=>Wu(i),rate:this.recurrentDropout,training:n,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let f=l(i,p,0),m=l(i,p,1),g=l(i,p,2),b=l(i,p,3);const v=3,[y,x,w,k]=Oc(this.kernel.read(),a,v),[_,S,C,I]=this.useBias?Oc(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,y,_,this.padding),c=this.inputConv(c,x,S,this.padding),h=this.inputConv(h,w,C,this.padding),d=this.inputConv(d,k,I,this.padding);const[O,T,N,E]=Oc(this.recurrentKernel.read(),a,v);f=this.recurrentConv(f,O),m=this.recurrentConv(m,T),g=this.recurrentConv(g,N),b=this.recurrentConv(b,E);const D=this.recurrentActivation.apply(ls(u,f)),$=this.recurrentActivation.apply(ls(c,m)),A=ls(nu($,o),nu(D,this.activation.apply(ls(h,g)))),R=nu(this.recurrentActivation.apply(ls(d,b)),this.activation.apply(A));return[R,R,A]}))}getConfig(){const e=super.getConfig(),{units:t}=e,n=gS(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},n,r)}inputConv(e,t,n,r){const i=sl(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?Jy(i,n,this.dataFormat):i}recurrentConv(e,t){const n=1;return sl(e,t,n,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}vS.className="ConvLSTM2DCell",Ga(vS);class yS extends bS{constructor(e){const t=new vS(e);super(Object.assign({},e,{cell:t}))}static fromConfig(e,t){return new e(t)}}yS.className="ConvLSTM2D",Ga(yS);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class xS extends Ux{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}call(e,t){return Ka((()=>{this.invokeCallHook(e,t);const n=Ex(e);if(0<this.rate&&this.rate<1){const e=null!=t["training"]&&t["training"],r=this.getNoiseShape(n),i=nx((()=>ex(n,this.rate,r,this.seed)),(()=>n),e);return i}return e}))}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}xS.className="Dropout",Ga(xS);class wS extends xS{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}wS.className="SpatialDropout1D",Ga(wS);class kS extends Ux{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,ty(this.units,"units"),this.activation=__(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=Ox(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Ox(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=mw(e.kernelConstraint),this.biasConstraint=mw(e.biasConstraint),this.kernelRegularizer=E_(e.kernelRegularizer),this.biasRegularizer=E_(e.biasRegularizer),this.activityRegularizer=E_(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Dx(e);const t=e[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){e=Dx(e);const t=e.slice();return t[t.length-1]=this.units,t}call(e,t){return Ka((()=>{this.invokeCallHook(e,t);const n=Ex(e),r=iy(this.activation.getClassName());let i;return null!=r?i=qy(n,this.kernel.read(),r,this.bias?this.bias.read():null):(i=qy(n,this.kernel.read()),null!=this.bias&&(i=Jy(i,this.bias.read())),null!=this.activation&&(i=this.activation.apply(i))),i}))}getConfig(){const e={units:this.units,activation:w_(this.activation),useBias:this.useBias,kernelInitializer:Ix(this.kernelInitializer),biasInitializer:Ix(this.biasInitializer),kernelRegularizer:T_(this.kernelRegularizer),biasRegularizer:T_(this.biasRegularizer),activityRegularizer:T_(this.activityRegularizer),kernelConstraint:pw(this.kernelConstraint),biasConstraint:pw(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}kS.className="Dense",Ga(kS);class _S extends Ux{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Dx(e);for(const t of e.slice(1))if(null==t)throw new Rv(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Ty(e,1)]}call(e,t){return Ka((()=>{this.invokeCallHook(e,t);let n=Ex(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=Qc(n,e)}return By(n)}))}getConfig(){const e={};null!=this.dataFormat&&(e["dataFormat"]=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}_S.className="Flatten",Ga(_S);class SS extends Ux{constructor(e){super(e),this.supportsMasking=!0,this.activation=__(e.activation)}call(e,t){return Ka((()=>{this.invokeCallHook(e,t);const n=Ex(e);return this.activation.apply(n)}))}getConfig(){const e={activation:w_(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}SS.className="Activation",Ga(SS);class CS extends Ux{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return Ka((()=>(e=Ex(e),Py(e,this.n))))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}CS.className="RepeatVector",Ga(CS);class IS extends Ux{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let i=1,o=null;for(let s=0;s<r.length;++s){const e=r[s];if(this.isUnknown(e)){if(null!==o)throw new Rv("Can only specifiy one unknown dimension.");o=s}else i*=e}const a=Ty(e);if(null!==o){if(0===i||a%i!==0)throw new Rv(n);r[o]=a/i}else if(a!==i)throw new Rv(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return Ka((()=>{this.invokeCallHook(e,t);const n=Ex(e),r=n.shape,i=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return Rs(n,i)}))}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}IS.className="Reshape",Ga(IS);class OS extends Ux{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const t=Dy(1,e.dims.length+1);if(!k(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new jx({ndim:this.dims.length+1})]}computeOutputShape(e){e=Dx(e);const t=e.slice();return this.dims.forEach(((n,r)=>{t[r+1]=e[n]})),t}call(e,t){return Qc(Ex(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}OS.className="Permute",Ga(OS);class TS extends Ux{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=Ex(e),r=-1;return ds(ju(n,this.maskValue),r)}call(e,t){return Ka((()=>{this.invokeCallHook(e,t);const n=Ex(e),r=-1,i=!0,o=ds(ju(n,this.maskValue),r,i),a=nu(n,ea(o,n.dtype));return a}))}}TS.className="Masking",Ga(TS);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class NS extends Ux{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(Vv(e.inputLength))}this.inputDim=e.inputDim,ty(this.inputDim,"inputDim"),this.outputDim=e.outputDim,ty(this.outputDim,"outputDim"),this.embeddingsInitializer=Ox(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=E_(e.embeddingsRegularizer),this.activityRegularizer=E_(e.activityRegularizer),this.embeddingsConstraint=mw(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return Ka((()=>this.maskZero?(e=Ex(e),ju(e,qc(e))):null))}computeOutputShape(e){if(e=Dx(e),null==this.inputLength)return[...e,this.outputDim];const t=Vv(this.inputLength);if(t.length!==e.length-1)throw new Rv(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let r=0;r<t.length;++r){const i=t[r],o=e[r+1];if(null!=i&&null!=o&&i!==o)throw new Rv(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==i&&(t[n]=o),n++}}return[e[0],...t,this.outputDim]}call(e,t){return Ka((()=>{this.invokeCallHook(e,t);let n=Ex(e);"int32"!==n.dtype&&(n=My(n,"int32"));const r=Yy(this.embeddings.read(),Rs(n,[n.size]));return Rs(r,Dx(this.computeOutputShape(n.shape)))}))}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Ix(this.embeddingsInitializer),embeddingsRegularizer:T_(this.embeddingsRegularizer),activityRegularizer:T_(this.activityRegularizer),embeddingsConstraint:pw(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}NS.className="Embedding",Ga(NS);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class ES extends Ux{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Mv}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const i=e[e.length-t.length+r],o=t[r];if(null==i||null==o||i<0||o<0)n.push(null);else if(1===i)n.push(o);else if(1===o)n.push(i);else{if(i!==o)throw new Rv("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(i)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Dx(e)]),e.length<2)throw new Rv(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(const i of e)null!=i&&null!==i[0]&&t.push(i[0]);if(t=Jv(t),t.length>1)throw new Rv(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=null==e[0]?null:e[0].slice(1);for(let i=1;i<e.length;++i){const t=null==e[i]?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}const r=e.map((e=>e.length));-1===e.indexOf(null)&&1===Jv(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return Ka((()=>{if(this.reshapeRequired){const t=[],n=e.map((e=>e.rank));if(-1===n.indexOf(null)){const r=Ey(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=Fy(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const o of e){const e=o.rank;if(null==e){const e=o.shape,r=e[0],i=e.slice(1).concat([r]);let a=Rs(o,[r].concat(Ty(e.slice(1))));a=Qc(a,[1,0]),a=Rs(a,i),t.push(a),n=!0}else if(e>1){const r=Dy(1,e).concat([0]);t.push(Qc(o,r)),n=!0}else t.push(o)}let r=this.mergeFunction(t);const i=r.rank;if(n)if(null==i){const e=r.shape,t=e.length,n=e[t-1],i=[n].concat(e.slice(0,e.length-1));r=Rs(Qc(Rs(r,[-1,n]),[1,0]),i)}else if(i>1){const e=[i-1].concat(Dy(0,i-1));r=Qc(r,e)}return r}}return this.mergeFunction(e)}))}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){const n=null==e[r]?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(const r of e)null!=r&&null!==r[0]&&n.push(r[0]);return n=Jv(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return Ka((()=>{if(null==t)return null;if(!Array.isArray(t))throw new Rv("`mask` should be an Array");if(!Array.isArray(e))throw new Rv("`inputs` should be an Array");if(t.length!==e.length)throw new Rv(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every((e=>null==e)))return null;t=t.map((e=>null==e?e:Al(e,0)));let n=t[0];for(let e=1;e<t.length-1;++e)n=cu(n,t[e]);return n}))}}class DS extends ES{constructor(e){super(e)}mergeFunction(e){return Ka((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=ls(t,e[n]);return t}))}}DS.className="Add",Ga(DS);class $S extends ES{constructor(e){super(e)}mergeFunction(e){return Ka((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=nu(t,e[n]);return t}))}}$S.className="Multiply",Ga($S);class AS extends ES{constructor(e){super(e)}mergeFunction(e){return Ka((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=ls(t,e[n]);return nu(1/e.length,t)}))}}AS.className="Average",Ga(AS);class RS extends ES{constructor(e){super(e)}mergeFunction(e){return Ka((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=vu(t,e[n]);return t}))}}RS.className="Maximum",Ga(RS);class MS extends ES{constructor(e){super(e)}mergeFunction(e){return Ka((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=ku(t,e[n]);return t}))}}MS.className="Minimum",Ga(MS);class FS extends ES{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new Rv("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(const r of e)if(null!=r){t=!1;break}if(t)return;const n=[];for(let r=0;r<e.length;++r){const t=e[r].slice();t.splice(this.axis,1);let i=!1;for(const e of n)if(k(e,t)){i=!0;break}i||n.push(t)}if(n.length>1)throw new Rv("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Ka((()=>Uy(e,this.axis)))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Rv("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const i of t.slice(1)){if(null==n[r]||null==i[r]){n[r]=null;break}n[r]+=i[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new Rv("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Rv("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new Rv(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return Ka((()=>{let n=!0;if(t.forEach((e=>{null==e||(n=!1)})),n)return null;const r=[];for(let o=0;o<e.length;++o)null==t[o]?r.push(ea(Wu(e[o]),"bool")):t[o].rank<e[o].rank?r.push(Al(t[o],-1)):r.push(t[o]);const i=Js(r,this.axis);return cs(i,-1,!1)}))}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function PS(e,t){while(e<0)e+=t;return e}function jS(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new Mv("batchDot is not implemented for tensors of 4D or higher rank yet");if(b(e.shape.length>=2,(()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`)),b(e.shape.length>=2,(()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`)),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new Mv("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,i=t.shape.length;null==n&&(n=[r-1,i-2]);const o=n;return Ka((()=>{let n,a;if(r>i){n=r-i;const e=[];for(let t=0;t<n;++t)e.push(1);t=Rs(t,t.shape.concat(e))}else if(i>r){n=i-r;const t=[];for(let e=0;e<n;++e)t.push(1);e=Rs(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)a=o[0]===o[1]?au(nu(e,t),o[0]):au(nu(Qc(e,[1,0]),t),o[1]);else{const n=o[0]!==e.shape.length-1,r=o[1]===t.shape.length-1;a=du(e,t,n,r)}if(n>0){let e;e=r>i?r+i-3:r-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);a=Dc(a,t)}return 1===a.shape.length&&(a=Al(a,1)),a}))}FS.className="Concatenate",Ga(FS);class BS extends ES{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){b(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new Mv("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new Rv(`Dimension incompatibility: ${t[r[0]]} !== ${n[r[1]]}`)}mergeFunction(e){if(2!==e.length)throw new Rv(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map(((t,n)=>PS(t,e[n].shape.length))):[PS(this.axes,n.shape.length),PS(this.axes,r.shape.length)],this.normalize&&(n=Nw(n,t[0]),r=Nw(r,t[1])),jS(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[PS(this.axes,e.length),PS(this.axes,t.length)],n}computeOutputShape(e){b(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new Mv("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const i=t.concat(n);return 1===i.length&&i.push(1),i}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}BS.className="Dot",Ga(BS);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class LS extends Ux{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return Ka((()=>{this.invokeCallHook(e,t);const n=Ex(e),r=()=>ls(Gy(n.shape,0,this.stddev),n),i=nx(r,(()=>n),t["training"]||!1);return i}))}}LS.className="GaussianNoise",Ga(LS);class zS extends Ux{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return Ka((()=>{this.invokeCallHook(e,t);const n=Ex(e);if(this.rate>0&&this.rate<1){const e=()=>{const e=Math.sqrt(this.rate/(1-this.rate));return nu(n,Gy(n.shape,1,e))};return nx(e,(()=>n),t["training"]||!1)}return n}))}}zS.className="GaussianDropout",Ga(zS);class VS extends Ux{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Ex(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return Ka((()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),r=()=>{const t=Ex(e),r=1.6732632423543772,i=1.0507009873554805,o=-r*i;let a=Gl(tc(n),this.rate);a=My(a,"float32");const s=((1-this.rate)*(1+this.rate*o**2))**-.5,l=-s*o*this.rate,u=ls(nu(t,a),nu(ls(a,-1),o));return ls(nu(u,s),l)};return nx(r,(()=>Ex(e)),t["training"]||!1)}return e}))}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function US(e,t,n,r,i,o=.001){let a;if(2===e.rank)a=Us(e,t,n,r,i,o);else if(3===e.rank)a=Hs(e,t,n,r,i,o);else{if(4!==e.rank)throw new Mv(`batchNormalization is not implemented for array of rank ${e.rank} yet`);a=qs(e,t,n,r,i,o)}return a}function WS(e,t,n,r,i=.001){return Ka((()=>{const o=Ru(e,r),a=o.mean,s=o.variance,l=US(e,a,s,n,t,i);return[l,a,s]}))}function HS(e,t,n,r,i=.001){return Ka((()=>{const o=Ru(e,r),a=o.mean,s=o.variance,l=[];for(const t of Dy(0,e.rank))-1!==r.indexOf(t)?l.push(1):l.push(e.shape[t]);const u=Rs(a,l),c=Rs(s,l),h=null==t?null:Rs(t,l),d=null==n?null:Rs(n,l),p=US(e,u,c,d,h,i);return[p,a,s]}))}function GS(e,t,n,r,i=.001){return k(r.slice().sort(),Dy(0,e.rank-1))?WS(e,t,n,r,i):HS(e,t,n,r,i)}VS.className="AlphaDropout",Ga(VS);class qS extends Ux{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=Ox(e.betaInitializer||"zeros"),this.gammaInitializer=Ox(e.gammaInitializer||"ones"),this.movingMeanInitializer=Ox(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Ox(e.movingVarianceInitializer||"ones"),this.betaConstraint=mw(e.betaConstraint),this.gammaConstraint=mw(e.gammaConstraint),this.betaRegularizer=E_(e.betaRegularizer),this.gammaRegularizer=E_(e.gammaRegularizer)}build(e){e=Dx(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new Rv(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new jx({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return Ka((()=>{const n=null!=t["training"]&&t["training"],r=Ex(e),i=r.shape,o=i.length,a=Dy(0,o),s=this.axis>=0?this.axis:this.axis+o;a.splice(s,1);const l=jv(1,o);l[s]=i[s];const u=a.slice();u.sort();const c=!k(u,Dy(0,o).slice(0,o-1)),h=()=>{if(c){const e=Rs(this.movingMean.read(),l),t=Rs(this.movingVariance.read(),l),n=this.center?Rs(this.beta.read(),l):null,i=this.scale?Rs(this.gamma.read(),l):null;return US(r,e,t,n,i,this.epsilon)}return US(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)};if(!n)return h();const[d,p,f]=GS(r,this.gamma.read(),this.beta.read(),a,this.epsilon),m=(e,t,n)=>{Ka((()=>{const r=1-n,i=e.read(),o=nu(iu(i,t),r);e.write(iu(i,o))}))},g=()=>{m(this.movingMean,p,this.momentum),m(this.movingVariance,f,this.momentum)};return g(),d}))}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Ix(this.betaInitializer),gammaInitializer:Ix(this.gammaInitializer),movingMeanInitializer:Ix(this.movingMeanInitializer),movingVarianceInitializer:Ix(this.movingVarianceInitializer),betaRegularizer:T_(this.betaRegularizer),gammaRegularizer:T_(this.gammaRegularizer),betaConstraint:pw(this.betaConstraint),gammaConstraint:pw(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}qS.className="BatchNormalization",Ga(qS);class YS extends Ux{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);for(const e of this.axis)if(!Number.isInteger(e))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=Ox(e.betaInitializer||"zeros"),this.gammaInitializer=Ox(e.gammaInitializer||"ones"),this.betaRegularizer=E_(e.betaRegularizer),this.gammaRegularizer=E_(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Dx(e);const t=e.length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=t);for(const i of this.axis)if(i<0||i>=t)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==Jv(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const n=this.axis.map((t=>e[t])),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,t){const n=Ex(e),r=n.shape,i=r.length;return Ka((()=>{const e=!0;let{mean:t,variance:o}=Ru(n,this.axis,e);const a=jv(1,i);for(const n of this.axis)a[n]=r[n];const s=e=>null!=e&&e.shape.length!==i?Rs(e,a):e;let l=this.scale?s(this.gamma.read()):null,u=this.center?s(this.beta.read()):null;const c=[],h=[];for(let n=0;n<i;++n)-1!==this.axis.indexOf(n)?(c.push(r[n]),h.push(1)):(c.push(1),h.push(r[n]));return t=Ml(t,c),o=Ml(o,c),null!=l&&(l=Ml(l,h)),null!=u&&(u=Ml(u,h)),US(n,t,o,u,l,this.epsilon)}))}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Ix(this.betaInitializer),gammaInitializer:Ix(this.gammaInitializer),betaRegularizer:T_(this.betaRegularizer),gammaRegularizer:T_(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}function XS(e,t,n){return Ka((()=>{if(4!==e.rank)throw new Rv(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new Rv("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n=Ry()),"channelsLast"!==n&&"channelsFirst"!==n)throw new Rv(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],Gu(e,r)}))}YS.className="LayerNormalization",Ga(YS);class KS extends Ux{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?Ry():e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new Rv(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,n;if("number"===typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new Rv(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new Rv(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new jx({ndim:4})]}computeOutputShape(e){let t,n;return e=Dx(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return Ka((()=>XS(Ex(e),this.padding,this.dataFormat)))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function JS(e,t,n,r,i,o){return Ka((()=>{let a;my(i),vy(o),by(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==i&&(i=Ry()),null==o&&(o="max"),e=L_(e,i);const s="same"===r?"same":"valid";return a="max"===o?fu(e,t,n,s):Fs(e,t,n,s),"channelsFirst"===i&&(a=Qc(a,[0,3,1,2])),a}))}function ZS(e,t,n,r,i,o){return Ka((()=>{let a;my(i),vy(o),by(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==i&&(i=Ry()),null==o&&(o="max"),e=z_(e,i);const s="same"===r?"same":"valid";return a="max"===o?gu(e,t,n,s):js(e,t,n,s),"channelsFirst"===i&&(a=Qc(a,[0,4,1,2,3])),a}))}KS.className="ZeroPadding2D",Ga(KS);class QS extends Ux{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"===typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new Rv(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);this.poolSize=e.poolSize}if(ty(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"===typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new Rv(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);this.strides=e.strides}ty(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,by(this.padding),this.inputSpec=[new jx({ndim:3})]}computeOutputShape(e){e=Dx(e);const t=j_(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return Ka((()=>{this.invokeCallHook(e,t),e=Fy(Ex(e),2);const n=this.poolingFunction(Ex(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Dc(n,[2])}))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class eC extends QS{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return my(i),by(r),JS(e,t,n,r,i,"max")}}eC.className="MaxPooling1D",Ga(eC);class tC extends QS{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return my(i),by(r),JS(e,t,n,r,i,"avg")}}tC.className="AveragePooling1D",Ga(tC);class nC extends Ux{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new Rv(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];ty(this.poolSize,"poolSize"),ty(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,my(this.dataFormat),by(this.padding),this.inputSpec=[new jx({ndim:4})]}computeOutputShape(e){e=Dx(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=j_(t,this.poolSize[0],this.padding,this.strides[0]),n=j_(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return Ka((()=>(this.invokeCallHook(e,t),this.poolingFunction(Ex(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class rC extends nC{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return my(i),by(r),JS(e,t,n,r,i,"max")}}rC.className="MaxPooling2D",Ga(rC);class iC extends nC{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return my(i),by(r),JS(e,t,n,r,i,"avg")}}iC.className="AveragePooling2D",Ga(iC);class oC extends Ux{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new Rv(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];ty(this.poolSize,"poolSize"),ty(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,my(this.dataFormat),by(this.padding),this.inputSpec=[new jx({ndim:5})]}computeOutputShape(e){e=Dx(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=j_(t,this.poolSize[0],this.padding,this.strides[0]),n=j_(n,this.poolSize[1],this.padding,this.strides[1]),r=j_(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return Ka((()=>(this.invokeCallHook(e,t),this.poolingFunction(Ex(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class aC extends oC{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return my(i),by(r),ZS(e,t,n,r,i,"max")}}aC.className="MaxPooling3D",Ga(aC);class sC extends oC{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return my(i),by(r),ZS(e,t,n,r,i,"avg")}}sC.className="AveragePooling3D",Ga(sC);class lC extends Ux{constructor(e){super(e),this.inputSpec=[new jx({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new Mv}}class uC extends lC{constructor(e){super(e||{})}call(e,t){return Ka((()=>{const t=Ex(e);return xu(t,1)}))}}uC.className="GlobalAveragePooling1D",Ga(uC);class cC extends lC{constructor(e){super(e||{})}call(e,t){return Ka((()=>{const t=Ex(e);return eu(t,1)}))}}cC.className="GlobalMaxPooling1D",Ga(cC);class hC extends Ux{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,my(this.dataFormat),this.inputSpec=[new jx({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new Mv}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class dC extends hC{call(e,t){return Ka((()=>{const t=Ex(e);return"channelsLast"===this.dataFormat?xu(t,[1,2]):xu(t,[2,3])}))}}dC.className="GlobalAveragePooling2D",Ga(dC);class pC extends hC{call(e,t){return Ka((()=>{const t=Ex(e);return"channelsLast"===this.dataFormat?eu(t,[1,2]):eu(t,[2,3])}))}}pC.className="GlobalMaxPooling2D",Ga(pC);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class fC extends Ux{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){const r=t["layer"],i=Tw(r,n);delete t["layer"];const o={layer:i};return Object.assign(o,t),new e(o)}}class mC extends fC{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Dx(e),e.length<3)throw new Rv(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Dx(e);const t=[e[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return Ka((()=>{e=Ex(e);const n=(e,n)=>{const r=Ex(this.layer.call(e,t));return[r,[]]},r=oS(n,e,[],!1,null,null,!1,!0),i=r[1];return i}))}}function gC(e){Qv(py,"BidirectionalMergeMode",e)}mC.className="TimeDistributed",Ga(mC);const bC="concat";class vC extends fC{constructor(e){super(e);const t=e.layer.getConfig(),n={};n["className"]=e.layer.getClassName(),n["config"]=t,this.forwardLayer=Tw(n),t["goBackwards"]=!0!==t["goBackwards"];const r={};if(r["className"]=e.layer.getClassName(),r["config"]=t,this.backwardLayer=Tw(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?bC:e.mergeMode,gC(this.mergeMode),e.weights)throw new Mv("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,i=this.forwardLayer.computeOutputShape(e);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),this.returnState?(r=i.slice(1),t=i[0]):t=i[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):zv(n)}apply(e,t){let n=null==t?null:t["initialState"],r=null==t?null:t["constants"];null==t&&(t={});const i=iS(e,n,r,this.numConstants);if(e=i.inputs,n=i.initialState,r=i.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const o=[],a=[];if(null!=n){const e=n.length;if(e%2>0)throw new Rv("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t["initialState"]=n,o.push(...n);const r=n.map((e=>new jx({shape:e.shape})));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),a.push(...r)}if(null!=r)throw new Mv("Support for constants in Bidirectional layers is not implemented yet.");const s=o[0]instanceof Bx;for(const l of o)if(l instanceof Bx!==s)throw new Rv("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(s){const n=[e].concat(o),r=this.inputSpec.concat(a),i=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=i,s}return super.apply(e,t)}call(e,t){return Ka((()=>{const n=t["initialState"];let r,i,o,a;if(null==n)r=this.forwardLayer.call(e,t),i=this.backwardLayer.call(e,t);else{const o=n.slice(0,n.length/2),a=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:o})),i=this.backwardLayer.call(e,Object.assign(t,{initialState:a}))}return this.returnState&&(Array.isArray(r)&&(o=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),this.returnSequences&&(i=oc(i,1)),"concat"===this.mergeMode?a=Uy([r,i]):"sum"===this.mergeMode?a=ls(r,i):"ave"===this.mergeMode?a=nu(.5,ls(r,i)):"mul"===this.mergeMode?a=nu(r,i):null==this.mergeMode&&(a=[r,i]),this.returnState?null==this.mergeMode?a.concat(o):[a].concat(o):a}))}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){wy(this.forwardLayer.name,(()=>{this.forwardLayer.build(e)})),wy(this.backwardLayer.name,(()=>{this.backwardLayer.build(e)})),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states,t=e.map((e=>null));return Array.isArray(n)?n.concat(t).concat(t):[n].concat(t).concat(t)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=Tw(t["layer"]);if(delete t["layer"],null!=t["numConstants"])throw new Mv("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r["layer"]=n,new e(r)}}vC.className="Bidirectional",Ga(vC);const yC=oe();
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
var xC,wC;yC.registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e["DT_INVALID"]=0]="DT_INVALID",e[e["DT_FLOAT"]=1]="DT_FLOAT",e[e["DT_DOUBLE"]=2]="DT_DOUBLE",e[e["DT_INT32"]=3]="DT_INT32",e[e["DT_UINT8"]=4]="DT_UINT8",e[e["DT_INT16"]=5]="DT_INT16",e[e["DT_INT8"]=6]="DT_INT8",e[e["DT_STRING"]=7]="DT_STRING",e[e["DT_COMPLEX64"]=8]="DT_COMPLEX64",e[e["DT_INT64"]=9]="DT_INT64",e[e["DT_BOOL"]=10]="DT_BOOL",e[e["DT_QINT8"]=11]="DT_QINT8",e[e["DT_QUINT8"]=12]="DT_QUINT8",e[e["DT_QINT32"]=13]="DT_QINT32",e[e["DT_BFLOAT16"]=14]="DT_BFLOAT16",e[e["DT_QINT16"]=15]="DT_QINT16",e[e["DT_QUINT16"]=16]="DT_QUINT16",e[e["DT_UINT16"]=17]="DT_UINT16",e[e["DT_COMPLEX128"]=18]="DT_COMPLEX128",e[e["DT_HALF"]=19]="DT_HALF",e[e["DT_RESOURCE"]=20]="DT_RESOURCE",e[e["DT_VARIANT"]=21]="DT_VARIANT",e[e["DT_UINT32"]=22]="DT_UINT32",e[e["DT_UINT64"]=23]="DT_UINT64",e[e["DT_FLOAT_REF"]=101]="DT_FLOAT_REF",e[e["DT_DOUBLE_REF"]=102]="DT_DOUBLE_REF",e[e["DT_INT32_REF"]=103]="DT_INT32_REF",e[e["DT_UINT8_REF"]=104]="DT_UINT8_REF",e[e["DT_INT16_REF"]=105]="DT_INT16_REF",e[e["DT_INT8_REF"]=106]="DT_INT8_REF",e[e["DT_STRING_REF"]=107]="DT_STRING_REF",e[e["DT_COMPLEX64_REF"]=108]="DT_COMPLEX64_REF",e[e["DT_INT64_REF"]=109]="DT_INT64_REF",e[e["DT_BOOL_REF"]=110]="DT_BOOL_REF",e[e["DT_QINT8_REF"]=111]="DT_QINT8_REF",e[e["DT_QUINT8_REF"]=112]="DT_QUINT8_REF",e[e["DT_QINT32_REF"]=113]="DT_QINT32_REF",e[e["DT_BFLOAT16_REF"]=114]="DT_BFLOAT16_REF",e[e["DT_QINT16_REF"]=115]="DT_QINT16_REF",e[e["DT_QUINT16_REF"]=116]="DT_QUINT16_REF",e[e["DT_UINT16_REF"]=117]="DT_UINT16_REF",e[e["DT_COMPLEX128_REF"]=118]="DT_COMPLEX128_REF",e[e["DT_HALF_REF"]=119]="DT_HALF_REF",e[e["DT_RESOURCE_REF"]=120]="DT_RESOURCE_REF",e[e["DT_VARIANT_REF"]=121]="DT_VARIANT_REF",e[e["DT_UINT32_REF"]=122]="DT_UINT32_REF",e[e["DT_UINT64_REF"]=123]="DT_UINT64_REF"}(xC||(xC={})),function(e){let t;(function(e){e[e["LEGACY"]=0]="LEGACY",e[e["V1"]=1]="V1",e[e["V2"]=2]="V2"})(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(wC||(wC={}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
function kC(e,t){return _C(e,t)}function _C(e,t,n=new Map,r=new Set){if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const i=t(e);if(i.recurse&&null!==i.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(OC(e)){const i=Array.isArray(e)?[]:{};r.add(e);for(const o in e){const a=e[o],s=_C(a,t,n,r);i[o]=s}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error(`Can't recurse into non-iterable type: ${e}`)}return n.set(e,i.value),i.value}function SC(e,t=IC){return CC(e,t)}function CC(e,t,n=new Set){const r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");const i=t(e);if(i.recurse&&null!==i.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse){if(OC(r)){const i=Array.isArray(r)?[]:{};n.add(r);for(const o in r){const r=e.map((e=>e[o])),a=CC(r,t,n);i[o]=a}return n.delete(r),i}throw new Error(`Can't recurse into non-iterable type: ${r}`)}return i.value}function IC(e){return null===e?null:OC(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function OC(e){let t=!1;if(oe().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:r}=n(4977);t=e instanceof r}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof wi)&&!(e instanceof Promise)&&!t)}function TC(e){return null==e||NC(e)||Array.isArray(e)||"object"===typeof e&&e instanceof wi||M(e)}function NC(e){return null===e||"object"!==typeof e&&"function"!==typeof e}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
function EC(e){return kC(e,DC)}function DC(e){return e instanceof wi?{value:e.clone(),recurse:!1}:OC(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
class $C{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){while(e<0)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
class AC extends $C{constructor(){super(AC.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
function RC(e){return new jC(e)}function MC(e){return new BC(e)}function FC(e,t){return new KC(e,t)}AC.INITIAL_CAPACITY=32;class PC{async toArray(){const e=[];let t=await this.next();while(!t.done)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();while(!n.done)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();while(!e.done)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);while(!t.done&&n)t=await this.next(),n=e(t.value)}handleErrors(e){return new GC(this,e)}filter(e){return new WC(this,e)}map(e){return new HC(this,e)}mapAsync(e){return new qC(this,e)}serialMapAsync(e){return new qC(this,e).serial()}flatmap(e){return new XC(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile((e=>!0===e))}rowMajorBatch(e,t=!0){return new UC(this,e,t)}columnMajorBatch(e,t=!0,n=IC){const r=this.rowMajorBatch(e,t);return r.map((e=>SC(e,n)))}concatenate(e,t){return new KC(RC([this,e]),t)}take(e){return e<0||null==e?this:new VC(this,e)}skip(e){return e<0||null==e?this:new zC(this,e)}prefetch(e){return new ZC(this,e)}shuffle(e,t){return new QC(this,e,t)}serial(){return new LC(this)}}class jC extends PC{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:EC(e),done:!1}}}class BC extends PC{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message=`Error thrown while iterating through a dataset: ${e.message}`,e}}}class LC extends PC{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){return this.upstream.next()}}class zC extends PC{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){while(this.count++<this.maxCount){const e=await this.upstream.next();if(e.done)return e;Ja(e.value)}return this.upstream.next()}}class VC extends PC{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class UC extends PC{constructor(e,t,n=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){const e=[];while(e.length<this.batchSize){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class WC extends PC{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){while(1){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;Ja(e.value)}}}class HC extends PC{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=Ri(e.value),n=this.transform(e.value),r=Ri(n);for(const i of t)Ai(i,r)||i.dispose();return{value:n,done:!1}}}class GC extends PC{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){while(1)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class qC extends PC{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=Ri(e.value),n=await this.transform(e.value),r=Ri(n);for(const i of t)Ai(i,r)||i.dispose();return{value:n,done:!1}}}class YC extends PC{constructor(){super(),this.outputQueue=new AC,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){while(0===this.outputQueue.length())if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class XC extends YC{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=Ri(e.value),n=this.transform(e.value),r=Ri(n);this.outputQueue.pushAll(n);for(const i of t)Ai(i,r)||i.dispose();return!0}}class KC extends PC{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){const e="TODO: fill in upstream of chained summaries";return`${e} -> Chained`}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var JC;(function(e){e[e["FAIL"]=0]="FAIL",e[e["SHORTEST"]=1]="SHORTEST",e[e["LONGEST"]=2]="LONGEST"})(JC||(JC={}));class ZC extends PC{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new $C(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){while(!this.buffer.isFull()){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class QC extends ZC{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=Xu.alea(n||Jr().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){this.upstreamExhausted||this.refill();while(!this.buffer.isEmpty()){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
class eI{constructor(){this.size=null}batch(e,t=!0){const n=this;let r;return b(e>0,(()=>`batchSize needs to be positive, but it is\n      ${e}`)),r=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),tI((async()=>(await n.iterator()).columnMajorBatch(e,t,nI)),r)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,tI((async()=>(await t.iterator()).concatenate(await e.iterator())),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,tI((async()=>(await t.iterator()).filter((t=>Ka((()=>e(t)))))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return tI((async()=>(await t.iterator()).map((t=>Ka((()=>e(t)))))),this.size)}mapAsync(e){const t=this;return tI((async()=>(await t.iterator()).mapAsync(e)),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return tI((async()=>(await t.iterator()).prefetch(e)),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,tI((async()=>{const n=MC((async()=>({value:await t.iterator(),done:!1})));return FC(n.take(e))}),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,tI((async()=>(await t.iterator()).skip(e)),n)}shuffle(e,t,n=!0){if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const r=this,i=Xu.alea(t||Jr().toString());return tI((async()=>{let t=i.int32();return n&&(t+=i.int32()),(await r.iterator()).shuffle(e,t.toString())}),this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,tI((async()=>(await t.iterator()).take(e)),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function tI(e,t=null){return new class extends eI{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function nI(e){if(null===e)return null;const t=e[0];if(TC(t)){const t=rI(e);return{value:t,recurse:!1}}return{value:null,recurse:!0}}function rI(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof wi?Ac(e):oo(e)}eI.MAX_BUFFER_SIZE=1e4;
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function iI(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&b("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the CPU backend.`))}))}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const oI=Mf;class aI extends c{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new u(this,Ya())}nextDataId(){return aI.nextDataId++}write(e,t,n){this.firstUse&&(this.firstUse=!1,oe().get("IS_NODE")&&yr("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&j(n[0])){const i=n.map((e=>Zr(e)));r=this.write(i,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){const t=this.data.get(e);return t.refCount}return 0}incRef(e){const t=this.data.get(e);t.refCount++}decRef(e){if(this.data.has(e)){const t=this.data.get(e);t.refCount--}}move(e,t,n,r,i){this.data.set(e,{values:t,dtype:r,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){const e=this.readSync(n.real.dataId),t=this.readSync(n.imag.dataId);return Zp(e,t)}return this.data.get(e).values}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>Qr(e)));return Zo(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return Zo(e.shape,e.dtype,t)}makeOutput(e,t,n){return Ya().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=Jr();e();const n=Jr()-t;return{kernelMs:n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){iI([e],"where");const t=this.readSync(e.dataId);return oI(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}aI.nextDataId=0;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function sI(e,t,n){return({inputs:r,attrs:i,backend:o})=>{const{x:a}=r;if(iI(a,e),"string"===a.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const s=o,l=s.data.get(a.dataId).values,u=w(a.shape),c=n||a.dtype,h=D(c,u);for(let e=0;e<u;++e)h[e]=t(l[e],i);return s.makeTensorInfo(a.shape,c,h)}}function lI(e,t,n){return({inputs:r,attrs:i,backend:o})=>{const{x:a}=r;if(iI(a,e),"string"===a.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const s=o,l=s.data.get(a.dataId).values,u=n||a.dtype,c=t(l,u,i);return s.makeTensorInfo(a.shape,u,c)}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Qa("cpu",(()=>new aI),1);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const uI=sI(ut,(e=>e>=0?e:Math.exp(e)-1)),cI={kernelName:ut,backendName:"cpu",kernelFunc:uI};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function hI(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const dI={kernelName:It,backendName:"cpu",kernelFunc:hI};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pI(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:o}=r;iI([i],"leakyRelu");const a=w(i.shape),s=n.data.get(i.dataId).values,l=E("float32",a);for(let u=0;u<s.length;u++)l[u]=s[u]<0?o*s[u]:s[u];return n.makeTensorInfo(i.shape,"float32",l)}const fI={kernelName:$t,backendName:"cpu",kernelFunc:pI};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mI(e){return(t,n,r,i,o)=>{const a=_a(t,n),s=a.length,l=W(a),u=w(a),c=E(o,u),h=t.length,d=n.length,p=W(t),f=W(n),m=wa(t,a),g=wa(n,a);if(m.length+g.length===0)for(let b=0;b<c.length;++b)c[b]=e(r[b%r.length],i[b%i.length]);else for(let b=0;b<c.length;++b){const t=Z(b,s,l),n=t.slice(-h);m.forEach((e=>n[e]=0));const o=J(n,h,p),a=t.slice(-d);g.forEach((e=>a[e]=0));const u=J(a,d,f);c[b]=e(r[o],i[u])}return[c,a]}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const gI=mI(((e,t)=>e<0?t*e:e));function bI(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t;iI([r,i],"prelu");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,[s,l]=gI(r.shape,i.shape,o,a,"float32");return n.makeTensorInfo(l,"float32",s)}const vI={kernelName:mn,backendName:"cpu",kernelFunc:bI},yI=sI(xn,(e=>Math.max(0,e))),xI={kernelName:xn,backendName:"cpu",kernelFunc:yI},wI=sI(In,(e=>Math.min(Math.max(0,e),6))),kI={kernelName:In,backendName:"cpu",kernelFunc:wI};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function _I(e){return(t,n,r)=>{const i=E(n,t.length);for(let o=0;o<t.length;++o)i[o]=e(t[o],r);return i}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const SI=_I((e=>1/(1+Math.exp(-e)))),CI=sI(jn,(e=>1/(1+Math.exp(-e)))),II={kernelName:jn,backendName:"cpu",kernelFunc:CI};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function OI(e,t,n,r,i){if("linear"===n)return hI({inputs:{x:t},backend:e});if("relu"===n)return yI({inputs:{x:t},backend:e});if("elu"===n)return uI({inputs:{x:t},backend:e});if("relu6"===n)return wI({inputs:{x:t},backend:e});if("prelu"===n)return bI({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return pI({inputs:{x:t},backend:e,attrs:{alpha:i}});if("sigmoid"===n)return CI({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function TI(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,s=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(s.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(i.shape,"float32",a)},s}const NI={kernelName:je,backendName:"cpu",kernelFunc:TI};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function EI(e,t,n="float32"){if("complex64"===n){const n=EI(e,t,"float32"),r=EI(e,t,"float32");return TI({inputs:{real:n,imag:r},backend:e})}const r=Y(w(t),n);return e.makeTensorInfo(t,n,r)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function DI(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}const $I={kernelName:vn,backendName:"cpu",kernelFunc:DI};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function AI(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dtype:o}=r;if("complex64"===o){if("complex64"===i.dtype)return hI({inputs:{x:i},backend:n});const e=EI(n,i.shape,i.dtype),t=AI({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),r=TI({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===i.dtype){const e=DI({inputs:{input:i},backend:n}),t=AI({inputs:{x:e},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(e),t}if(!R(i.dtype,o)){const e=hI({inputs:{x:i},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:o}}if("int32"===o){const e=n.data.get(i.dataId).values,t=Int32Array.from(e);return n.makeTensorInfo(i.shape,"int32",t)}if("bool"===o){const e=n.data.get(i.dataId).values,t=Kr([0],i.dtype),[r,o]=mI(((e,t)=>e!==t?1:0))(i.shape,[],e,t,"bool");return n.makeTensorInfo(o,"bool",r)}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${o}`)}const RI={kernelName:Me,backendName:"cpu",kernelFunc:AI};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function MI(e,t,n,r){return null==n?({inputs:n,backend:i})=>{const{a:o,b:a}=n,s=i;iI([o,a],e);const l=s.data.get(o.dataId).values,u=s.data.get(a.dataId).values,c="string"===o.dtype?Af(l):l,h="string"===o.dtype?Af(u):u,d=r||o.dtype,[p,f]=t(o.shape,a.shape,c,h,d);return s.makeTensorInfo(f,d,p)}:({inputs:e,backend:i})=>{const{a:o,b:a}=e,s=i;if("complex64"===o.dtype||"complex64"===a.dtype){const e=AI({inputs:{x:o},backend:s,attrs:{dtype:"complex64"}}),t=s.data.get(e.dataId),r=t.complexTensorInfos.real,i=t.complexTensorInfos.imag,l=s.data.get(r.dataId).values,u=s.data.get(i.dataId).values,c=AI({inputs:{x:a},backend:s,attrs:{dtype:"complex64"}}),h=s.data.get(c.dataId),d=h.complexTensorInfos.real,p=h.complexTensorInfos.imag,f=s.data.get(d.dataId).values,m=s.data.get(p.dataId).values,[g,b,v]=n(o.shape,a.shape,l,u,f,m),y=s.makeTensorInfo(v,"float32",g),x=s.makeTensorInfo(v,"float32",b),w=TI({inputs:{real:y,imag:x},backend:s});return s.disposeIntermediateTensorInfo(e),s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(y),s.disposeIntermediateTensorInfo(x),w}{const e=s.data.get(o.dataId).values,n=s.data.get(a.dataId).values,i=r||o.dtype,[l,u]=t(o.shape,a.shape,e,n,i);return s.makeTensorInfo(u,i,l)}}}function FI(e){return(t,n,r,i,o,a)=>{const s=_a(t,n),l=w(s),u=s.length,c=W(s),h=E("float32",l),d=E("float32",l),p=wa(t,s),f=wa(n,s),m=Zp(r,i),g=Zp(o,a),b=t.length,v=W(t),y=n.length,x=W(n);if(p.length+f.length===0)for(let w=0;w<h.length;w++){const t=w%m.length,n=w%g.length,r=e(m[2*t],m[2*t+1],g[2*n],g[2*n+1]);h[w]=r.real,d[w]=r.imag}else for(let w=0;w<h.length;w++){const t=Z(w,u,c),n=t.slice(-b);p.forEach((e=>n[e]=0));const r=J(n,b,v),i=t.slice(-y);f.forEach((e=>i[e]=0));const o=J(i,y,x),a=e(m[2*r],m[2*r+1],g[2*o],g[2*o+1]);h[w]=a.real,d[w]=a.imag}return[h,d,s]}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const PI=mI(((e,t)=>e+t)),jI=FI(((e,t,n,r)=>({real:e+n,imag:t+r}))),BI=MI(me,PI,jI),LI={kernelName:me,backendName:"cpu",kernelFunc:BI};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zI(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:o}=r,a=w(i.shape),s=O(o,a),l=w(s);b(a===l,(()=>`The new shape (${s}) has ${l} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`)),n.incRef(i.dataId);const u=n.data.get(i.dataId);if(null!=u.complexTensorInfos){const e=u.complexTensorInfos.real,t=u.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:i.dataId,shape:s,dtype:i.dtype}}const VI={kernelName:wn,backendName:"cpu",kernelFunc:zI};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function UI(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o}=t,{transposeA:a,transposeB:s}=r;iI([i,o],"matMul");const l=i.shape.length,u=o.shape.length,c=a?i.shape[l-2]:i.shape[l-1],h=s?o.shape[u-1]:o.shape[u-2],d=a?i.shape[l-1]:i.shape[l-2],p=s?o.shape[u-2]:o.shape[u-1],f=i.shape.slice(0,-2),m=o.shape.slice(0,-2),g=w(f),v=w(m),y=_a(i.shape.slice(0,-2),o.shape.slice(0,-2)),x=y.concat([d,p]);b(c===h,(()=>`Error in matMul: inner shapes (${c}) and (${h}) of Tensors with shapes ${i.shape} and ${o.shape} and transposeA=${a} and transposeB=${s} must match.`));const k=a?[g,c,d]:[g,d,c],_=s?[v,p,h]:[v,h,p],S=zI({inputs:{x:i},backend:n,attrs:{shape:k}}),C=zI({inputs:{x:o},backend:n,attrs:{shape:_}}),I=a?S.shape[1]:S.shape[2],O=a?S.shape[2]:S.shape[1],T=s?C.shape[1]:C.shape[2],N=Math.max(g,v),E=n.data.get(S.dataId).values,D=n.data.get(C.dataId).values,$=W(S.shape),A=W(C.shape),[R,M,F]=a?[$[0],1,$[1]]:[$[0],$[1],1],[P,j,B]=s?[1,A[1],A[0]]:[A[1],1,A[0]],L=O*T,z=Zo([N,O,T],S.dtype),V=z.values,U=n.blockSize;for(let b=0;b<N;b++)for(let e=0;e<O;e+=U)for(let t=0;t<T;t+=U)for(let n=0;n<I;n+=U){const r=Math.min(e+U,O),i=Math.min(t+U,T),o=Math.min(n+U,I);for(let a=e;a<r;a++)for(let e=t;e<i;e++){let t=0;for(let r=n;r<o;r++){const n=Math.min(b,g-1)*R,i=Math.min(b,v-1)*B,o=E[n+a*M+r*F],s=D[r*P+e*j+i];t+=o*s}V[b*L+(a*T+e)]+=t}}return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(C),n.makeTensorInfo(x,z.dtype,z.values)}const WI={kernelName:Ee,backendName:"cpu",kernelFunc:UI};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function HI(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o,bias:a,preluActivationWeights:s}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:h}=r;let d,p,f;const m=[],g=UI({inputs:{a:i,b:o},attrs:{transposeA:l,transposeB:u},backend:n});d=g,a&&(p=BI({inputs:{a:d,b:a},backend:n}),m.push(d),d=p),c&&(f=OI(n,d,c,s,h),m.push(d),d=f);for(const b of m)n.disposeIntermediateTensorInfo(b);return d}const GI={kernelName:gr,backendName:"cpu",kernelFunc:HI};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function qI(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const YI=e=>{const{x:t}=e.inputs,n=e.backend;iI(t,"abs");let r=new Float32Array(w(t.shape));const i=n.data.get(t.dataId).values;return r=qI(i),n.makeOutput(r,t.shape,t.dtype)},XI={kernelName:de,backendName:"cpu",kernelFunc:YI},KI=sI(pe,(e=>Math.acos(e))),JI={kernelName:pe,backendName:"cpu",kernelFunc:KI},ZI=sI(fe,(e=>Math.acosh(e))),QI={kernelName:fe,backendName:"cpu",kernelFunc:ZI};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function eO(e){const{inputs:t,backend:n}=e,r=t;iI(t,"addN");const i=r.map((e=>n.data.get(e.dataId).values)),o=Zo(r[0].shape,r[0].dtype),a=o.values;for(let s=0;s<r.length;s++){const e=i[s];for(let t=0;t<a.length;t++)a[t]+=e[t]}return n.makeTensorInfo(o.shape,o.dtype,o.values)}const tO={kernelName:ge,backendName:"cpu",kernelFunc:eO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function nO(e,t,n,r,i){const o=t.length,a=w(t),s=W(t),l=W(i),u=E(n,w(i));for(let c=0;c<a;++c){const t=Z(c,o,s),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];const i=J(n,o,l);u[i]=e[c]}return u}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function rO(e){const{inputs:t,attrs:n,backend:r}=e,{x:i}=t,{perm:o}=n;iI(i,"transpose");const a=i.shape.length,s=new Array(a);for(let h=0;h<s.length;h++)s[h]=i.shape[o[h]];const l=r.data.get(i.dataId).values,u=nO(l,i.shape,i.dtype,o,s),c=r.write(u,s,i.dtype);return{dataId:c,shape:s,dtype:i.dtype}}const iO={kernelName:lr,backendName:"cpu",kernelFunc:rO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function oO(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;iI(i,"all");const s=T(o,i.shape);let l=s;const u=Tu(l,i.shape.length);let c=i;null!=u&&(c=rO({inputs:{x:i},backend:n,attrs:{perm:u}}),l=Eu(l.length,i.shape.length)),Ou("all",l,c.shape.length);const[h,d]=Cu(c.shape,l),p=w(d),f=Y(w(h),c.dtype),m=n.data.get(c.dataId).values;for(let b=0;b<f.length;++b){const e=b*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];t=t&&r}f[b]=t}null!=u&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(h,c.dtype,f);if(a){const e=Iu(h,s),t=zI({inputs:{x:g},backend:n,attrs:{shape:e}});return n.disposeIntermediateTensorInfo(g),t}return g}const aO={kernelName:be,backendName:"cpu",kernelFunc:oO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function sO(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;iI(i,"any");const s=T(o,i.shape);let l=s;const u=Tu(l,i.shape.length);let c=i;null!=u&&(c=rO({inputs:{x:i},backend:n,attrs:{perm:u}}),l=Eu(l.length,i.shape.length)),Ou("any",l,c.shape.length);const[h,d]=Cu(c.shape,l),p=w(d),f=Y(w(h),c.dtype),m=n.data.get(c.dataId).values;for(let b=0;b<f.length;++b){const e=b*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];t=t||r}f[b]=t}null!=u&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(h,c.dtype,f);if(a){const e=Iu(h,s),t=zI({inputs:{x:g},backend:n,attrs:{shape:e}});return n.disposeIntermediateTensorInfo(g),t}return g}const lO={kernelName:ve,backendName:"cpu",kernelFunc:sO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function uO(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;iI(i,"argMax");let a=T(o,i.shape);const s=Tu(a,i.shape.length);let l=i;const u=[];null!=s&&(l=rO({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),a=Eu(a.length,l.shape.length)),a=[a[0]],Ou("argMax",a,l.shape.length);const[c,h]=Cu(l.shape,a),d=w(c),p=Y(d,"int32"),f=w(h),m=n.data.get(l.dataId).values;for(let g=0;g<p.length;++g){const e=g*f;let t=m[e],n=0;for(let r=0;r<f;++r){const i=m[e+r];i>t&&(t=i,n=r)}p[g]=n}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(c,"int32",p)}const cO={kernelName:ye,backendName:"cpu",kernelFunc:uO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function hO(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;iI(i,"argMin");let a=T(o,i.shape);const s=Tu(a,i.shape.length);let l=i;const u=[];null!=s&&(l=rO({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),a=Eu(a.length,l.shape.length)),a=[a[0]],Ou("argMin",a,l.shape.length);const[c,h]=Cu(l.shape,a),d=w(c),p=Y(d,"int32"),f=w(h),m=n.data.get(l.dataId).values;for(let g=0;g<p.length;++g){const e=g*f;let t=m[e],n=0;for(let r=0;r<f;++r){const i=m[e+r];i<t&&(t=i,n=r)}p[g]=n}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(c,"int32",p)}const dO={kernelName:xe,backendName:"cpu",kernelFunc:hO},pO=sI(we,(e=>Math.asin(e))),fO={kernelName:we,backendName:"cpu",kernelFunc:pO},mO=sI(ke,(e=>Math.asinh(e))),gO={kernelName:ke,backendName:"cpu",kernelFunc:mO},bO=sI(_e,(e=>Math.atan(e))),vO={kernelName:_e,backendName:"cpu",kernelFunc:bO},yO=mI(((e,t)=>Math.atan2(e,t))),xO=MI(Ce,yO),wO={kernelName:Ce,backendName:"cpu",kernelFunc:xO},kO=sI(Se,(e=>Math.atanh(e))),_O={kernelName:Se,backendName:"cpu",kernelFunc:kO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function SO(e,t,n,r,i,o){const a=i.strideHeight,s=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,c=i.effectiveFilterHeight,h=i.effectiveFilterWidth,d=i.padInfo.top,p=i.padInfo.left,f="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Zo(i.outShape,n),g=m.values,b=i.outShape[1]*i.outShape[2]*i.outShape[3],v=i.outShape[2]*i.outShape[3],y=i.outShape[3];for(let x=0;x<i.batchSize;++x){const t=x*b,n=x*r[0];for(let m=0;m<i.inChannels;++m)for(let b=0;b<i.outHeight;++b){const x=b*a-d,w=Math.max(0,x),k=Math.min(i.inHeight,c+x),_=t+b*v;for(let t=0;t<i.outWidth;++t){const a=t*s-p,c=Math.max(0,a),d=Math.min(i.inWidth,h+a);let b=f,v=0,x=0;for(let t=w;t<k;t+=l){const i=n+t*r[1];for(let t=c;t<d;t+=u){const n=i+t*r[2],a=e[n+m];"max"===o&&a>b?b=a:"avg"===o&&(v+=a,x++)}if(isNaN(b))break}const S=_+t*y+m;g[S]="avg"===o?v/x:b}}}return m}function CO(e,t,n,r,i=!1,o=!1){const a=Zo(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=Zo(t,n,e);for(let g=0;g<r.batchSize;++g)for(let e=0;e<r.inChannels;++e)for(let t=0;t<r.outHeight;++t){const n=t*s-p;let b=n;while(b<0)b+=u;const v=Math.min(r.inHeight,h+n);for(let s=0;s<r.outWidth;++s){const h=s*l-f;let p=h;while(p<0)p+=c;const y=Math.min(r.inWidth,d+h);let x=Number.NEGATIVE_INFINITY,w=-1;for(let t=b;t<v;t+=u){const a=t-n;for(let n=p;n<y;n+=c){const s=n-h,l=m.get(g,t,n,e);l>x&&(x=l,w=i?o?((g*r.inHeight+t)*r.inWidth+n)*r.inChannels+e:(t*r.inWidth+n)*r.inChannels+e:a*d+s)}}a.set(w,g,t,s,e)}}return a}function IO(e,t,n,r,i,o){const a=i.strideDepth,s=i.strideHeight,l=i.strideWidth,u=i.dilationDepth,c=i.dilationHeight,h=i.dilationWidth,d=i.effectiveFilterDepth,p=i.effectiveFilterHeight,f=i.effectiveFilterWidth,m=i.padInfo.front,g=i.padInfo.top,b=i.padInfo.left,v="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=Zo(i.outShape,n),x=y.values,w=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],k=i.outShape[2]*i.outShape[3]*i.outShape[4],_=i.outShape[3]*i.outShape[4],S=i.outShape[4];for(let C=0;C<i.batchSize;++C){const t=C*w,n=C*r[0];for(let y=0;y<i.inChannels;++y)for(let w=0;w<i.outDepth;++w){const C=w*a-m;let I=C;while(I<0)I+=u;const O=Math.min(i.inDepth,d+C),T=t+w*k;for(let t=0;t<i.outHeight;++t){const a=t*s-g;let d=a;while(d<0)d+=c;const m=Math.min(i.inHeight,p+a),w=T+t*_;for(let t=0;t<i.outWidth;++t){const a=t*l-b;let s=a;while(s<0)s+=h;const p=Math.min(i.inWidth,f+a),g=w+t*S;let k=v,_=0,C=0;for(let t=I;t<O;t+=u){const i=n+t*r[1];for(let t=d;t<m;t+=c){const n=i+t*r[2];for(let t=s;t<p;t+=h){const i=n+t*r[3],a=e[i+y];if("max"===o&&a>k?k=a:"avg"===o&&(_+=a,C++),isNaN(k))break}if(isNaN(k))break}if(isNaN(k))break}const T=g+y;x[T]="avg"===o?_/C:k}}}}return y}function OO(e,t){const n=Zo(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,o=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let b=0;b<t.outDepth;++b){const v=b*r-d;let y=v;while(y<0)y+=a;const x=Math.min(t.inDepth,u+v);for(let r=0;r<t.outHeight;++r){const u=r*i-p;let d=u;while(d<0)d+=s;const w=Math.min(t.inHeight,c+u);for(let i=0;i<t.outWidth;++i){const p=i*o-f;let k=p;while(k<0)k+=l;const _=Math.min(t.inWidth,h+p);let S=Number.NEGATIVE_INFINITY,C=-1;for(let t=y;t<x;t+=a){const n=t-v;for(let r=d;r<w;r+=s){const i=r-u;for(let o=k;o<_;o+=l){const a=o-p,s=e.get(m,t,r,o,g);s>=S&&(S=s,C=n*c*h+i*c+a)}}}n.set(C,m,b,r,i,g)}}}return n}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function TO(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;iI(i,"avgPool");const{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=r,u=1;b(Es(a,u),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`));const c=gs(i.shape,o,a,u,s,l);let h;if(1===c.filterWidth&&1===c.filterHeight&&k(c.inShape,c.outShape))h=hI({inputs:{x:i},backend:n});else{const e=n.data.get(i.dataId).values,t=W(i.shape),r=SO(e,i.shape,i.dtype,t,c,"avg");h=n.makeTensorInfo(c.outShape,i.dtype,r.values)}return h}const NO={kernelName:Ie,backendName:"cpu",kernelFunc:TO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function EO(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l,dataFormat:u}=r;iI(i,"avgPool3d");const c=bs(i.shape,o,a,1,s,l,u),h=n.data.get(i.dataId).values,d=IO(h,i.shape,i.dtype,W(i.shape),c,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}const DO={kernelName:Te,backendName:"cpu",kernelFunc:EO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function $O(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,{filterSize:a,strides:s,pad:l,dimRoundingMode:u}=r;iI([i,o],"avgPool3DGrad");const c=bs(o.shape,a,s,1,l,u),h=c.strideDepth,d=c.strideHeight,p=c.strideWidth,f=c.filterDepth,m=c.filterHeight,g=c.filterWidth,b=c.dilationDepth,v=c.dilationHeight,y=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,k=c.effectiveFilterWidth,_=x-1-c.padInfo.front,S=k-1-c.padInfo.left,C=w-1-c.padInfo.top,I=Zo(o.shape,"float32"),O=1/(f*m*g),T=n.bufferSync(i);for(let N=0;N<c.batchSize;++N)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inDepth;++t)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){const i=t-_,o=n-C,a=r-S;let s=0;for(let t=0;t<x;t+=b){const n=(i+t)/h;if(!(n<0||n>=c.outDepth||Math.floor(n)!==n))for(let t=0;t<w;t+=v){const r=(o+t)/d;if(!(r<0||r>=c.outHeight||Math.floor(r)!==r))for(let t=0;t<k;t+=y){const i=(a+t)/p;if(i<0||i>=c.outWidth||Math.floor(i)!==i)continue;const o=T.get(N,n,r,i,e);s+=o}}}I.set(s*O,N,t,n,r,e)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const AO={kernelName:Ne,backendName:"cpu",kernelFunc:$O};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function RO(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,a=o;iI([i,o],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=gs(a.shape,s,l,1,u),h=c.strideHeight,d=c.strideWidth,p=c.filterHeight,f=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,b=c.effectiveFilterHeight,v=c.effectiveFilterWidth,y=v-1-c.padInfo.left,x=b-1-c.padInfo.top,w=Zo(a.shape,"float32"),k=1/(p*f),_=n.data.get(i.dataId).values,S=Zo(i.shape,"float32",_);for(let C=0;C<c.batchSize;++C)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inHeight;++t)for(let n=0;n<c.inWidth;++n){const r=t-x,i=n-y;let o=0;for(let t=0;t<b;t+=m){const n=(r+t)/h;if(!(n<0||n>=c.outHeight||Math.floor(n)!==n))for(let t=0;t<v;t+=g){const r=(i+t)/d;if(r<0||r>=c.outWidth||Math.floor(r)!==r)continue;const a=S.get(C,n,r,e);o+=a}}w.set(o*k,C,t,n,e)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const MO={kernelName:Oe,backendName:"cpu",kernelFunc:RO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function FO(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,scale:o,offset:a,mean:s,variance:l}=t;b(s.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),b(null==a||s.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),b(null==o||s.shape.length===o.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks.")),iI([i,s,l,o,a],"batchNorm");let{varianceEpsilon:u}=r;null==u&&(u=.001);const c=n.data.get(i.dataId).values,h=n.data.get(s.dataId).values,d=n.data.get(l.dataId).values,p=o?n.data.get(o.dataId).values:new Float32Array([1]),f=a?n.data.get(a.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=f.length,v=p.length,y=d.length,x=h.length;let w=0,k=0,_=0,S=0;for(let b=0;b<c.length;++b)m[b]=f[w++]+(c[b]-h[k++])*p[_++]/Math.sqrt(d[S++]+u),w>=g&&(w=0),k>=x&&(k=0),_>=v&&(_=0),S>=y&&(S=0);return n.makeTensorInfo(i.shape,i.dtype,m)}const PO={kernelName:wt,backendName:"cpu",kernelFunc:FO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function jO(e,t,n,r,i){const o=ja(r,t,n),a=w(n),s=W(r);if(o){const n=Ba(t,s);return"string"===i?e.slice(n,n+a):e.subarray(n,n+a)}const l="string"===i?Af(e):e,u=Zo(r,i,l),c=Zo(n,i);for(let h=0;h<c.size;++h){const e=c.indexToLoc(h),n=e.map(((e,n)=>e+t[n]));c.set(u.get(...n),...e)}return"string"===i?Rf(c.values):c.values}function BO(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,size:a}=r;iI(i,"slice");const[s,l]=La(i,o,a);Ia(i,s,l);const u=n.data.get(i.dataId).values,c=jO(u,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,c)}const LO={kernelName:Rn,backendName:"cpu",kernelFunc:BO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zO(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,crops:a}=r;iI([i],"batchToSpaceND");const s=o.reduce(((e,t)=>e*t)),l=Mp(i.shape,o,s),u=Fp(l.length,o.length),c=Pp(i.shape,o,s),h=jp(a,o.length),d=Bp(c,a,o.length),p=zI({inputs:{x:i},backend:n,attrs:{shape:l}}),f=rO({inputs:{x:p},backend:n,attrs:{perm:u}}),m=zI({inputs:{x:f},backend:n,attrs:{shape:c}}),g=BO({inputs:{x:m},backend:n,attrs:{begin:h,size:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const VO={kernelName:De,backendName:"cpu",kernelFunc:zO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function UO(e,t,n,r,i){const o=w(r),a=Y(i,n);for(let s=0;s<e.length;s++){const n=e[s];if(n<0)throw new Error("Input x must be non-negative!");n>=i||(a[n]+=o>0?t[s]:1)}return a}function WO(e,t,n,r=!1){const i=e.shape[0],o=e.shape[1],a=Zo([i,n],t.dtype);for(let s=0;s<i;s++)for(let i=0;i<o;i++){const o=e.get(s,i);if(o<0)throw new Error("Input x must be non-negative!");o>=n||(r?a.set(1,s,o):t.size>0?a.set(a.get(s,o)+t.get(s,i),s,o):a.set(a.get(s,o)+1,s,o))}return a}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function HO(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:a}=r,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,u=UO(s,l,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,u)}const GO={kernelName:$e,backendName:"cpu",kernelFunc:HO};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function qO(e){const{inputs:t,backend:n}=e,{s0:r,s1:i}=t,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,s=_a(Array.from(o),Array.from(a));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const YO={kernelName:Re,backendName:"cpu",kernelFunc:qO},XO=_I((e=>Math.ceil(e))),KO=lI(Fe,XO),JO={kernelName:Fe,backendName:"cpu",kernelFunc:KO},ZO=sI(Pe,((e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),QO={kernelName:Pe,backendName:"cpu",kernelFunc:ZO},eT=e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(w(t.shape)),i=n.data.get(t.dataId),o=i.complexTensorInfos.real,a=i.complexTensorInfos.imag,s=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values;for(let u=0;u<s.length;u++){const e=s[u],t=l[u];r[u]=Math.hypot(e,t)}return n.makeOutput(r,t.shape,"float32")},tT={kernelName:Be,backendName:"cpu",kernelFunc:eT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function nT(e,t,n,r){const i=D(n,w(t));if(r&&"string"!==n){let t=0;e.forEach((e=>{const n=w(e.shape);i.set(e.vals,t),t+=n}))}else{let r=0;e.forEach((e=>{const o="string"===n?Af(e.vals):e.vals;let a=0;for(let n=0;n<e.shape[0];++n){const s=n*t[1]+r;for(let t=0;t<e.shape[1];++t)i[s+t]=o[a++]}r+=e.shape[1]}))}return i}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function rT(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}const iT={kernelName:Tt,backendName:"cpu",kernelFunc:rT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function oT(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,o=T(i,t[0].shape)[0];let a=Dp(t.map((e=>e.shape)),o);if(0===w(a))return n.makeTensorInfo(a,t[0].dtype,[]);const s=t.filter((e=>w(e.shape)>0));if(1===s.length)return hI({inputs:{x:s[0]},backend:n});const l=s.map((e=>e.shape));if(Ep(l,o),"complex64"===s[0].dtype){const e=s.map((e=>DI({inputs:{input:e},backend:n}))),t=s.map((e=>rT({inputs:{input:e},backend:n}))),r=oT({inputs:e,backend:n,attrs:{axis:o}}),i=oT({inputs:t,backend:n,attrs:{axis:o}}),a=TI({inputs:{real:r,imag:i},backend:n});return e.forEach((e=>n.disposeIntermediateTensorInfo(e))),t.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),a}const u=s.map((e=>{const t=w(e.shape.slice(o)),r=[-1,t];return zI({inputs:{x:e},backend:n,attrs:{shape:r}})})),c=u.map((e=>({vals:n.data.get(e.dataId).values,shape:e.shape})));a=Dp(u.map((e=>e.shape)),1);const h=1===u[0].shape[0],d=nT(c,a,t[0].dtype,h),p=Dp(s.map((e=>e.shape)),o),f=n.makeTensorInfo(p,t[0].dtype,d);return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}const aT={kernelName:Le,backendName:"cpu",kernelFunc:oT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function sT(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r;iI([i,o],"conv2d");const h=Ds(l),d=vs(i.shape,o.shape,a,u,s,c,!1,h),p=d.filterHeight,f=d.filterWidth,m=d.dilationHeight,g=d.dilationWidth,b=d.padInfo.left,v=d.padInfo.top,y="channelsLast"===d.dataFormat,x=new fi(d.outShape,i.dtype),w=W(i.shape),k=W(o.shape),_=w[0],S=y?w[1]:w[2],C=y?w[2]:1,I=y?1:w[1],O=x.strides[0],T=y?x.strides[1]:x.strides[2],N=y?x.strides[2]:1,E=y?1:x.strides[1],D=n.data.get(i.dataId).values,$=n.data.get(o.dataId).values,A=x.values;for(let R=0;R<d.batchSize;++R){const e=R*_,t=R*O;for(let n=0;n<d.outHeight;++n){const r=t+n*T,i=n*d.strideHeight-v;for(let t=0;t<p;++t){const n=i+t*m;if(n<0||n>=d.inHeight)continue;const o=t*k[0],a=e+n*S;for(let e=0;e<d.outWidth;++e){const t=r+e*N,n=e*d.strideWidth-b;for(let e=0;e<f;++e){const r=n+e*g;if(r<0||r>=d.inWidth)continue;const i=o+e*k[1],s=a+r*C;let l=i;for(let e=0;e<d.inChannels;++e){const n=D[s+e*I];for(let e=0;e<d.outChannels;++e)A[t+e*E]+=n*$[l+e];l+=d.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,A)}const lT={kernelName:ze,backendName:"cpu",kernelFunc:sT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function uT(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;iI([i,o],"conv2dBackpropFilter");const h=Ds(l),d=vs(i.shape,c,a,1,s,u,!1,h),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:g}=d,b="channelsLast"===d.dataFormat,v=new fi(d.filterShape,"float32"),y=d.padInfo.left,x=d.padInfo.top,w=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,_=new fi(i.shape,i.dtype,w),S=new fi(o.shape,o.dtype,k);for(let C=0;C<m;++C){const e=Math.max(0,Math.ceil((x-C)/p)),t=Math.min(d.outHeight,(d.inHeight+x-C)/p);for(let n=0;n<g;++n){const r=Math.max(0,Math.ceil((y-n)/f)),i=Math.min(d.outWidth,(d.inWidth+y-n)/f);for(let o=0;o<d.inChannels;++o)for(let a=0;a<d.outChannels;++a){let s=0;for(let l=0;l<d.batchSize;++l)for(let u=e;u<t;++u){const e=C+u*p-x;for(let t=r;t<i;++t){const r=n+t*f-y;s+=b?_.get(l,e,r,o)*S.get(l,u,t,a):_.get(l,o,e,r)*S.get(l,a,u,t)}}v.set(s,C,n,o,a)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const cT={kernelName:Ve,backendName:"cpu",kernelFunc:uT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function hT(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{inputShape:a,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r;iI([i,o],"conv2dBackpropInput");const h=W(o.shape),d=W(i.shape);let p=Ds(u);const f=vs(a,o.shape,s,1,l,c,!1,p),m=new fi(f.inShape,"float32"),g=m.values,b=n.data.get(i.dataId).values,v=n.data.get(o.dataId).values,[y,x,w]=h,{batchSize:k,filterHeight:_,filterWidth:S,inChannels:C,inHeight:I,inWidth:O,outChannels:T,outHeight:N,outWidth:E,strideHeight:D,strideWidth:$}=f;p=f.dataFormat;const A=_-1-f.padInfo.top,R=S-1-f.padInfo.left,M="channelsLast"===p,F=m.strides[0],P=M?m.strides[1]:m.strides[2],j=M?m.strides[2]:1,B=M?1:m.strides[1],L=d[0],z=M?d[1]:d[2],V=M?d[2]:1,U=M?1:d[1];for(let W=0;W<k;++W)for(let e=0;e<C;++e)for(let t=0;t<I;++t){const n=t-A,r=Math.max(0,Math.ceil(n/D)),i=Math.min(N,(_+n)/D);for(let o=0;o<O;++o){const a=o-R,s=Math.max(0,Math.ceil(a/$)),l=Math.min(E,(S+a)/$);let u=0;for(let t=r;t<i;++t){const r=t*D-n;for(let n=s;n<l;++n){const i=n*$-a,o=L*W+z*t+V*n,s=y*(_-1-r)+x*(S-1-i)+w*e;for(let e=0;e<T;++e){const t=b[o+U*e],n=v[s+e];u+=t*n}}}const c=F*W+P*t+j*o+B*e;g[c]=u}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const dT={kernelName:Ue,backendName:"cpu",kernelFunc:hT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pT(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l}=r;iI([i,o],"conv3d");const u=ys(i.shape,o.shape,a,l,s),{filterDepth:c,filterHeight:h,filterWidth:d,dilationDepth:p,dilationHeight:f,dilationWidth:m,padInfo:g}=u,b=g.front,v=g.left,y=g.top,x=new fi(u.outShape,i.dtype),w=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,_=x.values,S=W(i.shape),C=W(o.shape);for(let I=0;I<u.batchSize;++I){const e=I*S[0],t=I*x.strides[0];for(let n=0;n<u.outDepth;++n){const r=t+n*x.strides[1],i=n*u.strideDepth-b;for(let t=0;t<c;++t){const n=i+t*p;if(n<0||n>=u.inDepth)continue;const o=t*C[0],a=e+n*S[1];for(let e=0;e<u.outHeight;++e){const t=r+e*x.strides[2],n=e*u.strideHeight-y;for(let e=0;e<h;++e){const r=n+e*f;if(r<0||r>=u.inHeight)continue;const i=o+e*C[1],s=a+r*S[2];for(let e=0;e<u.outWidth;++e){const n=t+e*u.outChannels,r=e*u.strideWidth-v;for(let e=0;e<d;++e){const t=r+e*m;if(t<0||t>=u.inWidth)continue;const o=i+e*C[2],a=s+t*u.inChannels;let l=o;for(let e=0;e<u.inChannels;++e){const t=w[a+e];for(let e=0;e<u.outChannels;++e)_[n+e]+=t*k[l+e];l+=u.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const fT={kernelName:We,backendName:"cpu",kernelFunc:pT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mT(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,filterShape:l}=r;iI([i,o],"conv3dBackpropFilterV2");const u=W(i.shape),c=W(o.shape),h=ys(i.shape,l,a,1,s),d=h.strideDepth,p=h.strideHeight,f=h.strideWidth,m=h.filterDepth,g=h.filterHeight,b=h.filterWidth,v=new fi(h.filterShape,"float32"),y=v.values,[x,w,k,_]=v.strides,S=n.data.get(o.dataId).values,[C,I,O,T]=c,N=n.data.get(i.dataId).values,[E,D,$,A]=u,R=h.padInfo.front,M=h.padInfo.left,F=h.padInfo.top;for(let P=0;P<m;++P){const e=Math.max(0,Math.ceil((R-P)/d)),t=Math.min(h.outDepth,(h.inDepth+R-P)/d),n=P*x;for(let r=0;r<g;++r){const i=Math.max(0,Math.ceil((F-r)/p)),o=Math.min(h.outHeight,(h.inHeight+F-r)/p),a=r*w+n;for(let n=0;n<b;++n){const s=Math.max(0,Math.ceil((M-n)/f)),l=Math.min(h.outWidth,(h.inWidth+M-n)/f),u=n*k+a;for(let a=0;a<h.inChannels;++a){const c=a*_+u;for(let u=0;u<h.outChannels;++u){let m=0;for(let c=0;c<h.batchSize;++c){const h=c*E,g=c*C;for(let c=e;c<t;++c){const e=P+c*d-R,t=e*D+h,b=c*I+g;for(let c=i;c<o;++c){const e=r+c*p-F,i=e*$+t,o=c*O+b;for(let t=s;t<l;++t){const e=n+t*f-M,r=e*A+i,s=t*T+o;m+=N[r+a]*S[s+u]}}}}y[c+u]=m}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const gT={kernelName:He,backendName:"cpu",kernelFunc:mT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function bT(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{pad:a,strides:s,inputShape:l}=r;iI([i],"conv3dBackpropInputV2");const u=W(i.shape),c=W(o.shape),h=ys(l,o.shape,s,1,a),d=new fi(h.inShape,"float32"),p=d.values,[f,m,g,b]=d.strides,v=n.data.get(i.dataId).values,[y,x,w,k]=u,_=n.data.get(o.dataId).values,[S,C,I,O]=c,{batchSize:T,filterDepth:N,filterHeight:E,filterWidth:D,inChannels:$,inDepth:A,inHeight:R,inWidth:M,outChannels:F,outDepth:P,outHeight:j,outWidth:B,strideDepth:L,strideHeight:z,strideWidth:V}=h,U=N-1-h.padInfo.front,H=E-1-h.padInfo.top,G=D-1-h.padInfo.left;for(let W=0;W<T;++W)for(let e=0;e<$;++e)for(let t=0;t<A;++t){const n=t-U,r=Math.max(0,Math.ceil(n/L)),i=Math.min(P,(N+n)/L);for(let o=0;o<R;++o){const a=o-H,s=Math.max(0,Math.ceil(a/z)),l=Math.min(j,(E+a)/z);for(let u=0;u<M;++u){const c=u-G,h=Math.max(0,Math.ceil(c/V)),d=Math.min(B,(D+c)/V);let T=0;for(let t=r;t<i;++t){const r=t*L-n;for(let n=s;n<l;++n){const i=n*z-a;for(let o=h;o<d;++o){const a=o*V-c,s=y*W+x*t+w*n+k*o,l=S*(N-1-r)+C*(E-1-i)+I*(D-1-a)+O*e;for(let e=0;e<F;++e){const t=v[s+e],n=_[l+e];T+=t*n}}}}p[f*W+m*t+g*o+b*u+e]=T}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}const vT={kernelName:Ge,backendName:"cpu",kernelFunc:bT},yT=sI(qe,(e=>Math.cos(e))),xT={kernelName:qe,backendName:"cpu",kernelFunc:yT},wT=sI(Ye,(e=>Math.cosh(e))),kT={kernelName:Ye,backendName:"cpu",kernelFunc:wT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function _T(e){const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:o,boxInd:a}=t,{cropSize:s,method:l,extrapolationValue:u}=r,[c,h,d,p]=i.shape,f=o.shape[0],[m,g]=s,b=Zo([f,m,g,p],"float32"),v=n.data.get(o.dataId).values,y=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,w=W(i.shape),k=W(b.shape);for(let _=0;_<f;_++){const e=4*_,t=v[e],n=v[e+1],r=v[e+2],i=v[e+3],o=y[_];if(o>=c)continue;const a=m>1?(r-t)*(h-1)/(m-1):0,s=g>1?(i-n)*(d-1)/(g-1):0;for(let c=0;c<m;c++){const e=m>1?t*(h-1)+c*a:.5*(t+r)*(h-1);if(e<0||e>h-1)for(let t=0;t<g;t++)for(let e=0;e<p;e++){const n=e+t*k[2]+c*k[1]+_*k[0];b.values[n]=u}else if("bilinear"===l){const t=Math.floor(e),r=Math.ceil(e),a=e-t;for(let e=0;e<g;e++){const l=g>1?n*(d-1)+e*s:.5*(n+i)*(d-1);if(l<0||l>d-1){for(let t=0;t<p;t++){const n=t+e*k[2]+c*k[1]+_*k[0];b.values[n]=u}continue}const h=Math.floor(l),f=Math.ceil(l),m=l-h;for(let n=0;n<p;n++){let i=n+h*w[2]+t*w[1]+o*w[0];const s=x[i];i=n+f*w[2]+t*w[1]+o*w[0];const l=x[i];i=n+h*w[2]+r*w[1]+o*w[0];const u=x[i];i=n+f*w[2]+r*w[1]+o*w[0];const d=x[i],p=s+(l-s)*m,g=u+(d-u)*m;i=n+e*k[2]+c*k[1]+_*k[0],b.values[i]=p+(g-p)*a}}}else for(let t=0;t<g;++t){const r=g>1?n*(d-1)+t*s:.5*(n+i)*(d-1);if(r<0||r>d-1){for(let e=0;e<p;e++){const n=e+t*k[2]+c*k[1]+_*k[0];b.values[n]=u}continue}const a=Math.round(r),l=Math.round(e);for(let e=0;e<p;e++){const n=e+a*w[2]+l*w[1]+o*w[0],r=e+t*k[2]+c*k[1]+_*k[0];b.values[r]=x[n]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const ST={kernelName:Je,backendName:"cpu",kernelFunc:_T};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function CT(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r;iI(i,"cumprod");const l=Tu([o],i.shape.length);let u=i;null!=l&&(u=rO({inputs:{x:i},backend:n,attrs:{perm:l}}));const c=Eu(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const h=Ei(u.dtype,"int32"),d=q(w(u.shape),h),p=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let b=0;b<p.length;b+=f)for(let e=0;e<f;e++){const t=m(b,e);if(0===e)d[t]=a?1:p[t];else{const n=m(b,e-1);d[t]=a?p[n]*d[n]:p[t]*d[n]}}const g=n.makeTensorInfo(u.shape,h,d);if(null!=l){const e=Nu(l),t=rO({inputs:{x:g},backend:n,attrs:{perm:e}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),t}return g}const IT={kernelName:Xe,backendName:"cpu",kernelFunc:CT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function OT(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r;iI(i,"cumsum");const l=Tu([o],i.shape.length);let u=i;null!=l&&(u=rO({inputs:{x:i},backend:n,attrs:{perm:l}}));const c=Eu(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const h=Ei(u.dtype,"int32"),d=Y(w(u.shape),h),p=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let b=0;b<p.length;b+=f)for(let e=0;e<f;e++){const t=m(b,e);if(0===e)d[t]=a?0:p[t];else{const n=m(b,e-1);d[t]=a?p[n]+d[n]:p[t]+d[n]}}const g=n.makeTensorInfo(u.shape,h,d);if(null!=l){const e=Nu(l),t=rO({inputs:{x:g},backend:n,attrs:{perm:e}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),t}return g}const TT={kernelName:Ke,backendName:"cpu",kernelFunc:OT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function NT(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:a,binaryOutput:s}=r;if(1===i.shape.length){const e=n.data.get(i.dataId).values,t=n.data.get(o.dataId).values,r=UO(e,t,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,r)}if(2===i.shape.length){const e=n.bufferSync(i),t=n.bufferSync(o),r=WO(e,t,a,s);return n.makeTensorInfo(r.shape,o.dtype,r.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const ET={kernelName:Ze,backendName:"cpu",kernelFunc:NT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function DT(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:o,dataFormat:a}=r;b("NHWC"===a,(()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`));const s=i.shape[0],l=i.shape[1],u=i.shape[2],c=i.shape[3],h=l*o,d=u*o,p=c/(o*o),f=n.data.get(i.dataId).values,m=new Float32Array(s*h*d*p);let g=0;for(let b=0;b<s;++b)for(let e=0;e<h;++e){const t=Math.floor(e/o),n=e%o;for(let e=0;e<d;++e){const r=Math.floor(e/o),i=e%o,a=(n*o+i)*p;for(let e=0;e<p;++e){const n=e+a,i=n+c*(r+u*(t+l*b));m[g++]=f[i]}}}return n.makeTensorInfo([s,h,d,p],i.dtype,m)}const $T={kernelName:Qe,backendName:"cpu",kernelFunc:DT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function AT(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l,dimRoundingMode:u}=r;iI([i,o],"depthwiseConv2DNative");const c=W(i.shape),h=W(o.shape);let d=l;null==d&&(d=[1,1]),b(Es(a,d),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${d}'`));const p=vs(i.shape,o.shape,a,d,s,u,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:v,padInfo:y}=p,x=y.left,w=y.top,k=p.outChannels/p.inChannels,_=new fi(p.outShape,i.dtype),S=n.data.get(i.dataId).values,C=n.data.get(o.dataId).values,I=_.values;for(let b=0;b<p.batchSize;++b){const e=b*c[0],t=b*_.strides[0];for(let n=0;n<p.outHeight;++n){const r=t+n*_.strides[1],i=n*p.strideHeight-w;for(let t=0;t<f;++t){const n=i+t*g;if(n<0||n>=p.inHeight)continue;const o=t*h[0],a=e+n*c[1];for(let e=0;e<p.outWidth;++e){const t=r+e*_.strides[2],n=e*p.strideWidth-x;for(let e=0;e<m;++e){const r=n+e*v;if(r<0||r>=p.inWidth)continue;const i=o+e*h[1],s=a+r*p.inChannels;let l=t,u=i;for(let e=0;e<p.inChannels;++e){const t=S[s+e];for(let e=0;e<k;++e)I[l+e]+=t*C[u+e];l+=k,u+=k}}}}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const RT={kernelName:et,backendName:"cpu",kernelFunc:AT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function MT(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r;iI([i,o],"depthwiseConv2dNativeBackpropFilter");const h=vs(i.shape,c,a,s,l,u,!0),{strideHeight:d,strideWidth:p,filterHeight:f,filterWidth:m}=h,g=new fi(h.filterShape,"float32"),b=h.padInfo.left,v=h.padInfo.top,y=h.outChannels/h.inChannels,x=n.data.get(i.dataId).values,w=new fi(i.shape,i.dtype,x),k=n.data.get(o.dataId).values,_=new fi(o.shape,o.dtype,k);for(let S=0;S<f;++S){const e=Math.max(0,Math.ceil((v-S)/d)),t=Math.min(h.outHeight,(h.inHeight+v-S)/d);for(let n=0;n<m;++n){const r=Math.max(0,Math.ceil((b-n)/p)),i=Math.min(h.outWidth,(h.inWidth+b-n)/p);for(let o=0;o<h.outChannels;++o){const a=Math.trunc(o/y),s=o%y;let l=0;for(let u=0;u<h.batchSize;++u)for(let s=e;s<t;++s){const e=S+s*d-v;for(let t=r;t<i;++t){const r=n+t*p-b;l+=w.get(u,e,r,a)*_.get(u,s,t,o)}}g.set(l,S,n,a,s)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const FT={kernelName:tt,backendName:"cpu",kernelFunc:MT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function PT(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r;iI([i,o],"depthwiseConv2DNativeBackpropInput");const h=W(i.shape),d=W(o.shape),p=vs(c,o.shape,a,s,l,u,!0),f=new fi(p.inShape,"float32"),m=f.values,[g,b,v]=f.strides,y=n.data.get(i.dataId).values,[x,w,k]=h,_=n.data.get(o.dataId).values,[S,C,I]=d,{batchSize:O,filterHeight:T,filterWidth:N,inChannels:E,inHeight:D,inWidth:$,outChannels:A,outHeight:R,outWidth:M,strideHeight:F,strideWidth:P}=p,j=T-1-p.padInfo.top,B=N-1-p.padInfo.left,L=A/E;for(let z=0;z<O;++z)for(let e=0;e<E;++e)for(let t=0;t<D;++t){const n=t-j,r=Math.max(0,Math.ceil(n/F)),i=Math.min(R,(T+n)/F);for(let o=0;o<$;++o){const a=o-B,s=Math.max(0,Math.ceil(a/P)),l=Math.min(M,(N+a)/P);let u=0;for(let t=r;t<i;++t){const r=t*F-n;for(let n=s;n<l;++n){const i=n*P-a,o=x*z+w*t+k*n,s=S*(T-1-r)+C*(N-1-i)+I*e;for(let t=0;t<L;++t){const n=e*L+t,r=y[o+n],i=_[s+t];u+=r*i}}}m[g*z+b*t+v*o+e]=u}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const jT={kernelName:nt,backendName:"cpu",kernelFunc:PT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function BT(e){const{inputs:t,backend:n}=e,{x:r}=t,i=w(r.shape),o=n.data.get(r.dataId).values,a=Zo([i,i],r.dtype),s=a.values;for(let u=0;u<o.length;u++)s[u*i+u]=o[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,a.dtype,a.values)}const LT={kernelName:rt,backendName:"cpu",kernelFunc:BT},zT={kernelName:it,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:i}=e,{strides:o,pad:a,dilations:s}=n,l=t,u=l.data.get(r.dataId).values,c=r.shape.length,h=l.data.get(i.dataId).values,d=i.shape.length,{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:b,outWidth:v,padInfo:y,strideHeight:x,strideWidth:k,filterHeight:_,filterWidth:S,dilationHeight:C,dilationWidth:I,outShape:O}=ms(r.shape,i.shape,o,a,"NHWC",s),T=w(O),N=O.length,E=D(r.dtype,T);for(let w=0;w<p;++w)for(let e=0;e<b;++e){const t=e*x-y.top;for(let n=0;n<v;++n){const o=n*k-y.left;for(let a=0;a<g;++a){let s=Number.MIN_SAFE_INTEGER;for(let e=0;e<_;++e){const n=t+e*C;if(n>=0&&n<f)for(let t=0;t<S;++t){const l=o+t*I;if(l>=0&&l<m){const o=J([w,n,l,a],c,W(r.shape)),p=J([e,t,a],d,W(i.shape)),f=u[o]+h[p];f>s&&(s=f)}}}const l=J([w,e,n,a],N,W(O));E[l]=s}}}const $=l.write(Kr(E,r.dtype),O,r.dtype);return{dataId:$,shape:O,dtype:r.dtype}}},VT={kernelName:at,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:i,dy:o}=e,{strides:a,pad:s,dilations:l}=n,u=t,c=G(r.shape,u.data.get(r.dataId).values),h=G(i.shape,u.data.get(i.dataId).values),{batchSize:d,inHeight:p,inWidth:f,inChannels:m,outHeight:g,outWidth:v,padInfo:y,strideHeight:x,strideWidth:w,filterHeight:k,filterWidth:_,dilationHeight:S,dilationWidth:C,outShape:I}=ms(r.shape,i.shape,a,s,"NHWC",l);b(o.rank===I.length,(()=>`Error in ${at}, dy must have the same rank as output ${I.length}, but got ${o.rank}`));const O=G(I,u.data.get(o.dataId).values),T=X(i.shape,i.dtype);for(let b=0;b<d;++b)for(let e=0;e<g;++e){const t=e*x-y.top;for(let n=0;n<v;++n){const r=n*w-y.left;for(let i=0;i<m;++i){let o=Number.MIN_SAFE_INTEGER,a=0,s=0;for(let e=0;e<k;++e){const n=t+e*S;if(n>=0&&n<p)for(let t=0;t<_;++t){const l=r+t*C;if(l>=0&&l<f){const r=c[b][n][l][i]+h[e][t][i];r>o&&(o=r,a=e,s=t)}}}T[a][s][i]+=O[b][e][n][i]}}}const N=u.write(Kr(T,r.dtype),i.shape,i.dtype);return{dataId:N,shape:i.shape,dtype:i.dtype}}},UT={kernelName:ot,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:i,dy:o}=e,{strides:a,pad:s,dilations:l}=n,u=t,c=G(r.shape,u.data.get(r.dataId).values),h=G(i.shape,u.data.get(i.dataId).values),{batchSize:d,inHeight:p,inWidth:f,inChannels:m,outHeight:g,outWidth:v,padInfo:y,strideHeight:x,strideWidth:w,filterHeight:k,filterWidth:_,dilationHeight:S,dilationWidth:C,outShape:I}=ms(r.shape,i.shape,a,s,"NHWC",l);b(o.rank===I.length,(()=>`Error in ${ot}, dy must have the same rank as output ${I.length}, but got ${o.rank}`));const O=G(I,u.data.get(o.dataId).values),T=X(r.shape,r.dtype);for(let b=0;b<d;++b)for(let e=0;e<g;++e){const t=e*x-y.top;for(let n=0;n<v;++n){const r=n*w-y.left;for(let i=0;i<m;++i){let o=Number.MIN_SAFE_INTEGER,a=t<0?0:t,s=r<0?0:r;for(let e=0;e<k;++e){const n=t+e*S;if(n>=0&&n<p)for(let t=0;t<_;++t){const l=r+t*C;if(l>=0&&l<f){const r=c[b][n][l][i]+h[e][t][i];r>o&&(o=r,a=n,s=l)}}}T[b][a][s][i]+=O[b][e][n][i]}}}const N=u.write(Kr(T,r.dtype),r.shape,r.dtype);return{dataId:N,shape:r.shape,dtype:r.dtype}}},WT=mI(((e,t)=>e*t)),HT=FI(((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n}))),GT=MI(rn,WT,HT),qT={kernelName:rn,backendName:"cpu",kernelFunc:GT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function YT(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;let s;iI(i,"sum"),s="bool"===i.dtype?AI({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):hI({inputs:{x:i},backend:n});const l=s.shape.length,u=T(o,s.shape),c=Tu(u,l);let h=u,d=s;null!=c&&(d=rO({inputs:{x:s},backend:n,attrs:{perm:c}}),h=Eu(h.length,l)),Ou("sum",h,d.shape.length);const[p,f]=Cu(d.shape,h),m=Ei(d.dtype,"int32");let g=EI(n,p,m);const b=w(f),v=n.data.get(g.dataId).values,y=n.data.get(d.dataId).values;for(let x=0;x<v.length;++x){const e=x*b;let t=0;for(let n=0;n<b;++n)t+=y[e+n];v[x]=t}if(a){const e=Iu(g.shape,u),t=g;g=zI({inputs:{x:g},backend:n,attrs:{shape:e}}),n.disposeIntermediateTensorInfo(t)}return n.disposeIntermediateTensorInfo(s),null!=c&&n.disposeIntermediateTensorInfo(d),g}const XT={kernelName:zn,backendName:"cpu",kernelFunc:YT};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function KT(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,o=t,{allDims:a,summedDims:s,idDims:l}=hf(i,o.length);pf(a.length,l,o);const{path:u,steps:c}=ff(s,l),h=c.length;let d=null,p=a.length;const f=[];for(let m=0;m<h;++m){for(const e of c[m]){const{permutationIndices:t,expandDims:r}=df(p,l[e]);let i;mf(t)?i=o[e]:(i=rO({inputs:{x:o[e]},backend:n,attrs:{perm:t}}),f.push(i));const a=i.shape.slice();for(let e=0;e<r.length;++e)a.splice(r[e],0,1);k(i.shape,a)||(i=zI({inputs:{x:i},backend:n,attrs:{shape:a}}),f.push(i)),null===d?d=i:(d=GT({inputs:{a:i,b:d},backend:n}),f.push(d))}m<h-1&&(u[m]>=0&&(d=YT({inputs:{x:d},backend:n,attrs:{axis:u[m]-(a.length-p),keepDims:!1}}),f.push(d)),p--)}for(const m of f)m!==d&&n.disposeIntermediateTensorInfo(m);return d}const JT={kernelName:lt,backendName:"cpu",kernelFunc:KT};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ZT(e){const{inputs:t,backend:n}=e,{dy:r,y:i}=t;iI([r,i],"eluGrad");const o=new Float32Array(w(i.shape)),a=n.data.get(i.dataId).values,s=n.data.get(r.dataId).values;for(let l=0;l<a.length;++l){const e=a[l];o[l]=e>=1?s[l]:s[l]*(e+1)}return n.makeTensorInfo(i.shape,"float32",o)}const QT={kernelName:ct,backendName:"cpu",kernelFunc:ZT},eN=mI(((e,t)=>e===t?1:0)),tN=MI(dt,eN,null,"bool"),nN={kernelName:dt,backendName:"cpu",kernelFunc:tN},rN=Gp,iN=qp,oN=Yp,aN=Xp,sN=Kp,lN=Jp,uN=sI(ht,(e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+rN*n);return t*(1-((((lN*r+sN)*r+aN)*r+oN)*r+iN)*r*Math.exp(-n*n))})),cN={kernelName:ht,backendName:"cpu",kernelFunc:uN},hN=_I((e=>Math.exp(e))),dN=lI(pt,hN,"float32"),pN={kernelName:pt,backendName:"cpu",kernelFunc:dN};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function fN(e){const{inputs:t,backend:n,attrs:r}=e,{input:i}=t,{dim:o}=r,a=i.shape.length,s=i.shape.slice();let l=o;return o<0&&(b(-(a+1)<=o,(()=>`Axis must be in the interval [${-(a+1)}, ${a}]`)),l=a+o+1),s.splice(l,0,1),zI({inputs:{x:i},backend:n,attrs:{shape:s}})}const mN={kernelName:ft,backendName:"cpu",kernelFunc:fN},gN=_I((e=>Math.expm1(e))),bN=lI(mt,gN),vN={kernelName:mt,backendName:"cpu",kernelFunc:bN},yN=mI(((e,t)=>e/t)),xN=MI(st,yN),wN={kernelName:st,backendName:"cpu",kernelFunc:xN},kN=mI(((e,t)=>e-t)),_N=FI(((e,t,n,r)=>({real:e-n,imag:t-r}))),SN=MI(nr,kN,_N),CN={kernelName:nr,backendName:"cpu",kernelFunc:SN};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function IN(e,t,n){const r=e.shape,i=r[0],o=r[1],a=n.data.get(e.dataId),s=a.complexTensorInfos.real,l=a.complexTensorInfos.imag,u=[i,o],c=w(u),h=E("float32",c),d=E("float32",c);for(let g=0;g<i;g++){const e=BO({inputs:{x:s},backend:n,attrs:{begin:[g,0],size:[1,o]}}),r=BO({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,o]}}),i=TI({inputs:{real:e,imag:r},backend:n}),{real:a,imag:u}=ON(i,t,n),c=Zp(a,u);for(let t=0;t<o;t++){const e=nf(c,t);h[g*o+t]=e.real,d[g*o+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i)}const p=n.makeTensorInfo(u,"float32",h),f=n.makeTensorInfo(u,"float32",d),m=TI({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}function ON(e,t,n){const r=w(e.shape),i=n.data.get(e.dataId),o=n.data.get(i.complexTensorInfos.real.dataId).values,a=n.data.get(i.complexTensorInfos.imag.dataId).values;if(TN(r)){const i=NN(o,a,r,t,n),s=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(s,"float32",i.real),t=n.makeTensorInfo(s,"float32",i.imag),o=n.makeTensorInfo([],"float32",Yr(r,"float32")),a=hI({inputs:{x:o},backend:n}),l=wN.kernelFunc({inputs:{a:e,b:o},backend:n}),u=wN.kernelFunc({inputs:{a:t,b:a},backend:n}),c=n.data.get(l.dataId).values,h=n.data.get(u.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),{real:c,imag:h}}return i}{const e=Zp(o,a),n=EN(e,r,t);return Qp(n)}}function TN(e){return 0===(e&e-1)}function NN(e,t,n,r,i){if(1===n)return{real:e,imag:t};const o=Zp(e,t),a=n/2,s=ef(o),l=s.real,u=s.imag,c=[l.length],h=i.makeTensorInfo(c,"float32",l),d=i.makeTensorInfo(c,"float32",u),p=TI({inputs:{real:h,imag:d},backend:i}),f=tf(o),m=f.real,g=f.imag,b=[m.length],v=i.makeTensorInfo(b,"float32",m),y=i.makeTensorInfo(b,"float32",g),x=TI({inputs:{real:v,imag:y},backend:i}),w=NN(l,u,a,r,i),k=w.real,_=w.imag,S=[k.length],C=i.makeTensorInfo(S,"float32",k),I=i.makeTensorInfo(S,"float32",_),O=TI({inputs:{real:C,imag:I},backend:i}),T=NN(m,g,a,r,i),N=T.real,E=T.imag,D=[N.length],$=i.makeTensorInfo(D,"float32",N),A=i.makeTensorInfo(D,"float32",E),R=TI({inputs:{real:$,imag:A},backend:i}),M=of(n,r),F=[M.real.length],P=i.makeTensorInfo(F,"float32",M.real),j=i.makeTensorInfo(F,"float32",M.imag),B=TI({inputs:{real:P,imag:j},backend:i}),L=GT({inputs:{a:B,b:R},backend:i}),z=BI({inputs:{a:O,b:L},backend:i}),V=SN({inputs:{a:O,b:L},backend:i}),U=DI({inputs:{input:z},backend:i}),W=DI({inputs:{input:V},backend:i}),H=rT({inputs:{input:z},backend:i}),G=rT({inputs:{input:V},backend:i}),q=oT({inputs:[U,W],backend:i,attrs:{axis:0}}),Y=oT({inputs:[H,G],backend:i,attrs:{axis:0}}),X=i.data.get(q.dataId).values,K=i.data.get(Y.dataId).values;return i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(C),i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(O),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(A),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(P),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(B),i.disposeIntermediateTensorInfo(L),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(Y),{real:X,imag:K}}function EN(e,t,n){const r=new Float32Array(2*t);for(let i=0;i<t;i++){let o=0,a=0;for(let r=0;r<t;r++){const s=af(i*r,t,n),l=nf(e,r);o+=l.real*s.real-l.imag*s.imag,a+=l.real*s.imag+l.imag*s.real}n&&(o/=t,a/=t),rf(r,o,a,i)}return r}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function DN(e){const{inputs:t,backend:n}=e,{input:r}=t,i=w(r.shape),o=r.shape[r.shape.length-1],a=i/o,s=zI({inputs:{x:r},backend:n,attrs:{shape:[a,o]}}),l=IN(s,!1,n),u=zI({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const $N={kernelName:gt,backendName:"cpu",kernelFunc:DN};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function AN(e){const{backend:t,attrs:n}=e,{shape:r,value:i,dtype:o}=n,a=o||z(i),s=D(a,w(r));return MN(s,i,a),t.makeTensorInfo(r,a,s)}const RN={kernelName:bt,backendName:"cpu",kernelFunc:AN};function MN(e,t,n){e.fill(t)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const FN={kernelName:vt,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,i=n,o=E(r.dtype,w(r.shape)),[a,s,l,u]=r.shape,c=i.data.get(r.dataId).values;for(let d=0;d<a;d++){const e=d*l*s*u;for(let t=0;t<s;t++){const n=t*(l*u);for(let t=0;t<l;t++){const r=t*u;for(let i=0;i<u;i++){const a=Math.round(l-t-1),s=e+n+r+i;let h=c[s];if(a>=0&&a<l){const t=a*u,r=e+n+t+i;h=c[r]}o[s]=h}}}}const h=i.write(o,r.shape,r.dtype);return{dataId:h,shape:r.shape,dtype:r.dtype}}},PN=_I((e=>Math.floor(e))),jN=lI(yt,PN),BN={kernelName:yt,backendName:"cpu",kernelFunc:jN},LN=mI(((e,t)=>Math.floor(e/t))),zN=MI(xt,LN,null,"int32"),VN={kernelName:xt,backendName:"cpu",kernelFunc:zN};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function UN(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let m=sT({inputs:{x:i,filter:o},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d}});if(a){const e=m;if("NCHW"===c&&1===a.shape.length&&1!==a.shape[0]){const e=zI({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=BI({inputs:{a:m,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else m=BI({inputs:{a:m,b:a},backend:n});n.disposeIntermediateTensorInfo(e)}if(p){const e=m;if("NCHW"===c&&"prelu"===p&&1===s.shape.length&&1!==s.shape[0]){const e=zI({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=OI(n,m,p,e,f),n.disposeIntermediateTensorInfo(e)}else m=OI(n,m,p,s,f);n.disposeIntermediateTensorInfo(e)}return m}const WN={kernelName:br,backendName:"cpu",kernelFunc:UN};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function HN(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let m=AT({inputs:{x:i,filter:o},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d}});if(a){const e=m;m=BI({inputs:{a:m,b:a},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){const e=m;m=OI(n,m,p,s,f),n.disposeIntermediateTensorInfo(e)}return m}const GN={kernelName:vr,backendName:"cpu",kernelFunc:HN};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function qN(e,t,n,r,i,o,a,s,l){const u=Zo([r,o],n);for(let c=0;c<r;c++){const n=[];let r=0;for(let t=0;t<i;t++){const o=e[c*i+t];r+=o*a[t],n.push(o)}if(r<0||r>=l/o)throw new Error(`Invalid indices: ${n} does not index into ${s}`);for(let e=0;e<o;e++)u.values[c*o+e]=t.get(...t.indexToLoc(r*o+e))}return u}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function YN(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,o=w(r.shape),a=i.shape,s=a[a.length-1],[l,u,c,h]=Lp(r,i);if(0===u)return n.makeTensorInfo(l,r.dtype,[]);const d=n.data.get(i.dataId).values,p=n.bufferSync(r),f=qN(d,p,r.dtype,u,s,c,h,r.shape,o);return n.makeTensorInfo(l,r.dtype,f.values)}const XN={kernelName:_t,backendName:"cpu",kernelFunc:YN};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function KN(e,t,n){const r=Zo(n,e.dtype);for(let i=0;i<r.size;++i){const n=r.indexToLoc(i),o=n.slice(),a=o[0],s=o[2],l=t.locToIndex([a,s]);o[2]=t.values[l];const u=e.locToIndex(o);0<=u&&u<e.values.length&&(r.values[i]=e.values[u])}return r}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function JN(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:o}=t,{axis:a,batchDims:s}=r;iI([i,o],"gatherV2");const l=T(a,i.shape)[0],u=n.data.get(o.dataId).values,c=i.shape[l];for(let w=0;w<u.length;++w){const e=u[w];b(e<=c-1&&e>=0,(()=>`GatherV2: the index value ${e} is not in [0, ${c-1}]`))}let h=s;null==s&&(h=0);const d=w(o.shape),p=$f(i,o,l,h),f=zI({inputs:{x:i},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=zI({inputs:{x:o},backend:n,attrs:{shape:[p.batchSize,d/p.batchSize]}}),g=[p.batchSize,p.outerSize,d/p.batchSize,p.sliceSize],v=n.bufferSync(m),y=n.bufferSync(f),x=KN(y,v,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,x.dtype,x.values)}const ZN={kernelName:kt,backendName:"cpu",kernelFunc:JN},QN=mI(((e,t)=>e>t?1:0)),eE=MI(St,QN,null,"bool"),tE={kernelName:St,backendName:"cpu",kernelFunc:eE},nE=mI(((e,t)=>e>=t?1:0)),rE=MI(Ct,nE,null,"bool"),iE={kernelName:Ct,backendName:"cpu",kernelFunc:rE};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function oE(e){const{inputs:t,backend:n}=e,{input:r}=t,i=w(r.shape),o=r.shape[r.shape.length-1],a=i/o,s=zI({inputs:{x:r},backend:n,attrs:{shape:[a,o]}}),l=IN(s,!0,n),u=zI({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}const aE={kernelName:Ot,backendName:"cpu",kernelFunc:oE},sE=sI(Nt,(e=>Number.isFinite(e)?1:0),"bool"),lE={kernelName:Nt,backendName:"cpu",kernelFunc:sE},uE=sI(Et,(e=>Math.abs(e)===1/0?1:0),"bool"),cE={kernelName:Et,backendName:"cpu",kernelFunc:uE},hE=sI(Dt,(e=>Number.isNaN(e)?1:0),"bool"),dE={kernelName:Dt,backendName:"cpu",kernelFunc:hE},pE=mI(((e,t)=>e<t?1:0)),fE=MI(At,pE,null,"bool"),mE={kernelName:At,backendName:"cpu",kernelFunc:fE},gE=mI(((e,t)=>e<=t?1:0)),bE=MI(Rt,gE,null,"bool"),vE={kernelName:Rt,backendName:"cpu",kernelFunc:bE};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function yE(e,t,n){const r=(t-e)/(n-1),i=Y(n,"float32");i[0]=e;for(let o=1;o<i.length;o++)i[o]=i[o-1]+r;return i}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function xE(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:o}=n,a=yE(r,i,o);return t.makeTensorInfo([a.length],"float32",a)}const wE={kernelName:Mt,backendName:"cpu",kernelFunc:xE},kE=_I((e=>Math.log(e))),_E=lI(Ft,kE),SE={kernelName:Ft,backendName:"cpu",kernelFunc:_E},CE=sI(Pt,(e=>Math.log1p(e))),IE={kernelName:Pt,backendName:"cpu",kernelFunc:CE},OE=mI(((e,t)=>e&&t)),TE=MI(jt,OE,null,"bool"),NE={kernelName:jt,backendName:"cpu",kernelFunc:TE},EE=sI(Bt,(e=>e?0:1),"bool"),DE={kernelName:Bt,backendName:"cpu",kernelFunc:EE},$E=mI(((e,t)=>e||t)),AE=MI(Lt,$E,null,"bool"),RE={kernelName:Lt,backendName:"cpu",kernelFunc:AE};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ME(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:o,bias:a,alpha:s,beta:l}=r;iI(i,"LRN");const u=i.shape[3],c=u-1,h=n.data.get(i.dataId).values,d=w(i.shape),p=new Float32Array(d);function f(e){const t=e%u;let n=e-t+Math.max(0,t-o);const r=e-t+Math.min(t+o,c);let i=0;for(;n<=r;n++){const e=h[n];i+=e*e}return i}for(let m=0;m<d;m++){const e=f(m),t=h[m]*Math.pow(a+s*e,-l);p[m]=t}return n.makeTensorInfo(i.shape,i.dtype,p)}const FE={kernelName:Vt,backendName:"cpu",kernelFunc:ME};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function PE(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,y:o,dy:a}=t,{depthRadius:s,bias:l,alpha:u,beta:c}=r;iI(a,"LRNGrad");const h=w(a.shape),d=a.shape[3],p=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,m=n.data.get(o.dataId).values,g=new Float32Array(h),b=h;for(let v=0;v<b;v++){const e=v%d,t=v-e+Math.max(0,e-s),n=v-e+Math.min(d,e+s+1);let r=0;for(let i=t;i<n;i++)r+=Math.pow(f[i],2);r=u*r+l;for(let i=t;i<n;i++){let e=-2*u*c*f[i]*m[v]/r;v===i&&(e+=Math.pow(r,-c)),e*=p[v],g[i]+=e}}return n.makeTensorInfo(a.shape,i.dtype,g)}const jE={kernelName:Ut,backendName:"cpu",kernelFunc:PE};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function BE(e,t,n,r){const i=E(r,w(n));for(let o=0;o<i.length;++o){const n=o*t;let r=e[n];for(let i=0;i<t;++i){const t=e[n+i];(Number.isNaN(t)||t>r)&&(r=t)}i[o]=r}return i}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function LE(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:o,keepDims:a}=r,s=n;let l=i.shape;const u=l.length,c=T(o,l);let h=c;const d=Tu(h,u);let p=s.data.get(i.dataId).values;if(null!=d){const e=new Array(u);for(let t=0;t<e.length;t++)e[t]=l[d[t]];p=nO(p,l,i.dtype,d,e),h=Eu(h.length,u),l=e}iI(i,"max"),Ou("max",h,u);const[f,m]=Cu(l,h),g=w(m),b=BE(p,g,f,i.dtype),v=s.write(b,f,i.dtype);let y=f;if(a){const e=Iu(f,c);y=e}return{dataId:v,shape:y,dtype:i.dtype}}const zE={kernelName:Wt,backendName:"cpu",kernelFunc:LE},VE=mI(((e,t)=>Math.max(e,t))),UE=MI(Ht,VE),WE={kernelName:Ht,backendName:"cpu",kernelFunc:UE};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function HE(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;iI(i,"maxPool");const{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=r,u=1;b(Es(a,u),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`));const c=gs(i.shape,o,a,u,s,l);let h;if(1===c.filterWidth&&1===c.filterHeight&&k(c.inShape,c.outShape))h=hI({inputs:{x:i},backend:n});else{const e=n.data.get(i.dataId).values,t=W(i.shape),r=SO(e,i.shape,i.dtype,t,c,"max");h=n.makeTensorInfo(c.outShape,i.dtype,r.values)}return h}const GE={kernelName:Gt,backendName:"cpu",kernelFunc:HE};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function qE(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l,dataFormat:u}=r;iI(i,"maxPool3d");const c=bs(i.shape,o,a,1,s,l,u),h=n.data.get(i.dataId).values,d=IO(h,i.shape,i.dtype,W(i.shape),c,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}const YE={kernelName:Yt,backendName:"cpu",kernelFunc:qE};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function XE(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,{filterSize:a,strides:s,pad:l,dimRoundingMode:u}=r;iI([i,o],"maxPool3DGrad");const c=bs(o.shape,a,s,1,l,u),h=n.bufferSync(o),d=OO(h,c),p=c.strideDepth,f=c.strideHeight,m=c.strideWidth,g=c.dilationDepth,b=c.dilationHeight,v=c.dilationWidth,y=c.effectiveFilterDepth,x=c.effectiveFilterHeight,w=c.effectiveFilterWidth,k=y-1-c.padInfo.front,_=w-1-c.padInfo.left,S=x-1-c.padInfo.top,C=Zo(o.shape,"float32"),I=n.bufferSync(i);for(let O=0;O<c.batchSize;++O)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inDepth;++t)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){const i=t-k,o=n-S,a=r-_;let s=0;for(let t=0;t<y;t+=g){const n=(i+t)/p;if(!(n<0||n>=c.outDepth||Math.floor(n)!==n))for(let r=0;r<x;r+=b){const i=(o+r)/f;if(!(i<0||i>=c.outHeight||Math.floor(i)!==i))for(let o=0;o<w;o+=v){const l=(a+o)/m;if(l<0||l>=c.outWidth||Math.floor(l)!==l)continue;const u=y*x*w-1-d.get(O,n,i,l,e),h=t*x*w+r*w+o,p=u===h?1:0;if(0===p)continue;const f=I.get(O,n,i,l,e);s+=f*p}}}C.set(s,O,t,n,r,e)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const KE={kernelName:Xt,backendName:"cpu",kernelFunc:XE};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function JE(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o,output:a}=t,s=o;iI([o,a],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:h}=r,d=gs(s.shape,l,u,1,c,h),p=n.data.get(s.dataId).values,f=Zo(d.outShape,s.dtype,CO(p,s.shape,s.dtype,d).values),m=d.strideHeight,g=d.strideWidth,b=d.dilationHeight,v=d.dilationWidth,y=d.effectiveFilterHeight,x=d.effectiveFilterWidth,w=x-1-d.padInfo.left,k=y-1-d.padInfo.top,_=Zo(s.shape,"float32"),S=n.data.get(i.dataId).values,C=Zo(i.shape,"float32",S);for(let I=0;I<d.batchSize;++I)for(let e=0;e<d.inChannels;++e)for(let t=0;t<d.inHeight;++t)for(let n=0;n<d.inWidth;++n){const r=t-k,i=n-w;let o=0;for(let t=0;t<y;t+=b){const n=(r+t)/m;if(!(n<0||n>=d.outHeight||Math.floor(n)!==n))for(let r=0;r<x;r+=v){const a=(i+r)/g;if(a<0||a>=d.outWidth||Math.floor(a)!==a)continue;const s=y*x-1-f.get(I,n,a,e),l=t*x+r,u=s===l?1:0;if(0===u)continue;const c=C.get(I,n,a,e);o+=c*u}}_.set(o,I,t,n,e)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const ZE={kernelName:qt,backendName:"cpu",kernelFunc:JE};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function QE(e,t,n,r,i){const o=W(t),a=SO(e,t,n,o,i,"max"),s=CO(e,t,n,i,!0,r);return[a.values,s.values]}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const eD={kernelName:Kt,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:i,strides:o,pad:a,includeBatchInIndex:s}=t,l=n;iI(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=gs(r.shape,i,o,[1,1],a),[h,d]=QE(u,r.shape,r.dtype,s,c),p=l.write(h,c.outShape,r.dtype),f=l.write(d,c.outShape,r.dtype);return[{dataId:p,shape:c.outShape,dtype:r.dtype},{dataId:f,shape:c.outShape,dtype:"int32"}]}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function tD(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=T(o,i.shape),l=Cu(i.shape,s),u=l[1],c=w(u),h=[],d=n.makeTensorInfo([],"float32",new Float32Array([c]));h.push(d);const p=AI({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});h.push(p);const f=xN({inputs:{a:p,b:d},backend:n});h.push(f);const m=YT({inputs:{x:f},backend:n,attrs:{axis:o,keepDims:a}});return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),m}const nD={kernelName:Jt,backendName:"cpu",kernelFunc:tD};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function rD(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;iI(i,"min");const s=T(o,i.shape);let l=s;const u=Tu(l,i.shape.length);let c=i;null!=u&&(c=rO({inputs:{x:i},backend:n,attrs:{perm:u}}),l=Eu(l.length,i.shape.length)),Ou("min",l,c.shape.length);const[h,d]=Cu(c.shape,l),p=w(d),f=Y(w(h),c.dtype),m=n.data.get(c.dataId).values;for(let b=0;b<f.length;++b){const e=b*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];(Number.isNaN(r)||r<t)&&(t=r)}f[b]=t}null!=u&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(h,c.dtype,f);if(a){const e=Iu(h,s),t=zI({inputs:{x:g},backend:n,attrs:{shape:e}});return n.disposeIntermediateTensorInfo(g),t}return g}const iD={kernelName:Zt,backendName:"cpu",kernelFunc:rD},oD=mI(((e,t)=>Math.min(e,t))),aD=MI(Qt,oD),sD={kernelName:Qt,backendName:"cpu",kernelFunc:aD};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function lD(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:o,mode:a}=r;iI(i,"mirrorPad");const s=o.map(((e,t)=>e[0]+i.shape[t]+e[1])),l=o.map((e=>e[0])),u=o.map(((e,t)=>e[0]+i.shape[t])),c="reflect"===a?0:1,h=n.data.get(i.dataId).values,d=i.shape.length,p=W(i.shape),f=w(s),m=s.length,g=W(s),b=E(i.dtype,f);for(let y=0;y<f;y++){let e=Z(y,m,g);for(let n=0;n<m;n++)e[n]<l[n]?e[n]=2*l[n]-e[n]-c:e[n]>=u[n]&&(e[n]=2*(u[n]-1)-e[n]+c);e=e.map(((e,t)=>e-l[t]));const t=J(e,d,p);b[y]=h[t]}const v=n.write(b,s,i.dtype);return{dataId:v,shape:s,dtype:i.dtype}}const uD={kernelName:en,backendName:"cpu",kernelFunc:lD},cD=mI(((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),hD=MI(tn,cD),dD={kernelName:tn,backendName:"cpu",kernelFunc:hD};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pD(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:o}=r,a=i.shape.length;let s=o;if(-1===s&&(s=a-1),s!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${s}`);const l=T([s],i.shape),u=LE({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=Iu(u.shape,l),h=zI({inputs:{x:u},backend:n,attrs:{shape:c}}),d=SN({inputs:{a:i,b:h},backend:n}),p=dN({inputs:{x:d},backend:n}),f=YT({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),m=zI({inputs:{x:f},backend:n,attrs:{shape:c}}),g=xN({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const fD={kernelName:Wn,backendName:"cpu",kernelFunc:pD};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mD(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:o,seed:a,normalized:s}=r;iI(i,"multinomial");const l=s?i:pD({inputs:{logits:i},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],h=n.data.get(l.dataId).values,d=[u,o],p=Y(w(d),"int32");for(let f=0;f<u;++f){const e=f*c,t=new Float32Array(c-1);t[0]=h[e];for(let i=1;i<t.length;++i)t[i]=t[i-1]+h[e+i];const n=Xu.alea(a.toString()),r=f*o;for(let i=0;i<o;++i){const e=n();p[r+i]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){p[r+i]=n;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",p)}const gD={kernelName:nn,backendName:"cpu",kernelFunc:mD};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function bD(e,t,n){const r=Yr(-1,n);return WT([],t,r,e,n)}function vD(e){const{inputs:t,backend:n}=e,{x:r}=t;iI(r,"neg");const i=n.data.get(r.dataId).values,[o,a]=bD(i,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}const yD={kernelName:on,backendName:"cpu",kernelFunc:vD},xD=ed;function wD(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l}=r;iI(i,"NonMaxSuppression");const u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,{selectedIndices:h}=xD(u,c,a,s,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const kD={kernelName:sn,backendName:"cpu",kernelFunc:wD},_D=td;function SD(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r;iI(i,"NonMaxSuppressionPadded");const c=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values,{selectedIndices:d,validOutputs:p}=_D(c,h,a,s,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}const CD={kernelName:ln,backendName:"cpu",kernelFunc:SD},ID=nd;function OD(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r;iI(i,"NonMaxSuppressionWithScore");const c=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values,d=a,p=s,f=l,m=u,{selectedIndices:g,selectedScores:b}=ID(c,h,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const TD={kernelName:un,backendName:"cpu",kernelFunc:OD},ND=mI(((e,t)=>e!==t?1:0)),ED=MI(an,ND,null,"bool"),DD={kernelName:an,backendName:"cpu",kernelFunc:ED};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function $D(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{depth:o,onValue:a,offValue:s}=r;iI(i,"oneHot");const l=w(i.shape),u=new Float32Array(l*o);u.fill(s);const c=n.data.get(i.dataId).values;for(let h=0;h<l;++h)c[h]>=0&&c[h]<o&&(u[h*o+c[h]]=a);return n.makeTensorInfo([...i.shape,o],"int32",u)}const AD={kernelName:hn,backendName:"cpu",kernelFunc:$D};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function RD(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=DI({inputs:{input:r},backend:n}),t=RD({inputs:{x:e},backend:n}),i=rT({inputs:{input:r},backend:n}),o=RD({inputs:{x:i},backend:n}),a=TI({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),a}return AN({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const MD={kernelName:dr,backendName:"cpu",kernelFunc:RD};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function FD(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===r.dtype){const e=DI({inputs:{input:r},backend:n}),t=FD({inputs:{x:e},backend:n}),i=rT({inputs:{input:r},backend:n}),o=RD({inputs:{x:i},backend:n}),a=TI({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),a}return AN({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const PD={kernelName:cn,backendName:"cpu",kernelFunc:FD};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function jD(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return fN({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const o=t[0].shape,a=t[0].dtype;t.forEach((e=>{v(o,e.shape,"All tensors passed to stack must have matching shapes"),b(a===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],l=t.map((e=>{const t=fN({inputs:{input:e},backend:n,attrs:{dim:i}});return s.push(t),t})),u=oT({inputs:l,backend:n,attrs:{axis:i}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}const BD={kernelName:dn,backendName:"cpu",kernelFunc:jD};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function LD(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:o,constantValue:a}=r;iI(i,"pad");const s=o.map(((e,t)=>e[0]+i.shape[t]+e[1])),l=o.map((e=>e[0])),u=n.data.get(i.dataId).values,c=w(i.shape),h=i.shape.length,d=W(i.shape),p=w(s),f=s.length,m=W(s),g=E(i.dtype,p);0!==a&&g.fill(a);for(let v=0;v<c;v++){const e=Z(v,h,d),t=e.map(((e,t)=>e+l[t])),n=J(t,f,m);g[n]=u[v]}const b=n.write(g,s,i.dtype);return{dataId:b,shape:s,dtype:i.dtype}}const zD={kernelName:pn,backendName:"cpu",kernelFunc:LD},VD=mI(((e,t)=>Math.pow(e,t))),UD=MI(fn,VD),WD={kernelName:fn,backendName:"cpu",kernelFunc:UD};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function HD(e,t,n,r){const[i,o]=Cu(e,r),a=Ei(t,"int32"),s=Y(w(i),a),l=w(o);for(let u=0;u<s.length;++u){const e=u*l;let t=1;for(let r=0;r<l;++r)t*=n[e+r];s[u]=t}return{outVals:s,outShape:i,outDtype:a}}function GD(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;iI(i,"prod");const s=i.shape.length,l=T(o,i.shape),u=Tu(l,s);let c=l,h=i;const d=[];null!=u&&(h=rO({inputs:{x:i},backend:n,attrs:{perm:u}}),d.push(h),c=Eu(c.length,s));const p=n.data.get(h.dataId).values,{outVals:f,outShape:m,outDtype:g}=HD(h.shape,h.dtype,p,c);let b=m;return a&&(b=Iu(m,l)),d.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(b,g,f)}const qD={kernelName:gn,backendName:"cpu",kernelFunc:GD};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function YD(e,t,n,r){const i=e===t,o=e<t&&n<0,a=t<e&&n>1;if(i||o||a)return Y(0,r);const s=Math.abs(Math.ceil((t-e)/n)),l=Y(s,r);t<e&&1===n&&(n=-1),l[0]=e;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function XD(e){const{backend:t,attrs:n}=e,{start:r,stop:i,dtype:o,step:a}=n,s=YD(r,i,a,o);return t.makeTensorInfo([s.length],o,s)}const KD={kernelName:bn,backendName:"cpu",kernelFunc:XD},JD=sI(yn,(e=>1/e)),ZD={kernelName:yn,backendName:"cpu",kernelFunc:JD};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function QD(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:a,size:s}=r;iI(i,"resizeBilinear");const l=W(i.shape),[u,c]=s,[h,d,p,f]=i.shape,m=n.data.get(i.dataId).values,g=new Float32Array(w([h,u,c,f])),b=[o&&u>1?d-1:d,o&&c>1?p-1:p],v=[o&&u>1?u-1:u,o&&c>1?c-1:c];let y=0;const x=b[0]/v[0],k=b[1]/v[1];for(let w=0;w<h;w++)for(let e=0;e<u;e++){let t;t=a?x*(e+.5)-.5:x*e;const n=Math.max(0,Math.floor(t)),r=t-n,i=Math.min(d-1,Math.ceil(t)),o=w*l[0]+n*l[1],s=w*l[0]+i*l[1];for(let e=0;e<c;e++){let t;t=a?k*(e+.5)-.5:k*e;const n=Math.max(0,Math.floor(t)),i=t-n,u=Math.min(p-1,Math.ceil(t)),c=o+n*l[2],h=s+n*l[2],d=o+u*l[2],b=s+u*l[2];for(let e=0;e<f;e++){const t=m[c+e],n=m[h+e],o=m[d+e],a=m[b+e],s=t+(o-t)*i,l=n+(a-n)*i,u=s+(l-s)*r;g[y++]=u}}}return n.makeTensorInfo([h,u,c,f],"float32",g)}const e$={kernelName:Sn,backendName:"cpu",kernelFunc:QD};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function t$(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:a}=r;iI([o,i],"resizeBilinearGrad");const s=W(i.shape),[l,u,c,h]=i.shape,[,d,p]=o.shape,f=new Float32Array(l*u*c*h),m=[a&&d>1?u-1:u,a&&p>1?c-1:c],g=[a&&d>1?d-1:d,a&&p>1?p-1:p],b=m[0]/g[0],v=m[1]/g[1],y=n.data.get(o.dataId).values;let x=0;for(let w=0;w<l;w++){const e=w*s[0];for(let t=0;t<d;t++){const n=t*b,r=Math.floor(n),i=Math.min(Math.ceil(n),u-1),o=e+r*s[1],a=e+i*s[1],l=n-r,d=1-l;for(let e=0;e<p;e++){const t=e*v,n=Math.floor(t),r=Math.min(Math.ceil(t),c-1),i=t-n,u=1-i,p=o+n*s[2],m=o+r*s[2],g=a+n*s[2],b=a+r*s[2],w=d*u,k=d*i,_=l*u,S=l*i;for(let e=0;e<h;e++){const t=y[x++];f[p+e]+=t*w,f[m+e]+=t*k,f[g+e]+=t*_,f[b+e]+=t*S}}}}return n.makeTensorInfo([l,c,u,h],"float32",f)}const n$={kernelName:Cn,backendName:"cpu",kernelFunc:t$};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r$(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:a,size:s}=r;iI(i,"resizeNearestNeighbor");const l=W(i.shape),[u,c]=s,[h,d,p,f]=i.shape,m=n.data.get(i.dataId).values,g=new Float32Array(h*u*c*f),b=[o&&u>1?d-1:d,o&&c>1?p-1:p],v=[o&&u>1?u-1:u,o&&c>1?c-1:c],y=b[0]/v[0],x=b[1]/v[1];let w=0;for(let k=0;k<h;k++){const e=k*l[0];for(let t=0;t<u;t++){const n=a?y*(t+.5):y*t;let r=Math.min(d-1,o?Math.round(n):Math.floor(n));a&&(r=Math.max(0,r));const i=e+r*l[1];for(let e=0;e<c;e++){const t=a?x*(e+.5):x*e;let n=Math.min(p-1,o?Math.round(t):Math.floor(t));a&&(n=Math.max(0,n));const r=i+n*l[2];for(let e=0;e<f;e++){const t=m[r+e];g[w++]=t}}}}return n.makeTensorInfo([h,u,c,f],i.dtype,g)}const i$={kernelName:kn,backendName:"cpu",kernelFunc:r$};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o$(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:a}=r;iI([o,i],"resizeNearestNeighborGrad");const s=W(i.shape),l=W(o.shape),[u,c,h,d]=i.shape,[,p,f]=o.shape,m=new Float32Array(u*c*h*d),g=n.data.get(o.dataId).values,b=[a&&p>1?c-1:c,a&&f>1?h-1:h],v=[a&&p>1?p-1:p,a&&f>1?f-1:f],y=b[0]/v[0],x=b[1]/v[1],w=1/y,k=1/x,_=2*Math.ceil(w)+2,S=2*Math.ceil(k)+2;for(let C=0;C<u;C++){const e=C*s[0];for(let t=0;t<c;t++){const n=e+t*s[1],r=Math.floor(t*w),i=Math.floor(r-_/2);for(let o=0;o<h;o++){const r=n+o*s[2],u=Math.floor(o*k),b=Math.floor(u-S/2);for(let n=0;n<d;n++){let s=0;for(let r=0;r<_;r++){const u=r+i;if(u<0||u>=p)continue;const d=e+u*l[1],m=u*y,v=Math.min(c-1,a?Math.round(m):Math.floor(m));if(t===v)for(let e=0;e<S;e++){const t=e+b;if(t<0||t>=f)continue;const r=d+t*l[2],i=t*x,u=Math.min(h-1,a?Math.round(i):Math.floor(i));o===u&&(s+=g[r+n])}}m[r+n]=s}}}}return n.makeTensorInfo(i.shape,i.dtype,m)}const a$={kernelName:_n,backendName:"cpu",kernelFunc:o$};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s$(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:o}=r;iI(i,"reverse");const a=i.shape.length,s=T(o,i.shape);if(0===a)return hI({inputs:{x:i},backend:n});const l=new fi(i.shape,i.dtype),u=n.bufferSync(i);for(let c=0;c<l.size;c++){const e=l.indexToLoc(c),t=e.slice();s.forEach((e=>t[e]=i.shape[e]-1-t[e])),l.set(u.get(...t),...e)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const l$={kernelName:On,backendName:"cpu",kernelFunc:s$},u$={kernelName:mr,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:i,fillValue:o,center:a}=t,s=n,l=E(r.dtype,w(r.shape)),[u,c,h,d]=r.shape,[p,f]=Rp(a,c,h),m=255,g=Math.sin(i),b=Math.cos(i),v=s.data.get(r.dataId).values;for(let x=0;x<u;x++){const e=x*h*c*d;for(let t=0;t<c;t++){const n=t*(h*d);for(let r=0;r<h;r++){const i=r*d;for(let a=0;a<d;a++){const s=[u,t,r,a],y=s[2],x=s[1];let w=(y-p)*b-(x-f)*g,k=(y-p)*g+(x-f)*b;w=Math.round(w+p),k=Math.round(k+f);let _=o;if("number"!==typeof o&&(_=3===a?m:o[a]),w>=0&&w<h&&k>=0&&k<c){const t=k*(h*d),n=w*d,r=e+t+n+a;_=v[r]}const S=e+n+i+a;l[S]=_}}}}const y=s.write(l,r.shape,r.dtype);return{dataId:y,shape:r.shape,dtype:r.dtype}}},c$=sI(Tn,(e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),h$={kernelName:Tn,backendName:"cpu",kernelFunc:c$},d$=_I((e=>1/Math.sqrt(e))),p$=lI(Nn,d$),f$={kernelName:Nn,backendName:"cpu",kernelFunc:p$};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function m$(e,t,n,r,i,o,a,s,l,u){const c=[r/i,i],h=e.values,d=t.values;if(0===r)return Zo(n,t.dtype);const p=Zo(c,t.dtype);"string"===typeof l||"number"===typeof l?p.values.fill(l):"boolean"===typeof l&&p.values.fill(+l);for(let f=0;f<o;f++){const e=[];let o=0;for(let t=0;t<a;t++){const n=h[f*a+t];e.push(n),o+=n*s[t]}if(o<0||o>=r/i)throw new Error(`Invalid indices: ${e} does not index into ${n}`);for(let n=0;n<i;n++)u?p.values[o*i+n]+=d[f*i+n]:p.values[o*i+n]=0===t.rank?d[0]:d[f*i+n]}return p}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function g$(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:o}=t,{shape:a}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:h}=Up(o,i,a),d=!0,p=n.bufferSync(i),f=n.bufferSync(o),m=m$(p,f,a,h,u,l,s,c,0,d);return n.makeTensorInfo(a,m.dtype,m.values)}const b$={kernelName:En,backendName:"cpu",kernelFunc:g$};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function v$(e,t){let n=0,r=e.length,i=0;while(n<r)i=Math.floor((n+r)/2),e[i]<t?n=i+1:r=i;return r}function y$(e,t){let n=0,r=e.length,i=0;while(n<r)i=Math.floor((n+r)/2),e[i]<=t?n=i+1:r=i;return r}function x$(e,t,n,r,i,o){const a=D("int32",n*i);for(let s=0;s<n;++s){const n=e.slice(s*r,(s+1)*r),l=s*i;for(let e=0;e<i;++e)a[l+e]="left"===o?v$(n,t[e+l]):y$(n,t[e+l])}return a}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function w$(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:o}=t,{side:a}=r,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,u=x$(s,l,i.shape[0],i.shape[1],o.shape[1],a);return n.makeTensorInfo(o.shape,"int32",u)}const k$={kernelName:Dn,backendName:"cpu",kernelFunc:w$};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function _$(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:o}=t;iI([r,i,o],"select");const a=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,c=Ei(i.dtype,o.dtype),h=Y(w(i.shape),c);let d=0;const p=0===a||a>1||1===i.shape.length?1:w(i.shape.slice(1));for(let f=0;f<s.length;f++)for(let e=0;e<p;e++)1===s[f]?h[d++]=l[f]:h[d++]=u[f];return n.makeTensorInfo(i.shape,c,h)}const S$={kernelName:$n,backendName:"cpu",kernelFunc:_$},C$=Wp,I$=Hp,O$=sI(An,(e=>e>=0?I$*e:C$*(Math.exp(e)-1))),T$={kernelName:An,backendName:"cpu",kernelFunc:O$},N$=sI(Pn,(e=>e<0?-1:e>0?1:0)),E$={kernelName:Pn,backendName:"cpu",kernelFunc:N$},D$=sI(Mn,(e=>Math.sin(e))),$$={kernelName:Mn,backendName:"cpu",kernelFunc:D$},A$=sI(Fn,(e=>Math.sinh(e))),R$={kernelName:Fn,backendName:"cpu",kernelFunc:A$},M$=1.1920928955078125e-7,F$=Math.log(M$)+2,P$=sI(Bn,(e=>{const t=e>-F$,n=e<F$,r=Math.exp(e);let i;return i=n?r:t?e:Math.log(1+r),i})),j$={kernelName:Bn,backendName:"cpu",kernelFunc:P$};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function B$(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,paddings:a}=r;iI([i],"spaceToBatchND");const s=w(o),l=[[0,0]];l.push(...a);for(let w=1+o.length;w<i.shape.length;++w)l.push([0,0]);const u=zD.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),c=Mp(u.shape,o,s,!1),h=Fp(c.length,o.length,!1),d=Pp(u.shape,o,s,!1),p={x:u},f={shape:c},m=zI({inputs:p,backend:n,attrs:f}),g={x:m},b={perm:h},v=rO({inputs:g,backend:n,attrs:b}),y={x:v},x={shape:d},k=zI({inputs:y,backend:n,attrs:x});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),k}const L$={kernelName:Vn,backendName:"cpu",kernelFunc:B$};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function z$(e,t,n,r,i,o,a){const s=t[0],l=o[0],u=new Array(l),c=new Array(s),h=t[1];if(0===l){if(0!==s)throw new Error(vf(s));const e=D(n,0),t=D(i,0);return[e,[0,h],t,u,c]}let d=!0,p=0;const f=new Array(l).fill(0);for(let g=0;g<s;++g){const t=e[g*h];if(t<0)throw new Error(yf(g,t));if(t>=l)throw new Error(xf(g,t,l));++f[t],d=d&&t>=p,p=t}let m=!0;for(let g=0;g<l;++g){const e=0===f[g];u[g]=e,m=m&&!e,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&d){const t=e,n=r;for(let e=0;e<s;++e)c[e]=e;return[t,[s,h],n,u,c]}{const t=f[l-1],o=D(n,t*h),d=D(i,t),p=new Array(l).fill(0);for(let n=0;n<s;++n){const t=e[n*h],i=p[t],a=(0===t?0:f[t-1])+i;p[t]++;for(let r=0;r<h;++r)o[a*h+r]=e[n*h+r];d[a]=r[n],c[n]=a}for(let e=0;e<l;++e){const t=p[e];if(0===t){const t=0===e?0:f[e-1];o[t*h+0]=e;for(let e=1;e<h;++e)o[t*h+e]=0;d[t]=a}}return[o,[t,h],d,u,c]}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function V$(e){const{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:o,defaultValue:a}=t;if(1!==o.shape.length)throw new Error(`Dense shape must be a vector, saw:\n        ${o.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n        ${r.shape}`);if(1!==i.shape.length)throw new Error(`Values must be a vector, saw:\n        ${i.shape}`);if(0!==a.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${a.shape}`);const s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,c=n.data.get(a.dataId).values[0],[h,d,p,f,m]=z$(s,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],i.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const U$={kernelName:Hn,backendName:"cpu",kernelFunc:V$};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function W$(e,t,n,r,i){const o=w(r),a=t[0],s=i.length,l=[];let u=1,c=-1;for(let g=0;g<s;++g){const e=i[g];if(-1===e){if(-1!==c)throw new Error(wf(c,g));c=g,l.push(1)}else{if(e<0)throw new Error(kf(g,e));u*=e,l.push(e)}}if(-1!==c){if(u<=0)throw new Error(_f());const e=Math.trunc(o/u);if(u*e!==o)throw new Error(Sf(r,l));l[c]=e}const h=w(l);if(h!==o)throw new Error(Cf(r,l));const d=r.length,p=[];if(d>0){p[d-1]=1;for(let e=d-2;e>=0;--e)p[e]=p[e+1]*r[e+1]}const f=[];if(s>0){f[s-1]=1;for(let e=s-2;e>=0;--e)f[e]=f[e+1]*l[e+1]}const m=D(n,a*s);for(let g=0;g<a;++g){let t=0;for(let n=0;n<d;++n)t+=e[g*d+n]*p[n];for(let e=0;e<s;++e)m[g*s+e]=Math.trunc(t/f[e]),t%=f[e]}return[m,[a,s],l]}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function H$(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:o}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${r.shape}`);if(1!==i.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${i.shape}`);if(1!==o.shape.length)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const a=Array.from(n.data.get(i.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(o.dataId).values),[u,c,h]=W$(s,r.shape,r.dtype,a,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}const G$={kernelName:Gn,backendName:"cpu",kernelFunc:H$};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function q$(e,t,n,r,i,o=!1,a=0){const s=r.length,l=[t[0],e.length/t[0]],u=l[1],c=s>0?i[s-1]+1:0,h=c;if(h<0)throw new Error(If());const d=t.slice();d[0]=h;const p=d.reduce(((e,t)=>e*t),1),f=D(n,p);if(0===s)return h>0&&f.fill(a),[f,d];if(h<=0)throw new Error(If());let m=0,g=1,b=0,v=i[m];while(1){let t=0;if(g<s){if(t=i[g],v===t){++g;continue}if(v>=t)throw new Error(Of())}if(v<0||v>=h)throw new Error(Tf(v,h));v>b&&f.fill(a,b*u,v*u);for(let n=m;n<g;++n){const t=r[n];if(t<0||t>=l[0])throw new Error(Nf(n,r[n],l[0]));for(let n=0;n<u;n++)f[v*u+n]+=e[t*u+n]}if(o)for(let e=0;e<u;e++)f[v*u+e]/=g-m;if(m=g,++g,b=v+1,v=t,g>s)break}return b<h&&f.fill(a,b*u,h*u),[f,d]}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Y$(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n          ${i.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n          ${o.shape}`);if(i.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[u,c]=q$(a,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const X$={kernelName:qn,backendName:"cpu",kernelFunc:Y$};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function K$(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n         ${i.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n         ${o.shape}`);if(i.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[u,c]=q$(a,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}const J$={kernelName:Yn,backendName:"cpu",kernelFunc:K$};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Z$(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:o,defaultValue:a}=t,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:h,outputSize:d}=Up(o,i,s),p=!1,f=n.bufferSync(i);let m;switch(o.dtype){case"bool":{const e=n.bufferSync(o),t=Boolean(n.data.get(a.dataId).values[0]);m=m$(f,e,s,d,c,u,l,h,t,p);break}case"float32":{const e=n.bufferSync(o),t=n.data.get(a.dataId).values[0];m=m$(f,e,s,d,c,u,l,h,t,p);break}case"int32":{const e=n.bufferSync(o),t=n.data.get(a.dataId).values[0];m=m$(f,e,s,d,c,u,l,h,t,p);break}case"string":{const e=n.bufferSync(o),t=Qr(n.data.get(a.dataId).values[0]);m=m$(f,e,s,d,c,u,l,h,t,p);break}default:throw new Error(`Unsupported type ${o.dtype}`)}return n.makeTensorInfo(s,m.dtype,m.values)}const Q$={kernelName:Xn,backendName:"cpu",kernelFunc:Z$};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function eA(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:o,axis:a}=r,s=T(a,i.shape)[0],l=bf(i,o,s),u=new Array(i.shape.length).fill(0),c=i.shape.slice();return l.map((e=>{const t=[...c];t[s]=e;const r=BO({inputs:{x:i},backend:n,attrs:{begin:u,size:t}});return u[s]+=e,r}))}const tA={kernelName:Un,backendName:"cpu",kernelFunc:eA},nA=_I((e=>Math.sqrt(e))),rA=sI(Ln,(e=>Math.sqrt(e))),iA={kernelName:Ln,backendName:"cpu",kernelFunc:rA},oA={kernelName:Jn,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,r=t;iI(n,"square");const i=r.data.get(n.dataId).values,o=new Float32Array(i.length);for(let s=0;s<i.length;++s){const e=i[s];o[s]=e*e}const a=r.write(o,n.shape,n.dtype);return{dataId:a,shape:n.shape,dtype:n.dtype}}},aA=mI(((e,t)=>{const n=e-t;return n*n})),sA=MI(Kn,aA),lA={kernelName:Kn,backendName:"cpu",kernelFunc:sA},uA=sI(pr,((e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),cA={kernelName:pr,backendName:"cpu",kernelFunc:uA};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function hA(e,t,n,r){const i=Zo(e,t.dtype);for(let o=0;o<i.size;o++){const e=i.indexToLoc(o),a=new Array(e.length);for(let t=0;t<a.length;t++)a[t]=e[t]*n[t]+r[t];i.set(t.get(...a),...e)}return i}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function dA(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,end:a,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:h,shrinkAxisMask:d}=r;iI(i,"stridedSlice");const{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:y,end:x,strides:w}=za(i.shape,o,a,s,l,u,c,h,d);let k;if(m)k=zI({inputs:{x:i},backend:n,attrs:{shape:f}});else if(g||v){b(i.shape.length>=1,(()=>`Input must have rank at least 1, got: ${i.shape.length}`));const e=Ta(y,x,w),t=BO({inputs:{x:i},backend:n,attrs:{begin:y,size:e}});k=zI({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=n.bufferSync(i),t=hA(p,e,w,y);k=n.makeTensorInfo(f,t.dtype,t.values)}return k}const pA={kernelName:Zn,backendName:"cpu",kernelFunc:dA};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class fA{constructor(e,t,n,r,i,o){this.separator=Zr(e),this.nGramWidths=t,this.leftPad=Zr(n),this.rightPad=Zr(r),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,i,o){for(let a=0;a<i;++a){const s=this.getPadWidth(o),l=Math.max(0,s-a),u=Math.max(0,s-(i-(a+1))),c=o-(l+u),h=t+(l>0?0:a-s);let d=0;d+=l*this.leftPad.length;for(let t=0;t<c;++t)d+=e[h+t].length;d+=u*this.rightPad.length;const p=l+u+c-1;d+=p*this.separator.length,n[r+a]=new Uint8Array(d);const f=n[r+a];let m=0;const g=e=>e.forEach((e=>f[m++]=e));for(let e=0;e<l;++e)g(this.leftPad),g(this.separator);for(let t=0;t<c-1;++t)g(e[h+t]),g(this.separator);if(c>0){g(e[h+c-1]);for(let e=0;e<u;++e)g(this.separator),g(this.rightPad)}else{for(let e=0;e<u-1;++e)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error(`First split value must be 0, got ${e}`);for(let i=1;i<r;++i){let r=t[i]>=e;if(r=r&&t[i]<=n,!r)throw new Error(`Invalid split value ${t[i]}, must be in [${e}, ${n}]`);e=t[i]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}const i=r-1,o=D("int32",r);if(0===n||0===r){const e=new Array(n);for(let t=0;t<=i;++t)o[t]=0;return[e,o]}o[0]=0;for(let s=1;s<=i;++s){const e=t[s]-t[s-1];let n=0;this.nGramWidths.forEach((t=>{n+=this.getNumNGrams(e,t)})),this.preserveShort&&e>0&&0===n&&(n=1),o[s]=o[s-1]+n}const a=new Array(o[i]);for(let s=0;s<i;++s){const n=t[s];let r=o[s];if(this.nGramWidths.forEach((i=>{const o=t[s+1]-t[s],l=this.getNumNGrams(o,i);this.createNGrams(e,n,a,r,l,i),r+=l})),this.preserveShort&&r===o[s]){const i=t[s+1]-t[s];if(0===i)continue;const o=i+2*this.padWidth,l=1;this.createNGrams(e,n,a,r,l,o)}}return[a,o]}}function mA(e,t,n,r,i,o,a,s){return new fA(n,r,i,o,a,s).compute(e,t)}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function gA(e){const{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:o,leftPad:a,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:h}=t,d=n.data.get(c.dataId).values,p=n.data.get(h.dataId).values,[f,m]=mA(d,p,i,o,a,s,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",m)]}const bA={kernelName:Qn,backendName:"cpu",kernelFunc:gA};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function vA(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const i=t[0];let o=e.indexOf(i);while(-1!==o){const t=e.subarray(0,o);n&&0===t.length||r.push(t),e=e.subarray(o+1),o=e.indexOf(i)}return void(n&&0===e.length||r.push(e))}let i=0;for(let o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){const t=e.subarray(i,o);n&&0===t.length||r.push(t),i=o+1}}function yA(e,t,n){const r=e.length,i=[];let o=0,a=0;const s=new Array(r);for(let d=0;d<r;++d){const r=i.length;vA(e[d],t,n,i);const l=i.length-r;s[d]=l,o+=l,a=Math.max(a,l)}const l=D("int32",2*o),u=new Array(o),c=[r,a];let h=0;for(let d=0;d<r;++d)for(let e=0;e<s[d];++e)l[2*h]=d,l[2*h+1]=e,u[h]=i[h],++h;return[l,u,c]}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function xA(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:o,delimiter:a}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(0!==a.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const s=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values[0],[u,c,h]=yA(s,l,i),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const wA={kernelName:er,backendName:"cpu",kernelFunc:xA};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function kA(e,t){const n=D("int32",e.length);for(let r=0;r<e.length;++r)n[r]=qr(e[r]).modulo(t).getLowBitsUnsigned();return n}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function _A(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=n.data.get(o.dataId).values,s=kA(a,i);return n.makeTensorInfo(o.shape,"int32",s)}const SA={kernelName:tr,backendName:"cpu",kernelFunc:_A},CA=sI(rr,(e=>Math.tan(e))),IA={kernelName:rr,backendName:"cpu",kernelFunc:CA},OA=sI(ir,(e=>Math.tanh(e))),TA={kernelName:ir,backendName:"cpu",kernelFunc:OA};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function NA(e,t){const n=new Array(e.rank);for(let i=0;i<n.length;i++)n[i]=e.shape[i]*t[i];const r=Zo(n,e.dtype);for(let i=0;i<r.values.length;++i){const t=r.indexToLoc(i),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];const o=e.locToIndex(n);r.values[i]=e.values[o]}return r}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function EA(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:o}=r;iI(i,"tile");const a=NA(n.bufferSync(i),o);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const DA={kernelName:or,backendName:"cpu",kernelFunc:EA},$A=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function AA(e,t,n=0,r=e.length-1){while(r>n){if(r-n>600){const i=r-n+1,o=t-n+1,a=Math.log(i),s=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*s*(i-s)/i)*Math.sign(o-i/2),u=Math.max(n,Math.floor(t-o*s/i+l)),c=Math.min(r,Math.floor(t+(i-o)*s/i+l));AA(e,t,u,c)}const i=e[t];let o=n,a=r;m(e,n,t),$A(e[r],i)>0&&m(e,n,r);while(o<a){m(e,o,a),o++,a--;while($A(e[o],i)<0)o+=1;while($A(e[a],i)>0)a-=1}0===$A(e[n],i)?m(e,n,a):(a+=1,m(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}}function RA(e,t,n,r,i){const o=t[t.length-1],[a,s]=[e.length/o,o],l=E(n,a*r),u=E("int32",a*r);for(let h=0;h<a;h++){const t=h*s,n=e.subarray(t,t+s);let o=new Array(n.length);n.forEach(((e,t)=>o[t]={value:e,index:t})),r<o.length&&(AA(o,r),o=o.slice(0,r)),i&&o.sort($A);const a=h*r,c=l.subarray(a,a+r),d=u.subarray(a,a+r);for(let e=0;e<r;e++)c[e]=o[e].value,d[e]=o[e].index}const c=t.slice();return c[c.length-1]=r,[Zo(c,n,l),Zo(c,"int32",u)]}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function MA(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:o,sorted:a}=r;iI(i,"topk");const s=n.data.get(i.dataId).values,[l,u]=RA(s,i.shape,i.dtype,o,a);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const FA={kernelName:ar,backendName:"cpu",kernelFunc:MA};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function PA(e){const{inputs:t,attrs:n,backend:r}=e,{image:i,transforms:o}=t,{interpolation:a,fillMode:s,fillValue:l,outputShape:u}=n,[c,h,d,p]=i.shape,[f,m]=null!=u?u:[h,d],g=[c,f,m,p],b=W(i.shape),v=b[0],y=b[1],x=b[2],k=E(i.dtype,w(g));k.fill(l);const _=r.data.get(i.dataId).values,S=r.data.get(o.dataId).values;for(let w=0;w<c;++w){const e=1===o.shape[0]?S:S.subarray(8*w,8*w+8);for(let t=0;t<f;++t)for(let n=0;n<m;++n)for(let r=0;r<p;++r){let i;const o=e[6]*n+e[7]*t+1;if(0===o)continue;const u=(e[0]*n+e[1]*t+e[2])/o,c=(e[3]*n+e[4]*t+e[5])/o,p=BA(u,d,s),f=BA(c,h,s);switch(a){case"nearest":i=HA(_,h,d,v,y,x,w,f,p,r,l);break;case"bilinear":i=GA(_,h,d,v,y,x,w,f,p,r,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}const m=w*v+t*y+n*x+r;k[m]=i}return r.makeTensorInfo(g,i.dtype,k)}const C=r.write(k,g,i.dtype);return{dataId:C,shape:i.shape,dtype:i.dtype}}const jA={kernelName:sr,backendName:"cpu",kernelFunc:PA};function BA(e,t,n){switch(n){case"reflect":return LA(e,t);case"wrap":return zA(e,t);case"nearest":return UA(e,t);case"constant":default:return VA(e,t)}}function LA(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return p(0,n,t-1)}function zA(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return p(0,n,t-1)}function VA(e,t){return e}function UA(e,t){return p(0,e,t-1)}function WA(e,t,n,r,i,o,a,s,l,u,c){const h=a*r+s*i+l*o+u;return 0<=s&&s<t&&0<=l&&l<n?e[h]:c}function HA(e,t,n,r,i,o,a,s,l,u,c){const h=Math.round(s),d=Math.round(l);return WA(e,t,n,r,i,o,a,h,d,u,c)}function GA(e,t,n,r,i,o,a,s,l,u,c){const h=Math.floor(s),d=Math.floor(l),p=h+1,f=d+1,m=(f-l)*WA(e,t,n,r,i,o,a,h,d,u,c)+(l-d)*WA(e,t,n,r,i,o,a,h,f,u,c),g=(f-l)*WA(e,t,n,r,i,o,a,p,d,u,c)+(l-d)*WA(e,t,n,r,i,o,a,p,f,u,c);return(p-s)*m+(s-h)*g}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function qA(e,t,n,r){const i=T(t,n)[0],o=[1,n[0],1];for(let f=0;f<i;f++)o[0]*=n[f];o[1]=n[i];for(let f=i+1;f<n.length;f++)o[2]*=n[f];const a={},s=new Int32Array(n[i]),l=new fi(o,r,e),u=[],c=1===o[0]&&1===o[2];for(let f=0;f<n[i];f++){let t;if(c)t=e[f].toString();else{const e=[];for(let t=0;t<o[0];t++)for(let n=0;n<o[2];n++)e.push(l.get(t,f,n));t=e.join(",")}if(void 0!==a[t])s[f]=a[t];else{const e=Object.keys(a).length;a[t]=e,s[f]=e,u.push(f)}}const h=o.slice();h[1]=Object.keys(a).length;const d=new fi(h,r);u.forEach(((e,t)=>{for(let n=0;n<o[0];n++)for(let r=0;r<o[2];r++)d.set(l.get(n,e,r),n,t,r)}));const p=n.slice();return p[i]=h[1],{outputValues:d.values,outputShape:p,indices:s}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function YA(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:o}=t;iI(o,"unique");const a=r.data.get(o.dataId).values,{outputValues:s,outputShape:l,indices:u}=qA(a,i,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}const XA={kernelName:ur,backendName:"cpu",kernelFunc:YA};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function KA(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:o}=r;o<0&&(o+=i.shape.length);const a=i.shape.length,s=i.shape[o],l=new Array(a-1);let u=0;for(let p=0;p<a;p++)p!==o&&(l[u++]=i.shape[p]);const c=new Array(a).fill(0),h=i.shape.slice();h[o]=1;const d=new Array(s);for(let p=0;p<d.length;p++){c[o]=p;const e=BO({inputs:{x:i},backend:n,attrs:{begin:c,size:h}});d[p]=zI({inputs:{x:e},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(e)}return d}const JA={kernelName:cr,backendName:"cpu",kernelFunc:KA};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ZA(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:o}=t,{numSegments:a}=r;iI(i,"unsortedSegmentSum");const s=i.shape.length,l=o.shape.length,u=[],c=[],h=s-l;let d=o;for(let f=0;f<h;++f){const e=fN({inputs:{input:d},backend:n,attrs:{dim:f+1}});d=e,c.push(e)}for(let f=0;f<a;++f){const e=Yr(f,"int32"),t=n.makeTensorInfo([],"int32",e),r=tN({inputs:{a:t,b:d},backend:n}),o=AI({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),a=GT({inputs:{a:o,b:i},backend:n}),s=YT({inputs:{x:a},backend:n,attrs:{axis:0,keepDims:!1}});u.push(s),c.push(t),c.push(r),c.push(o),c.push(a),c.push(s)}const p=jD({inputs:u,backend:n,attrs:{axis:0}});return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}const QA={kernelName:hr,backendName:"cpu",kernelFunc:ZA},eR=[GI,XI,JI,QI,LI,tO,aO,lO,cO,dO,fO,gO,vO,wO,_O,NO,DO,AO,MO,WI,PO,VO,GO,YO,RI,JO,QO,NI,tT,aT,lT,cT,dT,fT,gT,vT,xT,kT,ST,IT,TT,ET,$T,RT,FT,jT,LT,zT,VT,UT,JT,cI,QT,nN,cN,pN,mN,vN,$N,RN,FN,BN,VN,WN,GN,XN,ZN,tE,iE,dI,aE,iT,lE,cE,dE,fI,mE,vE,wE,SE,IE,NE,DE,RE,FE,jE,zE,WE,GE,YE,KE,ZE,eD,nD,iD,sD,uD,dD,gD,qT,yD,kD,CD,TD,DD,AD,PD,BD,zD,WD,vI,qD,KD,$I,wN,ZD,xI,kI,VI,e$,n$,i$,a$,l$,u$,h$,f$,b$,k$,S$,T$,II,E$,$$,R$,LO,fD,j$,L$,U$,G$,X$,J$,Q$,tA,iA,oA,lA,cA,pA,bA,wA,SA,CN,XT,IA,TA,DA,FA,jA,iO,XA,JA,QA,MD];for(const gY of eR)Ir(gY);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const tR={},nR={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function rR(e,t){tR[e]=t}function iR(e,t){if(!(e in tR)||null!=t){const n=aR(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;tR[e]=n}const n=tR[e];return null==n||n.isContextLost()?(delete tR[e],iR(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),tR[e])}function oR(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function aR(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?oR(e):t;return n.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete tR[e]}),!1),1===e?n.getContext("webgl",nR)||n.getContext("experimental-webgl",nR):n.getContext("webgl2",nR)}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var sR,lR,uR;function cR(e,t){return[t,e]}function hR(e,t){return e*t}function dR(e){const t=w(e),n=Math.ceil(t/4);return S(n)}function pR(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function fR(e,t){const[n,r]=pR(e,t);return n*r*4}function mR(e,t){const n=e;let r,i,o,a,s,l,u,c,h,d;return 2===oe().getNumber("WEBGL_VERSION")?(r=n.R32F,i=n.R16F,o=n.RGBA16F,a=n.RGBA32F,s=n.RED,u=4,c=1,h=n.HALF_FLOAT,d=n.FLOAT,l=n.RGBA8):(r=e.RGBA,i=e.RGBA,o=e.RGBA,a=n.RGBA,s=e.RGBA,u=4,c=4,h=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:h,textureTypeFloat:d}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function gR(e,t){const n=t();return oe().getBool("DEBUG")&&bR(e),n}function bR(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+wR(e,t))}(function(e){e[e["DENSE"]=0]="DENSE",e[e["SHARED_BATCH"]=1]="SHARED_BATCH"})(sR||(sR={})),function(e){e[e["RENDER"]=0]="RENDER",e[e["UPLOAD"]=1]="UPLOAD",e[e["PIXELS"]=2]="PIXELS",e[e["DOWNLOAD"]=3]="DOWNLOAD"}(lR||(lR={})),function(e){e[e["UNPACKED_FLOAT16"]=0]="UNPACKED_FLOAT16",e[e["UNPACKED_FLOAT32"]=1]="UNPACKED_FLOAT32",e[e["PACKED_4X1_UNSIGNED_BYTE"]=2]="PACKED_4X1_UNSIGNED_BYTE",e[e["PACKED_2X2_FLOAT32"]=3]="PACKED_2X2_FLOAT32",e[e["PACKED_2X2_FLOAT16"]=4]="PACKED_2X2_FLOAT16"}(uR||(uR={}));const vR=5.96e-8,yR=65504;function xR(e){return!!(oe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||vR<Math.abs(e)&&Math.abs(e)<yR)}function wR(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function kR(e,t){return WR(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}function _R(e,t){const n=WR(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(gR(e,(()=>e.shaderSource(n,t))),gR(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function SR(e,t){const n=WR(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(gR(e,(()=>e.shaderSource(n,t))),gR(e,(()=>e.compileShader(n))),oe().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw IR(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const CR=/ERROR: [0-9]+:([0-9]+):/g;function IR(e,t){const n=CR.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(e);const r=+n[1],i=e.split("\n"),o=i.length.toString().length+2,a=i.map(((e,t)=>C((t+1).toString(),o)+e));let s=0;for(let h=0;h<a.length;h++)s=Math.max(a[h].length,s);const l=a.slice(0,r-1),u=a.slice(r-1,r),c=a.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${C(u[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join("\n"))}function OR(e){return WR(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}function TR(e,t){if(gR(e,(()=>e.linkProgram(t))),!oe().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function NR(e,t){if(gR(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function ER(e,t){const n=WR(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return gR(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),gR(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}function DR(e,t){const n=WR(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return gR(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),gR(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}function $R(e){return WR(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}function AR(e,t){const n=oe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const n=`[${e}x${t}]`;throw new Error("Requested texture size "+n+" is invalid.")}if(e>n||t>n){const r=`[${e}x${t}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function RR(e){return WR(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}function MR(e,t,n,r,i,o,a){const s=e.getAttribLocation(t,n);return-1!==s&&(gR(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),gR(e,(()=>e.vertexAttribPointer(s,i,e.FLOAT,!1,o,a))),gR(e,(()=>e.enableVertexAttribArray(s))),!0)}function FR(e,t,n){HR(e,n),gR(e,(()=>e.activeTexture(e.TEXTURE0+n))),gR(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}function PR(e,t,n){return WR(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}function jR(e,t,n){return e.getUniformLocation(t,n)}function BR(e,t,n,r){gR(e,(()=>FR(e,t,r))),gR(e,(()=>e.uniform1i(n,r)))}function LR(e,t,n){gR(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),gR(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function zR(e,t){gR(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),gR(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function VR(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+UR(e,t))}function UR(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function WR(e,t,n){const r=gR(e,(()=>t()));if(null==r)throw new Error(n);return r}function HR(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){const e=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${e}.`)}}function GR(e,t=2){return w(e.slice(0,e.length-t))}function qR(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function YR(e){let t=[1,1,1];const n=0===e.length||1===e.length&&1===e[0];return n||(t=[GR(e),...qR(e)]),t}function XR(e,t=!1){let n=oe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,e=e.map(((t,n)=>n>=e.length-2?f(e[n]):e[n])),1===e.length&&(e=[2,e[0]])),2!==e.length){const t=N(e);e=t.newShape}let r=w(e);if(e.length<=1&&r<=n)return[1,r];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){const t=GR(e);let n=2,i=2;return e.length&&([n,i]=qR(e)),r=t*(n/2)*(i/2),S(r).map((e=>2*e))}return S(r)}function KR(e){return e%2===0}function JR(e,t){if(e=e.slice(-2),t=t.slice(-2),k(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(KR(n)&&KR(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&KR(e[0])&&KR(t[0])}let ZR,QR;function eM(e){if(null==ZR){const t=iR(e);ZR=t.getParameter(t.MAX_TEXTURE_SIZE)}return ZR}function tM(e){if(null==QR){const t=iR(e);QR=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,QR)}function nM(e){if(0===e)return 0;let t;const n=iR(e);return t=rM(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:rM(n,"EXT_disjoint_timer_query")?1:0,t}function rM(e,t){const n=e.getExtension(t);return null!=n}function iM(e){try{const t=iR(e);if(null!=t)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function oM(e){if(0===e)return!1;const t=iR(e);if(1===e){if(!rM(t,"OES_texture_float"))return!1}else if(!rM(t,"EXT_color_buffer_float"))return!1;const n=sM(t);return n}function aM(e){if(0===e)return!1;const t=iR(e);if(1!==e){if(rM(t,"EXT_color_buffer_float"))return sM(t);const e="EXT_color_buffer_half_float";if(rM(t,e)){const n=t.getExtension(e);return lM(t,n)}return!1}if(!rM(t,"OES_texture_float"))return!1;if(!rM(t,"WEBGL_color_buffer_float"))return!1;const n=sM(t);return n}function sM(e){const t=mR(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);const r=1,i=1;e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,r,i,0,t.textureFormatFloat,t.textureTypeFloat,null);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(o),a}function lM(e,t){const n=mR(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const i=1,o=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,i,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),s}function uM(e){if(2!==e)return!1;const t=iR(e),n=null!=t.fenceSync;return n}function cM(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&b("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the WebGL backend.`))}))}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const hM=oe();
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function dM(){let e,t,n,r,i,o,a,s,l,u;return 2===oe().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",l="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pM(e,t,n="index"){const r=W(t);return r.map(((t,i)=>{const o=`int ${e[i]} = ${n} / ${t}`,a=i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * ${t}`:`index -= ${e[i]} * ${t}`;return`${o}; ${a};`})).join("")}function fM(e,t,n="index"){const r=W(t);return r.map(((t,i)=>{const o=`int ${e[i]} = ${n} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * outShapeStrides[${i}]`:`index -= ${e[i]} * outShapeStrides[${i}]`;return`${o}; ${a};`})).join("")}function mM(e,t){const n=e.length,r=e.map((e=>`${t}[${e}]`)),i=new Array(n-1);i[n-2]=r[n-1];for(let o=n-3;o>=0;--o)i[o]=`(${i[o+1]} * ${r[o+1]})`;return i}function gM(e,t,n="index"){const r=e.map(((e,t)=>t)),i=mM(r,t);return i.map(((t,r)=>{const o=`int ${e[r]} = ${n} / ${i[r]}`,a=r===i.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * ${i[r]}`:`index -= ${e[r]} * ${i[r]}`;return`${o}; ${a};`})).join("")}function bM(e){const t=W(e).map((e=>e.toString()));return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}function vM(){return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n"}hM.registerFlag("HAS_WEBGL",(()=>hM.getNumber("WEBGL_VERSION")>0)),hM.registerFlag("WEBGL_VERSION",(()=>iM(2)?2:iM(1)?1:0)),hM.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),hM.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===hM.get("WEBGL_VERSION"))),hM.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),hM.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),hM.registerFlag("WEBGL_PACK",(()=>hM.getBool("HAS_WEBGL"))),hM.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>hM.getBool("WEBGL_PACK"))),hM.registerFlag("WEBGL_PACK_CLIP",(()=>hM.getBool("WEBGL_PACK"))),hM.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>hM.getBool("WEBGL_PACK"))),hM.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>hM.getBool("WEBGL_PACK"))),hM.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>hM.getBool("WEBGL_PACK"))),hM.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>hM.getBool("WEBGL_PACK"))),hM.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>hM.getBool("WEBGL_PACK"))),hM.registerFlag("WEBGL_PACK_REDUCE",(()=>hM.getBool("WEBGL_PACK"))),hM.registerFlag("WEBGL_LAZILY_UNPACK",(()=>hM.getBool("WEBGL_PACK"))),hM.registerFlag("WEBGL_CONV_IM2COL",(()=>hM.getBool("WEBGL_PACK"))),hM.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>eM(hM.getNumber("WEBGL_VERSION")))),hM.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>tM(hM.getNumber("WEBGL_VERSION")))),hM.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=hM.getNumber("WEBGL_VERSION");return 0===e?0:nM(e)})),hM.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>hM.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Gi())),hM.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>oM(hM.getNumber("WEBGL_VERSION")))),hM.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!hM.getBool("WEBGL_FORCE_F16_TEXTURES")&&hM.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),hM.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>aM(hM.getNumber("WEBGL_VERSION")))),hM.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>uM(hM.getNumber("WEBGL_VERSION")))),hM.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>{const e=hM.getBool("WEBGL_RENDER_FLOAT32_ENABLED");return e?4:0})),hM.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)})),hM.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>Gi()?1:-1),(e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)})),hM.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),hM.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),hM.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),hM.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128));const yM="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:xM}=o;function wM(e,t,n){const r=[];if(e.forEach((e=>{const t=w(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(r.push(`uniform sampler2D ${e.name};`),r.push(`uniform int offset${e.name};`)),n.enableShapeUniforms){const{uniformShape:t}=uF(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push(`uniform int ${e.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${e.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${e.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${e.name}Shape;`);break;default:break}r.push(`uniform ivec2 ${e.name}TexShape;`)}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break;default:break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{r.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)}));const i=r.join("\n"),o=e.map((e=>SM(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),a=t.texShape,s=dM(),l=OM(s);let u,c,h=EM(s);t.isPacked?(u=CM(t.logicalShape,a,n.enableShapeUniforms),c=NM(s)):(u=IM(t.logicalShape,a,n.enableShapeUniforms),c=TM(s)),n.packedInputs&&(h+=RM);const d=[h,l,c,i,u,o,n.userCode].join("\n");return d}function kM(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return YM(e,t);case 1:return KM(e,t);case 2:return ZM(e,t);case 3:return eF(e,t);case 4:return nF(e,t);case 5:return rF(e);case 6:return iF(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function _M(e,t){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return qM(e);case 1:return XM(e,t);case 2:return JM(e,t);case 3:return QM(e,t);default:return tF(e,t)}}function SM(e,t,n=!1,r){let i="";i+=n?_M(e,r):kM(e,r);const o=e.shapeInfo.logicalShape,a=t.logicalShape;return o.length<=a.length&&(i+=n?aF(e,t):sF(e,t)),i}function CM(e,t,n){switch(e.length){case 0:return MM();case 1:return FM(e,t,n);case 2:return WM(e,t,n);case 3:return jM(e,t,n);default:return LM(e,t,n)}}function IM(e,t,n){switch(e.length){case 0:return MM();case 1:return PM(e,t,n);case 2:return HM(e,t,n);case 3:return BM(e,t,n);case 4:return zM(e,t,n);case 5:return VM(e,t);case 6:return UM(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function OM(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}function TM(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}function NM(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}function EM(e){const t=`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${DM}\n    ${$M}\n    ${AM}\n  `;return t}const DM="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",$M="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",AM="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",RM="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function MM(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function FM(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===r[0]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `:1===r[1]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `:n?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}function PM(e,t,n){return 1===t[0]?n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${t[1]}.0);\n      }\n    `:1===t[1]?n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${t[0]}.0);\n      }\n    `:n?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return resTexRC.x * ${t[1]} + resTexRC.y;\n    }\n  `}function jM(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[2]/2),o=i*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${o};\n      index -= b * ${o};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}function BM(e,t,n){if(n){const t=fM(["r","c","d"],e);return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${t}\n    return ivec3(r, c, d);\n  }\n`}const r=pM(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}function LM(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[e.length-1]/2),o=i*Math.ceil(e[e.length-2]/2);let a=o,s="",l="b, r, c";for(let u=2;u<e.length-1;u++)a*=e[e.length-u-1],s=`\n      int b${u} = index / ${a};\n      index -= b${u} * ${a};\n    `+s,l=`b${u}, `+l;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${s}\n\n      int b = index / ${o};\n      index -= b * ${o};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec${e.length}(${l});\n    }\n  `}function zM(e,t,n){if(n){const t=fM(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${t}\n      return ivec4(r, c, d, d2);\n    }\n  `}const r=pM(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}function VM(e,t){const n=pM(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}function UM(e,t){const n=pM(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}function WM(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(k(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;const i=Math.ceil(e[1]/2);return n?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}function HM(e,t,n){return k(e,t)?n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `:1===e[1]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===e[0]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:n?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}function GM(e){return`offset${e}`}function qM(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=dM();return`\n    vec4 ${n}() {\n      return ${r.texture2D}(${t}, halfCR);\n    }\n  `}function YM(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,o]=e.shapeInfo.texShape;if(1===i&&1===o)return`\n      float ${r}() {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const a=GM(n);if(t)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});\n      return sampleTexture(${n}, uv);\n    }\n  `;const[s,l]=e.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${s}, ${l}, ${a});\n      return sampleTexture(${n}, uv);\n    }\n  `}function XM(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,o=dM();if(t)return`\n    vec4 ${r}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${o.texture2D}(${n}, uv);\n    }\n  `;const a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${a[0]}, ${a[1]}, index);\n      return ${o.texture2D}(${n}, uv);\n    }\n  `}function KM(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${oF(e)}\n      }\n    `;const i=e.shapeInfo.texShape,o=i[0],a=i[1];if(1===a&&1===o)return`\n      float ${r}(int index) {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const s=GM(n);return 1===a?t?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${o}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:1===o?t?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${a}.0, 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:t?`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `:`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${o}, ${a}, index + ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `}function JM(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=o[0],s=o[1],l=dM();if(null!=o&&k(n,o))return t?`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `:`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${a}.0);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `;if(t)return`\n    vec4 ${i}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `;const u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=Math.ceil(n[1]/2);return`\n    vec4 ${i}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `}function ZM(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&k(n,o)){if(t)return`\n      float ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `;const e=o[0],n=o[1];return`\n    float ${i}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${n}.0, ${e}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `}const{newShape:a,keptDims:s}=N(n),l=a;if(l.length<n.length){const n=cF(e,l),r=["row","col"];return`\n      ${kM(n,t)}\n      float ${i}(int row, int col) {\n        return ${i}(${hF(r,s)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${oF(e)}\n      }\n    `;const u=o[0],c=o[1],h=GM(r);return 1===c?t?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `:1===u?t?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `:t?`\n      float ${i}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r}Shape[1] + col + ${h};\n        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n  float ${i}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${h};\n    vec2 uv = uvFromFlat(${u}, ${c}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}function QM(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){const r=n.slice(1),o=[1,2],a=cF(e,r),s=["b","row","col"];return`\n        ${_M(a,t)}\n        vec4 ${i}(int b, int row, int col) {\n          return ${i}(${hF(s,o)});\n        }\n      `}const s=dM();if(t)return`\n    vec4 ${i}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${s.texture2D}(${r}, uv);\n    }\n  `;const l=a[0],u=a[1],c=Math.ceil(n[2]/2),h=c*Math.ceil(n[1]/2);return`\n    vec4 ${i}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${l}, ${u}, ${h}, ${c}, b, row, col);\n      return ${s.texture2D}(${r}, uv);\n    }\n  `}function eF(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],a=n[2],{newShape:s,keptDims:l}=N(n),u=s;if(u.length<n.length){const n=cF(e,u),r=["row","col","depth"];return`\n        ${kM(n,t)}\n        float ${i}(int row, int col, int depth) {\n          return ${i}(${hF(r,l)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${o}, ${a}, 1)));\n        ${oF(e)}\n      }\n    `;const c=e.shapeInfo.texShape,h=c[0],d=c[1],p=e.shapeInfo.flatOffset;if(d===o&&null==p)return t?`\n      float ${i}(int row, int col, int depth) {\n        int stride1 = ${r}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n        float ${i}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${a}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${h}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `;if(d===a&&null==p)return t?`\n      float ${i}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${h}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;const f=GM(r);return t?`\n    float ${i}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${r}Shape[1] * ${r}Shape[2];\n      int stride1 = ${r}Shape[2];\n      int index = row * ${o} + col * ${a} + depth + ${f};\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n      return sampleTexture(${r}, uv);\n    }\n    `:`\n      float ${i}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${o} + col * ${a} + depth + ${f};\n        vec2 uv = uvFromFlat(${h}, ${d}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}function tF(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=dM();if(t)return`\n    vec4 ${r}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${n}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);\n    }\n  `;const o=e.shapeInfo.logicalShape,a=o.length,s=e.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=l[0],c=l[1],h=Math.ceil(o[a-1]/2);let d=h*Math.ceil(o[a-2]/2),p="int b, int row, int col",f=`b * ${d} + (row / 2) * ${h} + (col / 2)`;for(let m=2;m<a-1;m++)p=`int b${m}, `+p,d*=o[a-m-1],f=`b${m} * ${d} + `+f;return`\n    vec4 ${r}(${p}) {\n      int index = ${f};\n      int texR = index / ${c};\n      int texC = index - texR * ${c};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});\n      return ${i.texture2D}(${n}, uv);\n    }\n  `}function nF(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],a=n[2]*o,s=n[1]*a,{newShape:l,keptDims:u}=N(n);if(l.length<n.length){const n=cF(e,l),r=["row","col","depth","depth2"];return`\n      ${kM(n,t)}\n      float ${i}(int row, int col, int depth, int depth2) {\n        return ${i}(${hF(r,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${s}, ${a}, ${o}, 1)));\n        ${oF(e)}\n      }\n    `;const c=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1],f=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(p===s&&null==c)return t?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        ${f}\n        ${m}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${a}, ${o}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;if(p===o&&null==c)return t?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;const b=GM(r);return t?`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${f}\n      ${m}\n      ${g}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${b});\n      return sampleTexture(${r}, uv);\n    }\n  `:`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${a} +\n          depth * ${o} + depth2;\n      vec2 uv = uvFromFlat(${d}, ${p}, index + ${b});\n      return sampleTexture(${r}, uv);\n    }\n  `}function rF(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],o=t[3]*i,a=t[2]*o,s=t[1]*a,{newShape:l,keptDims:u}=N(t);if(l.length<t.length){const t=cF(e,l),n=["row","col","depth","depth2","depth3"];return`\n      ${kM(t)}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${hF(n,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${s}, ${a}, ${o}, ${i})) +\n          depth3;\n        ${oF(e)}\n      }\n    `;const c=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1];if(p===s&&null==c)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${a}, ${o}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(p===i&&null==c)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const f=GM(n);return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${a} + depth * ${o} +\n          depth2 * ${i} + depth3 + ${f};\n      vec2 uv = uvFromFlat(${d}, ${p}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}function iF(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:o}=N(t);if(i.length<t.length){const t=cF(e,i),n=["row","col","depth","depth2","depth3","depth4"];return`\n      ${kM(t)}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${hF(n,o)});\n      }\n    `}const a=t[5],s=t[4]*a,l=t[3]*s,u=t[2]*l,c=t[1]*u;if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${c}, ${u}, ${l}, ${s})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${a}, 1)));\n        ${oF(e)}\n      }\n    `;const h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1];if(f===c&&null==h)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${u}, ${l}, ${s}, ${a})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(f===a&&null==h)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const m=GM(n);return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${c} + col * ${u} + depth * ${l} +\n          depth2 * ${s} + depth3 * ${a} + depth4 + ${m};\n      vec2 uv = uvFromFlat(${p}, ${f}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}function oF(e){const t=e.name,n=w(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function aF(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=e.shapeInfo.logicalShape.length,a=t.logicalShape.length,s=xM(e.shapeInfo.logicalShape,t.logicalShape),l=lF(a),u=a-o;let c;const h=["x","y","z","w","u","v"];c=0===o?"":a<2&&s.length>=1?"coords = 0;":s.map((e=>`coords.${h[e+u]} = 0;`)).join("\n");let d="";d=a<2&&o>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${h[t+u]}`)).join(", ");let p="return outputValue;";const f=w(e.shapeInfo.logicalShape),m=1===f,g=w(t.logicalShape),b=1===g;if(1!==o||m||b){if(m&&!b)p=1===a?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const e=o-2,t=o-1;s.indexOf(e)>-1&&s.indexOf(t)>-1?p="return vec4(outputValue.x);":s.indexOf(e)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(t)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${i}() {\n      ${l} coords = getOutputCoords();\n      ${c}\n      vec4 outputValue = get${r}(${d});\n      ${p}\n    }\n  `}function sF(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=t.texShape,a=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===l&&null==e.shapeInfo.flatOffset&&k(a,o))return`\n      float ${i}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const u=lF(l),c=xM(e.shapeInfo.logicalShape,t.logicalShape),h=l-s;let d;const p=["x","y","z","w","u","v"];d=0===s?"":l<2&&c.length>=1?"coords = 0;":c.map((e=>`coords.${p[e+h]} = 0;`)).join("\n");let f="";return f=l<2&&s>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${p[t+h]}`)).join(", "),`\n    float ${i}() {\n      ${u} coords = getOutputCoords();\n      ${d}\n      return get${r}(${f});\n    }\n  `}function lF(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function uF(e,t,n){const{newShape:r,keptDims:i}=N(t),o=t.length,a=e&&3===o&&1===t[0],s=a?t.slice(1):r,l=!e&&o>1&&!k(t,n)&&r.length<o||a,u=l?s:t;return{useSqueezeShape:l,uniformShape:u,keptDims:i}}function cF(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function hF(e,t){return t.map((t=>e[t])).join(", ")}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function dF(e,t,n,r){const i=n.map(((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=i.map((e=>e.shapeInfo)),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=wM(i,a,t),l=SR(e.gl,s),u=e.createProgram(l);return oe().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:o,outShapeInfo:a,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:o,outShapeInfo:a},pF(e,t,u))}function pF(e,t,n){const r={},i={},o={},a=[];let s,l,u,c=null,h=null;h=e.getUniformLocation(n,"NAN",!1),1===oe().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(n,"INFINITY",!1));const d=!1;for(let p=0;p<t.variableNames.length;p++){const a=t.variableNames[p];r[a]=e.getUniformLocation(n,a,d),r[`offset${a}`]=e.getUniformLocation(n,`offset${a}`,d),t.enableShapeUniforms&&(i[`${a}Shape`]=e.getUniformLocation(n,`${a}Shape`,d),o[`${a}TexShape`]=e.getUniformLocation(n,`${a}TexShape`,d))}return t.enableShapeUniforms&&(s=e.getUniformLocation(n,"outShape",d),u=e.getUniformLocation(n,"outShapeStrides",d),l=e.getUniformLocation(n,"outTexShape",d)),t.customUniforms&&t.customUniforms.forEach(((t,r)=>{a[r]=e.getUniformLocation(n,t.name,d)})),{uniformLocations:r,customUniformLocations:a,infLoc:c,nanLoc:h,inShapesLocations:i,inTexShapesLocations:o,outShapeLocation:s,outShapeStridesLocation:u,outTexShapeLocation:l}}function fF(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach(((e,n)=>{const r=e.logicalShape,i=t[n],o=i.shape;if(!k(r,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${o} must match`);if(e.isUniform&&i.isUniform)return;const a=e.texShape,s=i.isUniform?null:i.texData.texShape;if(!k(a,s))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${s} must match`)}))}function mF(e,t,n,r,i){t.program.enableShapeUniforms||(fF(t.inShapeInfos,n),fF([t.outShapeInfo],[r]));const o=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o.texture,a[0],a[1]):e.setOutputMatrixTexture(o.texture,a[0],a[1]),e.setProgram(t.webGLProgram),1===oe().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach(((n,r)=>{const i=t.program.variableNames[r],o=t.uniformLocations[i],a=t.uniformLocations[`offset${i}`],s=t.inShapesLocations[`${i}Shape`],l=t.inTexShapesLocations[`${i}TexShape`];if(s){const{uniformShape:r}=uF(t.program.packedInputs,n.shape,n.texData.texShape);switch(r.length){case 1:e.gl.uniform1iv(s,new Int32Array(r));break;case 2:e.gl.uniform2iv(s,new Int32Array(r));break;case 3:e.gl.uniform3iv(s,new Int32Array(r));break;case 4:e.gl.uniform4iv(s,new Int32Array(r));break;default:break}}if(l&&e.gl.uniform2i(l,n.texData.texShape[0],n.texData.texShape[1]),null!=o)if(n.isUniform)if(w(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{let t=n.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(o,t)}else null!=n.texData.slice&&null!=a&&e.gl.uniform1i(a,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,o,r)}));const s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape));break;default:break}if(t.outShapeStridesLocation){const n=W(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n));break;default:break}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&i&&t.program.customUniforms.forEach(((n,r)=>{const o=t.customUniformLocations[r],a=i[r];if("float"===n.type)e.gl.uniform1fv(o,a);else if("vec2"===n.type)e.gl.uniform2fv(o,a);else if("vec3"===n.type)e.gl.uniform3fv(o,a);else if("vec4"===n.type)e.gl.uniform4fv(o,a);else if("int"===n.type)e.gl.uniform1iv(o,a);else if("ivec2"===n.type)e.gl.uniform2iv(o,a);else if("ivec3"===n.type)e.gl.uniform3iv(o,a);else{if("ivec4"!==n.type)throw Error(`uniform type ${n.type} is not supported yet.`);e.gl.uniform4iv(o,a)}})),e.executeProgram()}function gF(e,t,n){let r="";t.concat(n).forEach((t=>{const i=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const o=t.texData.texShape,{useSqueezeShape:a,uniformShape:s,keptDims:l}=uF(e.packedInputs,t.shape,o);let u="",c="",h="";if(1===s.length&&e.packedInputs){const e=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];u=`${e[0]>1}_${e[1]>1}`}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){const e=W(s);h=`${e[0]===o[1]}_${e[e.length-1]===o[1]}`}}else c=`${s[0]>1}_${s[1]>1}`;const d=t.shape.length,p=2===s.length&&k(t.shape,o),f=1===w(t.shape),m=wa(t.shape,n.shape),g=!e.packedInputs&&d===n.shape.length&&k(o,n.texData.texShape),b=e.packedInputs||s.length>2?"":`${o[0]>1}_${o[1]>1}`;r+=`${d}_${g}_${a?l:""}_${s.length}_${f}_${m}_${p}_${u}_${c}_${h}_${b}_${i}`}else{const e=t.isUniform?"uniform":t.texData.texShape;r+=`${t.shape}_${e}_${i}`}}));const i=e.userCode;let o=e.constructor.name;return o+="_"+r+"_"+i+`${oe().getNumber("WEBGL_VERSION")}`,o}function bF(e){return oe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class vF{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=sR.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=dM();this.outputShape=e,this.enableShapeUniforms=bF(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?fM(["r","c","d"],e):pM(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${t.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class yF{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=sR.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=dM();this.outputShape=e,this.enableShapeUniforms=bF(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?fM(["r","c","d"],e):pM(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${t.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class xF{constructor(e){this.variableNames=["A"],this.outTexUsage=lR.DOWNLOAD;const t=dM();this.outputShape=e,this.userCode=`\n      ${yM}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class wF{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=lR.DOWNLOAD;const t=dM();this.outputShape=e,this.userCode=`\n      ${yM}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class kF{constructor(e,t=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=dM();this.outputShape=e,this.enableShapeUniforms=bF(this.outputShape.length);let r="result";t&&(r="floor(result * 255. + 0.5)"),this.userCode=`\n      ${this.enableShapeUniforms?vM():bM(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ${n.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${n.output} = vec4(${r}, 0., 0., 0.);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class _F{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=dM();this.outputShape=e,this.enableShapeUniforms=bF(this.outputShape.length);let r="",i="result";t&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let t=0;t<=1;t++){const i=2*o+t;r+=`\n          localCoords = coords;\n          if(localCoords[2] + ${t} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {\n          localCoords[2] += ${t};\n          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {\n            localCoords[1] += ${o};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${n.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${i}] = values[0];\n            } else if (offset == 1) {\n              result[${i}] = values[1];\n            } else if (offset == 2) {\n              result[${i}] = values[2];\n            } else {\n              result[${i}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?vM():bM(e)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${r}\n\n          ${n.output} = ${i};\n        }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function SF(e){const t=dM(),n=`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`;return _R(e,n)}function CF(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return ER(e,t)}function IF(e){const t=new Uint16Array([0,1,2,2,1,3]);return DR(e,t)}function OF(e,t,n,r,i,o){AR(t,n);const a=$R(e),s=e.TEXTURE_2D;return gR(e,(()=>e.bindTexture(s,a))),gR(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),gR(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),gR(e,(()=>e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST))),gR(e,(()=>e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===oe().getNumber("WEBGL_VERSION")?gR(e,(()=>e.texImage2D(s,0,r,t,n,0,i,o,null))):gR(e,(()=>e.texStorage2D(s,1,r,t,n))),gR(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:a,texShape:[n,t]}}function TF(e){return e.internalFormatFloat}function NF(e,t,n,r){const[i,o]=cR(t,n);return OF(e,i,o,TF(r),r.textureFormatFloat,e.FLOAT)}function EF(e){return e.internalFormatHalfFloat}function DF(e,t,n,r){const[i,o]=cR(t,n);return OF(e,i,o,EF(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function $F(e){return e.downloadTextureFormat}function AF(e,t,n,r){const[i,o]=cR(t,n);return OF(e,i,o,$F(r),e.RGBA,e.UNSIGNED_BYTE)}function RF(e){return e.internalFormatPackedFloat}function MF(e,t,n,r){const[i,o]=pR(t,n);return OF(e,i,o,RF(r),e.RGBA,e.FLOAT)}function FF(e){return e.internalFormatPackedHalfFloat}function PF(e,t,n,r){const[i,o]=pR(t,n);return OF(e,i,o,FF(r),e.RGBA,r.textureTypeHalfFloat)}function jF(e,t,n){const r=0,i=12,o=20;gR(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n)));const a=MR(e,t,"clipSpacePos",n,3,o,r);return a&&MR(e,t,"uv",n,2,o,i)}function BF(e,t,n,r,i,o){let a,s,l;gR(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),i instanceof Uint8Array?(a=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,l=e.RGBA):(a=new Float32Array(n*r*4),s=e.FLOAT,l=o.internalFormatPackedFloat),a.set(i),2===oe().getNumber("WEBGL_VERSION")?gR(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,a))):gR(e,(()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,s,a))),gR(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}function LF(e,t,n){gR(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===oe().getNumber("WEBGL_VERSION")?gR(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))):gR(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===oe().getNumber("WEBGL_VERSION")?gR(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))):gR(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),gR(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}function zF(e,t,n,r){const i=e.createBuffer();gR(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,i)));const o=4,a=4,s=o*a*t*n;return gR(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,s,e.STREAM_READ))),gR(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),gR(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),i}function VF(e,t,n){const r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function UF(e,t,n,r){const[i,o]=cR(t,n),a=4,s=new Uint8Array(hR(t*n,a));return gR(e,(()=>e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,s))),new Float32Array(s.buffer)}function WF(e,t,n,r,i,o,a,s){const l=e,u=new Float32Array(fR(o,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function HF(e,t,n){const r=new Float32Array(t*n*4);return gR(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r))),r}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class GF{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const t=oe().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,rR(t,e)):this.gl=iR(t);let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===oe().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=kR(this.gl,e),rM(this.gl,t))this.textureHalfFloatExtension=kR(this.gl,t);else if(oe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),rM(this.gl,r))this.colorBufferHalfFloatExtension=kR(this.gl,r);else if(oe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",rM(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!rM(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=CF(this.gl),this.indexBuffer=IF(this.gl),this.framebuffer=RR(this.gl),this.textureConfig=mR(this.gl,this.textureHalfFloatExtension)}get debug(){return oe().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;gR(e,(()=>e.finish())),gR(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),gR(e,(()=>e.deleteFramebuffer(this.framebuffer))),gR(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),gR(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),gR(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),NF(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),DF(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),AF(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),LF(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),BF(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),PF(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),MF(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(zR(this.gl,this.framebuffer),this.outputTexture=null),gR(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>UF(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,r,i,o){return WF(this.gl,e,t,n,r,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return VF(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=zF(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(oe().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(i,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=i}else oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>HF(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=SF(t));const n=OR(t);return gR(t,(()=>t.attachShader(n,this.vertexShader))),gR(t,(()=>t.attachShader(n,e))),TR(t,n),this.debug&&NR(t,n),this.vertexAttrsAreBound||(this.setProgram(n),this.vertexAttrsAreBound=jF(t,this.program,this.vertexBuffer)),n}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&gR(this.gl,(()=>this.gl.deleteProgram(e)))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&NR(this.gl,this.program),gR(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?PR(this.gl,e,t):jR(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),gR(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),BR(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,i]=pR(t,n);this.setOutputMatrixTextureDriver(e,r,i)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&NR(this.gl,this.program),VR(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),gR(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),gR(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=kR(this.gl,2===oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await I((()=>this.disposed||this.isQueryAvailable(e,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl,n=t.getQueryParameter(e,t.QUERY_RESULT);return n/1e6}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT);return n/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=qF(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||I((()=>(this.pollItems(),0===this.itemsToPoll.length)))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),LR(this.gl,e,this.framebuffer),this.debug&&VR(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(LR(this.gl,this.outputTexture,this.framebuffer),this.debug&&VR(this.gl)):zR(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;LR(r,e,this.framebuffer),this.debug&&VR(r),this.outputTexture=e,gR(r,(()=>r.viewport(0,0,t,n))),gR(r,(()=>r.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),gR(this.gl,(()=>this.gl.scissor(e,t,n,r)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function qF(e){let t=0;for(;t<e.length;++t){const n=e[t]();if(!n)break}return t-1}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const{addImpl:YF,bincountImpl:XF,bincountReduceImpl:KF,ceilImpl:JF,concatImpl:ZF,equalImpl:QF,expImpl:eP,expm1Impl:tP,floorImpl:nP,gatherNdImpl:rP,gatherV2Impl:iP,greaterImpl:oP,greaterEqualImpl:aP,lessImpl:sP,lessEqualImpl:lP,linSpaceImpl:uP,logImpl:cP,maxImpl:hP,maximumImpl:dP,minimumImpl:pP,multiplyImpl:fP,negImpl:mP,notEqualImpl:gP,prodImpl:bP,rangeImpl:vP,rsqrtImpl:yP,scatterImpl:xP,sigmoidImpl:wP,simpleAbsImpl:kP,sliceImpl:_P,sparseFillEmptyRowsImpl:SP,sparseReshapeImpl:CP,sparseSegmentReductionImpl:IP,sqrtImpl:OP,stridedSliceImpl:TP,stringNGramsImpl:NP,stringSplitImpl:EP,stringToHashBucketFastImpl:DP,subImpl:$P,tileImpl:AP,topKImpl:RP,transposeImpl:MP,uniqueImpl:FP}=a;
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function PP(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>`${e}.${t}`))}function jP(e,t){return 1===t?[e]:PP(e,t)}function BP(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class LP{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=bF(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=jP("rc",this.rank),t=lF(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),i=this.getOutput(e);this.userCode=`\n        void main() {\n          ${t} rc = getOutputCoords();\n\n          if(${n}) {\n            setOutput(vec4(0));\n          } else {\n            ${r}\n\n            setOutput(vec4(${i}));\n          }\n        }\n      `}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let i=`${0===n?"r":"rp1"}, ${0===r?"c":"cp1"}`;for(let t=2;t<this.rank;t++)i=`${e[e.length-1-t]},`+i;t.push(i)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let n=this.rank-2;n<this.rank;n++)t+=`${e[n]} >= ${this.enableShapeUniforms?`outShape[${n}]`:this.outputShape[n]}`,n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`\n      int r = ${t[0]};\n      int c = ${t[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${n};\n      bool rEdge = rp1 >= ${r};\n    `}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){const e=this.enableShapeUniforms?"outShape":this.outputShape[0];return`getA(rc), (rc + 1 >= ${e} ? 0. : getA(rc + 1)), 0, 0`}return`getA(${t[0]}),\n            cEdge ? 0. : getA(${t[1]}),\n            rEdge ? 0. : getA(${t[2]}),\n            rEdge || cEdge ? 0. : getA(${t[3]})`}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class zP{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=bF(this.outputShape.length);let n="";for(let r=0;r<4;r++){let e="thisRC = rc;";r%2===1&&(e+="thisRC.z += 1;"),r>1&&(e+="thisRC.y += 1;"),n+=`\n        ${e}\n        ${r>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${r}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${r>0?"}":""}\n      `}this.userCode=`\n      ${VP(t,this.enableShapeUniforms)}\n      ${this.enableShapeUniforms?vM():bM(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}function VP(e,t){const n=t?gM(["r","c","d"],"inputShape"):pM(["r","c","d"],e);return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${n}\n      return ivec3(r, c, d);\n    }\n  `}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class UP{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,n){const r=YP(t,n),i=XP(e,r,n);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=HP(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const e=this.freeTextures[i].shift();return this.usedTextures[i].push(e),e}let a;return r===uR.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===uR.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===uR.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===uR.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===uR.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const i=YP(n,r),o=XP(t,i,r);o in this.freeTextures||(this.freeTextures[o]=[]);const a=HP(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=oe().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const l=this.usedTextures[o],u=l.indexOf(e);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l.splice(u,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function WP(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function HP(e,t,n,r,i){const o=GP(t,r);let a;if(i){const[t,n]=pR(e[0],e[1]);a=t*n}else{const[t,n]=cR(e[0],e[1]);a=t*n}const s=WP(n,o);return a*s}function GP(e,t){switch(e){case uR.PACKED_2X2_FLOAT32:return RF(t);case uR.PACKED_2X2_FLOAT16:return FF(t);case uR.UNPACKED_FLOAT32:return TF(t);case uR.UNPACKED_FLOAT16:return EF(t);case uR.PACKED_4X1_UNSIGNED_BYTE:return $F(t);default:throw new Error(`Unknown physical texture type ${e}`)}}function qP(e){return oe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?uR.PACKED_2X2_FLOAT32:uR.UNPACKED_FLOAT32:e?uR.PACKED_2X2_FLOAT16:uR.UNPACKED_FLOAT16}function YP(e,t){if(e===lR.UPLOAD)return uR.PACKED_2X2_FLOAT32;if(e===lR.RENDER||null==e)return qP(t);if(e===lR.DOWNLOAD||e===lR.PIXELS)return uR.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function XP(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class KP{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=bF(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const JP="if (isnan(x)) return x;",ZP="return x;",QP="return abs(x);";const ej="return (x >= 0.0) ? x : (exp(x) - 1.0);",tj=JP+"\n  return (x < 0.0) ? 0.0 : x;\n",nj=JP+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",rj="return x;",ij="return 1.0 / (1.0 + exp(-1.0 * x));",oj="return x;",aj="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",sj="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",lj="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",uj="return 1.0 / (1.0 + exp(-1.0 * x));";class cj{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=bF(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class hj{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=bF(this.outputShape.length);const t=e.length,n=jP("rc",t),r=lF(t),i=BP(t,n),o=n.slice(-2),a=t<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${i});\n\n        setOutput(getChannel(packedInput, ${a}));\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const dj=Mf,pj=1e-7,fj=1e-4,mj={};function gj(e){return e in mj||(mj[e]={}),mj[e]}const bj=oe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),vj=600;function yj(){return null==oe().global.screen?1024:oe().global.screen.height*oe().global.screen.width*window.devicePixelRatio*vj/1024/1024}class xj extends c{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!oe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof GF)t=e;else{const n=iR(oe().getNumber("WEBGL_VERSION"),e);t=new GF(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=iR(oe().getNumber("WEBGL_VERSION"));t=new GF(e),this.binaryCache=gj(oe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new UP(this.gpgpu),this.numMBBeforeWarning=yj(),this.texData=new u(this,Ya())}nextDataId(){return xj.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,t,n){if((oe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||oe().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:lR.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){const t=this.texData.get(e);return t.refCount}return 0}incRef(e){const t=this.texData.get(e);t.refCount++}decRef(e){if(this.texData.has(e)){const t=this.texData.get(e);t.refCount--}}move(e,t,n,r,i){if(oe().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:lR.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:i,slice:o,shape:a,isPacked:s}=t;if(null!=o){let t;t=s?new cj(a,rj):new KP(a,rj);const n=this.runWebGLProgram(t,[{dataId:e,shape:a,dtype:r}],r),i=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const l=null!=this.activeTimers;let u,c;if(l&&(u=Jr()),"complex64"===r){const e=this.readSync(i.real.dataId),t=this.readSync(i.imag.dataId);c=Zp(e,t)}else c=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=Jr()-u),this.convertAndCacheOnCPU(e,c)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:r,slice:i,dtype:o,complexTensorInfos:a,isPacked:s}=t;if(null!=i){let t;t=s?new cj(r,rj):new KP(r,rj);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:o}],o),i=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(e);if(oe().getBool("DEBUG")&&!oe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===oe().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,u,c=null;if("complex64"!==o&&oe().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);c=this.gpgpu.createBufferFromTexture(t.texture.texture,...dR(r))}if(this.pendingRead.set(e,[]),"complex64"!==o&&await this.gpgpu.createAndWaitForFence(),"complex64"===o){const e=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),t=e[0],n=e[1];u=Zp(t,n)}else if(null==c)u=this.getValuesFromTexture(e);else{const e=w(r);u=this.gpgpu.downloadFloat32MatrixFromBuffer(c,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=c){const e=this.gpgpu.gl;gR(e,(()=>e.deleteBuffer(c)))}const h=this.convertAndCacheOnCPU(e,u),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach((e=>e(h))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Ya().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,t={}){const n=this.texData.get(e),{values:r,shape:i,slice:o,dtype:a,isPacked:s,texture:l}=n;if("complex64"===a)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=o){let n;n=s?new cj(i,rj):new KP(i,rj);const r=this.runWebGLProgram(n,[{dataId:e,shape:i,dtype:a}],a),o=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),o}if(null==l)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,t.customTexShape),c=Ya().makeTensorFromTensorInfo(u),h=this.texData.get(u.dataId);return Object.assign({tensorRef:c},h.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>Qr(e)));return Zo(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return Zo(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!xR(n)){if(oe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),i=w(t);if(oe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),o=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...dR(t)).subarray(0,i);return this.disposeIntermediateTensorInfo(n),o}const o=oe().getBool("WEBGL_PACK")&&!0===r,a=o?YR(t):t,s=o?new wF(a):new xF(a),l=this.runWebGLProgram(s,[{shape:a,dtype:n,dataId:e}],"float32"),u=this.texData.get(l.dataId),c=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(l),c}timerAvailable(){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const i=x(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),o=x(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,r&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(i);a["kernelMs"]=g(e),a["getExtraProfileInfo"]=()=>e.map(((e,t)=>({name:o[t],ms:e}))).map((e=>`${e.name}: ${e.ms}`)).join(", ")}else a["kernelMs"]={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Jr(),endMs:null}}endTimer(e){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Jr(),e)}async getQueryTime(e){if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:i,isPacked:o,slice:a}=this.texData.get(e),s=a&&a.origDataId||e,l=this.dataRefCount.get(s);l>1?this.dataRefCount.set(s,l-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,i,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=bj){return oe().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&w(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){yr("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return dj(e.shape,t)}packedUnaryOp(e,t,n){const r=new cj(e.shape,t),i=this.compileAndRun(r,[e],n);return Ya().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=kP(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(oe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,QP,e.dtype);const t=new KP(e.shape,QP),n=this.compileAndRun(t,[e]);return Ya().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&j(n[0])){const i=n.map((e=>Zr(e)));r=this.write(i,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return Ya().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new hj(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new LP(e.shape),n=!0;return this.runWebGLProgram(t,[e],e.dtype,null,n)}packedReshape(e,t){const n=[GR(e.shape),...qR(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},i=[GR(t),...qR(t)],o=new zP(i,n),a=!0,s=[n],l=this.runWebGLProgram(o,[r],e.dtype,s,a);return{dataId:l.dataId,shape:t,dtype:l.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:i,dtype:o}=n;if(null!=t){const e=w(i),n=t[0]*t[1]*4;b(e<=n,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."))}const a=YR(i);let s;s=r?new yF(a):new vF(a);const l=!0,u=[null!=t?t:dR(a)],c=this.runWebGLProgram(s,[{shape:a,dtype:o,dataId:e}],o,u,l,t);return{dtype:o,shape:i,dataId:c.dataId}}runWebGLProgram(e,t,n,r,i=!1,o){const a=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(a.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===sR.DENSE){const t=null!=o?o:dR(e.outputShape);s.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===w(a.shape))return s.values=E(a.dtype,0),a;const l=[],u=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&w(t.shape)<=oe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!JR(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),l.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(a.dataId);const c={shape:a.shape,texData:s,isUniform:!1},h=gF(e,u,c),d=this.getAndSaveBinary(h,(()=>dF(this.gpgpu,e,u,c))),p=null!=this.activeTimers;let f;p&&(f=this.startTimer()),oe().get("ENGINE_COMPILE_ONLY")||mF(this.gpgpu,d,u,c,r),l.forEach((e=>this.disposeIntermediateTensorInfo(e))),p&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const m=oe().get("WEBGL_FLUSH_THRESHOLD");if(m>0){const e=Jr();e-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!oe().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===i){const e=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),e}return a}compileAndRun(e,t,n,r,i=!1){n=n||t[0].dtype;const o=this.runWebGLProgram(e,t,n,r,i);return o}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!oe().getBool("IS_TEST")){const e=Object.keys(this.binaryCache);e.forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Ka((()=>{if(!oe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=oe().getBool("DEBUG");oe().set("DEBUG",!1);const t=this.abs(rs(1e-8)).dataSync()[0];if(oe().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?pj:fj}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:i,texture:o,usage:a,isPacked:s}=t;if(null!=o)return;const l=null!=this.activeTimers;let u;l&&(u=Jr());let c=t.texShape;if(null==c&&(c=XR(n,s),t.texShape=c),null!=i){const e=YR(n);let o,a=c[1],h=c[0];const d=i instanceof Uint8Array||i instanceof Uint8ClampedArray;!s&&d||([a,h]=pR(c[0],c[1])),o=s?new _F(e,d):new kF(e,d);const p=d?[h,a]:c,f=this.makeTensorInfo(p,r),m=this.texData.get(f.dataId);m.usage=d?lR.PIXELS:lR.UPLOAD,m.texShape=p,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),a,h,i);const g=[[h,a]],b=!0,v=this.runWebGLProgram(o,[f],r,g,b),y=this.texData.get(v.dataId);t.texShape=y.texShape,t.isPacked=y.isPacked,t.usage=y.usage,oe().get("ENGINE_COMPILE_ONLY")?this.disposeData(v.dataId):(t.texture=y.texture,t.values=null,this.texData.delete(v.dataId)),this.disposeIntermediateTensorInfo(f),l&&(this.uploadWaitMs+=Jr()-u)}else{const e=this.acquireTexture(c,a,r,s);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return this.releaseGPUData(e),null!=t&&(n.values=wj(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*F(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(n){throw n}}));e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await Np(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw IR(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const[,e]of Object.entries(this.binaryCache)){const{uniformLocations:t,customUniformLocations:n,infLoc:r,nanLoc:i,inShapesLocations:o,inTexShapesLocations:a,outShapeLocation:s,outShapeStridesLocation:l,outTexShapeLocation:u}=pF(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=i,e.inShapesLocations=o,e.inTexShapesLocations=a,e.outShapeLocation=s,e.outShapeStridesLocation=l,e.outTexShapeLocation=u}}}function wj(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error(`Unknown dtype ${t}`)}xj.nextDataId=0;
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
qi()&&Qa("webgl",(()=>new xj),2);const kj="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class _j{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=_a(t,n),this.enableShapeUniforms=bF(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Sj="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n";class Cj{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=_a(t,n);const i=this.outputShape.length;this.enableShapeUniforms=bF(i);let o="";if(r)if(0===i||1===w(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const e=lF(i);if(o=`\n          ${e} coords = getOutputCoords();\n        `,1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=jP("coords",i);this.enableShapeUniforms?o+=`\n            bool nextRowOutOfBounds =\n              (${e[i-2]} + 1) >= outShape[${i} - 2];\n            bool nextColOutOfBounds =\n              (${e[i-1]} + 1) >= outShape[${i} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:o+=`\n            bool nextRowOutOfBounds =\n              (${e[i-2]} + 1) >= ${this.outputShape[i-2]};\n            bool nextColOutOfBounds =\n              (${e[i-1]} + 1) >= ${this.outputShape[i-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${o}\n\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ij(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Oj={kernelName:It,backendName:"webgl",kernelFunc:Ij};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Tj(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,o=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(o.dataId),s=Ij({inputs:{x:r},backend:n}),l=Ij({inputs:{x:i},backend:n});return a.complexTensorInfos={real:s,imag:l},o}const Nj={kernelName:je,backendName:"webgl",kernelFunc:Tj},Ej="return (a < 0.) ? b * a : a;",Dj="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";function $j(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:o}=r,a=n.makeTensorInfo([],"float32",Yr(o,"float32")),s=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Cj(Dj,i.shape,a.shape):new _j(Ej,i.shape,a.shape),l=n.runWebGLProgram(s,[i,a],"float32");return n.disposeIntermediateTensorInfo(a),l}const Aj={kernelName:$t,backendName:"webgl",kernelFunc:$j},Rj="return (a < 0.) ? b * a : a;",Mj="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";function Fj(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t,o=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Cj(Mj,r.shape,i.shape):new _j(Rj,r.shape,i.shape);return n.runWebGLProgram(o,[r,i],"float32")}const Pj={kernelName:mn,backendName:"webgl",kernelFunc:Fj},jj="if (isnan(x)) return x;",Bj="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",Lj="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n";function zj({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:o})=>{const{x:a}=i,s=o,l=r||a.dtype;if(s.shouldExecuteOnCPU([a])&&null!=n){const e=s.texData.get(a.dataId),t=n(e.values,l);return s.makeTensorInfo(a.shape,l,t)}const u=oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t;let c;return c=u?new cj(a.shape,t):new KP(a.shape,e),s.runWebGLProgram(c,[a],l)}}function Vj({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:o}){return({inputs:a,backend:s})=>{const{a:l,b:u}=a,c=s;if(r&&"complex64"===l.dtype){const t=c.texData.get(l.dataId),n=c.texData.get(u.dataId),[r,i]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((t=>{const[n,r]=t,i={dataId:n.dataId,dtype:n.dtype,shape:l.shape},o={dataId:r.dataId,dtype:r.dtype,shape:u.shape},a=new _j(e,l.shape,u.shape);return c.runWebGLProgram(a,[i,o],Ei(n.dtype,r.dtype))})),o=Tj({inputs:{real:r,imag:i},backend:c});return c.disposeIntermediateTensorInfo(r),c.disposeIntermediateTensorInfo(i),o}const h=o||Ei(l.dtype,u.dtype);if(("string"===l.dtype||"string"===u.dtype||c.shouldExecuteOnCPU([l,u]))&&null!=i){const e=c.texData.get(l.dataId).values,t=c.texData.get(u.dataId).values,n="string"===l.dtype?Af(e):e,r="string"===l.dtype?Af(t):t,[o,a]=i(l.shape,u.shape,n,r,h),s=c.makeTensorInfo(a,h),d=c.texData.get(s.dataId);return d.values=o,s}const d=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t;let p;return p=d?new Cj(t,l.shape,u.shape,n):new _j(e,l.shape,u.shape),c.runWebGLProgram(p,[l,u],h)}}function Uj(e,t=!1){if("linear"===e)return t?oj:ZP;if("relu"===e)return t?sj:tj;if("elu"===e)return t?aj:ej;if("relu6"===e)return t?lj:nj;if("prelu"===e)return t?Mj:Rj;if("leakyrelu"===e)return t?Dj:Ej;if("sigmoid"===e)return t?uj:ij;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Wj{constructor(e,t,n,r=!1,i=!1,o=!1,a=null,s=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=bF(this.outputShape.length);const u=r?e[1]:e[2],c=Math.ceil(u/2),h=r?"i * 2, rc.y":"rc.y, i * 2",d=i?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";a&&(m=s?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${a}\n        }`:l?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${a}\n        }`:`vec4 activation(vec4 x) {\n          ${a}\n        }`,g="result = activation(result);");const b=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let v="rc.x",y="rc.x";e[0]<t[0]?v=`int(min(float(rc.x), ${e[0]-1}.))`:t[0]<e[0]&&(y=`int(min(float(rc.x), ${t[0]-1}.))`),this.userCode=`\n      ${m}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${c}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${c}; i++) {\n          int batchA = ${v};\n          int batchB = ${y};\n          vec4 a = getMatrixA(batchA, ${h});\n          vec4 b = getMatrixB(batchB, ${d});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${p[0]} * ${f[0]});\n          result += (${p[1]} * ${f[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${b}\n\n        ${g}\n\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Hj={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class Gj{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=_a(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const qj="return a * b;";function Yj(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,o=Ei(r.dtype,i.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(i.dataId),o=new Gj(Hj.REAL,r.shape,i.shape),a=new Gj(Hj.IMAG,r.shape,i.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:i.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:i.shape}],l=n.runWebGLProgram(o,s,"float32"),u=n.runWebGLProgram(a,s,"float32"),c=Tj({inputs:{real:l,imag:u},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),c}if(n.shouldExecuteOnCPU([r,i])){const e=n.texData.get(r.dataId),t=n.texData.get(i.dataId),[a,s]=fP(r.shape,i.shape,e.values,t.values,o),l=n.makeTensorInfo(s,o),u=n.texData.get(l.dataId);return u.values=a,l}let a;return a=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Cj(qj,r.shape,i.shape):new _j(qj,r.shape,i.shape),n.runWebGLProgram(a,[r,i],o)}const Xj={kernelName:rn,backendName:"webgl",kernelFunc:Yj};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Kj(e,t,n){const r=[GR(e.shape),...qR(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},o=[GR(t),...qR(t)],a=new zP(o,r),s=!0,l=[r],u=n.runWebGLProgram(a,[i],e.dtype,l,s);return{dataId:u.dataId,shape:t,dtype:u.dtype}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Jj(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:o}=r,a=n,s=w(i.shape),l=O(o,s),u=w(l);b(s===u,(()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`));const c=a.texData.get(i.dataId);return!c.isPacked||JR(i.shape,l)||null!==c.texture&&JR(c.shape,l)?(a.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype}):Kj(i,l,a)}const Zj={kernelName:wn,backendName:"webgl",kernelFunc:Jj};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Qj{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:o}=e;this.outputShape=[r,o];const a=4*Math.floor(n/4),s=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l=`sumValue += dot(values * ${_(e)?e.toPrecision(2):e}, ones);`}let u="";i%n>0&&(u=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${u}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${a}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${a};\n        if (${1===s}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class eB{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:o}=e;this.outputShape=[r,o];let a="0.0",s="";"prod"===t?a="1.0":"min"===t?(a="1.0 / 1e-20",s="min"):"max"===t&&(a="-1.0 / 1e-20",s="max");let l=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");const u=4*Math.floor(n/4),c=n%4;let h=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${s}(values, minMaxValue);\n        if (${"min"===t} || ${"max"===t}) {\n          minMaxValue = ${s}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,d="vec4";"all"===t?(a="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(a="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let p="";i%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${a};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${p}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${a});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${2===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${3===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${h}\n        }\n        setOutput(${l});\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function tB(e){const t=[];while(0===t.length||1!==t[t.length-1].outSize){const n=t.length?t[t.length-1].outSize:e[1],r=Ap(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}function nB(e,t,n,r){const i=tB(e.shape);let o=e;for(let a=0;a<i.length;a++){const{inSize:s,windowSize:l,outSize:u}=i[a];let c,h;c="mean"===n?0===a?new Qj({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:u},s):new Qj({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:u}):new eB({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:u},n),h=o,o=r.runWebGLProgram(c,[o],t),h.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(h)}return o}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class rB{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[t[o]];this.outputShape=n,this.rank=n.length;const r=lF(this.rank),i=iB(t);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${i}));\n    }\n    `}}function iB(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let i=0;i<e.length;i++)r[e[i]]=n[i];return r.join()}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class oB{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let u=0;u<n.length;u++)n[u]=e[t[u]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=lF(this.rank),i=PP("rc",this.rank),o=new Array(this.rank);for(let u=0;u<t.length;u++)o[t[u]]=i[u];const a=`vec2(${o.slice(-2).join()})`,s=`++${i[this.rank-1]} < ${n[this.rank-1]}`,l=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${l};\n      if(${s}) {\n        result[1] = ${l};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${l};\n        if(${s}) {\n          result[3] = ${l};\n        }\n      }\n      setOutput(result);\n    }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function aB(e,t,n){const r=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new oB(e.shape,t):new rB(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function sB(e,t,n,r){const i=t,o=e.shape.length,a=T(i,e.shape);let s=a;const l=Tu(s,o),u=null!=l;let c=e;u&&(c=aB(e,l,r),s=Eu(s.length,o)),Ou("sum",s,o);const[h,d]=Cu(c.shape,s);let p=h;n&&(p=Iu(h,a));const f=w(d),m=w(e.shape),g=m/f,b=Jj({inputs:{x:c},attrs:{shape:[g,f]},backend:r}),v=Di(e.dtype),y=nB(b,v,"sum",r),x=Jj({inputs:{x:y},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(y),u&&r.disposeIntermediateTensorInfo(c),x}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function lB(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;return sB(i,o,a,n)}const uB={kernelName:zn,backendName:"webgl",kernelFunc:lB};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function cB(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{perm:o}=r,a=n,s=i.shape.length,l=new Array(s);for(let c=0;c<l.length;c++)l[c]=i.shape[o[c]];let u;if(a.shouldExecuteOnCPU([i])){const e=a.texData.get(i.dataId),t=e.values,n=MP(t,i.shape,i.dtype,o,l);u=a.makeTensorInfo(l,i.dtype);const r=a.texData.get(u.dataId);r.values=n}else u=aB(i,o,a);return u}const hB={kernelName:lr,backendName:"webgl",kernelFunc:cB},dB=1e3;function pB({a:e,b:t,transposeA:n,transposeB:r,backend:i,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:l=null}){const u=e.shape.length,c=t.shape.length,h=n?e.shape[u-2]:e.shape[u-1],d=r?t.shape[c-1]:t.shape[c-2],p=n?e.shape[u-1]:e.shape[u-2],f=r?t.shape[c-2]:t.shape[c-1],m=e.shape.slice(0,-2),g=t.shape.slice(0,-2),v=w(m),y=w(g),x=_a(e.shape.slice(0,-2),t.shape.slice(0,-2)),k=x.concat([p,f]);b(h===d,(()=>`Error in matMul: inner shapes (${h}) and (${d}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`));const _=n?[v,h,p]:[v,p,h],S=r?[y,f,d]:[y,d,f],C=Jj({inputs:{x:e},backend:i,attrs:{shape:_}}),I=Jj({inputs:{x:t},backend:i,attrs:{shape:S}}),O=[C,I],T=Math.max(v,y),N=n?C.shape[1]:C.shape[2],E=null!=o,D=null!=a,$="leakyrelu"===l,A=null!=l?Uj(l,!0):null,R=E||D||$||null!=A;let M;if((1===p||1===f)&&N>dB&&!1===R){let e=C,t=I;n&&(e=cB({inputs:{x:C},backend:i,attrs:{perm:[0,2,1]}}),O.push(e)),r&&(t=cB({inputs:{x:I},backend:i,attrs:{perm:[0,2,1]}}),O.push(t));const o=1!==f,a=1===f;let s=e;o&&(s=Jj({inputs:{x:e},backend:i,attrs:{shape:[T,N,1]}}),O.push(s));const l=1===f?2:1;let u=t;a&&(u=Jj({inputs:{x:t},backend:i,attrs:{shape:[T,1,N]}}),O.push(u));const c=Yj({inputs:{a:s,b:u},backend:i});M=lB({inputs:{x:c},backend:i,attrs:{axis:l,keepDims:!0}}),O.push(c)}else{const l=Ei(e.dtype,t.dtype),u=new Wj(_,S,[T,p,f],n,r,E,A,D,$),c=[C,I];if(null!=o&&c.push(o),D&&c.push(a),$){const e=i.makeTensorInfo([],"float32",Yr(s,"float32"));c.push(e),O.push(e)}M=i.runWebGLProgram(u,c,l)}const F=Jj({inputs:{x:M},backend:i,attrs:{shape:k}});O.push(M);for(const b of O)i.disposeIntermediateTensorInfo(b);return F}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function fB(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o,bias:a,preluActivationWeights:s}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:h}=r;return pB({a:i,b:o,transposeA:l,transposeB:u,backend:n,bias:a,preluActivationWeights:s,leakyreluAlpha:h,activation:c})}const mB={kernelName:gr,backendName:"webgl",kernelFunc:fB},gB="return abs(x);";function bB(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=kP(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let i;return i=oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new cj(r.shape,gB):new KP(r.shape,gB),n.runWebGLProgram(i,[r],r.dtype)}const vB={kernelName:de,backendName:"webgl",kernelFunc:bB},yB=JP+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",xB=zj({opSnippet:yB}),wB={kernelName:pe,backendName:"webgl",kernelFunc:xB},kB=JP+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));",_B=zj({opSnippet:kB}),SB={kernelName:fe,backendName:"webgl",kernelFunc:_B},CB="return a + b;",IB=Vj({opSnippet:CB,packedOpSnippet:CB,supportsComplex:!0,cpuKernelImpl:YF}),OB={kernelName:me,backendName:"webgl",kernelFunc:IB};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class TB{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`float v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class NB{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function EB(e){const{inputs:t,backend:n}=e,r=t;if(1===r.length)return Ij({inputs:{x:r[0]},backend:n});if(r.length>oe().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const e=Math.floor(r.length/2),t=EB({inputs:r.slice(0,e),backend:n}),i=EB({inputs:r.slice(e),backend:n});return EB({inputs:[t,i],backend:n})}const i=r.map((e=>e.dtype)).reduce(((e,t)=>Ei(e,t))),o=r.map((e=>e.shape)),a=oe().getBool("WEBGL_PACK"),s=a?new NB(r[0].shape,o):new TB(r[0].shape,o);return n.runWebGLProgram(s,r,i)}const DB={kernelName:ge,backendName:"webgl",kernelFunc:EB};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function $B(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=i.shape.length,l=T(o,i.shape);let u=l;const c=Tu(u,s);let h=i;null!=c&&(h=cB({inputs:{x:i},backend:n,attrs:{perm:c}}),u=Eu(u.length,s)),Ou("all",u,s);const[d,p]=Cu(h.shape,u),f=w(p),m=Jj({inputs:{x:h},backend:n,attrs:{shape:[-1,f]}}),g=nB(m,m.dtype,"all",n);let b;if(a){const e=Iu(d,l);b=Jj({inputs:{x:g},backend:n,attrs:{shape:e}})}else b=Jj({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(h),b}const AB={kernelName:be,backendName:"webgl",kernelFunc:$B};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function RB(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=i.shape.length,l=T(o,i.shape);let u=l;const c=Tu(u,s);let h=i;null!=c&&(h=cB({inputs:{x:i},backend:n,attrs:{perm:c}}),u=Eu(u.length,s)),Ou("any",u,s);const[d,p]=Cu(h.shape,u),f=w(p),m=Jj({inputs:{x:h},backend:n,attrs:{shape:[-1,f]}}),g=nB(m,m.dtype,"any",n);let b;if(a){const e=Iu(d,l);b=Jj({inputs:{x:g},backend:n,attrs:{shape:e}})}else b=Jj({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(h),b}const MB={kernelName:ve,backendName:"webgl",kernelFunc:RB};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class FB{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:i,outSize:o}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const a="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${s};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${a} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class PB{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,b(e.length>2,(()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`));const i=e[e.length-1],o=Math.ceil(i/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");const a=this.outputShape,s=a.length,l=lF(s),u=jP("coords",s);let c,h;if(1===o){h=s+1;const e=lF(h);c=`\n        ${e} sourceLocR = ${e}(${u.join()}, 0);\n        ++${u[s-1]};\n        ${e} sourceLocG = ${e}(${u.join()}, 0);\n        ++${u[s-2]};\n        ${e} sourceLocA = ${e}(${u.join()}, 0);\n        --${u[s-1]};\n        ${e} sourceLocB = ${e}(${u.join()}, 0);\n        --${u[s-2]};`}else h=s,c=`\n        ${l} sourceLocR = coords;\n        ++${u[s-1]};\n        ${l} sourceLocG = coords;\n        ++${u[s-2]};\n        ${l} sourceLocA = coords;\n        --${u[s-1]};\n        ${l} sourceLocB = coords;\n        --${u[s-2]};`;const d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],f=d.map((e=>"int "+e)),m=jP("sourceLocR",h-1).concat("inIdx.r"),g=jP("sourceLocG",h-1).concat("inIdx.g"),v=jP("sourceLocB",h-1).concat("inIdx.b"),y=jP("sourceLocA",h-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${v.join()}),\n                             getBestIndicesAChannel(${y.join()})));`,k=`vec4(\n            getAChannel(${m.join()}),\n            hasNextCol ? getAChannel(${g.join()}) : 0.,\n            hasNextRow ? getAChannel(${v.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${y.join()}) : 0.)`,_=r?"":`\n      float getBestIndicesAChannel(${f.join()}) {\n        return getChannel(getBestIndicesA(${d.join()}),\n                                          vec2(${d.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${f.join()}) {\n        return getChannel(getA(${d.join()}),\n                               vec2(${d.slice(-2).join()}));\n      }\n      ${_}\n      void main() {\n        ${l} coords = getOutputCoords();\n        bool hasNextCol = ${u[s-1]} < ${a[s-1]-1};\n        bool hasNextRow = ${u[s-2]} < ${a[s-2]-1};\n        ${c}\n        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},\n          sourceLocB${p}, sourceLocA${p}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${k};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${w}\n          vec4 candidate = ${k};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${x}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function jB(e,t,n,r=null){let i=t.shape[0],o=t.shape[1];null!=r&&(i=r.shape[0],o=r.shape[1]);const a=Ap(o),s={windowSize:a,inSize:o,batchSize:i,outSize:Math.ceil(o/a)},l=new FB(s,n,null==r),u=[t];null!=r&&u.push(r);const c=e.runWebGLProgram(l,u,"int32");if(1===c.shape[1])return c;const h=jB(e,t,n,c);return e.disposeIntermediateTensorInfo(c),h}function BB(e,t,n,r=null){const i=null!=r?r.shape:t.shape,o=i[i.length-1],a=Ap(o),s=new PB(i,a,n,null==r),l=null==r?[t]:[t,r],u=e.runWebGLProgram(s,l,"int32");if(u.shape.length===t.shape.length){const r=BB(e,t,n,u);return e.disposeIntermediateTensorInfo(u),r}return u}function LB(e,t,n,r){const i=[n];if(Ou("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,t.shape.length),!oe().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],o=e.texData.get(t.dataId),a=null!==o&&o.isPacked;let s=t;a&&(s=e.unpackTensor(t),n.push(s));const[l,u]=Cu(s.shape,i),c=w(u),h=Jj({inputs:{x:s},backend:e,attrs:{shape:[-1,c]}});n.push(h);const d=jB(e,h,r);n.push(d);const p=Jj({inputs:{x:d},backend:e,attrs:{shape:l}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),p}return BB(e,t,r)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zB(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;let a=T(o,i.shape);const s=Tu(a,i.shape.length);let l=i;const u=[];null!=s&&(l=cB({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),a=Eu(a.length,l.shape.length)),Ou("argMax",[a[0]],l.shape.length);const c=LB(n,l,a[0],"max");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}const VB={kernelName:ye,backendName:"webgl",kernelFunc:zB};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function UB(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;let a=T(o,i.shape);const s=Tu(a,i.shape.length);let l=i;const u=[];null!=s&&(l=cB({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),a=Eu(a.length,l.shape.length)),Ou("argMin",[a[0]],l.shape.length);const c=LB(n,l,a[0],"min");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}const WB={kernelName:xe,backendName:"webgl",kernelFunc:UB},HB=JP+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",GB=zj({opSnippet:HB}),qB={kernelName:we,backendName:"webgl",kernelFunc:GB},YB=JP+"return log(x + sqrt(x * x + 1.0));",XB=zj({opSnippet:YB}),KB={kernelName:ke,backendName:"webgl",kernelFunc:XB},JB=JP+"\n  return atan(x);\n",ZB=zj({opSnippet:JB}),QB={kernelName:_e,backendName:"webgl",kernelFunc:ZB},eL=Bj+"\n  return atan(a, b);\n",tL="\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+Lj+"\n  return result;\n",nL=Vj({opSnippet:eL,packedOpSnippet:tL}),rL={kernelName:Ce,backendName:"webgl",kernelFunc:nL},iL=JP+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;",oL=zj({opSnippet:iL}),aL={kernelName:Se,backendName:"webgl",kernelFunc:oL};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class sL{constructor(e,t,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let b="0.0";if(f||(b="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${a}, ${s});\n        const ivec2 pads = ivec2(${d}, ${p});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${c};\n              wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${h};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${t} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?i?m:g:`wR * ${h} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}const v="max";let y=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(y="avgValue / count");const x=4*Math.floor(o/4),w=o%4,k=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ${v}(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${a}, ${s});\n      const ivec2 pads = ivec2(${d}, ${p});\n      const float initializationValue = ${b};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${b});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${c};\n            wR += ${l}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${x}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${k}\n          }\n\n          int xC = xCCorner + ${x};\n          if (${1===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${k}\n          } else if (${2===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${k}\n          } else if (${3===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${k}\n          }\n        }\n        setOutput(${y});\n      }\n    `}}class lL{constructor(e,t,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,s=e.strideHeight,l=e.strideWidth,u=e.dilationDepth,c=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;const v="avg"===t;let y="0.0";if(v||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${a}, ${s}, ${l});\n        const ivec3 pads = ivec3(${m}, ${g}, ${b});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${d};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${p};\n                wR += ${c}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${h}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${t} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}const x="max";let w=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(w="avgValue / count");const k=4*Math.floor(o/4),_=o%4,S=`\n      if (${v}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ${x}(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${a}, ${s}, ${l});\n      const ivec3 pads = ivec3(${m}, ${g}, ${b});\n      const float initializationValue = ${y};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${y});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p};\n            wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${k}; wC += 4) {\n              int xC = xCCorner + wC * ${h};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${h}, ch)\n              );\n\n              ${S}\n            }\n\n            int xC = xCCorner + ${k};\n            if (${1===_}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${S}\n            } else if (${2===_}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${S}\n            } else if (${3===_}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                initializationValue\n              );\n\n              ${S}\n            }\n          }\n          setOutput(${w});\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function uL(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;cM(i,"avgPool");const{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=r,u=1;b(Es(a,u),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`));const c=gs(i.shape,o,a,u,s,l);if(1===c.filterWidth&&1===c.filterHeight&&k(c.inShape,c.outShape))return Ij({inputs:{x:i},backend:n});const h=new sL(c,"avg",!1);return n.runWebGLProgram(h,[i],"float32")}const cL={kernelName:Ie,backendName:"webgl",kernelFunc:uL};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function hL(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],h=bs(i.shape,o,a,c,s,l,u),d=new lL(h,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}const dL={kernelName:Te,backendName:"webgl",kernelFunc:hL};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class pL{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=s-1-e.padInfo.top,c=l-1-e.padInfo.left,h=1/(t*n);this.userCode=`\n      const ivec2 pads = ivec2(${u}, ${c});\n      const float avgMultiplier = float(${h});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${s};\n            wR += ${o}) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${l};\n            wC+= ${a}) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class fL{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=c-1-e.padInfo.front,f=h-1-e.padInfo.top,m=d-1-e.padInfo.left,g=1/(t*n*r);this.userCode=`\n      const ivec3 pads = ivec3(${p}, ${f}, ${m});\n      const float avgMultiplier = float(${g});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${c};\n            wD += ${s}) {\n          float dyD = float(dyDCorner + wD) / ${i}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${h};\n              wR += ${l}) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${d};\n                wC += ${u}) {\n              float dyC = float(dyCCorner + wC) / ${a}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mL(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,a=o,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,h=[1,1,1],d=bs(a.shape,s,l,h,u,c),p=new fL(d);return n.runWebGLProgram(p,[i],a.dtype)}const gL={kernelName:Ne,backendName:"webgl",kernelFunc:mL};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function bL(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,a=o;cM([i,o],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=gs(a.shape,s,l,1,u),h=new pL(c);return n.runWebGLProgram(h,[i],a.dtype)}const vL={kernelName:Oe,backendName:"webgl",kernelFunc:bL};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function yL(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o}=t,{transposeA:a,transposeB:s}=r;return pB({a:i,b:o,transposeA:a,transposeB:s,backend:n})}const xL={kernelName:Ee,backendName:"webgl",kernelFunc:yL};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class wL{constructor(e,t,n,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],_a(e,t),_a(e,n);let a="0.0";null!=r&&(_a(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let s="1.0";null!=i&&(_a(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${a};\n        float scale = ${s};\n        float inv = scale * inversesqrt(variance + float(${o}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class kL{constructor(e,t,n,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],_a(e,t),_a(e,n);let a="vec4(0.0)";null!=r&&(_a(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=i&&(_a(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${a};\n        vec4 scale = ${s};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${o}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const _L=({inputs:e,backend:t,attrs:n})=>{const{x:r,mean:i,variance:o,offset:a,scale:s}=e;b(i.shape.length===o.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),b(null==a||i.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),b(null==s||i.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:l}=n;null==l&&(l=.001);const u=[r,i,o];let c=null;null!=a&&(c=a.shape,u.push(a));let h=null;null!=s&&(h=s.shape,u.push(s));const d=oe().getBool("WEBGL_PACK_NORMALIZATION")?new kL(r.shape,i.shape,o.shape,c,h,l):new wL(r.shape,i.shape,o.shape,c,h,l),p=t.runWebGLProgram(d,u,u[0].dtype);return p},SL={kernelName:wt,backendName:"webgl",kernelFunc:_L};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class CL{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=lF(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=OL(this.rank);let r;const i=e.map(((e,t)=>`sourceLoc.${IL[t]} = start[${t}] + coords.${IL[t]};`));r=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${i.join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${r}\n        setOutput(getSource(${n}));\n      }\n    `}}const IL=["x","y","z","w","u","v"];function OL(e){if(1===e)return"sourceLoc";if(e<=6)return IL.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class TL{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=lF(this.rank),n=jP("coords",this.rank),r=jP("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,o=`getChannel(getSource(${r.join()}), ${i})`,a=`\n      result.x = ${o};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${o};\n        --${r[this.rank-1]};\n      }\n    `,s=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${o};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${o};\n        }\n      }\n    `,l=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map(((e,t)=>`start[${t}]`)).join()});`:e.map(((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`)).join("\n");this.userCode=`\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${l}\n        vec4 result = vec4(0.);\n        ${a}\n        ${s}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function NL(e,t,n,r){const i=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),a=r.texData.get(o.dataId);Object.assign(a,i),a.refCount=1,a.shape=n,a.dtype=e.dtype;let s=Ba(t,W(e.shape));i.slice&&(s+=i.slice.flatOffset),a.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||e.dataId};const l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),o}function EL(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,size:a}=r,[s,l]=La(i,o,a);if(Ia(i,s,l),0===w(l))return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||"string"===i.dtype){const e=n.texData.get(i.dataId),t=_P(e.values,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,t)}const{isPacked:u}=n.texData.get(i.dataId),c=ja(i.shape,s,l);if(u||!c){const e=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new TL(l):new CL(l),t=[s];return n.runWebGLProgram(e,[i],i.dtype,t)}return n.uploadToGPU(i.dataId),NL(i,s,l,n)}const DL={kernelName:Rn,backendName:"webgl",kernelFunc:EL},$L=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,crops:a}=r;b(i.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const s=o.reduce(((e,t)=>e*t)),l=Mp(i.shape,o,s),u=Fp(l.length,o.length),c=Pp(i.shape,o,s),h=jp(a,o.length),d=Bp(c,a,o.length),p=[],f=Jj({inputs:{x:i},backend:n,attrs:{shape:l}}),m=cB({inputs:{x:f},backend:n,attrs:{perm:u}}),g=Jj({inputs:{x:m},backend:n,attrs:{shape:c}}),v=EL({inputs:{x:g},backend:n,attrs:{begin:h,size:d}});return p.push(f),p.push(m),p.push(g),p.forEach((e=>n.disposeIntermediateTensorInfo(e))),v},AL={kernelName:De,backendName:"webgl",kernelFunc:$L};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function RL(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:a}=r,s=n.readSync(i.dataId),l=n.readSync(o.dataId),u=XF(s,l,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,u)}const ML={kernelName:$e,backendName:"webgl",kernelFunc:RL};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function FL(e){const{inputs:t,backend:n}=e,{s0:r,s1:i}=t,o=n.readSync(r.dataId),a=n.readSync(i.dataId),s=_a(Array.from(o),Array.from(a));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const PL={kernelName:Re,backendName:"webgl",kernelFunc:FL},jL="return float(a != b);",BL=Vj({opSnippet:jL,cpuKernelImpl:gP,dtype:"bool"}),LL={kernelName:an,backendName:"webgl",kernelFunc:BL};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zL(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.texData.get(r.dataId);return Ij({inputs:{x:i.complexTensorInfos.real},backend:n})}const VL={kernelName:vn,backendName:"webgl",kernelFunc:zL},UL="return float(int(x));";function WL(e,t){const n=new KP(e.shape,UL),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function HL(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dtype:o}=r;if("complex64"===o){if("complex64"===i.dtype)return Ij({inputs:{x:i},backend:n});const e=zu(i.shape),t=HL({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),r=Tj({inputs:{real:t,imag:e},backend:n});return e.dispose(),n.disposeIntermediateTensorInfo(t),r}if("complex64"===i.dtype){const e=zL({inputs:{input:i},backend:n}),t=HL({inputs:{x:e},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(e),t}if(!R(i.dtype,o)){const e=Ij({inputs:{x:i},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:o}}if("int32"===o)return WL(i,n);if("bool"===o){const e=n.makeTensorInfo([],"bool",E("bool",1)),t={a:i,b:e},r=BL({inputs:t,backend:n});return n.disposeIntermediateTensorInfo(e),r}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${o}`)}const GL={kernelName:Me,backendName:"webgl",kernelFunc:HL},qL="return ceil(x);",YL=zj({opSnippet:qL,packedOpSnippet:qL,cpuKernelImpl:JF}),XL={kernelName:Fe,backendName:"webgl",kernelFunc:YL};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class KL{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class JL{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ZL(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{clipValueMin:o,clipValueMax:a}=r;let s;s=oe().getBool("WEBGL_PACK_CLIP")?new JL(i.shape):new KL(i.shape);const l=[[o],[a]];return n.runWebGLProgram(s,[i],i.dtype,l)}const QL={kernelName:Pe,backendName:"webgl",kernelFunc:ZL};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ez{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function tz(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function nz(e){const{inputs:t,backend:n}=e,{x:r}=t,i=n.texData.get(r.dataId),o=new ez(r.shape),a=[tz(r,i.complexTensorInfos.real),tz(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(o,a,a[0].dtype)}const rz={kernelName:Be,backendName:"webgl",kernelFunc:nz};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class iz{constructor(e){this.outputShape=[],this.outputShape=Dp(e,1),this.variableNames=e.map(((e,t)=>`T${t}`));const t=new Array(e.length-1);t[0]=e[0][1];for(let o=1;o<t.length;o++)t[o]=t[o-1]+e[o][1];const n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<t.length;o++){const e=t[o-1];n.push(`else if (yC < ${t[o]}) setOutput(getT${o}(yR, yC-${e}));`)}const r=t.length,i=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${i}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class oz{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Dp(e,t);const n=this.outputShape,r=n.length,i=lF(r),o=jP("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(((e,t)=>`T${t}`));const s=new Array(e.length-1);s[0]=e[0][t];for(let f=1;f<s.length;f++)s[f]=s[f-1]+e[f][t];const l=a[t],u=a.slice(-2),c=a.join();let h=`if (${l} < ${s[0]}) {\n        return getChannel(\n            getT0(${c}), vec2(${u.join()}));\n        }`;for(let f=1;f<s.length;f++){const e=s[f-1];h+=`\n        if (${l} < ${s[f]}  && ${l} >= ${s[f-1]}) {\n          return getChannel(\n            getT${f}(${az(a,l,e)}),\n            vec2(${az(u,l,e)}));\n        }`}const d=s.length,p=s[s.length-1];h+=`\n        return getChannel(\n          getT${d}(${az(a,l,p)}),\n          vec2(${az(u,l,p)}));`,this.userCode=`\n      float getValue(${a.map((e=>"int "+e))}) {\n        ${h}\n      }\n\n      void main() {\n        ${i} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${o}), 0., 0., 0.);\n\n        ${o[r-1]} = ${o[r-1]} + 1;\n        if (${o[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${o});\n        }\n\n        ${o[r-2]} = ${o[r-2]} + 1;\n        if (${o[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${o});\n        }\n\n        ${o[r-1]} = ${o[r-1]} - 1;\n        if (${o[r-2]} < ${n[r-2]} &&\n            ${o[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${o});\n        }\n        setOutput(result);\n      }\n    `}}function az(e,t,n){const r=e.indexOf(t),i=e.map(((e,t)=>t===r?`${e} - ${n}`:e));return i.join()}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function sz(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.texData.get(r.dataId);return Ij({inputs:{x:i.complexTensorInfos.imag},backend:n})}const lz={kernelName:Tt,backendName:"webgl",kernelFunc:sz};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function uz(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map((e=>zL({inputs:{input:e},backend:n}))),i=e.map((e=>sz({inputs:{input:e},backend:n}))),o=uz(r,t,n),a=uz(i,t,n),s=Tj({inputs:{real:o,imag:a},backend:n});return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),i.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),s}let i=n.shouldExecuteOnCPU(e);if("string"===r&&(i=!0),i){const i=e.map((e=>{const r=w(e.shape.slice(t)),i=[-1,r];return Jj({inputs:{x:e},backend:n,attrs:{shape:i}})})),o=i.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),a=Dp(i.map((e=>e.shape)),1),s=1===i[0].shape[0],l=ZF(o,a,r,s),u=Dp(e.map((e=>e.shape)),t),c=n.makeTensorInfo(u,r,l);return i.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}const o=oe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(e.length>o){const r=[];for(let a=0;a<e.length;a+=o){const i=e.slice(a,a+o);r.push(uz(i,t,n))}const i=uz(r,t,n);for(const e of r)n.disposeIntermediateTensorInfo(e);return i}if(oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){const i=new oz(e.map((e=>e.shape)),t);return n.runWebGLProgram(i,e,r)}const{tensors2D:a,outShape:s}=cz(e,t,n),l=new iz(a.map((e=>e.shape))),u=n.runWebGLProgram(l,a,r);a.forEach((e=>n.disposeIntermediateTensorInfo(e)));const c=Jj({inputs:{x:u},attrs:{shape:s},backend:n});return n.disposeIntermediateTensorInfo(u),c}function cz(e,t,n){const r=Dp(e.map((e=>e.shape)),t),i=e.map((e=>Jj({inputs:{x:e},attrs:{shape:[-1,w(e.shape.slice(t))]},backend:n})));return{tensors2D:i,outShape:r}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function hz(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,o=T(i,t[0].shape)[0],a=Dp(t.map((e=>e.shape)),o);if(0===w(a))return n.makeTensorInfo(a,t[0].dtype,[]);const s=t.filter((e=>w(e.shape)>0));if(1===s.length)return Ij({inputs:{x:s[0]},backend:n});const l=s.map((e=>e.shape));return Ep(l,o),uz(s,o,n)}const dz={kernelName:Le,backendName:"webgl",kernelFunc:hz};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class pz{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,s=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,b=m?2:3,v=m?3:1;let y="",x="";n&&(y=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,x="result = activation(result);");const w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${y}\n\n      const ivec2 strides = ivec2(${s}, ${l});\n      const ivec2 pads = ivec2(${o}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${v}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${b}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${h}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${d}; wC++) {\n            int xC = xCCorner + wC * ${c};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${p}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${p}) *\n                    getW(wR, wC, ${p}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${p}, xR, xC) *\n                    getW(wR, wC, ${p}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2),\n                getW(wR, wC, ${p} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1),\n                  getX(batch, xR, xC, ${p} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC),\n                  getX(batch, ${p} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${w}\n        ${x}\n        setOutput(result);\n      }\n    `}}class fz{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterDepth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${i}, ${o}, ${a});\n      const ivec3 pads = ivec3(${t}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${c}; wF++) {\n          int xF = xFCorner + wF * ${s};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h}; wR++) {\n            int xR = xRCorner + wR * ${l};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${p}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${p}) *\n                  getW(wF, wR, wC, ${p}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1),\n                  getX(batch, xF, xR, xC, ${p} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2),\n                  getW(wF, wR, wC, ${p} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class mz{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=bF(this.outputShape.length);const{dataFormat:n}=t,r=dM(),i="channelsLast"===n,o=i?1:2,a=i?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let l="";for(let u=0;u<=1;u++)for(let e=0;e<=1;e++)l+=`\n          blockIndex = rc.z + ${e};\n          pos = rc.y + ${u};\n\n          ${s}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${o}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${a}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${i}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*u+e}] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*u+e}] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${l}\n\n        ${r.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function gz(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function bz({x:e,filter:t,convInfo:n,backend:r,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:s=null}){const l=e.shape,u=r.texData.get(e.dataId),c=n.inChannels,h=l[0]*l[1]*l[2],d=n.outChannels,p="channelsLast"===n.dataFormat,f=!1,m=!1;let g;const v=[];if(null!=o){const e=gz(o.shape,p);null!=e&&(o=Jj({inputs:{x:o},backend:r,attrs:{shape:e}}),v.push(o))}if(null!=i){const e=gz(i.shape,p);null!=e&&(i=Jj({inputs:{x:i},backend:r,attrs:{shape:e}}),v.push(i))}const y=(1===h||1===d)&&c>dB,x=!y&&u.isPacked&&p&&null!=u.texture&&l[2]%2!==0&&k(u.shape.slice(-3),l.slice(-3));if(x){const c=l[0]*l[1]*(l[2]+1),h={dataId:e.dataId,shape:[1,c,n.inChannels],dtype:e.dtype},d=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,b(JR(u.shape,h.shape),(()=>`packed reshape ${u.shape} to ${h.shape} isn't free`));const p=Jj({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(p);const y=pB({a:h,b:p,backend:r,transposeA:f,transposeB:m,bias:i,activation:s,preluActivationWeights:o,leakyreluAlpha:a}),x=r.texData.get(y.dataId);b(x.isPacked,(()=>"batchMatMul result is expected to be packed")),u.shape=d,x.shape=n.outShape,g=Ij({inputs:{x:y},backend:r}),g.shape=n.outShape,v.push(y)}else{const l=n.outHeight*n.outWidth,u=Jj({inputs:{x:e},backend:r,attrs:{shape:p?[n.batchSize,l,n.inChannels]:[n.batchSize,n.inChannels,l]}}),c=Jj({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),h=pB({a:p?u:c,b:p?c:u,transposeA:!p,transposeB:m,backend:r,bias:i,activation:s,preluActivationWeights:o,leakyreluAlpha:a});g=Jj({inputs:{x:h},backend:r,attrs:{shape:n.outShape}}),v.push(u),v.push(c),v.push(h)}for(const b of v)r.disposeIntermediateTensorInfo(b);return g}function vz({x:e,filter:t,convInfo:n,backend:r,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:s=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:h,outHeight:d,dataFormat:p}=n,f="channelsLast"===p,m=l*u*c,g=d*h,b=[n.batchSize,m,g],v=!0,y=!1,x=[];if(null!=o){const e=gz(o.shape,f);null!=e&&(o=Jj({inputs:{x:o},backend:r,attrs:{shape:e}}),x.push(o))}if(null!=i){const e=gz(i.shape,f);null!=e&&(i=Jj({inputs:{x:i},backend:r,attrs:{shape:e}}),x.push(i))}const k=Jj({inputs:{x:t},backend:r,attrs:{shape:[1,m,w(t.shape)/m]}});x.push(k);const _=new mz(b,n),S=[e.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],C=r.runWebGLProgram(_,[e],"float32",S),I=Jj({inputs:{x:C},backend:r,attrs:{shape:b}});x.push(C),x.push(I);const O=null!=i,T=null!=o,N="leakyrelu"===s,E=s?Uj(s,!0):null,D=new Wj(f?I.shape:k.shape,f?k.shape:I.shape,f?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],v,y,O,E,T,N),$=f?[I,k]:[k,I];if(i&&$.push(i),T&&$.push(o),N){const e=r.makeTensorInfo([],"float32",Yr(a,"float32"));$.push(e),x.push(e)}const A=r.runWebGLProgram(D,$,"float32"),R=Jj({inputs:{x:A},backend:r,attrs:{shape:n.outShape}});x.push(A);for(const w of x)r.disposeIntermediateTensorInfo(w);return R}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function yz(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r,h=Ds(l),d=vs(i.shape,o.shape,a,u,s,c,!1,h);let p;if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if(oe().getBool("WEBGL_CONV_IM2COL"))p=vz({x:i,filter:o,convInfo:d,backend:n});else{const e=new pz(d);p=n.runWebGLProgram(e,[i,o],"float32")}else p=bz({x:i,filter:o,convInfo:d,backend:n});const f=Jj({inputs:{x:p},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(p),f}const xz={kernelName:ze,backendName:"webgl",kernelFunc:yz};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class wz{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${i};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              if (${o}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class kz{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o="channelsLast"===e.dataFormat,a=t-1-e.padInfo.top,s=n-1-e.padInfo.left,l=o?1:2,u=o?2:3,c=o?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${a}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${c}];\n\n        ivec2 dyCorner = ivec2(coords[${l}], coords[${u}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${o}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class _z{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${t} - ${i};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${n} - ${o};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${r} - ${a};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Sz{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.front,l=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${s}, ${l}, ${u});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${i}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${a}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Cz(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,h=Ds(l),d=vs(i.shape,c,a,1,s,u,!1,h),p=new wz(d);return n.runWebGLProgram(p,[i,o],"float32")}const Iz={kernelName:Ve,backendName:"webgl",kernelFunc:Cz};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Oz(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{inputShape:a,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r,h=Ds(u),d=vs(a,o.shape,s,1,l,c,!1,h),p=new kz(d);return n.runWebGLProgram(p,[i,o],"float32")}const Tz={kernelName:Ue,backendName:"webgl",kernelFunc:Oz};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Nz(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l}=r,u=ys(i.shape,o.shape,a,l,s),c=new fz(u);return n.runWebGLProgram(c,[i,o],"float32")}const Ez={kernelName:We,backendName:"webgl",kernelFunc:Nz};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Dz(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,filterShape:l}=r,u=ys(i.shape,l,a,1,s),c=new _z(u);return n.runWebGLProgram(c,[i,o],"float32")}const $z={kernelName:He,backendName:"webgl",kernelFunc:Dz};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Az(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{pad:a,strides:s,inputShape:l}=r,u=ys(l,o.shape,s,1,a),c=new Sz(u);return n.runWebGLProgram(c,[i,o],"float32")}const Rz={kernelName:Ge,backendName:"webgl",kernelFunc:Az},Mz=jj+"\n  return cos(x);\n",Fz=zj({opSnippet:Mz}),Pz={kernelName:qe,backendName:"webgl",kernelFunc:Fz},jz="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",Bz=zj({opSnippet:jz}),Lz={kernelName:Ye,backendName:"webgl",kernelFunc:Bz};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class zz{constructor(e,t,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,s,l]=e,[u]=t,[c,h]=n;this.outputShape=[u,c,h,l];const d="bilinear"===r?1:0,[p,f]=[a-1+".0",s-1+".0"],[m,g,b]=c>1?[""+(a-1)/(c-1),"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[v,y,x]=h>1?[""+(s-1)/(h-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${v});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${o}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${y};\n\n        float in_y = ${b};\n        if( in_y < 0.0 || in_y > ${p} ) {\n          setOutput(float(${i}));\n          return;\n        }\n        float in_x = ${x};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${i}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Vz=e=>{const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:o,boxInd:a}=t,{cropSize:s,method:l,extrapolationValue:u}=r,c=new zz(i.shape,o.shape,s,l,u);return n.runWebGLProgram(c,[i,o,a],"float32")},Uz={kernelName:Je,backendName:"webgl",kernelFunc:Vz};var Wz;(function(e){e["Prod"]="*",e["Sum"]="+"})(Wz||(Wz={}));class Hz{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===Wz.Prod?"1.0":"0.0",a=n?o:`getX(${Gz(i,"coords",this.op)})`,s=this.outputShape[this.outputShape.length-1];let l="",u="";n?(l=r?"end != "+(s-1):"end != 0",u=r?"end + 1":"end - 1"):(l=r?`end + pow2 < ${s}`:"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${lF(i)} coords = getOutputCoords();\n        int end = ${qz(i,"coords",this.op)};\n        float val = ${a};\n        int pow2 = int(pow(2.0, index));\n        if (${l}) {\n          int idx = ${u};\n          ${qz(i,"coords",this.op)} = idx;\n          val ${this.op}= getX(${Gz(i,"coords",this.op)});\n        }\n        setOutput(val);\n      }\n    `}}function Gz(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function qz(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Yz(e,t,n,r,i,o){const a=t.shape.length,s=Tu([r],a);let l=t;null!=s&&(l=cB({inputs:{x:t},backend:n,attrs:{perm:s}}));const u=Eu(1,a)[0];if(u!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);const c=l.shape[u];let h=Ij({inputs:{x:l},backend:n});for(let d=0;d<=Math.ceil(Math.log2(c))-1;d++){const t=new Hz(e,l.shape,!1,o),r=[[d]],i=h;h=n.runWebGLProgram(t,[h],h.dtype,r),n.disposeIntermediateTensorInfo(i)}if(i){const t=new Hz(e,l.shape,i,o),r=h;h=n.runWebGLProgram(t,[h],h.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=s){const e=Nu(s),t=cB({inputs:{x:h},backend:n,attrs:{perm:e}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(l),t}return h}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Xz(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r;return Yz(Wz.Prod,i,n,o,a,s)}const Kz={kernelName:Xe,backendName:"webgl",kernelFunc:Xz};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Jz(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r;return Yz(Wz.Sum,i,n,o,a,s)}const Zz={kernelName:Ke,backendName:"webgl",kernelFunc:Jz};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Qz(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:a,binaryOutput:s}=r;if(1===i.shape.length){const e=n.readSync(i.dataId),t=n.readSync(o.dataId),r=XF(e,t,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,r)}if(2===i.shape.length){const e=n.bufferSync(i),t=n.bufferSync(o),r=KF(e,t,a,s);return n.makeTensorInfo(r.shape,o.dtype,r.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const eV={kernelName:Ze,backendName:"webgl",kernelFunc:Qz};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class tV{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${t};\n      int offset_h = imod(h, ${t});\n      int in_w = w / ${t};\n      int offset_w = imod(w, ${t});\n      int offset_d = (offset_h * ${t} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function nV(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:o,dataFormat:a}=r,s=i.shape[0],l="NHWC"===a?i.shape[1]:i.shape[2],u="NHWC"===a?i.shape[2]:i.shape[3],c="NHWC"===a?i.shape[3]:i.shape[1],h=l*o,d=u*o,p=c/(o*o),f="NHWC"===a?[s,h,d,p]:[s,p,h,d],m=new tV(f,o,a);return n.runWebGLProgram(m,[i],i.dtype)}const rV={kernelName:Qe,backendName:"webgl",kernelFunc:nV};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class iV{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=bF(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,s=e.outChannels/e.inChannels;let l="",u="";n&&(l=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,u="result = activation(result);");const c=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${l}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${s};\n        int q = d2 - d1 * ${s};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${o}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${a}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${c}\n        ${u}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class oV{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=bF(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,h=c;let d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let f=0;f<c;f++)d+=`\n          vec4 xTexelC${2*f};\n          int xTexelC${2*f}Ready;\n          vec4 xTexelC${2*f+1};\n          int xTexelC${2*f+1}Ready;\n          vec4 xC${f};`;d+=`\n    for (int r = 0; r < ${u}; r++) {\n      `;for(let f=0;f<c;f++)d+=`\n          xTexelC${2*f} = vec4(0.0);\n          xTexelC${2*f}Ready = 0;\n          xTexelC${2*f+1} = vec4(0.0);\n          xTexelC${2*f+1}Ready = 0;\n          xC${f} = vec4(0.0);`;d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let b=0;b<(h+1)/2;b++){const e=2*b;if(d+=`\n          xC = xCCorner + ${e*l};\n          `,1===s){if(e<c&&(a%2===1?(d+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n              `,d+=1===l&&e>0?`\n                xC${e} = vec4(xTexelC${e-2}.zw, xTexelC${e}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${e} = vec4(previous.zw, xTexelC${e}.xy);\n                  } else {\n                    xC${e} = vec4(0.0, 0.0, xTexelC${e}.xy);\n                  }\n                  `):d+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n\n                xC${e} = xTexelC${e};\n                `,e+1<c)){const t=a%2===0?f(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(d+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${t};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                    xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${e+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${e+1}Ready = 1;\n                  }\n                  `,l>1&&(d+=`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e}Ready == 0) {\n                      xTexelC${e} = getX(batch, xR, xCOffset, d1);\n                      xTexelC${e}Ready = 1;\n                    }\n                    `),d+=`\n                  xC${e+1} = vec4(xTexelC${e}.zw, xTexelC${e+1}.xy);\n                  `):d+=1===t?`\n                    xC${e+1} = xTexelC${e};\n                    `:`\n                    xCOffset = xC + ${t};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                      xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${e+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${e+1}Ready = 1;\n                    }\n\n                    xC${e+1} = xTexelC${e+1};\n                    `}}else e<c&&(a%2===1?(d+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${e+1}Ready == 0) {\n                  xTexelC${e+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${e+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${e+1}Ready = 1;\n                }\n\n                xC${e} = vec4(xTexelC${e}.zw, xTexelC${e+1}.zw);\n              `,e+1<c&&(d+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${e+1} = vec4(xTexelC${e+1}.xy, final.xy);\n                `)):(d+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                  xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${e+1}.zw = vec2(0.);\n                  }\n                  xTexelC${e+1}Ready = 1;\n                }\n\n                xC${e} = vec4(\n                  xTexelC${e}.xy, xTexelC${e+1}.xy);\n              `,e+1<c&&(d+=`\n                  xC${e+1} = vec4(xTexelC${e}.zw, xTexelC${e+1}.zw);\n                `)));e<c&&(d+=`\n            wTexel = getW(r, ${e}, d1, q);\n            dotProd += xC${e} * vec4(wTexel.xz, wTexel.xz);\n          `,e+1<c&&(d+=`\n              wTexel = getW(r, ${e+1}, d1, q);\n              dotProd += xC${e+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}d+="\n    }\n  ",d+="\n      }\n    ";let p="",m="";n&&(p=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,m="result = activation(result);");const g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${p}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${o};\n        int q = d2 - d1 * ${o};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${d}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${g}\n        ${m}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function aV(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l,dimRoundingMode:u}=r;let c=l;null==c&&(c=[1,1]),b(Es(a,c),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`));const h=vs(i.shape,o.shape,a,c,s,u,!0);let d;d=oe().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new oV(h):new iV(h);const p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(d,[i,o],"float32",p)}const sV={kernelName:et,backendName:"webgl",kernelFunc:aV};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class lV{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${o} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${i};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class uV{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=t-1-e.padInfo.top,a=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${o}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${s}; dm++) {\n              int d2 = d1 * ${s} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function cV(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r,h=vs(i.shape,c,a,s,l,u,!0),d=new lV(h);return n.runWebGLProgram(d,[i,o],"float32")}const hV={kernelName:tt,backendName:"webgl",kernelFunc:cV};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function dV(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r,h=vs(c,o.shape,a,s,l,u,!0),d=new uV(h);return n.runWebGLProgram(d,[i,o],"float32")}const pV={kernelName:nt,backendName:"webgl",kernelFunc:dV};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class fV{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mV(e){const{inputs:t,backend:n}=e,{x:r}=t,i=[...r.shape,...r.shape],o=w(r.shape),a=Jj({inputs:{x:r},backend:n,attrs:{shape:[o]}}),s=new fV(o),l=n.runWebGLProgram(s,[a],a.dtype),u=Jj({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const gV={kernelName:rt,backendName:"webgl",kernelFunc:mV};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class bV{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:i,strideWidth:o,filterHeight:a,filterWidth:s,dilationHeight:l,dilationWidth:u}=e,{top:c,left:h}=r;this.userCode=`\n      const ivec2 strides = ivec2(${i}, ${o});\n      const ivec2 pads = ivec2(${c}, ${h});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${a}; h++) {\n          int hIn = hBeg + h * ${l};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${s}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function vV(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l}=r,u=ms(i.shape,o.shape,a,s,"NHWC",l);let c;const h=new bV(u);c=n.runWebGLProgram(h,[i,o],"float32");const d=Jj({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),d}const yV={kernelName:it,backendName:"webgl",kernelFunc:vV};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function xV(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,o=t,{allDims:a,summedDims:s,idDims:l}=hf(i,o.length);pf(a.length,l,o);const{path:u,steps:c}=ff(s,l),h=c.length;let d=null,p=a.length;const f=[];for(let m=0;m<h;++m){for(const e of c[m]){const{permutationIndices:t,expandDims:r}=df(p,l[e]);let i;mf(t)?i=o[e]:(i=cB({inputs:{x:o[e]},backend:n,attrs:{perm:t}}),f.push(i));const a=i.shape.slice();for(let e=0;e<r.length;++e)a.splice(r[e],0,1);k(i.shape,a)||(i=Jj({inputs:{x:i},backend:n,attrs:{shape:a}}),f.push(i)),null===d?d=i:(d=Yj({inputs:{a:i,b:d},backend:n}),f.push(d))}m<h-1&&(u[m]>=0&&(d=lB({inputs:{x:d},backend:n,attrs:{axis:u[m]-(a.length-p),keepDims:!1}}),f.push(d)),p--)}for(const m of f)m!==d&&n.disposeIntermediateTensorInfo(m);return d}const wV={kernelName:lt,backendName:"webgl",kernelFunc:xV},kV="return (x >= 0.0) ? x : (exp(x) - 1.0);",_V="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",SV=zj({opSnippet:kV,packedOpSnippet:_V}),CV={kernelName:ut,backendName:"webgl",kernelFunc:SV},IV="return (b >= 1.0) ? a : a * (b + 1.0);",OV="\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",TV=e=>{const{inputs:t,backend:n}=e,{dy:r,y:i}=t,o=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Cj(OV,r.shape,i.shape):new _j(IV,r.shape,i.shape);return n.runWebGLProgram(o,[r,i],r.dtype)},NV={kernelName:ct,backendName:"webgl",kernelFunc:TV},EV="\n  return vec4(equal(a, b));\n",DV="return float(a == b);",$V=Vj({opSnippet:DV,packedOpSnippet:EV,dtype:"bool",cpuKernelImpl:QF}),AV={kernelName:dt,backendName:"webgl",kernelFunc:$V},RV=`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${Gp};\n  float a1 = ${qp};\n  float a2 = ${Yp};\n  float a3 = ${Xp};\n  float a4 = ${Kp};\n  float a5 = ${Jp};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`,MV=zj({opSnippet:RV}),FV={kernelName:ht,backendName:"webgl",kernelFunc:MV},PV=jj+"\n  return exp(x);\n",jV="\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",BV=zj({opSnippet:PV,packedOpSnippet:jV,cpuKernelImpl:eP,dtype:"float32"}),LV={kernelName:pt,backendName:"webgl",kernelFunc:BV};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zV(e){const{inputs:t,attrs:n,backend:r}=e,{dim:i}=n,{input:o}=t,a=o.shape.length,s=o.shape.slice();let l=i;return i<0&&(b(-(a+1)<=i,(()=>`Axis must be in the interval [${-(a+1)}, ${a}]`)),l=a+i+1),s.splice(l,0,1),Jj({inputs:{x:o},backend:r,attrs:{shape:s}})}const VV={kernelName:ft,backendName:"webgl",kernelFunc:zV},UV="return exp(x) - 1.0;",WV=zj({opSnippet:UV,packedOpSnippet:UV,cpuKernelImpl:tP}),HV={kernelName:mt,backendName:"webgl",kernelFunc:WV};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class GV{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const i=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=n?`${r}.0`:"1.0";let a;if("real"===e)a="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);a="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${i};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${a}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${o};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function qV(e,t,n){const r=n.texData.get(e.dataId),i=w(e.shape),o=e.shape[e.shape.length-1],a=i/o,s=Jj({inputs:{x:e},backend:n,attrs:{shape:[a,o]}}),l=s.shape,u=new GV("real",l,t),c=new GV("imag",l,t),h=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],d=n.runWebGLProgram(u,h,"float32"),p=n.runWebGLProgram(c,h,"float32"),f=Tj({inputs:{real:d,imag:p},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p);const m=Jj({inputs:{x:f},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(f),m}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function YV(e){const{inputs:t,backend:n}=e,{input:r}=t;return qV(r,!1,n)}const XV={kernelName:gt,backendName:"webgl",kernelFunc:YV};
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class KV{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function JV(e){const{backend:t,attrs:n}=e,{shape:r,value:i}=n;let{dtype:o}=n;if(o=o||z(i),"string"===o){const e=D(o,w(r));return e.fill(i),t.makeTensorInfo(r,o,e)}{const e=new KV(r,i),n=[[i]];return t.runWebGLProgram(e,[],o,n)}}const ZV={kernelName:bt,backendName:"webgl",kernelFunc:JV};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class QV{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const eU={kernelName:vt,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,r=t,i=new QV(n.shape),o=r.runWebGLProgram(i,[n],n.dtype);return o}},tU="return floor(x);",nU=zj({opSnippet:tU,packedOpSnippet:tU,cpuKernelImpl:nP}),rU={kernelName:yt,backendName:"webgl",kernelFunc:nU},iU="\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",oU="\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",aU=Vj({opSnippet:iU,packedOpSnippet:oU,dtype:"int32"}),sU={kernelName:xt,backendName:"webgl",kernelFunc:aU};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class lU{constructor(e){this.variableNames=["A"];const t=dM(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class uU{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=dM(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const cU={kernelName:fr,backendName:"webgl",kernelFunc:dU};let hU;function dU(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:i}=t;const{numChannels:o}=r,a="undefined"!==typeof HTMLVideoElement&&i instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&i instanceof HTMLImageElement,[l,u]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=[u,l],h=[u,l,o];(s||a)&&(null==hU&&(hU=document.createElement("canvas").getContext("2d")),hU.canvas.width=l,hU.canvas.height=u,hU.drawImage(i,0,0,l,u),i=hU.canvas);const d=n.makeTensorInfo(c,"int32");n.texData.get(d.dataId).usage=lR.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),i);const p=oe().getBool("WEBGL_PACK")?new uU(h):new lU(h),f=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),f}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pU(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,m=Ds(c),g=vs(i.shape,o.shape,l,h,u,d,!1,m);let b;const v=[];if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(oe().getBool("WEBGL_CONV_IM2COL"))b=vz({x:i,filter:o,convInfo:g,backend:n,bias:a,activation:p,preluActivationWeights:s,leakyreluAlpha:f});else{const e=null!=a,t=null!=s,r="leakyrelu"===p,l=p?Uj(p,!1):null,u=new pz(g,e,l,t,r),h=[i,o],d=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=Jj({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return v.push(t),t}return e};if(e&&h.push(d(a,c)),t&&h.push(d(s,c)),r){const e=n.makeTensorInfo([],"float32",Yr(f,"float32"));h.push(e),v.push(e)}b=n.runWebGLProgram(u,h,"float32")}else b=bz({x:i,filter:o,convInfo:g,backend:n,bias:a,activation:p,preluActivationWeights:s,leakyreluAlpha:f});const y=Jj({inputs:{x:b},backend:n,attrs:{shape:g.outShape}});return v.push(b),v.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}const fU={kernelName:br,backendName:"webgl",kernelFunc:pU};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mU(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dilations:c,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r,f=[];let m=c;null==m&&(m=[1,1]),b(Es(l,m),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`));const g=vs(i.shape,o.shape,l,m,u,h,!0),v=oe().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,y=d?Uj(d,v):null,x=[i,o],w=null!=a,k=null!=s,_="leakyrelu"===d;if(w&&x.push(a),k&&x.push(s),_){const e=n.makeTensorInfo([],"float32",Yr(p,"float32"));x.push(e),f.push(e)}let S;S=v?new oV(g,w,y,k,_):new iV(g,w,y,k,_);const C=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],I=n.runWebGLProgram(S,x,"float32",C);return f.forEach((e=>n.disposeIntermediateTensorInfo(e))),I}const gU={kernelName:vr,backendName:"webgl",kernelFunc:mU};class bU{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const i=lF(t.length),o=lF(n.length),a=this.sliceDim>1?"strides[j]":"strides",s=lF(r.length),l=r.length>1?"paramsShape[j]":"paramsShape";this.userCode=`\n        ${i} strides = ${i}(${this.strides});\n        ${s} paramsShape = ${s}(${this.paramsShape});\n         void main() {\n          ${o} coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            out_of_bounds = out_of_bounds || index < 0;\n            out_of_bounds = out_of_bounds || index >= ${l};\n            flattenIndex += index * ${a};\n          }\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function vU(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,o=i.shape,a=o[o.length-1],s=w(r.shape),[l,u,c,h]=Lp(r,i),d=Jj({inputs:{x:i},backend:n,attrs:{shape:[u,a]}}),p=Jj({inputs:{x:r},backend:n,attrs:{shape:[w(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,i])||"string"===r.dtype){const e=n.readSync(i.dataId),t=n.bufferSync(r),o=rP(e,t,r.dtype,u,a,c,h,r.shape,s);return n.makeTensorInfo(l,r.dtype,o.values)}const f=new bU(a,h,[u,c],r.shape),m=n.runWebGLProgram(f,[p,d],p.dtype),g=Jj({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const yU={kernelName:_t,backendName:"webgl",kernelFunc:vU};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class xU{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=lF(this.rank),r=wU(e,2);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${r}));\n      }\n    `}}function wU(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<e.length;i++)2===i?r.push("index"):r.push(`${n[i]}`);return r.join()}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function kU(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:o}=t,{axis:a,batchDims:s}=r,l=T(a,i.shape)[0];if(oe().get("DEBUG")){const e=n.readSync(o.dataId),t=i.shape[l];for(let n=0;n<e.length;++n){const r=e[n];b(r<=t-1&&r>=0,(()=>`GatherV2: the index value ${r} is not in [0, ${t-1}]`))}}const u=$f(i,o,l,s),c=w(o.shape),h=[],d=Jj({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),p=Jj({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});h.push(d),h.push(p);const f=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([i,o])||"string"===i.dtype){const e=n.bufferSync(p),t=n.bufferSync(d),r=iP(t,e,f);return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u.outputShape,r.dtype,r.values)}const m=new xU(d.shape,f),g=n.runWebGLProgram(m,[d,p],d.dtype);h.push(g);const v=Jj({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}const _U={kernelName:kt,backendName:"webgl",kernelFunc:kU},SU="return float(a > b);",CU="\n  return vec4(greaterThan(a, b));\n",IU=Vj({opSnippet:SU,packedOpSnippet:CU,cpuKernelImpl:oP,dtype:"bool"}),OU={kernelName:St,backendName:"webgl",kernelFunc:IU},TU="return float(a >= b);",NU="\n  return vec4(greaterThanEqual(a, b));\n",EU=Vj({opSnippet:TU,packedOpSnippet:NU,dtype:"bool",cpuKernelImpl:aP}),DU={kernelName:Ct,backendName:"webgl",kernelFunc:EU};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function $U(e){const{inputs:t,backend:n}=e,{input:r}=t;return qV(r,!0,n)}const AU={kernelName:Ot,backendName:"webgl",kernelFunc:$U},RU="return float(!isnan(x) && !isinf(x));",MU=zj({opSnippet:RU,dtype:"bool"}),FU={kernelName:Nt,backendName:"webgl",kernelFunc:MU},PU="return float(isinf(x));",jU=zj({opSnippet:PU,dtype:"bool"}),BU={kernelName:Et,backendName:"webgl",kernelFunc:jU},LU="return float(isnan(x));",zU=zj({opSnippet:LU,dtype:"bool"}),VU={kernelName:Dt,backendName:"webgl",kernelFunc:zU},UU="return float(a < b);",WU="\n  return vec4(lessThan(a, b));\n",HU=Vj({opSnippet:UU,packedOpSnippet:WU,cpuKernelImpl:sP,dtype:"bool"}),GU={kernelName:At,backendName:"webgl",kernelFunc:HU},qU="return float(a <= b);",YU="\n  return vec4(lessThanEqual(a, b));\n",XU=Vj({opSnippet:qU,packedOpSnippet:YU,cpuKernelImpl:lP,dtype:"bool"}),KU={kernelName:Rt,backendName:"webgl",kernelFunc:XU};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function JU(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:o}=n,a=uP(r,i,o);return t.makeTensorInfo([a.length],"float32",a)}const ZU={kernelName:Mt,backendName:"webgl",kernelFunc:JU},QU=jj+"\n  return x < 0.0 ? 0./0. : log(x);\n",eW="\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",tW=zj({opSnippet:QU,packedOpSnippet:eW,cpuKernelImpl:cP}),nW={kernelName:Ft,backendName:"webgl",kernelFunc:tW},rW=jj+"\n  return log(1.0 + x);\n",iW=zj({opSnippet:rW}),oW={kernelName:Pt,backendName:"webgl",kernelFunc:iW},aW="return float(a >= 1.0 && b >= 1.0);",sW="\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",lW=Vj({opSnippet:aW,packedOpSnippet:sW,dtype:"bool"}),uW={kernelName:jt,backendName:"webgl",kernelFunc:lW},cW="return float(!(x >= 1.0));",hW=zj({opSnippet:cW}),dW={kernelName:Bt,backendName:"webgl",kernelFunc:hW},pW="return float(a >= 1.0 || b >= 1.0);",fW="\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",mW=Vj({opSnippet:pW,packedOpSnippet:fW,dtype:"bool"}),gW={kernelName:Lt,backendName:"webgl",kernelFunc:mW};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class bW{constructor(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[];const o=t,a=e[3]-1;let s;this.outputShape=e;const l=`float(${n}) + float(${r}) * sum`;s=.5===i?`inversesqrt(${l})`:1===i?`1.0/(${l})`:`exp(log(${l}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${o}; j <= ${o}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${a}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${s};\n        setOutput(val);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class vW{constructor(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=t,a=e[3]-1;let s;this.outputShape=e;const l=`float(${n}) + float(${r}) * sum`;s=.5===i?`inversesqrt(${l})`:1===i?`1.0/(${l})`:`exp(log(${l}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${o};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${o}; j <= ${o}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${s};\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const yW=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:o,bias:a,alpha:s,beta:l}=r,u=oe().getBool("WEBGL_PACK_NORMALIZATION")?new vW(i.shape,o,a,s,l):new bW(i.shape,o,a,s,l);return n.runWebGLProgram(u,[i],i.dtype)},xW={kernelName:Vt,backendName:"webgl",kernelFunc:yW};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class wW{constructor(e,t,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${i})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${i});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const kW=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i,y:o,dy:a}=t,{depthRadius:s,bias:l,alpha:u,beta:c}=r,h=new wW(i.shape,s,l,u,c);return n.runWebGLProgram(h,[i,o,a],i.dtype)},_W={kernelName:Ut,backendName:"webgl",kernelFunc:kW};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function SW(e,t,n,r){const i=w(t),o=w(e.shape),a=o/i,s=Jj({inputs:{x:e},attrs:{shape:[a,i]},backend:r}),l=nB(s,e.dtype,"max",r),u=Jj({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(l),u}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function CW(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:o,keepDims:a}=r,s=i.shape.length,l=T(o,i.shape);let u=l;const c=Tu(u,s),h=null!=c,d=n.shouldExecuteOnCPU([i]);let p=i;if(h){if(d){const e=n.texData.get(p.dataId),t=e.values,r=new Array(s);for(let n=0;n<r.length;n++)r[n]=i.shape[c[n]];const o=MP(t,i.shape,i.dtype,c,r);p=n.makeTensorInfo(r,i.dtype);const a=n.texData.get(p.dataId);a.values=o}else p=aB(i,c,n);u=Eu(u.length,s)}Ou("max",u,s);const[f,m]=Cu(p.shape,u);let g,b=f;if(a&&(b=Iu(f,l)),d){const e=n.texData.get(p.dataId),t=e.values,r=hP(t,w(m),b,i.dtype);g=n.makeTensorInfo(b,i.dtype);const o=n.texData.get(g.dataId);o.values=r}else g=SW(p,m,b,n);return h&&n.disposeIntermediateTensorInfo(p),g}const IW={kernelName:Wt,backendName:"webgl",kernelFunc:CW},OW=kj+"\n  return max(a, b);\n",TW="\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+Sj+"\n  return result;\n",NW=Vj({opSnippet:OW,packedOpSnippet:TW,cpuKernelImpl:dP}),EW={kernelName:Ht,backendName:"webgl",kernelFunc:NW};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function DW(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;cM(i,"maxPool");const{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=r,u=1;b(Es(a,u),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`));const c=gs(i.shape,o,a,u,s,l);if(1===c.filterWidth&&1===c.filterHeight&&k(c.inShape,c.outShape))return Ij({inputs:{x:i},backend:n});const h=new sL(c,"max",!1);return n.runWebGLProgram(h,[i],i.dtype)}const $W={kernelName:Gt,backendName:"webgl",kernelFunc:DW};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function AW(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],h=bs(i.shape,o,a,c,s,u,l),d=new lL(h,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}const RW={kernelName:Yt,backendName:"webgl",kernelFunc:AW};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class MW{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,s=o-1-e.padInfo.left,l=i*o-1;this.userCode=`\n      const ivec2 pads = ivec2(${a}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${i};\n          wR += ${r}) {\n          float dyR = float(dyRCorner + wR) / ${t}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${o} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class FW{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterDepth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=s-1-e.padInfo.front,h=l-1-e.padInfo.top,d=u-1-e.padInfo.left,p=s*l*u-1;this.userCode=`\n      const ivec3 pads = ivec3(${c}, ${h}, ${d});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${s};\n           wD += ${i}) {\n          float dyD = float(dyDCorner + wD) / ${t}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${l};\n              wR += ${o}) {\n            float dyR = float(dyRCorner + wR) / ${n}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${u};\n                wC += ${a}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${p} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${l} * ${u} +\n                  wR * ${u} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function PW(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,a=o,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,h=[1,1,1],d=bs(a.shape,s,l,h,u,c),p=new lL(d,"max",!0),f=n.runWebGLProgram(p,[a],a.dtype),m=new FW(d),g=n.runWebGLProgram(m,[i,f],a.dtype);return n.disposeIntermediateTensorInfo(f),g}const jW={kernelName:Xt,backendName:"webgl",kernelFunc:PW};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function BW(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o,output:a}=t,s=o;cM([o,a],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:h}=r,d=gs(s.shape,l,u,1,c,h),p=!0,f=new sL(d,"max",p),m=n.runWebGLProgram(f,[s],s.dtype),g=new MW(d),b=n.runWebGLProgram(g,[i,m],s.dtype);return n.disposeIntermediateTensorInfo(m),b}const LW={kernelName:qt,backendName:"webgl",kernelFunc:BW};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zW(e,t,n,r){let i=new sL(n,"max",!1);const o=r.runWebGLProgram(i,[e],"float32");i=new sL(n,"max",!0,!0,t);const a=r.runWebGLProgram(i,[e],"float32");return[o,a]}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const VW={kernelName:Kt,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:i,strides:o,pad:a,includeBatchInIndex:s}=t,l=n;b(4===r.shape.length,(()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`));const u=[1,1];b(Es(o,u),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`));const c=gs(r.shape,i,o,u,a),[h,d]=zW(r,s,c,l);return[h,d]}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function UW(e,t,n,r){const i=w(t),o=w(e.shape),a=o/i,s=Jj({inputs:{x:e},attrs:{shape:[a,i]},backend:r}),l=nB(s,"float32","mean",r),u=Jj({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(l),u}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const WW={kernelName:Jt,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{keepDims:i,axis:o}=t,a=n,s=r.shape.length,l=T(o,r.shape);let u=l;const c=Tu(u,s),h=null!=c,d=a.shouldExecuteOnCPU([r]),p=[];let f=r;if(h){if(d){const e=a.texData.get(f.dataId),t=e.values,n=new Array(s);for(let a=0;a<n.length;a++)n[a]=r.shape[c[a]];const i=MP(t,r.shape,r.dtype,c,n);f=a.makeTensorInfo(n,r.dtype);const o=a.texData.get(f.dataId);o.values=i}else f=aB(r,c,a);p.push(f),u=Eu(u.length,s)}Ou("sum",u,s);const[m,g]=Cu(f.shape,u);let b=m;i&&(b=Iu(m,l));const v=UW(f,g,b,a);for(const y of p)a.disposeIntermediateTensorInfo(y);return v}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function HW(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=i.shape.length,l=T(o,i.shape);let u=l;const c=Tu(u,s);let h=i;null!=c&&(h=cB({inputs:{x:i},backend:n,attrs:{perm:c}}),u=Eu(u.length,i.shape.length)),Ou("min",u,s);const[d,p]=Cu(h.shape,u),f=w(p),m=Jj({inputs:{x:h},backend:n,attrs:{shape:[-1,f]}}),g=nB(m,m.dtype,"min",n);let b;if(a){const e=Iu(d,l);b=Jj({inputs:{x:g},backend:n,attrs:{shape:e}})}else b=Jj({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(h),b}const GW={kernelName:Zt,backendName:"webgl",kernelFunc:HW},qW=kj+"\n  return min(a, b);\n",YW="\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+Sj+"\n  return result;\n",XW=Vj({opSnippet:qW,packedOpSnippet:YW,cpuKernelImpl:pP}),KW={kernelName:Qt,backendName:"webgl",kernelFunc:XW};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class JW{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,i=lF(r),o=t.map((e=>e[0])).join(","),a=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?`\n      ${i} start = ${i}(${o});\n      ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${l};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};\n          }\n        }\n        ${i} coords = outC - start;\n        setOutput(getX(${s}));\n      }\n    `:`\n        int start = ${o};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${l};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${l};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ZW{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,i=lF(r),o=t.map((e=>e[0])).join(","),a=t.map(((t,n)=>t[0]+e[n])).join(","),s=jP("rc",r),l=jP("source",r),u=`${s[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,h="reflect"===n?0:1;let d="";if(1===r){const e=`\n        ${i} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${h};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${h};\n        }\n        source -= start;\n      `;d=`\n        ${i} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${c});\n        ${s[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${c});\n        }\n      `}else{const e=`\n        ${i} source = rc;\n        ${i} lt = ${i}(lessThan(source, start));\n        ${i} gte = ${i}(greaterThanEqual(source, end));\n        ${i} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${h}) +\n                gte * ((end - 1) * 2 - source + ${h});\n        source -= start;\n      `;d=`\n        ${i} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${c});\n        ${s[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${c});\n        }\n        rc = outputLoc;\n        ${s[r-2]} += 1;\n        if(${s[r-2]} < ${this.outputShape[r-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${l.join()}), ${c});\n          ${s[r-1]} += 1;\n          if(${u}) {\n            ${e}\n            result[3] = getChannel(getX(${l.join()}), ${c});\n          }\n        }\n      `}this.userCode=`\n      const ${i} start = ${i}(${o});\n      const ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${d}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const QW=({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{paddings:i,mode:o}=n,a=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ZW(r.shape,i,o):new JW(r.shape,i,o),s=t.runWebGLProgram(a,[r],r.dtype);return s},eH={kernelName:en,backendName:"webgl",kernelFunc:QW},tH="if (b == 0.0) return NAN;\n  return mod(a, b);",nH="\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  "+Sj+"\n  return result;\n",rH=Vj({opSnippet:tH,packedOpSnippet:nH}),iH={kernelName:tn,backendName:"webgl",kernelFunc:rH};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class oH{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const aH="\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",sH="\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",lH=Vj({opSnippet:aH,packedOpSnippet:sH,checkOutOfBounds:!0}),uH={kernelName:st,backendName:"webgl",kernelFunc:lH},cH="return a - b;",hH=Vj({opSnippet:cH,packedOpSnippet:cH,supportsComplex:!0,cpuKernelImpl:$P}),dH={kernelName:nr,backendName:"webgl",kernelFunc:hH};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pH(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:o}=r,a=T([o],i.shape),s=CW({inputs:{x:i},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),l=Iu(s.shape,a),u=Jj({inputs:{x:s},backend:n,attrs:{shape:l}}),c=hH({inputs:{a:i,b:u},backend:n}),h=BV({inputs:{x:c},backend:n}),d=lB({inputs:{x:h},backend:n,attrs:{axis:a,keepDims:!1}}),p=Jj({inputs:{x:d},backend:n,attrs:{shape:l}}),f=lH({inputs:{a:h,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),f}const fH={kernelName:Wn,backendName:"webgl",kernelFunc:pH};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mH(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:o,seed:a,normalized:s}=r,l=s?i:pH({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),u=l.shape[0],c=l.shape[1],h=new oH(u,c,o),d=[[a]],p=n.runWebGLProgram(h,[l],"int32",d);return s||n.disposeIntermediateTensorInfo(l),p}const gH={kernelName:nn,backendName:"webgl",kernelFunc:mH},bH=JP+"\n  return -x;\n",vH="\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";function yH(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,i]=mP(e.values,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,t)}let i;return i=oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new cj(r.shape,vH):new KP(r.shape,bH),n.runWebGLProgram(i,[r],r.dtype)}const xH={kernelName:on,backendName:"webgl",kernelFunc:yH},wH=ed;function kH(e){yr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l}=r,u=n.readSync(i.dataId),c=n.readSync(o.dataId),{selectedIndices:h}=wH(u,c,a,s,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const _H={kernelName:sn,backendName:"webgl",kernelFunc:kH},SH=td;function CH(e){yr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(i.dataId),h=n.readSync(o.dataId),{selectedIndices:d,validOutputs:p}=SH(c,h,a,s,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}const IH={kernelName:ln,backendName:"webgl",kernelFunc:CH},OH=nd;function TH(e){yr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(i.dataId),h=n.readSync(o.dataId),d=a,p=s,f=l,m=u,{selectedIndices:g,selectedScores:b}=OH(c,h,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const NH={kernelName:un,backendName:"webgl",kernelFunc:TH};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class EH{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const DH=e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{depth:o,onValue:a,offValue:s}=r,l=w(i.shape),u=new EH(l,o,a,s),c=Jj({inputs:{x:i},backend:n,attrs:{shape:[l]}}),h=n.runWebGLProgram(u,[c],i.dtype);n.disposeIntermediateTensorInfo(c);const d=[...i.shape,o],p=Jj({inputs:{x:h},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(h),p},$H={kernelName:hn,backendName:"webgl",kernelFunc:DH};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function AH(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=zL({inputs:{input:r},backend:n}),t=AH({inputs:{x:e},backend:n}),i=sz({inputs:{input:r},backend:n}),o=AH({inputs:{x:i},backend:n}),a=Tj({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),a}return JV({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const RH={kernelName:dr,backendName:"webgl",kernelFunc:AH};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function MH(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===r.dtype){const e=zL({inputs:{input:r},backend:n}),t=MH({inputs:{x:e},backend:n}),i=sz({inputs:{input:r},backend:n}),o=AH({inputs:{x:i},backend:n}),a=Tj({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),a}return JV({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const FH={kernelName:cn,backendName:"webgl",kernelFunc:MH};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function PH(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return zV({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const o=t[0].shape,a=t[0].dtype;t.forEach((e=>{v(o,e.shape,"All tensors passed to stack must have matching shapes"),b(a===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],l=t.map((e=>{const t=zV({inputs:{input:e},backend:n,attrs:{dim:i}});return s.push(t),t})),u=hz({inputs:l,backend:n,attrs:{axis:i}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}const jH={kernelName:dn,backendName:"webgl",kernelFunc:PH};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class BH{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,i=lF(r),o=t.map((e=>e[0])).join(","),a=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${i} start = ${i}(${o});\n      ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${i} coords = outC - start;\n          setOutput(getX(${s}));\n        }\n      }\n    `:`\n        int start = ${o};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class LH{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,i=lF(r),o=t.map((e=>e[0])).join(","),a=t.map(((t,n)=>t[0]+e[n])).join(","),s=jP("rc",r),l=jP("source",r),u=`${s[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,h=[`${i} rc = outputLoc;`,`${s[r-1]} += 1;\n       if(${u}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${s[r-2]} += 1;\n       if(${s[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${s[r-1]} += 1;\n         if(${u}) {`],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,m=1===r?2:4;f<m;f++)p+=`\n        ${h[f]}\n        if (${d}) {\n          result[${f}] = float(value);\n        } else {\n          ${i} source = rc - start;\n          result[${f}] = getChannel(getX(${l.join()}), ${c});\n        }\n      `;p+=1===r?"} ":"}}",this.userCode=`\n      const ${i} start = ${i}(${o});\n      const ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const zH=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:o,constantValue:a}=r;if(0===w(i.shape)){const e=o.map(((e,t)=>e[0]+i.shape[t]+e[1]));return JV({backend:n,attrs:{shape:e,value:a,dtype:i.dtype}})}const s=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new LH(i.shape,o,a):new BH(i.shape,o,a),l=[[a]];return n.runWebGLProgram(s,[i],i.dtype,l)},VH={kernelName:pn,backendName:"webgl",kernelFunc:zH},UH="\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",WH="\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  "+Sj+"\n  return result;\n",HH=Vj({opSnippet:UH,packedOpSnippet:WH}),GH={kernelName:fn,backendName:"webgl",kernelFunc:HH};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function qH(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=i.shape.length,l=[],u=T(o,i.shape);let c=u;const h=Tu(c,s);let d,p=i;if(null!=h&&(p=cB({inputs:{x:i},backend:n,attrs:{perm:h}}),c=Eu(c.length,s),l.push(p)),Ou("prod",c,s),n.shouldExecuteOnCPU([p])){const e=n.texData.get(p.dataId).values,{outVals:t,outShape:r,outDtype:i}=bP(p.shape,p.dtype,e,c);d=n.makeTensorInfo(r,i,t)}else{const[e,t]=Cu(p.shape,c),r=w(t),o=Jj({inputs:{x:p},backend:n,attrs:{shape:[-1,r]}}),a=Di(i.dtype),s=nB(o,a,"prod",n);d=Jj({inputs:{x:s},backend:n,attrs:{shape:e}}),l.push(o),l.push(s)}if(a){l.push(d);const e=Iu(d.shape,u);d=Jj({inputs:{x:d},backend:n,attrs:{shape:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}const YH={kernelName:gn,backendName:"webgl",kernelFunc:qH},XH=e=>{const{backend:t,attrs:n}=e,{start:r,stop:i,step:o,dtype:a}=n,s=vP(r,i,o,a);return t.makeTensorInfo([s.length],a,s)},KH={kernelName:bn,backendName:"webgl",kernelFunc:XH},JH="return 1.0 / x;",ZH=zj({opSnippet:JH}),QH={kernelName:yn,backendName:"webgl",kernelFunc:ZH},eG=JP+"\n  return (x < 0.0) ? 0.0 : x;\n",tG="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",nG=zj({opSnippet:eG,packedOpSnippet:tG}),rG={kernelName:xn,backendName:"webgl",kernelFunc:nG},iG=JP+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",oG="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",aG=zj({opSnippet:iG,packedOpSnippet:oG}),sG={kernelName:In,backendName:"webgl",kernelFunc:aG};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class lG{constructor(e,t,n,r,i){this.variableNames=["A"],this.outputShape=[];const[o,a,s,l]=e;this.outputShape=[o,t,n,l];const u=[r&&t>1?a-1:a,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];let h;h=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class uG{constructor(e,t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,s,l]=e;this.outputShape=[o,t,n,l];const u=[r&&t>1?a-1:a,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];let h;h=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]},\n          ${u[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${a}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function cG(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:a,size:s}=r,[l,u]=s,c=oe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new uG(i.shape,l,u,o,a):new lG(i.shape,l,u,o,a);return n.runWebGLProgram(c,[i],"float32")}const hG={kernelName:Sn,backendName:"webgl",kernelFunc:cG};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class dG{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,i]=t,[,o,a]=e,s=[n&&o>1?r-1:r,n&&a>1?i-1:i],l=[n&&o>1?o-1:o,n&&a>1?a-1:a],u=s[0]/l[0],c=s[1]/l[1],h=1/u,d=1/c,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pG(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:a}=r,s=new dG(o.shape,i.shape,a);return n.runWebGLProgram(s,[o],o.dtype)}const fG={kernelName:Cn,backendName:"webgl",kernelFunc:pG};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class mG{constructor(e,t,n,r,i){this.variableNames=["A"],this.outputShape=[];const[o,a,s,l]=e;this.outputShape=[o,t,n,l];const u=[r&&t>1?a-1:a,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=r?"0.5":"0.0";let d;d=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${d};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class gG{constructor(e,t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,s,l]=e;this.outputShape=[o,t,n,l];const u=[r&&t>1?a-1:a,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=r?"0.5":"0.0";let d;d=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]},\n          ${u[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${a}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${d};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function bG(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:a,size:s}=r,[l,u]=s,c=oe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new gG(i.shape,l,u,o,a):new mG(i.shape,l,u,o,a);return n.runWebGLProgram(c,[i],i.dtype)}const vG={kernelName:kn,backendName:"webgl",kernelFunc:bG};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class yG{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,i]=t,[,o,a]=e,s=[n&&o>1?r-1:r,n&&a>1?i-1:i],l=[n&&o>1?o-1:o,n&&a>1?a-1:a],u=s[0]/l[0],c=s[1]/l[1],h=1/u,d=1/c,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${s[0]}) *\n                (float(dyR) / float(${l[0]}));\n\n            float sourceFracCol =\n                float(${s[1]}) *\n                  (float(dyC) / float(${l[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${i}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function xG(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:a}=r,s=new yG(o.shape,i.shape,a);return n.runWebGLProgram(s,[o],o.dtype)}const wG={kernelName:_n,backendName:"webgl",kernelFunc:xG};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class kG{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);const r=n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`,i=e.map(((e,t)=>r(t))).join(","),o=lF(n);this.userCode=`\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${i}));\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class _G{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;const r=jP("rc",n),i=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,o=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,a=lF(n);function s(e){return h(e)}function l(e){return e[n-1]="("+e[n-1]+" + 1)",h(e)}function u(e){return e[n-2]="("+e[n-2]+" + 1)",h(e)}function c(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",h(e)}function h(t){const n=e.map(((e,n)=>d(n,t))),r=n.join(","),i=n.slice(-2).join(",");return`getChannel(getX(${r}), vec2(${i}))`}function d(n,r){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${r[n]} - 1`:`${r[n]}`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${i}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${a} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${s(r.slice())};\n          if(${i}){\n            result.g = ${l(r.slice())};\n          }\n          if(${o}) {\n            result.b = ${u(r.slice())};\n            if(${i}) {\n              result.a = ${c(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function SG(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:o}=r,a=i.shape.length,s=T(o,i.shape);if(0===a)return Ij({inputs:{x:i},backend:n});const l=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _G(i.shape,s):new kG(i.shape,s);return n.runWebGLProgram(l,[i],i.dtype)}const CG={kernelName:On,backendName:"webgl",kernelFunc:SG};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class IG{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let i="";i="number"===typeof t?`float outputValue = ${t.toFixed(2)};`:`\n        vec3 fill = vec3(${t.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${i}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const OG={kernelName:mr,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:i,fillValue:o,center:a}=t,s=n,l=new IG(r.shape,o),[u,c]=Rp(a,r.shape[1],r.shape[2]),h=[[u,c,Math.sin(i),Math.cos(i)]],d=s.runWebGLProgram(l,[r],r.dtype,h);return d}},TG="\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n",NG=zj({opSnippet:TG}),EG={kernelName:Tn,backendName:"webgl",kernelFunc:NG},DG="return inversesqrt(x);",$G=zj({opSnippet:DG,cpuKernelImpl:yP}),AG={kernelName:Nn,backendName:"webgl",kernelFunc:$G};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class RG{constructor(e,t,n,r,i,o,a=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const s=lF(i.length),l=lF(o.length);let u="";1===n?u="i":2===n&&(u="i, j");const c=`getIndices(${u})`;let h="";1===r?h="i":2===r&&(h="i, coords[1]");const d=`getUpdates(${h})`,p=t>1?"strides[j]":"strides";this.userCode=`\n        ${s} strides = ${s}(${i});\n\n        void main() {\n          ${l} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(${c});\n              flattenedIndex += index * ${p};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${d};\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function MG(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:o}=t,{shape:a}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:h}=Up(o,i,a),d=[h/u,u];if(0===h)return n.makeTensorInfo(a,i.dtype);const p=Jj({inputs:{x:i},backend:n,attrs:{shape:[l,s]}}),f=Jj({inputs:{x:o},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new RG(l,s,p.shape.length,f.shape.length,c,d),b=n.runWebGLProgram(g,[f,p,m],f.dtype),v=Jj({inputs:{x:b},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(m),v}const FG={kernelName:En,backendName:"webgl",kernelFunc:MG};
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class PG{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,a=2===oe().getNumber("WEBGL_VERSION")?i:o,s="left"===r?"<":"<=";this.userCode=`\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ${a}\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ${s} value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     `}}
/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function jG(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:o}=t,{side:a}=r,s=new PG(i.shape[0],i.shape[1],o.shape[1],a),l=[[i.shape[1]]];return n.runWebGLProgram(s,[i,o],"int32",l)}const BG={kernelName:Dn,backendName:"webgl",kernelFunc:jG};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class LG{constructor(e,t,n){let r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)i="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=[];for(let r=0;r<t.length;r++)a.push(`${n[r]}`),r<e&&o.push(`${n[r]}`);r=o.join(),i=a.join()}const o=lF(n);this.userCode=`\n      void main() {\n        ${o} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${i}));\n        } else {\n          setOutput(getB(${i}));\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function zG(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:o}=t,a=new LG(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(a,[r,i,o],Ei(i.dtype,o.dtype))}const VG={kernelName:$n,backendName:"webgl",kernelFunc:zG},UG=`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${Wp};\n  float scale = ${Hp};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`,WG=zj({opSnippet:UG}),HG={kernelName:An,backendName:"webgl",kernelFunc:WG},GG=jj+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",qG="\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",YG=zj({opSnippet:GG,packedOpSnippet:qG,cpuKernelImpl:wP}),XG={kernelName:jn,backendName:"webgl",kernelFunc:YG},KG="\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n",JG=zj({opSnippet:KG}),ZG={kernelName:Pn,backendName:"webgl",kernelFunc:JG},QG=jj+"\n  return sin(x);\n",eq=zj({opSnippet:QG}),tq={kernelName:Mn,backendName:"webgl",kernelFunc:eq},nq="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",rq=zj({opSnippet:nq}),iq={kernelName:Fn,backendName:"webgl",kernelFunc:rq},oq="\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n",aq=zj({opSnippet:oq}),sq={kernelName:Bn,backendName:"webgl",kernelFunc:aq},lq=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,paddings:a}=r;b(i.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const s=o.reduce(((e,t)=>e*t)),l=[[0,0]];l.push(...a);for(let b=1+o.length;b<i.shape.length;++b)l.push([0,0]);const u=[],c=zH({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),h=Mp(c.shape,o,s,!1),d=Fp(h.length,o.length,!1),p=Pp(c.shape,o,s,!1),f=Jj({inputs:{x:c},backend:n,attrs:{shape:h}}),m=cB({inputs:{x:f},backend:n,attrs:{perm:d}}),g=Jj({inputs:{x:m},backend:n,attrs:{shape:p}});return u.push(c),u.push(f),u.push(m),u.forEach((e=>n.disposeIntermediateTensorInfo(e))),g},uq={kernelName:Vn,backendName:"webgl",kernelFunc:lq};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function cq(e){const{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:o,defaultValue:a}=t;if(1!==o.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${o.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${r.shape}`);if(1!==i.shape.length)throw new Error(`Values must be a vector, saw:\n         ${i.shape}`);if(0!==a.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${a.shape}`);const s=n.readSync(r.dataId),l=n.readSync(i.dataId),u=n.readSync(o.dataId),c=n.readSync(a.dataId)[0],[h,d,p,f,m]=SP(s,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],i.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const hq={kernelName:Hn,backendName:"webgl",kernelFunc:cq};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function dq(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:o}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(1!==i.shape.length)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(1!==o.shape.length)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const a=Array.from(n.readSync(i.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(o.dataId)),[u,c,h]=CP(s,r.shape,r.dtype,a,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}const pq={kernelName:Gn,backendName:"webgl",kernelFunc:dq};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function fq(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${i.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${o.shape}`);const a=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(o.dataId),[u,c]=IP(a,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const mq={kernelName:qn,backendName:"webgl",kernelFunc:fq};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function gq(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${i.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${o.shape}`);const a=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(o.dataId),[u,c]=IP(a,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}const bq={kernelName:Yn,backendName:"webgl",kernelFunc:gq};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function vq(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:o,defaultValue:a}=t,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:h,outputSize:d}=Up(o,i,s),p=!1;if("string"===o.dtype){const e=n.bufferSync(i),t=n.bufferSync(o),r=Qr(n.readSync(a.dataId)[0]),f=xP(e,t,s,d,c,u,l,h,r,p);return n.makeTensorInfo(s,f.dtype,f.values)}const f=new RG(u,l,i.shape.length,o.shape.length,h,[d,1],p),m=n.runWebGLProgram(f,[o,i,a],o.dtype),g=Jj({inputs:{x:m},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(m),g}const yq={kernelName:Xn,backendName:"webgl",kernelFunc:vq};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function xq(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:o,axis:a}=r,s=T(a,i.shape)[0],l=bf(i,o,s),u=i.shape.length,c=new Array(u).fill(0),h=i.shape.slice();return l.map((e=>{const t=[...h];t[s]=e;const r=EL({inputs:{x:i},backend:n,attrs:{begin:c,size:t}});return c[s]+=e,r}))}const wq={kernelName:Un,backendName:"webgl",kernelFunc:xq},kq="return sqrt(x);",_q=zj({opSnippet:kq,packedOpSnippet:kq,cpuKernelImpl:OP}),Sq={kernelName:Ln,backendName:"webgl",kernelFunc:_q},Cq="return x * x;",Iq=zj({opSnippet:Cq}),Oq={kernelName:Jn,backendName:"webgl",kernelFunc:Iq},Tq="return (a - b) * (a - b);",Nq=Vj({opSnippet:Tq,packedOpSnippet:Tq}),Eq={kernelName:Kn,backendName:"webgl",kernelFunc:Nq};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Dq({inputs:e,attrs:t,backend:n}){const{x:r}=e,i=JP+`\n    return x > 0.0 ? 1.0 : float(${t.alpha});\n  `,o=new KP(r.shape,i);return n.runWebGLProgram(o,[r],r.dtype)}const $q={kernelName:pr,backendName:"webgl",kernelFunc:Dq};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Aq{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,i=lF(n.length),o=lF(n.length);let a="";if(1===r)a="coords * strides + begin";else{let e=0;a=n.map(((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`))).join(",")}this.userCode=`\n      ${i} begin = ${i}(${e});\n      ${i} strides = ${i}(${t});\n\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${a}));\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Rq(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,end:a,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:h,shrinkAxisMask:d}=r,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:y,end:x,strides:w}=za(i.shape,o,a,s,l,u,c,h,d);let k;if(m)k=Jj({inputs:{x:i},backend:n,attrs:{shape:f}});else if(g||v){b(i.shape.length>=1,(()=>`Input must have rank at least 1, got: ${i.shape.length}`));const e=Ta(y,x,w),t=EL({inputs:{x:i},backend:n,attrs:{begin:y,size:e}});k=Jj({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=n.shouldExecuteOnCPU([i]);if(e){const e=n.readSync(i.dataId),t=Zo(i.shape,i.dtype,e),r=TP(p,t,w,y);k=n.makeTensorInfo(f,i.dtype,r.values)}else{const e=new Aq(y,w,p);k=n.runWebGLProgram(e,[i],i.dtype)}}const _=Jj({inputs:{x:k},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(k),_}const Mq={kernelName:Zn,backendName:"webgl",kernelFunc:Rq};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Fq(e){const{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:o,leftPad:a,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:h}=t,d=n.readSync(c.dataId),p=n.readSync(h.dataId),[f,m]=NP(d,p,i,o,a,s,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",m)]}const Pq={kernelName:Qn,backendName:"webgl",kernelFunc:Fq};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function jq(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:o,delimiter:a}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(0!==a.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const s=n.readSync(o.dataId),l=n.readSync(a.dataId)[0],[u,c,h]=EP(s,l,i),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const Bq={kernelName:er,backendName:"webgl",kernelFunc:jq};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Lq(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=n.readSync(o.dataId),s=DP(a,i);return n.makeTensorInfo(o.shape,"int32",s)}const zq={kernelName:tr,backendName:"webgl",kernelFunc:Lq},Vq="return tan(x);",Uq=zj({opSnippet:Vq}),Wq={kernelName:rr,backendName:"webgl",kernelFunc:Uq},Hq="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",Gq=zj({opSnippet:Hq}),qq={kernelName:ir,backendName:"webgl",kernelFunc:Gq};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Yq{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[o]*t[o];this.outputShape=n,this.rank=n.length;const r=lF(this.rank),i=Xq(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}function Xq(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<e.length;i++)r.push(`imod(${n[i]}, ${e[i]})`);return r.join()}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Kq(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:o}=r;if("string"===i.dtype||i.shape.length>5){const e=n.readSync(i.dataId),t="string"===i.dtype?e.map((e=>Qr(e))):e,r=Zo(i.shape,i.dtype,t),a=AP(r,o);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const a=new Yq(i.shape,o),s=n.runWebGLProgram(a,[i],i.dtype);return s}const Jq={kernelName:or,backendName:"webgl",kernelFunc:Kq};class Zq{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class Qq{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function eY(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function tY(e){let t=1;while(t<e)t*=2;return t}function nY(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:o,sorted:a}=r,s=oe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=oe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=i.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([i])||c<s||o>l){const e=n.readSync(i.dataId),[t,r]=RP(e,u,i.dtype,o,a);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===o)return u[u.length-1]=0,[n.makeTensorInfo(u,i.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(1===c)return[i,JV({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const h=n.texData.get(i.dataId),d=null!==h&&h.isPacked,p=d?n.unpackTensor(i):i,f=w(u),m=f/c,g=Jj({inputs:{x:p},attrs:{shape:[m,c]},backend:n});d&&eY(n,p);const b=tY(o),v=tY(c);let y=null;const x=()=>null===y?[g,g]:[g,y],k=(e,t,r)=>{const i=x(),o=new Zq(r),a=null===y?1:0,s=[[c],[a],[Number.NEGATIVE_INFINITY],[e],[t]],l=y;y=n.runWebGLProgram(o,i,"int32",s),eY(n,l)};for(let w=1;w<b;w*=2){const e=2*w;for(let t=w;t>=1;t/=2)k(e,t,[m,v])}for(let w=v;w>b;w/=2){const e=x(),t=new Qq([m,w/2]),r=null===y?1:0,i=[[c],[r],[b]],o=y;y=n.runWebGLProgram(t,e,"int32",i),eY(n,o);const a=b/2,s=2*a;for(let n=a;n>=1;n/=2)k(s,n,y.shape)}let _=y;y=EL({inputs:{x:y},backend:n,attrs:{begin:0,size:[m,o]}}),eY(n,_);let S=kU({inputs:{x:g,indices:y},backend:n,attrs:{axis:1,batchDims:1}});eY(n,g);const C=u.slice(0,-1);C.push(o),_=y,y=Jj({inputs:{x:y},attrs:{shape:C},backend:n}),eY(n,_);const I=S;return S=Jj({inputs:{x:S},attrs:{shape:C},backend:n}),eY(n,I),[S,y]}const rY={kernelName:ar,backendName:"webgl",kernelFunc:nY};
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class iY{constructor(e,t,n,r,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a="nearest"===n?1:2;let s;switch(r){case"constant":s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4;break;default:s=1;break}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${s} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${s} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${s} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${i});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${i});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${t}));\n                float mapY = mapCoord(inY, float(${e}));\n\n                if (${a} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}
/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function oY(e){const{inputs:t,backend:n,attrs:r}=e,{image:i,transforms:o}=t,{interpolation:a,fillMode:s,fillValue:l,outputShape:u}=r,[c,h,d,p]=i.shape,[f,m]=null!=u?u:[h,d],g=[c,f,m,p],b=new iY(h,d,a,s,l,g);return n.runWebGLProgram(b,[i,o],"float32")}const aY={kernelName:sr,backendName:"webgl",kernelFunc:oY};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function sY(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:o}=t;cM(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(o.dataId),{outputValues:s,outputShape:l,indices:u}=FP(a,i,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}const lY={kernelName:ur,backendName:"webgl",kernelFunc:sY};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function uY(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:o}=r;o<0&&(o+=i.shape.length);const a=i,s=a.shape.length,l=i.shape[o],u=new Array(s-1);let c=0;for(let m=0;m<s;m++)m!==o&&(u[c++]=a.shape[m]);const h=[],d=new Array(s).fill(0),p=a.shape.slice();p[o]=1;const f=new Array(l);for(let m=0;m<f.length;m++){d[o]=m;const e=EL({inputs:{x:a},backend:n,attrs:{begin:d,size:p}}),t=Jj({inputs:{x:e},backend:n,attrs:{shape:u}});f[m]=t,h.push(e)}return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}const cY={kernelName:cr,backendName:"webgl",kernelFunc:uY};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class hY{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/n);this.outputShape=[r,a];const s="0.0",l="sumValue",u=4*Math.floor(n/4),c=n%4,h="\n        sumValue += dot(values, segFilter);\n    ";let d="";i%n>0&&(d=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `);let p="";i%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${s};\n\n      float getValue(int batch, int inIdx) {\n        ${d}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${p}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${o})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${o})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${h}\n        } else if (${2===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${h}\n        } else if (${3===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${h}\n        }\n        setOutput(${l});\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function dY(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:o}=t,{numSegments:a}=r,s=i.shape.length,l=[];let u=0;const c=Tu([u],s);let h=i;null!=c&&(h=cB({inputs:{x:i},backend:n,attrs:{perm:c}}),l.push(h),u=Eu(1,s)[0]);const d=Df(h.shape,u,a),p=w([h.shape[u]]),f=Jj({inputs:{x:h},backend:n,attrs:{shape:[-1,p]}});l.push(f);const m=Di(i.dtype),g=(e,t,r,i,o)=>{const a=e.shape[0],s=e.shape[1],u=Ef(s,o),c={windowSize:u,inSize:s,batchSize:a,numSegments:o},h=new hY(c,t),d=n.compileAndRun(h,[e,r],i);if(l.push(d),d.shape[1]===o)return d;const p=XH({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),f=Kq({inputs:{x:p},backend:n,attrs:{reps:[s/u]}});l.push(p),l.push(f);const m=g(d,t,f,i,o);return m},b=g(f,"unsortedSegmentSum",o,m,a),v=Jj({inputs:{x:b},backend:n,attrs:{shape:d}});let y=v;if(null!=c){l.push(v);const e=Nu(c);y=cB({inputs:{x:y},backend:n,attrs:{perm:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}const pY={kernelName:hr,backendName:"webgl",kernelFunc:dY},fY=[mB,vB,wB,SB,OB,DB,AB,MB,VB,WB,qB,KB,QB,rL,aL,cL,dL,gL,vL,xL,SL,AL,ML,PL,GL,XL,QL,Nj,rz,dz,xz,Iz,Tz,Ez,$z,Rz,Pz,Lz,Uz,Kz,Zz,eV,rV,sV,hV,pV,gV,yV,wV,CV,NV,AV,FV,LV,VV,HV,XV,ZV,eU,rU,sU,cU,fU,gU,yU,_U,OU,DU,Oj,AU,lz,FU,BU,VU,Aj,GU,KU,ZU,nW,oW,uW,dW,gW,xW,_W,IW,EW,$W,RW,jW,LW,VW,WW,GW,KW,eH,iH,gH,Xj,xH,_H,IH,NH,LL,$H,FH,jH,VH,GH,Pj,YH,KH,VL,uH,QH,rG,sG,Zj,hG,fG,vG,wG,CG,OG,EG,AG,FG,BG,VG,HG,XG,ZG,tq,iq,DL,fH,sq,uq,hq,pq,mq,bq,yq,wq,Sq,Oq,Eq,$q,Mq,Pq,Bq,zq,dH,uB,Wq,qq,Jq,rY,aY,hB,lY,cY,pY,RH];for(const gY of fY)Ir(gY)},4870:function(e,t,n){"use strict";n.d(t,{$y:function(){return Re},B:function(){return a},BK:function(){return et},Bj:function(){return o},EB:function(){return u},Fl:function(){return it},IU:function(){return Pe},Jd:function(){return T},OT:function(){return Ee},PG:function(){return Ae},SU:function(){return Xe},Um:function(){return Ne},Vh:function(){return nt},WL:function(){return Je},X$:function(){return $},X3:function(){return Fe},XI:function(){return He},Xl:function(){return je},YS:function(){return De},ZM:function(){return Qe},cE:function(){return S},dq:function(){return Ue},iH:function(){return We},j:function(){return E},lk:function(){return N},nZ:function(){return l},oR:function(){return Ye},qj:function(){return Te},qq:function(){return k},sT:function(){return C},yT:function(){return Me}});var r=n(7139);let i;class o{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&i&&(this.parent=i,this.index=(i.scopes||(i.scopes=[])).push(this)-1)}run(e){if(this.active){const t=i;try{return i=this,e()}finally{i=t}}else 0}on(){i=this}off(){i=this.parent}stop(e){if(this.active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function a(e){return new o(e)}function s(e,t=i){t&&t.active&&t.effects.push(e)}function l(){return i}function u(e){i&&i.cleanups.push(e)}const c=e=>{const t=new Set(e);return t.w=0,t.n=0,t},h=e=>(e.w&b)>0,d=e=>(e.n&b)>0,p=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=b},f=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];h(i)&&!d(i)?i.delete(e):t[n++]=i,i.w&=~b,i.n&=~b}t.length=n}},m=new WeakMap;let g=0,b=1;const v=30;let y;const x=Symbol(""),w=Symbol("");class k{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,s(this,n)}run(){if(!this.active)return this.fn();let e=y,t=I;while(e){if(e===this)return;e=e.parent}try{return this.parent=y,y=this,I=!0,b=1<<++g,g<=v?p(this):_(this),this.fn()}finally{g<=v&&f(this),b=1<<--g,y=this.parent,I=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){y===this?this.deferStop=!0:this.active&&(_(this),this.onStop&&this.onStop(),this.active=!1)}}function _(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}function S(e,t){e.effect&&(e=e.effect.fn);const n=new k(e);t&&((0,r.l7)(n,t),t.scope&&s(n,t.scope)),t&&t.lazy||n.run();const i=n.run.bind(n);return i.effect=n,i}function C(e){e.effect.stop()}let I=!0;const O=[];function T(){O.push(I),I=!1}function N(){const e=O.pop();I=void 0===e||e}function E(e,t,n){if(I&&y){let t=m.get(e);t||m.set(e,t=new Map);let r=t.get(n);r||t.set(n,r=c());const i=void 0;D(r,i)}}function D(e,t){let n=!1;g<=v?d(e)||(e.n|=b,n=!h(e)):n=!e.has(y),n&&(e.add(y),y.deps.push(e))}function $(e,t,n,i,o,a){const s=m.get(e);if(!s)return;let l=[];if("clear"===t)l=[...s.values()];else if("length"===n&&(0,r.kJ)(e))s.forEach(((e,t)=>{("length"===t||t>=i)&&l.push(e)}));else switch(void 0!==n&&l.push(s.get(n)),t){case"add":(0,r.kJ)(e)?(0,r.S0)(n)&&l.push(s.get("length")):(l.push(s.get(x)),(0,r._N)(e)&&l.push(s.get(w)));break;case"delete":(0,r.kJ)(e)||(l.push(s.get(x)),(0,r._N)(e)&&l.push(s.get(w)));break;case"set":(0,r._N)(e)&&l.push(s.get(x));break}if(1===l.length)l[0]&&A(l[0]);else{const e=[];for(const t of l)t&&e.push(...t);A(c(e))}}function A(e,t){const n=(0,r.kJ)(e)?e:[...e];for(const r of n)r.computed&&R(r,t);for(const r of n)r.computed||R(r,t)}function R(e,t){(e!==y||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const M=(0,r.fY)("__proto__,__v_isRef,__isVue"),F=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(r.yk)),P=U(),j=U(!1,!0),B=U(!0),L=U(!0,!0),z=V();function V(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=Pe(this);for(let t=0,i=this.length;t<i;t++)E(n,"get",t+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(Pe)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){T();const n=Pe(this)[t].apply(this,e);return N(),n}})),e}function U(e=!1,t=!1){return function(n,i,o){if("__v_isReactive"===i)return!e;if("__v_isReadonly"===i)return e;if("__v_isShallow"===i)return t;if("__v_raw"===i&&o===(e?t?Ce:Se:t?_e:ke).get(n))return n;const a=(0,r.kJ)(n);if(!e&&a&&(0,r.RI)(z,i))return Reflect.get(z,i,o);const s=Reflect.get(n,i,o);return((0,r.yk)(i)?F.has(i):M(i))?s:(e||E(n,"get",i),t?s:Ue(s)?a&&(0,r.S0)(i)?s:s.value:(0,r.Kn)(s)?e?Ee(s):Te(s):s)}}const W=G(),H=G(!0);function G(e=!1){return function(t,n,i,o){let a=t[n];if(Re(a)&&Ue(a)&&!Ue(i))return!1;if(!e&&!Re(i)&&(Me(i)||(i=Pe(i),a=Pe(a)),!(0,r.kJ)(t)&&Ue(a)&&!Ue(i)))return a.value=i,!0;const s=(0,r.kJ)(t)&&(0,r.S0)(n)?Number(n)<t.length:(0,r.RI)(t,n),l=Reflect.set(t,n,i,o);return t===Pe(o)&&(s?(0,r.aU)(i,a)&&$(t,"set",n,i,a):$(t,"add",n,i)),l}}function q(e,t){const n=(0,r.RI)(e,t),i=e[t],o=Reflect.deleteProperty(e,t);return o&&n&&$(e,"delete",t,void 0,i),o}function Y(e,t){const n=Reflect.has(e,t);return(0,r.yk)(t)&&F.has(t)||E(e,"has",t),n}function X(e){return E(e,"iterate",(0,r.kJ)(e)?"length":x),Reflect.ownKeys(e)}const K={get:P,set:W,deleteProperty:q,has:Y,ownKeys:X},J={get:B,set(e,t){return!0},deleteProperty(e,t){return!0}},Z=(0,r.l7)({},K,{get:j,set:H}),Q=(0,r.l7)({},J,{get:L}),ee=e=>e,te=e=>Reflect.getPrototypeOf(e);function ne(e,t,n=!1,r=!1){e=e["__v_raw"];const i=Pe(e),o=Pe(t);n||(t!==o&&E(i,"get",t),E(i,"get",o));const{has:a}=te(i),s=r?ee:n?Le:Be;return a.call(i,t)?s(e.get(t)):a.call(i,o)?s(e.get(o)):void(e!==i&&e.get(t))}function re(e,t=!1){const n=this["__v_raw"],r=Pe(n),i=Pe(e);return t||(e!==i&&E(r,"has",e),E(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function ie(e,t=!1){return e=e["__v_raw"],!t&&E(Pe(e),"iterate",x),Reflect.get(e,"size",e)}function oe(e){e=Pe(e);const t=Pe(this),n=te(t),r=n.has.call(t,e);return r||(t.add(e),$(t,"add",e,e)),this}function ae(e,t){t=Pe(t);const n=Pe(this),{has:i,get:o}=te(n);let a=i.call(n,e);a||(e=Pe(e),a=i.call(n,e));const s=o.call(n,e);return n.set(e,t),a?(0,r.aU)(t,s)&&$(n,"set",e,t,s):$(n,"add",e,t),this}function se(e){const t=Pe(this),{has:n,get:r}=te(t);let i=n.call(t,e);i||(e=Pe(e),i=n.call(t,e));const o=r?r.call(t,e):void 0,a=t.delete(e);return i&&$(t,"delete",e,void 0,o),a}function le(){const e=Pe(this),t=0!==e.size,n=void 0,r=e.clear();return t&&$(e,"clear",void 0,void 0,n),r}function ue(e,t){return function(n,r){const i=this,o=i["__v_raw"],a=Pe(o),s=t?ee:e?Le:Be;return!e&&E(a,"iterate",x),o.forEach(((e,t)=>n.call(r,s(e),s(t),i)))}}function ce(e,t,n){return function(...i){const o=this["__v_raw"],a=Pe(o),s=(0,r._N)(a),l="entries"===e||e===Symbol.iterator&&s,u="keys"===e&&s,c=o[e](...i),h=n?ee:t?Le:Be;return!t&&E(a,"iterate",u?w:x),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:l?[h(e[0]),h(e[1])]:h(e),done:t}},[Symbol.iterator](){return this}}}}function he(e){return function(...t){return"delete"!==e&&this}}function de(){const e={get(e){return ne(this,e)},get size(){return ie(this)},has:re,add:oe,set:ae,delete:se,clear:le,forEach:ue(!1,!1)},t={get(e){return ne(this,e,!1,!0)},get size(){return ie(this)},has:re,add:oe,set:ae,delete:se,clear:le,forEach:ue(!1,!0)},n={get(e){return ne(this,e,!0)},get size(){return ie(this,!0)},has(e){return re.call(this,e,!0)},add:he("add"),set:he("set"),delete:he("delete"),clear:he("clear"),forEach:ue(!0,!1)},r={get(e){return ne(this,e,!0,!0)},get size(){return ie(this,!0)},has(e){return re.call(this,e,!0)},add:he("add"),set:he("set"),delete:he("delete"),clear:he("clear"),forEach:ue(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach((i=>{e[i]=ce(i,!1,!1),n[i]=ce(i,!0,!1),t[i]=ce(i,!1,!0),r[i]=ce(i,!0,!0)})),[e,n,t,r]}const[pe,fe,me,ge]=de();function be(e,t){const n=t?e?ge:me:e?fe:pe;return(t,i,o)=>"__v_isReactive"===i?!e:"__v_isReadonly"===i?e:"__v_raw"===i?t:Reflect.get((0,r.RI)(n,i)&&i in t?n:t,i,o)}const ve={get:be(!1,!1)},ye={get:be(!1,!0)},xe={get:be(!0,!1)},we={get:be(!0,!0)};const ke=new WeakMap,_e=new WeakMap,Se=new WeakMap,Ce=new WeakMap;function Ie(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Oe(e){return e["__v_skip"]||!Object.isExtensible(e)?0:Ie((0,r.W7)(e))}function Te(e){return Re(e)?e:$e(e,!1,K,ve,ke)}function Ne(e){return $e(e,!1,Z,ye,_e)}function Ee(e){return $e(e,!0,J,xe,Se)}function De(e){return $e(e,!0,Q,we,Ce)}function $e(e,t,n,i,o){if(!(0,r.Kn)(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const a=o.get(e);if(a)return a;const s=Oe(e);if(0===s)return e;const l=new Proxy(e,2===s?i:n);return o.set(e,l),l}function Ae(e){return Re(e)?Ae(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function Re(e){return!(!e||!e["__v_isReadonly"])}function Me(e){return!(!e||!e["__v_isShallow"])}function Fe(e){return Ae(e)||Re(e)}function Pe(e){const t=e&&e["__v_raw"];return t?Pe(t):e}function je(e){return(0,r.Nj)(e,"__v_skip",!0),e}const Be=e=>(0,r.Kn)(e)?Te(e):e,Le=e=>(0,r.Kn)(e)?Ee(e):e;function ze(e){I&&y&&(e=Pe(e),D(e.dep||(e.dep=c())))}function Ve(e,t){e=Pe(e),e.dep&&A(e.dep)}function Ue(e){return!(!e||!0!==e.__v_isRef)}function We(e){return Ge(e,!1)}function He(e){return Ge(e,!0)}function Ge(e,t){return Ue(e)?e:new qe(e,t)}class qe{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Pe(e),this._value=t?e:Be(e)}get value(){return ze(this),this._value}set value(e){e=this.__v_isShallow?e:Pe(e),(0,r.aU)(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:Be(e),Ve(this,e))}}function Ye(e){Ve(e,void 0)}function Xe(e){return Ue(e)?e.value:e}const Ke={get:(e,t,n)=>Xe(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return Ue(i)&&!Ue(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Je(e){return Ae(e)?e:new Proxy(e,Ke)}class Ze{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:n}=e((()=>ze(this)),(()=>Ve(this)));this._get=t,this._set=n}get value(){return this._get()}set value(e){this._set(e)}}function Qe(e){return new Ze(e)}function et(e){const t=(0,r.kJ)(e)?new Array(e.length):{};for(const n in e)t[n]=nt(e,n);return t}class tt{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}}function nt(e,t,n){const r=e[t];return Ue(r)?r:new tt(e,t,n)}class rt{constructor(e,t,n,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new k(e,(()=>{this._dirty||(this._dirty=!0,Ve(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this["__v_isReadonly"]=n}get value(){const e=Pe(this);return ze(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function it(e,t,n=!1){let i,o;const a=(0,r.mf)(e);a?(i=e,o=r.dG):(i=e.get,o=e.set);const s=new rt(i,o,a||!o,n);return s}},3396:function(e,t,n){"use strict";n.d(t,{$d:function(){return p},$y:function(){return r.$y},Ah:function(){return lt},B:function(){return r.B},BK:function(){return r.BK},Bj:function(){return r.Bj},Bz:function(){return Br},C3:function(){return Xn},C_:function(){return i.C_},Cn:function(){return Z},EB:function(){return r.EB},Eo:function(){return xn},F4:function(){return nr},FN:function(){return gr},Fl:function(){return Pr},G:function(){return ni},HX:function(){return Q},HY:function(){return An},Ho:function(){return rr},IU:function(){return r.IU},JJ:function(){return xe},Jd:function(){return st},KU:function(){return d},Ko:function(){return _t},LL:function(){return yt},MW:function(){return jr},MX:function(){return Zr},Mr:function(){return Jr},Nv:function(){return St},OT:function(){return r.OT},Ob:function(){return qe},P$:function(){return Re},PG:function(){return r.PG},Q2:function(){return xt},Q6:function(){return Le},RC:function(){return Ue},Rh:function(){return _e},Rr:function(){return Vr},S3:function(){return f},SU:function(){return r.SU},U2:function(){return Fe},Uc:function(){return Xr},Uk:function(){return ir},Um:function(){return r.Um},Us:function(){return yn},Vh:function(){return r.Vh},WI:function(){return Ct},WL:function(){return r.WL},WY:function(){return Lr},Wm:function(){return er},X3:function(){return r.X3},XI:function(){return r.XI},Xl:function(){return r.Xl},Xn:function(){return ot},Y1:function(){return Ir},Y3:function(){return N},Y8:function(){return De},YP:function(){return Ie},YS:function(){return r.YS},Yq:function(){return ct},ZK:function(){return a},ZM:function(){return r.ZM},Zq:function(){return Kr},_:function(){return Qn},_A:function(){return i._A},aZ:function(){return ze},b9:function(){return zr},bT:function(){return ht},bv:function(){return it},cE:function(){return r.cE},d1:function(){return dt},dD:function(){return J},dG:function(){return cr},dl:function(){return Xe},dq:function(){return r.dq},ec:function(){return W},eq:function(){return ri},f3:function(){return we},h:function(){return Yr},hR:function(){return i.hR},i8:function(){return ei},iD:function(){return Hn},iH:function(){return r.iH},ic:function(){return at},j4:function(){return Gn},j5:function(){return i.j5},kC:function(){return i.kC},kq:function(){return ar},l1:function(){return Ur},lA:function(){return qn},lR:function(){return $n},m0:function(){return ke},mW:function(){return z},mv:function(){return qr},mx:function(){return Ot},n4:function(){return ce},nK:function(){return Be},nQ:function(){return Qr},nZ:function(){return r.nZ},oR:function(){return r.oR},of:function(){return Or},p1:function(){return Gr},qG:function(){return Fn},qZ:function(){return Un},qb:function(){return F},qj:function(){return r.qj},qq:function(){return r.qq},ry:function(){return ii},sT:function(){return r.sT},se:function(){return Ke},sv:function(){return Mn},uE:function(){return or},u_:function(){return Hr},up:function(){return bt},vl:function(){return ut},vs:function(){return i.vs},w5:function(){return ee},wF:function(){return rt},wg:function(){return Bn},wy:function(){return pt},xv:function(){return Rn},yT:function(){return r.yT},yX:function(){return Se},zw:function(){return i.zw}});n(1703);var r=n(4870),i=n(7139);const o=[];function a(e,...t){(0,r.Jd)();const n=o.length?o[o.length-1].component:null,i=n&&n.appContext.config.warnHandler,a=s();if(i)d(i,n,11,[e+t.join(""),n&&n.proxy,a.map((({vnode:e})=>`at <${Mr(n,e.type)}>`)).join("\n"),a]);else{const n=[`[Vue warn]: ${e}`,...t];a.length&&n.push("\n",...l(a)),console.warn(...n)}(0,r.lk)()}function s(){let e=o[o.length-1];if(!e)return[];const t=[];while(e){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const r=e.component&&e.component.parent;e=r&&r.vnode}return t}function l(e){const t=[];return e.forEach(((e,n)=>{t.push(...0===n?[]:["\n"],...u(e))})),t}function u({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",r=!!e.component&&null==e.component.parent,i=` at <${Mr(e.component,e.type,r)}`,o=">"+n;return e.props?[i,...c(e.props),o]:[i+o]}function c(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach((n=>{t.push(...h(n,e[n]))})),n.length>3&&t.push(" ..."),t}function h(e,t,n){return(0,i.HD)(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):"number"===typeof t||"boolean"===typeof t||null==t?n?t:[`${e}=${t}`]:(0,r.dq)(t)?(t=h(e,(0,r.IU)(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):(0,i.mf)(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=(0,r.IU)(t),n?t:[`${e}=`,t])}function d(e,t,n,r){let i;try{i=r?e(...r):e()}catch(o){f(o,t,n)}return i}function p(e,t,n,r){if((0,i.mf)(e)){const o=d(e,t,n,r);return o&&(0,i.tI)(o)&&o.catch((e=>{f(e,t,n)})),o}const o=[];for(let i=0;i<e.length;i++)o.push(p(e[i],t,n,r));return o}function f(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let r=t.parent;const i=t.proxy,o=n;while(r){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,o))return;r=r.parent}const a=t.appContext.config.errorHandler;if(a)return void d(a,null,10,[e,i,o])}m(e,n,i,r)}function m(e,t,n,r=!0){console.error(e)}let g=!1,b=!1;const v=[];let y=0;const x=[];let w=null,k=0;const _=[];let S=null,C=0;const I=Promise.resolve();let O=null,T=null;function N(e){const t=O||I;return e?t.then(this?e.bind(this):e):t}function E(e){let t=y+1,n=v.length;while(t<n){const r=t+n>>>1,i=B(v[r]);i<e?t=r+1:n=r}return t}function D(e){v.length&&v.includes(e,g&&e.allowRecurse?y+1:y)||e===T||(null==e.id?v.push(e):v.splice(E(e.id),0,e),$())}function $(){g||b||(b=!0,O=I.then(L))}function A(e){const t=v.indexOf(e);t>y&&v.splice(t,1)}function R(e,t,n,r){(0,i.kJ)(e)?n.push(...e):t&&t.includes(e,e.allowRecurse?r+1:r)||n.push(e),$()}function M(e){R(e,w,x,k)}function F(e){R(e,S,_,C)}function P(e,t=null){if(x.length){for(T=t,w=[...new Set(x)],x.length=0,k=0;k<w.length;k++)w[k]();w=null,k=0,T=null,P(e,t)}}function j(e){if(P(),_.length){const e=[...new Set(_)];if(_.length=0,S)return void S.push(...e);for(S=e,S.sort(((e,t)=>B(e)-B(t))),C=0;C<S.length;C++)S[C]();S=null,C=0}}const B=e=>null==e.id?1/0:e.id;function L(e){b=!1,g=!0,P(e),v.sort(((e,t)=>B(e)-B(t)));i.dG;try{for(y=0;y<v.length;y++){const e=v[y];e&&!1!==e.active&&d(e,null,14)}}finally{y=0,v.length=0,j(e),g=!1,O=null,(v.length||x.length||_.length)&&L(e)}}new Set;new Map;let z,V=[],U=!1;function W(e,t){var n,r;if(z=e,z)z.enabled=!0,V.forEach((({event:e,args:t})=>z.emit(e,...t))),V=[];else if("undefined"!==typeof window&&window.HTMLElement&&!(null===(r=null===(n=window.navigator)||void 0===n?void 0:n.userAgent)||void 0===r?void 0:r.includes("jsdom"))){const e=t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[];e.push((e=>{W(e,t)})),setTimeout((()=>{z||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,U=!0,V=[])}),3e3)}else U=!0,V=[]}function H(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||i.kT;let o=n;const a=t.startsWith("update:"),s=a&&t.slice(7);if(s&&s in r){const e=`${"modelValue"===s?"model":s}Modifiers`,{number:t,trim:a}=r[e]||i.kT;a&&(o=n.map((e=>e.trim()))),t&&(o=n.map(i.He))}let l;let u=r[l=(0,i.hR)(t)]||r[l=(0,i.hR)((0,i._A)(t))];!u&&a&&(u=r[l=(0,i.hR)((0,i.rs)(t))]),u&&p(u,e,6,o);const c=r[l+"Once"];if(c){if(e.emitted){if(e.emitted[l])return}else e.emitted={};e.emitted[l]=!0,p(c,e,6,o)}}function G(e,t,n=!1){const r=t.emitsCache,o=r.get(e);if(void 0!==o)return o;const a=e.emits;let s={},l=!1;if(!(0,i.mf)(e)){const r=e=>{const n=G(e,t,!0);n&&(l=!0,(0,i.l7)(s,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return a||l?((0,i.kJ)(a)?a.forEach((e=>s[e]=null)):(0,i.l7)(s,a),r.set(e,s),s):(r.set(e,null),null)}function q(e,t){return!(!e||!(0,i.F7)(t))&&(t=t.slice(2).replace(/Once$/,""),(0,i.RI)(e,t[0].toLowerCase()+t.slice(1))||(0,i.RI)(e,(0,i.rs)(t))||(0,i.RI)(e,t))}let Y=null,X=null;function K(e){const t=Y;return Y=e,X=e&&e.type.__scopeId||null,t}function J(e){X=e}function Z(){X=null}const Q=e=>ee;function ee(e,t=Y,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&Un(-1);const i=K(t),o=e(...n);return K(i),r._d&&Un(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function te(e){const{type:t,vnode:n,proxy:r,withProxy:o,props:a,propsOptions:[s],slots:l,attrs:u,emit:c,render:h,renderCache:d,data:p,setupState:m,ctx:g,inheritAttrs:b}=e;let v,y;const x=K(e);try{if(4&n.shapeFlag){const e=o||r;v=sr(h.call(e,e,d,a,m,p,g)),y=u}else{const e=t;0,v=sr(e.length>1?e(a,{attrs:u,slots:l,emit:c}):e(a,null)),y=t.props?u:re(u)}}catch(k){Pn.length=0,f(k,e,1),v=er(Mn)}let w=v;if(y&&!1!==b){const e=Object.keys(y),{shapeFlag:t}=w;e.length&&7&t&&(s&&e.some(i.tR)&&(y=ie(y,s)),w=rr(w,y))}return n.dirs&&(w=rr(w),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),v=w,K(x),v}function ne(e){let t;for(let n=0;n<e.length;n++){const r=e[n];if(!qn(r))return;if(r.type!==Mn||"v-if"===r.children){if(t)return;t=r}}return t}const re=e=>{let t;for(const n in e)("class"===n||"style"===n||(0,i.F7)(n))&&((t||(t={}))[n]=e[n]);return t},ie=(e,t)=>{const n={};for(const r in e)(0,i.tR)(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function oe(e,t,n){const{props:r,children:i,component:o}=e,{props:a,children:s,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!i&&!s||s&&s.$stable)||r!==a&&(r?!a||ae(r,a,u):!!a);if(1024&l)return!0;if(16&l)return r?ae(r,a,u):!!a;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==r[n]&&!q(u,n))return!0}}return!1}function ae(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!q(n,o))return!0}return!1}function se({vnode:e,parent:t},n){while(t&&t.subTree===e)(e=t.vnode).el=n,t=t.parent}const le=e=>e.__isSuspense,ue={name:"Suspense",__isSuspense:!0,process(e,t,n,r,i,o,a,s,l,u){null==e?de(t,n,r,i,o,a,s,l,u):pe(e,t,n,r,i,a,s,l,u)},hydrate:me,create:fe,normalize:ge},ce=ue;function he(e,t){const n=e.props&&e.props[t];(0,i.mf)(n)&&n()}function de(e,t,n,r,i,o,a,s,l){const{p:u,o:{createElement:c}}=l,h=c("div"),d=e.suspense=fe(e,i,r,t,h,n,o,a,s,l);u(null,d.pendingBranch=e.ssContent,h,null,r,d,o,a),d.deps>0?(he(e,"onPending"),he(e,"onFallback"),u(null,e.ssFallback,t,n,r,null,o,a),ye(d,e.ssFallback)):d.resolve()}function pe(e,t,n,r,i,o,a,s,{p:l,um:u,o:{createElement:c}}){const h=t.suspense=e.suspense;h.vnode=t,t.el=e.el;const d=t.ssContent,p=t.ssFallback,{activeBranch:f,pendingBranch:m,isInFallback:g,isHydrating:b}=h;if(m)h.pendingBranch=d,Yn(d,m)?(l(m,d,h.hiddenContainer,null,i,h,o,a,s),h.deps<=0?h.resolve():g&&(l(f,p,n,r,i,null,o,a,s),ye(h,p))):(h.pendingId++,b?(h.isHydrating=!1,h.activeBranch=m):u(m,i,h),h.deps=0,h.effects.length=0,h.hiddenContainer=c("div"),g?(l(null,d,h.hiddenContainer,null,i,h,o,a,s),h.deps<=0?h.resolve():(l(f,p,n,r,i,null,o,a,s),ye(h,p))):f&&Yn(d,f)?(l(f,d,n,r,i,h,o,a,s),h.resolve(!0)):(l(null,d,h.hiddenContainer,null,i,h,o,a,s),h.deps<=0&&h.resolve()));else if(f&&Yn(d,f))l(f,d,n,r,i,h,o,a,s),ye(h,d);else if(he(t,"onPending"),h.pendingBranch=d,h.pendingId++,l(null,d,h.hiddenContainer,null,i,h,o,a,s),h.deps<=0)h.resolve();else{const{timeout:e,pendingId:t}=h;e>0?setTimeout((()=>{h.pendingId===t&&h.fallback(p)}),e):0===e&&h.fallback(p)}}function fe(e,t,n,r,o,a,s,l,u,c,h=!1){const{p:d,m:p,um:m,n:g,o:{parentNode:b,remove:v}}=c,y=(0,i.He)(e.props&&e.props.timeout),x={vnode:e,parent:t,parentComponent:n,isSVG:s,container:r,hiddenContainer:o,anchor:a,deps:0,pendingId:0,timeout:"number"===typeof y?y:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:h,isUnmounted:!1,effects:[],resolve(e=!1){const{vnode:t,activeBranch:n,pendingBranch:r,pendingId:i,effects:o,parentComponent:a,container:s}=x;if(x.isHydrating)x.isHydrating=!1;else if(!e){const e=n&&r.transition&&"out-in"===r.transition.mode;e&&(n.transition.afterLeave=()=>{i===x.pendingId&&p(r,s,t,0)});let{anchor:t}=x;n&&(t=g(n),m(n,a,x,!0)),e||p(r,s,t,0)}ye(x,r),x.pendingBranch=null,x.isInFallback=!1;let l=x.parent,u=!1;while(l){if(l.pendingBranch){l.effects.push(...o),u=!0;break}l=l.parent}u||F(o),x.effects=[],he(t,"onResolve")},fallback(e){if(!x.pendingBranch)return;const{vnode:t,activeBranch:n,parentComponent:r,container:i,isSVG:o}=x;he(t,"onFallback");const a=g(n),s=()=>{x.isInFallback&&(d(null,e,i,a,r,null,o,l,u),ye(x,e))},c=e.transition&&"out-in"===e.transition.mode;c&&(n.transition.afterLeave=s),x.isInFallback=!0,m(n,r,null,!0),c||s()},move(e,t,n){x.activeBranch&&p(x.activeBranch,e,t,n),x.container=e},next(){return x.activeBranch&&g(x.activeBranch)},registerDep(e,t){const n=!!x.pendingBranch;n&&x.deps++;const r=e.vnode.el;e.asyncDep.catch((t=>{f(t,e,0)})).then((i=>{if(e.isUnmounted||x.isUnmounted||x.pendingId!==e.suspenseId)return;e.asyncResolved=!0;const{vnode:o}=e;Cr(e,i,!1),r&&(o.el=r);const a=!r&&e.subTree.el;t(e,o,b(r||e.subTree.el),r?null:g(e.subTree),x,s,u),a&&v(a),se(e,o.el),n&&0===--x.deps&&x.resolve()}))},unmount(e,t){x.isUnmounted=!0,x.activeBranch&&m(x.activeBranch,n,e,t),x.pendingBranch&&m(x.pendingBranch,n,e,t)}};return x}function me(e,t,n,r,i,o,a,s,l){const u=t.suspense=fe(t,r,n,e.parentNode,document.createElement("div"),null,i,o,a,s,!0),c=l(e,u.pendingBranch=t.ssContent,n,u,o,a);return 0===u.deps&&u.resolve(),c}function ge(e){const{shapeFlag:t,children:n}=e,r=32&t;e.ssContent=be(r?n.default:n),e.ssFallback=r?be(n.fallback):er(Mn)}function be(e){let t;if((0,i.mf)(e)){const n=Vn&&e._c;n&&(e._d=!1,Bn()),e=e(),n&&(e._d=!0,t=jn,Ln())}if((0,i.kJ)(e)){const t=ne(e);0,e=t}return e=sr(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter((t=>t!==e))),e}function ve(e,t){t&&t.pendingBranch?(0,i.kJ)(e)?t.effects.push(...e):t.effects.push(e):F(e)}function ye(e,t){e.activeBranch=t;const{vnode:n,parentComponent:r}=e,i=n.el=t.el;r&&r.subTree===n&&(r.vnode.el=i,se(r,i))}function xe(e,t){if(mr){let n=mr.provides;const r=mr.parent&&mr.parent.provides;r===n&&(n=mr.provides=Object.create(r)),n[e]=t}else 0}function we(e,t,n=!1){const r=mr||Y;if(r){const o=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&(0,i.mf)(t)?t.call(r.proxy):t}else 0}function ke(e,t){return Oe(e,null,t)}function _e(e,t){return Oe(e,null,{flush:"post"})}function Se(e,t){return Oe(e,null,{flush:"sync"})}const Ce={};function Ie(e,t,n){return Oe(e,t,n)}function Oe(e,t,{immediate:n,deep:o,flush:a,onTrack:s,onTrigger:l}=i.kT){const u=mr;let c,h,f=!1,m=!1;if((0,r.dq)(e)?(c=()=>e.value,f=(0,r.yT)(e)):(0,r.PG)(e)?(c=()=>e,o=!0):(0,i.kJ)(e)?(m=!0,f=e.some((e=>(0,r.PG)(e)||(0,r.yT)(e))),c=()=>e.map((e=>(0,r.dq)(e)?e.value:(0,r.PG)(e)?Ee(e):(0,i.mf)(e)?d(e,u,2):void 0))):c=(0,i.mf)(e)?t?()=>d(e,u,2):()=>{if(!u||!u.isUnmounted)return h&&h(),p(e,u,3,[g])}:i.dG,t&&o){const e=c;c=()=>Ee(e())}let g=e=>{h=x.onStop=()=>{d(e,u,4)}};if(kr)return g=i.dG,t?n&&p(t,u,3,[c(),m?[]:void 0,g]):c(),i.dG;let b=m?[]:Ce;const v=()=>{if(x.active)if(t){const e=x.run();(o||f||(m?e.some(((e,t)=>(0,i.aU)(e,b[t]))):(0,i.aU)(e,b)))&&(h&&h(),p(t,u,3,[e,b===Ce?void 0:b,g]),b=e)}else x.run()};let y;v.allowRecurse=!!t,y="sync"===a?v:"post"===a?()=>vn(v,u&&u.suspense):()=>M(v);const x=new r.qq(c,y);return t?n?v():b=x.run():"post"===a?vn(x.run.bind(x),u&&u.suspense):x.run(),()=>{x.stop(),u&&u.scope&&(0,i.Od)(u.scope.effects,x)}}function Te(e,t,n){const r=this.proxy,o=(0,i.HD)(e)?e.includes(".")?Ne(r,e):()=>r[e]:e.bind(r,r);let a;(0,i.mf)(t)?a=t:(a=t.handler,n=t);const s=mr;br(this);const l=Oe(o,a.bind(r),n);return s?br(s):vr(),l}function Ne(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function Ee(e,t){if(!(0,i.Kn)(e)||e["__v_skip"])return e;if(t=t||new Set,t.has(e))return e;if(t.add(e),(0,r.dq)(e))Ee(e.value,t);else if((0,i.kJ)(e))for(let n=0;n<e.length;n++)Ee(e[n],t);else if((0,i.DM)(e)||(0,i._N)(e))e.forEach((e=>{Ee(e,t)}));else if((0,i.PO)(e))for(const n in e)Ee(e[n],t);return e}function De(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return it((()=>{e.isMounted=!0})),st((()=>{e.isUnmounting=!0})),e}const $e=[Function,Array],Ae={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:$e,onEnter:$e,onAfterEnter:$e,onEnterCancelled:$e,onBeforeLeave:$e,onLeave:$e,onAfterLeave:$e,onLeaveCancelled:$e,onBeforeAppear:$e,onAppear:$e,onAfterAppear:$e,onAppearCancelled:$e},setup(e,{slots:t}){const n=gr(),i=De();let o;return()=>{const a=t.default&&Le(t.default(),!0);if(!a||!a.length)return;let s=a[0];if(a.length>1){let e=!1;for(const t of a)if(t.type!==Mn){0,s=t,e=!0;break}}const l=(0,r.IU)(e),{mode:u}=l;if(i.isLeaving)return Pe(s);const c=je(s);if(!c)return Pe(s);const h=Fe(c,l,i,n);Be(c,h);const d=n.subTree,p=d&&je(d);let f=!1;const{getTransitionKey:m}=c.type;if(m){const e=m();void 0===o?o=e:e!==o&&(o=e,f=!0)}if(p&&p.type!==Mn&&(!Yn(c,p)||f)){const e=Fe(p,l,i,n);if(Be(p,e),"out-in"===u)return i.isLeaving=!0,e.afterLeave=()=>{i.isLeaving=!1,n.update()},Pe(s);"in-out"===u&&c.type!==Mn&&(e.delayLeave=(e,t,n)=>{const r=Me(i,p);r[String(p.key)]=p,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=n})}return s}}},Re=Ae;function Me(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Fe(e,t,n,r){const{appear:o,mode:a,persisted:s=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:h,onBeforeLeave:d,onLeave:f,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:b,onAppear:v,onAfterAppear:y,onAppearCancelled:x}=t,w=String(e.key),k=Me(n,e),_=(e,t)=>{e&&p(e,r,9,t)},S=(e,t)=>{const n=t[1];_(e,t),(0,i.kJ)(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},C={mode:a,persisted:s,beforeEnter(t){let r=l;if(!n.isMounted){if(!o)return;r=b||l}t._leaveCb&&t._leaveCb(!0);const i=k[w];i&&Yn(e,i)&&i.el._leaveCb&&i.el._leaveCb(),_(r,[t])},enter(e){let t=u,r=c,i=h;if(!n.isMounted){if(!o)return;t=v||u,r=y||c,i=x||h}let a=!1;const s=e._enterCb=t=>{a||(a=!0,_(t?i:r,[e]),C.delayedLeave&&C.delayedLeave(),e._enterCb=void 0)};t?S(t,[e,s]):s()},leave(t,r){const i=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return r();_(d,[t]);let o=!1;const a=t._leaveCb=n=>{o||(o=!0,r(),_(n?g:m,[t]),t._leaveCb=void 0,k[i]===e&&delete k[i])};k[i]=e,f?S(f,[t,a]):a()},clone(e){return Fe(e,t,n,r)}};return C}function Pe(e){if(He(e))return e=rr(e),e.children=null,e}function je(e){return He(e)?e.children?e.children[0]:void 0:e}function Be(e,t){6&e.shapeFlag&&e.component?Be(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Le(e,t=!1,n){let r=[],i=0;for(let o=0;o<e.length;o++){let a=e[o];const s=null==n?a.key:String(n)+String(null!=a.key?a.key:o);a.type===An?(128&a.patchFlag&&i++,r=r.concat(Le(a.children,t,s))):(t||a.type!==Mn)&&r.push(null!=s?rr(a,{key:s}):a)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function ze(e){return(0,i.mf)(e)?{setup:e,name:e.name}:e}const Ve=e=>!!e.type.__asyncLoader;function Ue(e){(0,i.mf)(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:o,delay:a=200,timeout:s,suspensible:l=!0,onError:u}=e;let c,h=null,d=0;const p=()=>(d++,h=null,m()),m=()=>{let e;return h||(e=h=t().catch((e=>{if(e=e instanceof Error?e:new Error(String(e)),u)return new Promise(((t,n)=>{const r=()=>t(p()),i=()=>n(e);u(e,r,i,d+1)}));throw e})).then((t=>e!==h&&h?h:(t&&(t.__esModule||"Module"===t[Symbol.toStringTag])&&(t=t.default),c=t,t))))};return ze({name:"AsyncComponentWrapper",__asyncLoader:m,get __asyncResolved(){return c},setup(){const e=mr;if(c)return()=>We(c,e);const t=t=>{h=null,f(t,e,13,!o)};if(l&&e.suspense||kr)return m().then((t=>()=>We(t,e))).catch((e=>(t(e),()=>o?er(o,{error:e}):null)));const i=(0,r.iH)(!1),u=(0,r.iH)(),d=(0,r.iH)(!!a);return a&&setTimeout((()=>{d.value=!1}),a),null!=s&&setTimeout((()=>{if(!i.value&&!u.value){const e=new Error(`Async component timed out after ${s}ms.`);t(e),u.value=e}}),s),m().then((()=>{i.value=!0,e.parent&&He(e.parent.vnode)&&D(e.parent.update)})).catch((e=>{t(e),u.value=e})),()=>i.value&&c?We(c,e):u.value&&o?er(o,{error:u.value}):n&&!d.value?er(n):void 0}})}function We(e,{vnode:{ref:t,props:n,children:r,shapeFlag:i},parent:o}){const a=er(e,n,r);return a.ref=t,a}const He=e=>e.type.__isKeepAlive,Ge={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=gr(),r=n.ctx;if(!r.renderer)return()=>{const e=t.default&&t.default();return e&&1===e.length?e[0]:e};const o=new Map,a=new Set;let s=null;const l=n.suspense,{renderer:{p:u,m:c,um:h,o:{createElement:d}}}=r,p=d("div");function f(e){Qe(e),h(e,n,l,!0)}function m(e){o.forEach(((t,n)=>{const r=Rr(t.type);!r||e&&e(r)||g(n)}))}function g(e){const t=o.get(e);s&&t.type===s.type?s&&Qe(s):f(t),o.delete(e),a.delete(e)}r.activate=(e,t,n,r,o)=>{const a=e.component;c(e,t,n,0,l),u(a.vnode,e,t,n,a,l,r,e.slotScopeIds,o),vn((()=>{a.isDeactivated=!1,a.a&&(0,i.ir)(a.a);const t=e.props&&e.props.onVnodeMounted;t&&hr(t,a.parent,e)}),l)},r.deactivate=e=>{const t=e.component;c(e,p,null,1,l),vn((()=>{t.da&&(0,i.ir)(t.da);const n=e.props&&e.props.onVnodeUnmounted;n&&hr(n,t.parent,e),t.isDeactivated=!0}),l)},Ie((()=>[e.include,e.exclude]),(([e,t])=>{e&&m((t=>Ye(e,t))),t&&m((e=>!Ye(t,e)))}),{flush:"post",deep:!0});let b=null;const v=()=>{null!=b&&o.set(b,et(n.subTree))};return it(v),at(v),st((()=>{o.forEach((e=>{const{subTree:t,suspense:r}=n,i=et(t);if(e.type!==i.type)f(e);else{Qe(i);const e=i.component.da;e&&vn(e,r)}}))})),()=>{if(b=null,!t.default)return null;const n=t.default(),r=n[0];if(n.length>1)return s=null,n;if(!qn(r)||!(4&r.shapeFlag)&&!(128&r.shapeFlag))return s=null,r;let i=et(r);const l=i.type,u=Rr(Ve(i)?i.type.__asyncResolved||{}:l),{include:c,exclude:h,max:d}=e;if(c&&(!u||!Ye(c,u))||h&&u&&Ye(h,u))return s=i,r;const p=null==i.key?l:i.key,f=o.get(p);return i.el&&(i=rr(i),128&r.shapeFlag&&(r.ssContent=i)),b=p,f?(i.el=f.el,i.component=f.component,i.transition&&Be(i,i.transition),i.shapeFlag|=512,a.delete(p),a.add(p)):(a.add(p),d&&a.size>parseInt(d,10)&&g(a.values().next().value)),i.shapeFlag|=256,s=i,le(r.type)?r:i}}},qe=Ge;function Ye(e,t){return(0,i.kJ)(e)?e.some((e=>Ye(e,t))):(0,i.HD)(e)?e.split(",").includes(t):!!e.test&&e.test(t)}function Xe(e,t){Je(e,"a",t)}function Ke(e,t){Je(e,"da",t)}function Je(e,t,n=mr){const r=e.__wdc||(e.__wdc=()=>{let t=n;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(tt(t,r,n),n){let e=n.parent;while(e&&e.parent)He(e.parent.vnode)&&Ze(r,t,n,e),e=e.parent}}function Ze(e,t,n,r){const o=tt(t,e,r,!0);lt((()=>{(0,i.Od)(r[t],o)}),n)}function Qe(e){let t=e.shapeFlag;256&t&&(t-=256),512&t&&(t-=512),e.shapeFlag=t}function et(e){return 128&e.shapeFlag?e.ssContent:e}function tt(e,t,n=mr,i=!1){if(n){const o=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;(0,r.Jd)(),br(n);const o=p(t,n,e,i);return vr(),(0,r.lk)(),o});return i?o.unshift(a):o.push(a),a}}const nt=e=>(t,n=mr)=>(!kr||"sp"===e)&&tt(e,t,n),rt=nt("bm"),it=nt("m"),ot=nt("bu"),at=nt("u"),st=nt("bum"),lt=nt("um"),ut=nt("sp"),ct=nt("rtg"),ht=nt("rtc");function dt(e,t=mr){tt("ec",e,t)}function pt(e,t){const n=Y;if(null===n)return e;const r=Dr(n)||n.proxy,o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[e,n,s,l=i.kT]=t[a];(0,i.mf)(e)&&(e={mounted:e,updated:e}),e.deep&&Ee(n),o.push({dir:e,instance:r,value:n,oldValue:void 0,arg:s,modifiers:l})}return e}function ft(e,t,n,i){const o=e.dirs,a=t&&t.dirs;for(let s=0;s<o.length;s++){const l=o[s];a&&(l.oldValue=a[s].value);let u=l.dir[i];u&&((0,r.Jd)(),p(u,n,8,[e.el,l,e,t]),(0,r.lk)())}}const mt="components",gt="directives";function bt(e,t){return wt(mt,e,!0,t)||e}const vt=Symbol();function yt(e){return(0,i.HD)(e)?wt(mt,e,!1)||e:e||vt}function xt(e){return wt(gt,e)}function wt(e,t,n=!0,r=!1){const o=Y||mr;if(o){const n=o.type;if(e===mt){const e=Rr(n,!1);if(e&&(e===t||e===(0,i._A)(t)||e===(0,i.kC)((0,i._A)(t))))return n}const a=kt(o[e]||n[e],t)||kt(o.appContext[e],t);return!a&&r?n:a}}function kt(e,t){return e&&(e[t]||e[(0,i._A)(t)]||e[(0,i.kC)((0,i._A)(t))])}function _t(e,t,n,r){let o;const a=n&&n[r];if((0,i.kJ)(e)||(0,i.HD)(e)){o=new Array(e.length);for(let n=0,r=e.length;n<r;n++)o[n]=t(e[n],n,void 0,a&&a[n])}else if("number"===typeof e){0,o=new Array(e);for(let n=0;n<e;n++)o[n]=t(n+1,n,void 0,a&&a[n])}else if((0,i.Kn)(e))if(e[Symbol.iterator])o=Array.from(e,((e,n)=>t(e,n,void 0,a&&a[n])));else{const n=Object.keys(e);o=new Array(n.length);for(let r=0,i=n.length;r<i;r++){const i=n[r];o[r]=t(e[i],i,r,a&&a[r])}}else o=[];return n&&(n[r]=o),o}function St(e,t){for(let n=0;n<t.length;n++){const r=t[n];if((0,i.kJ)(r))for(let t=0;t<r.length;t++)e[r[t].name]=r[t].fn;else r&&(e[r.name]=r.fn)}return e}function Ct(e,t,n={},r,i){if(Y.isCE||Y.parent&&Ve(Y.parent)&&Y.parent.isCE)return er("slot","default"===t?null:{name:t},r&&r());let o=e[t];o&&o._c&&(o._d=!1),Bn();const a=o&&It(o(n)),s=Gn(An,{key:n.key||`_${t}`},a||(r?r():[]),a&&1===e._?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function It(e){return e.some((e=>!qn(e)||e.type!==Mn&&!(e.type===An&&!It(e.children))))?e:null}function Ot(e){const t={};for(const n in e)t[(0,i.hR)(n)]=e[n];return t}const Tt=e=>e?yr(e)?Dr(e)||e.proxy:Tt(e.parent):null,Nt=(0,i.l7)(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Tt(e.parent),$root:e=>Tt(e.root),$emit:e=>e.emit,$options:e=>Pt(e),$forceUpdate:e=>e.f||(e.f=()=>D(e.update)),$nextTick:e=>e.n||(e.n=N.bind(e.proxy)),$watch:e=>Te.bind(e)}),Et={get({_:e},t){const{ctx:n,setupState:o,data:a,props:s,accessCache:l,type:u,appContext:c}=e;let h;if("$"!==t[0]){const r=l[t];if(void 0!==r)switch(r){case 1:return o[t];case 2:return a[t];case 4:return n[t];case 3:return s[t]}else{if(o!==i.kT&&(0,i.RI)(o,t))return l[t]=1,o[t];if(a!==i.kT&&(0,i.RI)(a,t))return l[t]=2,a[t];if((h=e.propsOptions[0])&&(0,i.RI)(h,t))return l[t]=3,s[t];if(n!==i.kT&&(0,i.RI)(n,t))return l[t]=4,n[t];$t&&(l[t]=0)}}const d=Nt[t];let p,f;return d?("$attrs"===t&&(0,r.j)(e,"get",t),d(e)):(p=u.__cssModules)&&(p=p[t])?p:n!==i.kT&&(0,i.RI)(n,t)?(l[t]=4,n[t]):(f=c.config.globalProperties,(0,i.RI)(f,t)?f[t]:void 0)},set({_:e},t,n){const{data:r,setupState:o,ctx:a}=e;return o!==i.kT&&(0,i.RI)(o,t)?(o[t]=n,!0):r!==i.kT&&(0,i.RI)(r,t)?(r[t]=n,!0):!(0,i.RI)(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(a[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:o,propsOptions:a}},s){let l;return!!n[s]||e!==i.kT&&(0,i.RI)(e,s)||t!==i.kT&&(0,i.RI)(t,s)||(l=a[0])&&(0,i.RI)(l,s)||(0,i.RI)(r,s)||(0,i.RI)(Nt,s)||(0,i.RI)(o.config.globalProperties,s)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:(0,i.RI)(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};const Dt=(0,i.l7)({},Et,{get(e,t){if(t!==Symbol.unscopables)return Et.get(e,t,e)},has(e,t){const n="_"!==t[0]&&!(0,i.e1)(t);return n}});let $t=!0;function At(e){const t=Pt(e),n=e.proxy,o=e.ctx;$t=!1,t.beforeCreate&&Mt(t.beforeCreate,e,"bc");const{data:a,computed:s,methods:l,watch:u,provide:c,inject:h,created:d,beforeMount:p,mounted:f,beforeUpdate:m,updated:g,activated:b,deactivated:v,beforeDestroy:y,beforeUnmount:x,destroyed:w,unmounted:k,render:_,renderTracked:S,renderTriggered:C,errorCaptured:I,serverPrefetch:O,expose:T,inheritAttrs:N,components:E,directives:D,filters:$}=t,A=null;if(h&&Rt(h,o,A,e.appContext.config.unwrapInjectedRef),l)for(const r in l){const e=l[r];(0,i.mf)(e)&&(o[r]=e.bind(n))}if(a){0;const t=a.call(n,n);0,(0,i.Kn)(t)&&(e.data=(0,r.qj)(t))}if($t=!0,s)for(const r in s){const e=s[r],t=(0,i.mf)(e)?e.bind(n,n):(0,i.mf)(e.get)?e.get.bind(n,n):i.dG;0;const a=!(0,i.mf)(e)&&(0,i.mf)(e.set)?e.set.bind(n):i.dG,l=Pr({get:t,set:a});Object.defineProperty(o,r,{enumerable:!0,configurable:!0,get:()=>l.value,set:e=>l.value=e})}if(u)for(const r in u)Ft(u[r],o,n,r);if(c){const e=(0,i.mf)(c)?c.call(n):c;Reflect.ownKeys(e).forEach((t=>{xe(t,e[t])}))}function R(e,t){(0,i.kJ)(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(d&&Mt(d,e,"c"),R(rt,p),R(it,f),R(ot,m),R(at,g),R(Xe,b),R(Ke,v),R(dt,I),R(ht,S),R(ct,C),R(st,x),R(lt,k),R(ut,O),(0,i.kJ)(T))if(T.length){const t=e.exposed||(e.exposed={});T.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});_&&e.render===i.dG&&(e.render=_),null!=N&&(e.inheritAttrs=N),E&&(e.components=E),D&&(e.directives=D)}function Rt(e,t,n=i.dG,o=!1){(0,i.kJ)(e)&&(e=Vt(e));for(const a in e){const n=e[a];let s;s=(0,i.Kn)(n)?"default"in n?we(n.from||a,n.default,!0):we(n.from||a):we(n),(0,r.dq)(s)&&o?Object.defineProperty(t,a,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e}):t[a]=s}}function Mt(e,t,n){p((0,i.kJ)(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function Ft(e,t,n,r){const o=r.includes(".")?Ne(n,r):()=>n[r];if((0,i.HD)(e)){const n=t[e];(0,i.mf)(n)&&Ie(o,n)}else if((0,i.mf)(e))Ie(o,e.bind(n));else if((0,i.Kn)(e))if((0,i.kJ)(e))e.forEach((e=>Ft(e,t,n,r)));else{const r=(0,i.mf)(e.handler)?e.handler.bind(n):t[e.handler];(0,i.mf)(r)&&Ie(o,r,e)}else 0}function Pt(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let l;return s?l=s:i.length||n||r?(l={},i.length&&i.forEach((e=>jt(l,e,a,!0))),jt(l,t,a)):l=t,o.set(t,l),l}function jt(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&jt(e,o,n,!0),i&&i.forEach((t=>jt(e,t,n,!0)));for(const a in t)if(r&&"expose"===a);else{const r=Bt[a]||n&&n[a];e[a]=r?r(e[a],t[a]):t[a]}return e}const Bt={data:Lt,props:Wt,emits:Wt,methods:Wt,computed:Wt,beforeCreate:Ut,created:Ut,beforeMount:Ut,mounted:Ut,beforeUpdate:Ut,updated:Ut,beforeDestroy:Ut,beforeUnmount:Ut,destroyed:Ut,unmounted:Ut,activated:Ut,deactivated:Ut,errorCaptured:Ut,serverPrefetch:Ut,components:Wt,directives:Wt,watch:Ht,provide:Lt,inject:zt};function Lt(e,t){return t?e?function(){return(0,i.l7)((0,i.mf)(e)?e.call(this,this):e,(0,i.mf)(t)?t.call(this,this):t)}:t:e}function zt(e,t){return Wt(Vt(e),Vt(t))}function Vt(e){if((0,i.kJ)(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ut(e,t){return e?[...new Set([].concat(e,t))]:t}function Wt(e,t){return e?(0,i.l7)((0,i.l7)(Object.create(null),e),t):t}function Ht(e,t){if(!e)return t;if(!t)return e;const n=(0,i.l7)(Object.create(null),e);for(const r in t)n[r]=Ut(e[r],t[r]);return n}function Gt(e,t,n,o=!1){const a={},s={};(0,i.Nj)(s,Kn,1),e.propsDefaults=Object.create(null),Yt(e,t,a,s);for(const r in e.propsOptions[0])r in a||(a[r]=void 0);n?e.props=o?a:(0,r.Um)(a):e.type.props?e.props=a:e.props=s,e.attrs=s}function qt(e,t,n,o){const{props:a,attrs:s,vnode:{patchFlag:l}}=e,u=(0,r.IU)(a),[c]=e.propsOptions;let h=!1;if(!(o||l>0)||16&l){let r;Yt(e,t,a,s)&&(h=!0);for(const o in u)t&&((0,i.RI)(t,o)||(r=(0,i.rs)(o))!==o&&(0,i.RI)(t,r))||(c?!n||void 0===n[o]&&void 0===n[r]||(a[o]=Xt(c,u,o,void 0,e,!0)):delete a[o]);if(s!==u)for(const e in s)t&&(0,i.RI)(t,e)||(delete s[e],h=!0)}else if(8&l){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(q(e.emitsOptions,o))continue;const l=t[o];if(c)if((0,i.RI)(s,o))l!==s[o]&&(s[o]=l,h=!0);else{const t=(0,i._A)(o);a[t]=Xt(c,u,t,l,e,!1)}else l!==s[o]&&(s[o]=l,h=!0)}}h&&(0,r.X$)(e,"set","$attrs")}function Yt(e,t,n,o){const[a,s]=e.propsOptions;let l,u=!1;if(t)for(let r in t){if((0,i.Gg)(r))continue;const c=t[r];let h;a&&(0,i.RI)(a,h=(0,i._A)(r))?s&&s.includes(h)?(l||(l={}))[h]=c:n[h]=c:q(e.emitsOptions,r)||r in o&&c===o[r]||(o[r]=c,u=!0)}if(s){const t=(0,r.IU)(n),o=l||i.kT;for(let r=0;r<s.length;r++){const l=s[r];n[l]=Xt(a,t,l,o[l],e,!(0,i.RI)(o,l))}}return u}function Xt(e,t,n,r,o,a){const s=e[n];if(null!=s){const e=(0,i.RI)(s,"default");if(e&&void 0===r){const e=s.default;if(s.type!==Function&&(0,i.mf)(e)){const{propsDefaults:i}=o;n in i?r=i[n]:(br(o),r=i[n]=e.call(null,t),vr())}else r=e}s[0]&&(a&&!e?r=!1:!s[1]||""!==r&&r!==(0,i.rs)(n)||(r=!0))}return r}function Kt(e,t,n=!1){const r=t.propsCache,o=r.get(e);if(o)return o;const a=e.props,s={},l=[];let u=!1;if(!(0,i.mf)(e)){const r=e=>{u=!0;const[n,r]=Kt(e,t,!0);(0,i.l7)(s,n),r&&l.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!a&&!u)return r.set(e,i.Z6),i.Z6;if((0,i.kJ)(a))for(let h=0;h<a.length;h++){0;const e=(0,i._A)(a[h]);Jt(e)&&(s[e]=i.kT)}else if(a){0;for(const e in a){const t=(0,i._A)(e);if(Jt(t)){const n=a[e],r=s[t]=(0,i.kJ)(n)||(0,i.mf)(n)?{type:n}:n;if(r){const e=en(Boolean,r.type),n=en(String,r.type);r[0]=e>-1,r[1]=n<0||e<n,(e>-1||(0,i.RI)(r,"default"))&&l.push(t)}}}}const c=[s,l];return r.set(e,c),c}function Jt(e){return"$"!==e[0]}function Zt(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function Qt(e,t){return Zt(e)===Zt(t)}function en(e,t){return(0,i.kJ)(t)?t.findIndex((t=>Qt(t,e))):(0,i.mf)(t)&&Qt(t,e)?0:-1}const tn=e=>"_"===e[0]||"$stable"===e,nn=e=>(0,i.kJ)(e)?e.map(sr):[sr(e)],rn=(e,t,n)=>{if(t._n)return t;const r=ee(((...e)=>nn(t(...e))),n);return r._c=!1,r},on=(e,t,n)=>{const r=e._ctx;for(const o in e){if(tn(o))continue;const n=e[o];if((0,i.mf)(n))t[o]=rn(o,n,r);else if(null!=n){0;const e=nn(n);t[o]=()=>e}}},an=(e,t)=>{const n=nn(t);e.slots.default=()=>n},sn=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=(0,r.IU)(t),(0,i.Nj)(t,"_",n)):on(t,e.slots={})}else e.slots={},t&&an(e,t);(0,i.Nj)(e.slots,Kn,1)},ln=(e,t,n)=>{const{vnode:r,slots:o}=e;let a=!0,s=i.kT;if(32&r.shapeFlag){const e=t._;e?n&&1===e?a=!1:((0,i.l7)(o,t),n||1!==e||delete o._):(a=!t.$stable,on(t,o)),s=t}else t&&(an(e,t),s={default:1});if(a)for(const i in o)tn(i)||i in s||delete o[i]};function un(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cn=0;function hn(e,t){return function(n,r=null){(0,i.mf)(n)||(n=Object.assign({},n)),null==r||(0,i.Kn)(r)||(r=null);const o=un(),a=new Set;let s=!1;const l=o.app={_uid:cn++,_component:n,_props:r,_container:null,_context:o,_instance:null,version:ei,get config(){return o.config},set config(e){0},use(e,...t){return a.has(e)||(e&&(0,i.mf)(e.install)?(a.add(e),e.install(l,...t)):(0,i.mf)(e)&&(a.add(e),e(l,...t))),l},mixin(e){return o.mixins.includes(e)||o.mixins.push(e),l},component(e,t){return t?(o.components[e]=t,l):o.components[e]},directive(e,t){return t?(o.directives[e]=t,l):o.directives[e]},mount(i,a,u){if(!s){0;const c=er(n,r);return c.appContext=o,a&&t?t(c,i):e(c,i,u),s=!0,l._container=i,i.__vue_app__=l,Dr(c.component)||c.component.proxy}},unmount(){s&&(e(null,l._container),delete l._container.__vue_app__)},provide(e,t){return o.provides[e]=t,l}};return l}}function dn(e,t,n,o,a=!1){if((0,i.kJ)(e))return void e.forEach(((e,r)=>dn(e,t&&((0,i.kJ)(t)?t[r]:t),n,o,a)));if(Ve(o)&&!a)return;const s=4&o.shapeFlag?Dr(o.component)||o.component.proxy:o.el,l=a?null:s,{i:u,r:c}=e;const h=t&&t.r,p=u.refs===i.kT?u.refs={}:u.refs,f=u.setupState;if(null!=h&&h!==c&&((0,i.HD)(h)?(p[h]=null,(0,i.RI)(f,h)&&(f[h]=null)):(0,r.dq)(h)&&(h.value=null)),(0,i.mf)(c))d(c,u,12,[l,p]);else{const t=(0,i.HD)(c),o=(0,r.dq)(c);if(t||o){const r=()=>{if(e.f){const n=t?p[c]:c.value;a?(0,i.kJ)(n)&&(0,i.Od)(n,s):(0,i.kJ)(n)?n.includes(s)||n.push(s):t?(p[c]=[s],(0,i.RI)(f,c)&&(f[c]=p[c])):(c.value=[s],e.k&&(p[e.k]=c.value))}else t?(p[c]=l,(0,i.RI)(f,c)&&(f[c]=l)):o&&(c.value=l,e.k&&(p[e.k]=l))};l?(r.id=-1,vn(r,n)):r()}else 0}}let pn=!1;const fn=e=>/svg/.test(e.namespaceURI)&&"foreignObject"!==e.tagName,mn=e=>8===e.nodeType;function gn(e){const{mt:t,p:n,o:{patchProp:r,createText:o,nextSibling:a,parentNode:s,remove:l,insert:u,createComment:c}}=e,h=(e,t)=>{if(!t.hasChildNodes())return n(null,e,t),j(),void(t._vnode=e);pn=!1,d(t.firstChild,e,null,null,null),j(),t._vnode=e,pn&&console.error("Hydration completed but contains mismatches.")},d=(n,r,i,l,c,h=!1)=>{const v=mn(n)&&"["===n.data,y=()=>g(n,r,i,l,c,v),{type:x,ref:w,shapeFlag:k,patchFlag:_}=r,S=n.nodeType;r.el=n,-2===_&&(h=!1,r.dynamicChildren=null);let C=null;switch(x){case Rn:3!==S?""===r.children?(u(r.el=o(""),s(n),n),C=n):C=y():(n.data!==r.children&&(pn=!0,n.data=r.children),C=a(n));break;case Mn:C=8!==S||v?y():a(n);break;case Fn:if(1===S||3===S){C=n;const e=!r.children.length;for(let t=0;t<r.staticCount;t++)e&&(r.children+=1===C.nodeType?C.outerHTML:C.data),t===r.staticCount-1&&(r.anchor=C),C=a(C);return C}C=y();break;case An:C=v?m(n,r,i,l,c,h):y();break;default:if(1&k)C=1!==S||r.type.toLowerCase()!==n.tagName.toLowerCase()?y():p(n,r,i,l,c,h);else if(6&k){r.slotScopeIds=c;const e=s(n);if(t(r,e,null,i,l,fn(e),h),C=v?b(n):a(n),C&&mn(C)&&"teleport end"===C.data&&(C=a(C)),Ve(r)){let t;v?(t=er(An),t.anchor=C?C.previousSibling:e.lastChild):t=3===n.nodeType?ir(""):er("div"),t.el=n,r.component.subTree=t}}else 64&k?C=8!==S?y():r.type.hydrate(n,r,i,l,c,h,e,f):128&k&&(C=r.type.hydrate(n,r,i,l,fn(s(n)),c,h,e,d))}return null!=w&&dn(w,null,l,r),C},p=(e,t,n,o,a,s)=>{s=s||!!t.dynamicChildren;const{type:u,props:c,patchFlag:h,shapeFlag:d,dirs:p}=t,m="input"===u&&p||"option"===u;if(m||-1!==h){if(p&&ft(t,null,n,"created"),c)if(m||!s||48&h)for(const t in c)(m&&t.endsWith("value")||(0,i.F7)(t)&&!(0,i.Gg)(t))&&r(e,t,null,c[t],!1,void 0,n);else c.onClick&&r(e,"onClick",null,c.onClick,!1,void 0,n);let u;if((u=c&&c.onVnodeBeforeMount)&&hr(u,n,t),p&&ft(t,null,n,"beforeMount"),((u=c&&c.onVnodeMounted)||p)&&ve((()=>{u&&hr(u,n,t),p&&ft(t,null,n,"mounted")}),o),16&d&&(!c||!c.innerHTML&&!c.textContent)){let r=f(e.firstChild,t,e,n,o,a,s);while(r){pn=!0;const e=r;r=r.nextSibling,l(e)}}else 8&d&&e.textContent!==t.children&&(pn=!0,e.textContent=t.children)}return e.nextSibling},f=(e,t,r,i,o,a,s)=>{s=s||!!t.dynamicChildren;const l=t.children,u=l.length;for(let c=0;c<u;c++){const t=s?l[c]:l[c]=sr(l[c]);if(e)e=d(e,t,i,o,a,s);else{if(t.type===Rn&&!t.children)continue;pn=!0,n(null,t,r,null,i,o,fn(r),a)}}return e},m=(e,t,n,r,i,o)=>{const{slotScopeIds:l}=t;l&&(i=i?i.concat(l):l);const h=s(e),d=f(a(e),t,h,n,r,i,o);return d&&mn(d)&&"]"===d.data?a(t.anchor=d):(pn=!0,u(t.anchor=c("]"),h,d),d)},g=(e,t,r,i,o,u)=>{if(pn=!0,t.el=null,u){const t=b(e);while(1){const n=a(e);if(!n||n===t)break;l(n)}}const c=a(e),h=s(e);return l(e),n(null,t,h,c,r,i,fn(h),o),c},b=e=>{let t=0;while(e)if(e=a(e),e&&mn(e)&&("["===e.data&&t++,"]"===e.data)){if(0===t)return a(e);t--}return e};return[h,d]}function bn(){}const vn=ve;function yn(e){return wn(e)}function xn(e){return wn(e,gn)}function wn(e,t){bn();const n=(0,i.E9)();n.__VUE__=!0;const{insert:o,remove:a,patchProp:s,createElement:l,createText:u,createComment:c,setText:h,setElementText:d,parentNode:p,nextSibling:f,setScopeId:m=i.dG,cloneNode:g,insertStaticContent:b}=e,v=(e,t,n,r=null,i=null,o=null,a=!1,s=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!Yn(e,t)&&(r=K(e),H(e,i,o,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:u,ref:c,shapeFlag:h}=t;switch(u){case Rn:y(e,t,n,r);break;case Mn:x(e,t,n,r);break;case Fn:null==e&&w(t,n,r,a);break;case An:$(e,t,n,r,i,o,a,s,l);break;default:1&h?S(e,t,n,r,i,o,a,s,l):6&h?R(e,t,n,r,i,o,a,s,l):(64&h||128&h)&&u.process(e,t,n,r,i,o,a,s,l,Z)}null!=c&&i&&dn(c,e&&e.ref,o,t||e,!t)},y=(e,t,n,r)=>{if(null==e)o(t.el=u(t.children),n,r);else{const n=t.el=e.el;t.children!==e.children&&h(n,t.children)}},x=(e,t,n,r)=>{null==e?o(t.el=c(t.children||""),n,r):t.el=e.el},w=(e,t,n,r)=>{[e.el,e.anchor]=b(e.children,t,n,r,e.el,e.anchor)},k=({el:e,anchor:t},n,r)=>{let i;while(e&&e!==t)i=f(e),o(e,n,r),e=i;o(t,n,r)},_=({el:e,anchor:t})=>{let n;while(e&&e!==t)n=f(e),a(e),e=n;a(t)},S=(e,t,n,r,i,o,a,s,l)=>{a=a||"svg"===t.type,null==e?C(t,n,r,i,o,a,s,l):T(e,t,i,o,a,s,l)},C=(e,t,n,r,a,u,c,h)=>{let p,f;const{type:m,props:b,shapeFlag:v,transition:y,patchFlag:x,dirs:w}=e;if(e.el&&void 0!==g&&-1===x)p=e.el=g(e.el);else{if(p=e.el=l(e.type,u,b&&b.is,b),8&v?d(p,e.children):16&v&&O(e.children,p,null,r,a,u&&"foreignObject"!==m,c,h),w&&ft(e,null,r,"created"),b){for(const t in b)"value"===t||(0,i.Gg)(t)||s(p,t,null,b[t],u,e.children,r,a,X);"value"in b&&s(p,"value",null,b.value),(f=b.onVnodeBeforeMount)&&hr(f,r,e)}I(p,e,e.scopeId,c,r)}w&&ft(e,null,r,"beforeMount");const k=(!a||a&&!a.pendingBranch)&&y&&!y.persisted;k&&y.beforeEnter(p),o(p,t,n),((f=b&&b.onVnodeMounted)||k||w)&&vn((()=>{f&&hr(f,r,e),k&&y.enter(p),w&&ft(e,null,r,"mounted")}),a)},I=(e,t,n,r,i)=>{if(n&&m(e,n),r)for(let o=0;o<r.length;o++)m(e,r[o]);if(i){let n=i.subTree;if(t===n){const t=i.vnode;I(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},O=(e,t,n,r,i,o,a,s,l=0)=>{for(let u=l;u<e.length;u++){const l=e[u]=s?lr(e[u]):sr(e[u]);v(null,l,t,n,r,i,o,a,s)}},T=(e,t,n,r,o,a,l)=>{const u=t.el=e.el;let{patchFlag:c,dynamicChildren:h,dirs:p}=t;c|=16&e.patchFlag;const f=e.props||i.kT,m=t.props||i.kT;let g;n&&kn(n,!1),(g=m.onVnodeBeforeUpdate)&&hr(g,n,t,e),p&&ft(t,e,n,"beforeUpdate"),n&&kn(n,!0);const b=o&&"foreignObject"!==t.type;if(h?N(e.dynamicChildren,h,u,n,r,b,a):l||z(e,t,u,null,n,r,b,a,!1),c>0){if(16&c)E(u,t,f,m,n,r,o);else if(2&c&&f.class!==m.class&&s(u,"class",null,m.class,o),4&c&&s(u,"style",f.style,m.style,o),8&c){const i=t.dynamicProps;for(let t=0;t<i.length;t++){const a=i[t],l=f[a],c=m[a];c===l&&"value"!==a||s(u,a,l,c,o,e.children,n,r,X)}}1&c&&e.children!==t.children&&d(u,t.children)}else l||null!=h||E(u,t,f,m,n,r,o);((g=m.onVnodeUpdated)||p)&&vn((()=>{g&&hr(g,n,t,e),p&&ft(t,e,n,"updated")}),r)},N=(e,t,n,r,i,o,a)=>{for(let s=0;s<t.length;s++){const l=e[s],u=t[s],c=l.el&&(l.type===An||!Yn(l,u)||70&l.shapeFlag)?p(l.el):n;v(l,u,c,null,r,i,o,a,!0)}},E=(e,t,n,r,o,a,l)=>{if(n!==r){for(const u in r){if((0,i.Gg)(u))continue;const c=r[u],h=n[u];c!==h&&"value"!==u&&s(e,u,h,c,l,t.children,o,a,X)}if(n!==i.kT)for(const u in n)(0,i.Gg)(u)||u in r||s(e,u,n[u],null,l,t.children,o,a,X);"value"in r&&s(e,"value",n.value,r.value)}},$=(e,t,n,r,i,a,s,l,c)=>{const h=t.el=e?e.el:u(""),d=t.anchor=e?e.anchor:u("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:m}=t;m&&(l=l?l.concat(m):m),null==e?(o(h,n,r),o(d,n,r),O(t.children,n,d,i,a,s,l,c)):p>0&&64&p&&f&&e.dynamicChildren?(N(e.dynamicChildren,f,n,i,a,s,l),(null!=t.key||i&&t===i.subTree)&&_n(e,t,!0)):z(e,t,n,d,i,a,s,l,c)},R=(e,t,n,r,i,o,a,s,l)=>{t.slotScopeIds=s,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,a,l):M(t,n,r,i,o,a,l):F(e,t,l)},M=(e,t,n,r,i,o,a)=>{const s=e.component=fr(e,r,i);if(He(e)&&(s.ctx.renderer=Z),_r(s),s.asyncDep){if(i&&i.registerDep(s,B),!e.el){const e=s.subTree=er(Mn);x(null,e,t,n)}}else B(s,e,t,n,i,o,a)},F=(e,t,n)=>{const r=t.component=e.component;if(oe(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void L(r,t,n);r.next=t,A(r.update),r.update()}else t.el=e.el,r.vnode=t},B=(e,t,n,o,a,s,l)=>{const u=()=>{if(e.isMounted){let t,{next:n,bu:r,u:o,parent:u,vnode:c}=e,h=n;0,kn(e,!1),n?(n.el=c.el,L(e,n,l)):n=c,r&&(0,i.ir)(r),(t=n.props&&n.props.onVnodeBeforeUpdate)&&hr(t,u,n,c),kn(e,!0);const d=te(e);0;const f=e.subTree;e.subTree=d,v(f,d,p(f.el),K(f),e,a,s),n.el=d.el,null===h&&se(e,d.el),o&&vn(o,a),(t=n.props&&n.props.onVnodeUpdated)&&vn((()=>hr(t,u,n,c)),a)}else{let r;const{el:l,props:u}=t,{bm:c,m:h,parent:d}=e,p=Ve(t);if(kn(e,!1),c&&(0,i.ir)(c),!p&&(r=u&&u.onVnodeBeforeMount)&&hr(r,d,t),kn(e,!0),l&&ee){const n=()=>{e.subTree=te(e),ee(l,e.subTree,e,a,null)};p?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{0;const r=e.subTree=te(e);0,v(null,r,n,o,e,a,s),t.el=r.el}if(h&&vn(h,a),!p&&(r=u&&u.onVnodeMounted)){const e=t;vn((()=>hr(r,d,e)),a)}(256&t.shapeFlag||d&&Ve(d.vnode)&&256&d.vnode.shapeFlag)&&e.a&&vn(e.a,a),e.isMounted=!0,t=n=o=null}},c=e.effect=new r.qq(u,(()=>D(h)),e.scope),h=e.update=()=>c.run();h.id=e.uid,kn(e,!0),h()},L=(e,t,n)=>{t.component=e;const i=e.vnode.props;e.vnode=t,e.next=null,qt(e,t.props,i,n),ln(e,t.children,n),(0,r.Jd)(),P(void 0,e.update),(0,r.lk)()},z=(e,t,n,r,i,o,a,s,l=!1)=>{const u=e&&e.children,c=e?e.shapeFlag:0,h=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void U(u,h,n,r,i,o,a,s,l);if(256&p)return void V(u,h,n,r,i,o,a,s,l)}8&f?(16&c&&X(u,i,o),h!==u&&d(n,h)):16&c?16&f?U(u,h,n,r,i,o,a,s,l):X(u,i,o,!0):(8&c&&d(n,""),16&f&&O(h,n,r,i,o,a,s,l))},V=(e,t,n,r,o,a,s,l,u)=>{e=e||i.Z6,t=t||i.Z6;const c=e.length,h=t.length,d=Math.min(c,h);let p;for(p=0;p<d;p++){const r=t[p]=u?lr(t[p]):sr(t[p]);v(e[p],r,n,null,o,a,s,l,u)}c>h?X(e,o,a,!0,!1,d):O(t,n,r,o,a,s,l,u,d)},U=(e,t,n,r,o,a,s,l,u)=>{let c=0;const h=t.length;let d=e.length-1,p=h-1;while(c<=d&&c<=p){const r=e[c],i=t[c]=u?lr(t[c]):sr(t[c]);if(!Yn(r,i))break;v(r,i,n,null,o,a,s,l,u),c++}while(c<=d&&c<=p){const r=e[d],i=t[p]=u?lr(t[p]):sr(t[p]);if(!Yn(r,i))break;v(r,i,n,null,o,a,s,l,u),d--,p--}if(c>d){if(c<=p){const e=p+1,i=e<h?t[e].el:r;while(c<=p)v(null,t[c]=u?lr(t[c]):sr(t[c]),n,i,o,a,s,l,u),c++}}else if(c>p)while(c<=d)H(e[c],o,a,!0),c++;else{const f=c,m=c,g=new Map;for(c=m;c<=p;c++){const e=t[c]=u?lr(t[c]):sr(t[c]);null!=e.key&&g.set(e.key,c)}let b,y=0;const x=p-m+1;let w=!1,k=0;const _=new Array(x);for(c=0;c<x;c++)_[c]=0;for(c=f;c<=d;c++){const r=e[c];if(y>=x){H(r,o,a,!0);continue}let i;if(null!=r.key)i=g.get(r.key);else for(b=m;b<=p;b++)if(0===_[b-m]&&Yn(r,t[b])){i=b;break}void 0===i?H(r,o,a,!0):(_[i-m]=c+1,i>=k?k=i:w=!0,v(r,t[i],n,null,o,a,s,l,u),y++)}const S=w?Sn(_):i.Z6;for(b=S.length-1,c=x-1;c>=0;c--){const e=m+c,i=t[e],d=e+1<h?t[e+1].el:r;0===_[c]?v(null,i,n,d,o,a,s,l,u):w&&(b<0||c!==S[b]?W(i,n,d,2):b--)}}},W=(e,t,n,r,i=null)=>{const{el:a,type:s,transition:l,children:u,shapeFlag:c}=e;if(6&c)return void W(e.component.subTree,t,n,r);if(128&c)return void e.suspense.move(t,n,r);if(64&c)return void s.move(e,t,n,Z);if(s===An){o(a,t,n);for(let e=0;e<u.length;e++)W(u[e],t,n,r);return void o(e.anchor,t,n)}if(s===Fn)return void k(e,t,n);const h=2!==r&&1&c&&l;if(h)if(0===r)l.beforeEnter(a),o(a,t,n),vn((()=>l.enter(a)),i);else{const{leave:e,delayLeave:r,afterLeave:i}=l,s=()=>o(a,t,n),u=()=>{e(a,(()=>{s(),i&&i()}))};r?r(a,s,u):u()}else o(a,t,n)},H=(e,t,n,r=!1,i=!1)=>{const{type:o,props:a,ref:s,children:l,dynamicChildren:u,shapeFlag:c,patchFlag:h,dirs:d}=e;if(null!=s&&dn(s,null,n,e,!0),256&c)return void t.ctx.deactivate(e);const p=1&c&&d,f=!Ve(e);let m;if(f&&(m=a&&a.onVnodeBeforeUnmount)&&hr(m,t,e),6&c)Y(e.component,n,r);else{if(128&c)return void e.suspense.unmount(n,r);p&&ft(e,null,t,"beforeUnmount"),64&c?e.type.remove(e,t,n,i,Z,r):u&&(o!==An||h>0&&64&h)?X(u,t,n,!1,!0):(o===An&&384&h||!i&&16&c)&&X(l,t,n),r&&G(e)}(f&&(m=a&&a.onVnodeUnmounted)||p)&&vn((()=>{m&&hr(m,t,e),p&&ft(e,null,t,"unmounted")}),n)},G=e=>{const{type:t,el:n,anchor:r,transition:i}=e;if(t===An)return void q(n,r);if(t===Fn)return void _(e);const o=()=>{a(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&e.shapeFlag&&i&&!i.persisted){const{leave:t,delayLeave:r}=i,a=()=>t(n,o);r?r(e.el,o,a):a()}else o()},q=(e,t)=>{let n;while(e!==t)n=f(e),a(e),e=n;a(t)},Y=(e,t,n)=>{const{bum:r,scope:o,update:a,subTree:s,um:l}=e;r&&(0,i.ir)(r),o.stop(),a&&(a.active=!1,H(s,e,t,n)),l&&vn(l,t),vn((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},X=(e,t,n,r=!1,i=!1,o=0)=>{for(let a=o;a<e.length;a++)H(e[a],t,n,r,i)},K=e=>6&e.shapeFlag?K(e.component.subTree):128&e.shapeFlag?e.suspense.next():f(e.anchor||e.el),J=(e,t,n)=>{null==e?t._vnode&&H(t._vnode,null,null,!0):v(t._vnode||null,e,t,null,null,null,n),j(),t._vnode=e},Z={p:v,um:H,m:W,r:G,mt:M,mc:O,pc:z,pbc:N,n:K,o:e};let Q,ee;return t&&([Q,ee]=t(Z)),{render:J,hydrate:Q,createApp:hn(J,Q)}}function kn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function _n(e,t,n=!1){const r=e.children,o=t.children;if((0,i.kJ)(r)&&(0,i.kJ)(o))for(let i=0;i<r.length;i++){const e=r[i];let t=o[i];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=o[i]=lr(o[i]),t.el=e.el),n||_n(e,t))}}function Sn(e){const t=e.slice(),n=[0];let r,i,o,a,s;const l=e.length;for(r=0;r<l;r++){const l=e[r];if(0!==l){if(i=n[n.length-1],e[i]<l){t[r]=i,n.push(r);continue}o=0,a=n.length-1;while(o<a)s=o+a>>1,e[n[s]]<l?o=s+1:a=s;l<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}o=n.length,a=n[o-1];while(o-- >0)n[o]=a,a=t[a];return n}const Cn=e=>e.__isTeleport,In=e=>e&&(e.disabled||""===e.disabled),On=e=>"undefined"!==typeof SVGElement&&e instanceof SVGElement,Tn=(e,t)=>{const n=e&&e.to;if((0,i.HD)(n)){if(t){const e=t(n);return e}return null}return n},Nn={__isTeleport:!0,process(e,t,n,r,i,o,a,s,l,u){const{mc:c,pc:h,pbc:d,o:{insert:p,querySelector:f,createText:m,createComment:g}}=u,b=In(t.props);let{shapeFlag:v,children:y,dynamicChildren:x}=t;if(null==e){const e=t.el=m(""),u=t.anchor=m("");p(e,n,r),p(u,n,r);const h=t.target=Tn(t.props,f),d=t.targetAnchor=m("");h&&(p(d,h),a=a||On(h));const g=(e,t)=>{16&v&&c(y,e,t,i,o,a,s,l)};b?g(n,u):h&&g(h,d)}else{t.el=e.el;const r=t.anchor=e.anchor,c=t.target=e.target,p=t.targetAnchor=e.targetAnchor,m=In(e.props),g=m?n:c,v=m?r:p;if(a=a||On(c),x?(d(e.dynamicChildren,x,g,i,o,a,s),_n(e,t,!0)):l||h(e,t,g,v,i,o,a,s,!1),b)m||En(t,n,r,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=Tn(t.props,f);e&&En(t,e,null,u,0)}else m&&En(t,c,p,u,1)}},remove(e,t,n,r,{um:i,o:{remove:o}},a){const{shapeFlag:s,children:l,anchor:u,targetAnchor:c,target:h,props:d}=e;if(h&&o(c),(a||!In(d))&&(o(u),16&s))for(let p=0;p<l.length;p++){const e=l[p];i(e,t,n,!0,!!e.dynamicChildren)}},move:En,hydrate:Dn};function En(e,t,n,{o:{insert:r},m:i},o=2){0===o&&r(e.targetAnchor,t,n);const{el:a,anchor:s,shapeFlag:l,children:u,props:c}=e,h=2===o;if(h&&r(a,t,n),(!h||In(c))&&16&l)for(let d=0;d<u.length;d++)i(u[d],t,n,2);h&&r(s,t,n)}function Dn(e,t,n,r,i,o,{o:{nextSibling:a,parentNode:s,querySelector:l}},u){const c=t.target=Tn(t.props,l);if(c){const l=c._lpa||c.firstChild;if(16&t.shapeFlag)if(In(t.props))t.anchor=u(a(e),t,s(e),n,r,i,o),t.targetAnchor=l;else{t.anchor=a(e);let s=l;while(s)if(s=a(s),s&&8===s.nodeType&&"teleport anchor"===s.data){t.targetAnchor=s,c._lpa=t.targetAnchor&&a(t.targetAnchor);break}u(l,t,c,n,r,i,o)}}return t.anchor&&a(t.anchor)}const $n=Nn,An=Symbol(void 0),Rn=Symbol(void 0),Mn=Symbol(void 0),Fn=Symbol(void 0),Pn=[];let jn=null;function Bn(e=!1){Pn.push(jn=e?null:[])}function Ln(){Pn.pop(),jn=Pn[Pn.length-1]||null}let zn,Vn=1;function Un(e){Vn+=e}function Wn(e){return e.dynamicChildren=Vn>0?jn||i.Z6:null,Ln(),Vn>0&&jn&&jn.push(e),e}function Hn(e,t,n,r,i,o){return Wn(Qn(e,t,n,r,i,o,!0))}function Gn(e,t,n,r,i){return Wn(er(e,t,n,r,i,!0))}function qn(e){return!!e&&!0===e.__v_isVNode}function Yn(e,t){return e.type===t.type&&e.key===t.key}function Xn(e){zn=e}const Kn="__vInternal",Jn=({key:e})=>null!=e?e:null,Zn=({ref:e,ref_key:t,ref_for:n})=>null!=e?(0,i.HD)(e)||(0,r.dq)(e)||(0,i.mf)(e)?{i:Y,r:e,k:t,f:!!n}:e:null;function Qn(e,t=null,n=null,r=0,o=null,a=(e===An?0:1),s=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Jn(t),ref:t&&Zn(t),scopeId:X,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null};return l?(ur(u,n),128&a&&e.normalize(u)):n&&(u.shapeFlag|=(0,i.HD)(n)?8:16),Vn>0&&!s&&jn&&(u.patchFlag>0||6&a)&&32!==u.patchFlag&&jn.push(u),u}const er=tr;function tr(e,t=null,n=null,o=0,a=null,s=!1){if(e&&e!==vt||(e=Mn),qn(e)){const r=rr(e,t,!0);return n&&ur(r,n),Vn>0&&!s&&jn&&(6&r.shapeFlag?jn[jn.indexOf(e)]=r:jn.push(r)),r.patchFlag|=-2,r}if(Fr(e)&&(e=e.__vccOpts),t){t=nr(t);let{class:e,style:n}=t;e&&!(0,i.HD)(e)&&(t.class=(0,i.C_)(e)),(0,i.Kn)(n)&&((0,r.X3)(n)&&!(0,i.kJ)(n)&&(n=(0,i.l7)({},n)),t.style=(0,i.j5)(n))}const l=(0,i.HD)(e)?1:le(e)?128:Cn(e)?64:(0,i.Kn)(e)?4:(0,i.mf)(e)?2:0;return Qn(e,t,n,o,a,l,s,!0)}function nr(e){return e?(0,r.X3)(e)||Kn in e?(0,i.l7)({},e):e:null}function rr(e,t,n=!1){const{props:r,ref:o,patchFlag:a,children:s}=e,l=t?cr(r||{},t):r,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Jn(l),ref:t&&t.ref?n&&o?(0,i.kJ)(o)?o.concat(Zn(t)):[o,Zn(t)]:Zn(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==An?-1===a?16:16|a:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&rr(e.ssContent),ssFallback:e.ssFallback&&rr(e.ssFallback),el:e.el,anchor:e.anchor};return u}function ir(e=" ",t=0){return er(Rn,null,e,t)}function or(e,t){const n=er(Fn,null,e);return n.staticCount=t,n}function ar(e="",t=!1){return t?(Bn(),Gn(Mn,null,e)):er(Mn,null,e)}function sr(e){return null==e||"boolean"===typeof e?er(Mn):(0,i.kJ)(e)?er(An,null,e.slice()):"object"===typeof e?lr(e):er(Rn,null,String(e))}function lr(e){return null===e.el||e.memo?e:rr(e)}function ur(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if((0,i.kJ)(t))n=16;else if("object"===typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),ur(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||Kn in t?3===r&&Y&&(1===Y.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=Y}}else(0,i.mf)(t)?(t={default:t,_ctx:Y},n=32):(t=String(t),64&r?(n=16,t=[ir(t)]):n=8);e.children=t,e.shapeFlag|=n}function cr(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=(0,i.C_)([t.class,r.class]));else if("style"===e)t.style=(0,i.j5)([t.style,r.style]);else if((0,i.F7)(e)){const n=t[e],o=r[e];!o||n===o||(0,i.kJ)(n)&&n.includes(o)||(t[e]=n?[].concat(n,o):o)}else""!==e&&(t[e]=r[e])}return t}function hr(e,t,n,r=null){p(e,t,7,[n,r])}const dr=un();let pr=0;function fr(e,t,n){const o=e.type,a=(t?t.appContext:e.appContext)||dr,s={uid:pr++,vnode:e,type:o,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new r.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Kt(o,a),emitsOptions:G(o,a),emit:null,emitted:null,propsDefaults:i.kT,inheritAttrs:o.inheritAttrs,ctx:i.kT,data:i.kT,props:i.kT,attrs:i.kT,slots:i.kT,refs:i.kT,setupState:i.kT,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=H.bind(null,s),e.ce&&e.ce(s),s}let mr=null;const gr=()=>mr||Y,br=e=>{mr=e,e.scope.on()},vr=()=>{mr&&mr.scope.off(),mr=null};function yr(e){return 4&e.vnode.shapeFlag}let xr,wr,kr=!1;function _r(e,t=!1){kr=t;const{props:n,children:r}=e.vnode,i=yr(e);Gt(e,n,i,t),sn(e,r);const o=i?Sr(e,t):void 0;return kr=!1,o}function Sr(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=(0,r.Xl)(new Proxy(e.ctx,Et));const{setup:o}=n;if(o){const n=e.setupContext=o.length>1?Er(e):null;br(e),(0,r.Jd)();const a=d(o,e,0,[e.props,n]);if((0,r.lk)(),vr(),(0,i.tI)(a)){if(a.then(vr,vr),t)return a.then((n=>{Cr(e,n,t)})).catch((t=>{f(t,e,0)}));e.asyncDep=a}else Cr(e,a,t)}else Tr(e,t)}function Cr(e,t,n){(0,i.mf)(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:(0,i.Kn)(t)&&(e.setupState=(0,r.WL)(t)),Tr(e,n)}function Ir(e){xr=e,wr=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,Dt))}}const Or=()=>!xr;function Tr(e,t,n){const o=e.type;if(!e.render){if(!t&&xr&&!o.render){const t=o.template;if(t){0;const{isCustomElement:n,compilerOptions:r}=e.appContext.config,{delimiters:a,compilerOptions:s}=o,l=(0,i.l7)((0,i.l7)({isCustomElement:n,delimiters:a},r),s);o.render=xr(t,l)}}e.render=o.render||i.dG,wr&&wr(e)}br(e),(0,r.Jd)(),At(e),(0,r.lk)(),vr()}function Nr(e){return new Proxy(e.attrs,{get(t,n){return(0,r.j)(e,"get","$attrs"),t[n]}})}function Er(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=Nr(e))},slots:e.slots,emit:e.emit,expose:t}}function Dr(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy((0,r.WL)((0,r.Xl)(e.exposed)),{get(t,n){return n in t?t[n]:n in Nt?Nt[n](e):void 0}}))}const $r=/(?:^|[-_])(\w)/g,Ar=e=>e.replace($r,(e=>e.toUpperCase())).replace(/[-_]/g,"");function Rr(e,t=!0){return(0,i.mf)(e)?e.displayName||e.name:e.name||t&&e.__name}function Mr(e,t,n=!1){let r=Rr(t);if(!r&&t.__file){const e=t.__file.match(/([^/\\]+)\.\w+$/);e&&(r=e[1])}if(!r&&e&&e.parent){const n=e=>{for(const n in e)if(e[n]===t)return n};r=n(e.components||e.parent.type.components)||n(e.appContext.components)}return r?Ar(r):n?"App":"Anonymous"}function Fr(e){return(0,i.mf)(e)&&"__vccOpts"in e}const Pr=(e,t)=>(0,r.Fl)(e,t,kr);function jr(){return null}function Br(){return null}function Lr(e){0}function zr(e,t){return null}function Vr(){return Wr().slots}function Ur(){return Wr().attrs}function Wr(){const e=gr();return e.setupContext||(e.setupContext=Er(e))}function Hr(e,t){const n=(0,i.kJ)(e)?e.reduce(((e,t)=>(e[t]={},e)),{}):e;for(const r in t){const e=n[r];e?(0,i.kJ)(e)||(0,i.mf)(e)?n[r]={type:e,default:t[r]}:e.default=t[r]:null===e&&(n[r]={default:t[r]})}return n}function Gr(e,t){const n={};for(const r in e)t.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>e[r]});return n}function qr(e){const t=gr();let n=e();return vr(),(0,i.tI)(n)&&(n=n.catch((e=>{throw br(t),e}))),[n,()=>br(t)]}function Yr(e,t,n){const r=arguments.length;return 2===r?(0,i.Kn)(t)&&!(0,i.kJ)(t)?qn(t)?er(e,null,[t]):er(e,t):er(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&qn(n)&&(n=[n]),er(e,t,n))}const Xr=Symbol(""),Kr=()=>{{const e=we(Xr);return e||a("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}};function Jr(){return void 0}function Zr(e,t,n,r){const i=n[r];if(i&&Qr(i,e))return i;const o=t();return o.memo=e.slice(),n[r]=o}function Qr(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++)if((0,i.aU)(n[r],t[r]))return!1;return Vn>0&&jn&&jn.push(e),!0}const ei="3.2.37",ti={createComponentInstance:fr,setupComponent:_r,renderComponentRoot:te,setCurrentRenderingInstance:K,isVNode:qn,normalizeVNode:sr},ni=ti,ri=null,ii=null},9242:function(e,t,n){"use strict";n.d(t,{$d:function(){return i.$d},$y:function(){return i.$y},Ah:function(){return P},B:function(){return i.B},BK:function(){return i.BK},Bj:function(){return i.Bj},Bz:function(){return i.Bz},C3:function(){return i.C3},C_:function(){return i.C_},Cn:function(){return i.Cn},D2:function(){return Fe},EB:function(){return i.EB},Eo:function(){return i.Eo},F4:function(){return i.F4},F8:function(){return Pe},FN:function(){return i.FN},Fl:function(){return i.Fl},G:function(){return i.G},G2:function(){return _e},HX:function(){return i.HX},HY:function(){return i.HY},Ho:function(){return i.Ho},IU:function(){return i.IU},JJ:function(){return i.JJ},Jd:function(){return i.Jd},KU:function(){return i.KU},Ko:function(){return i.Ko},LL:function(){return i.LL},MW:function(){return F},MX:function(){return i.MX},Mr:function(){return i.Mr},Nd:function(){return Je},Nv:function(){return i.Nv},OT:function(){return i.OT},Ob:function(){return i.Ob},P$:function(){return i.P$},PG:function(){return i.PG},Q2:function(){return i.Q2},Q6:function(){return i.Q6},RC:function(){return i.RC},Rh:function(){return i.Rh},Rr:function(){return i.Rr},S3:function(){return i.S3},SK:function(){return i.Ah},SU:function(){return i.SU},U2:function(){return i.U2},Uc:function(){return i.Uc},Uk:function(){return i.Uk},Um:function(){return i.Um},Us:function(){return i.Us},Vh:function(){return i.Vh},W3:function(){return de},WI:function(){return i.WI},WL:function(){return i.WL},WY:function(){return i.WY},Wm:function(){return i.Wm},X3:function(){return i.X3},XI:function(){return i.XI},Xl:function(){return i.Xl},Xn:function(){return i.Xn},Y1:function(){return i.Y1},Y3:function(){return i.Y3},Y8:function(){return i.Y8},YP:function(){return i.YP},YS:function(){return i.YS},YZ:function(){return Te},Yq:function(){return i.Yq},ZB:function(){return Ge},ZK:function(){return i.ZK},ZM:function(){return i.ZM},Zq:function(){return i.Zq},_:function(){return i._},_A:function(){return i._A},a2:function(){return B},aZ:function(){return i.aZ},b9:function(){return i.b9},bM:function(){return Se},bT:function(){return i.bT},bv:function(){return i.bv},cE:function(){return i.cE},d1:function(){return i.d1},dD:function(){return i.dD},dG:function(){return i.dG},dl:function(){return i.dl},dq:function(){return i.dq},e8:function(){return we},ec:function(){return i.ec},eq:function(){return i.eq},f3:function(){return i.f3},fb:function(){return L},h:function(){return i.h},hR:function(){return i.hR},i8:function(){return i.i8},iD:function(){return i.iD},iH:function(){return i.iH},iM:function(){return Re},ic:function(){return i.ic},j4:function(){return i.j4},j5:function(){return i.j5},kC:function(){return i.kC},kq:function(){return i.kq},l1:function(){return i.l1},lA:function(){return i.lA},lR:function(){return i.lR},m0:function(){return i.m0},mW:function(){return i.mW},mv:function(){return i.mv},mx:function(){return i.mx},n4:function(){return i.n4},nK:function(){return i.nK},nQ:function(){return i.nQ},nZ:function(){return i.nZ},nr:function(){return xe},oR:function(){return i.oR},of:function(){return i.of},p1:function(){return i.p1},qG:function(){return i.qG},qZ:function(){return i.qZ},qb:function(){return i.qb},qj:function(){return i.qj},qq:function(){return i.qq},ri:function(){return qe},ry:function(){return i.ry},sT:function(){return i.sT},sY:function(){return He},se:function(){return i.se},sj:function(){return z},sv:function(){return i.sv},uE:function(){return i.uE},uT:function(){return G},u_:function(){return i.u_},up:function(){return i.up},vl:function(){return i.vl},vr:function(){return Ye},vs:function(){return i.vs},w5:function(){return i.w5},wF:function(){return i.wF},wg:function(){return i.wg},wy:function(){return i.wy},xv:function(){return i.xv},yT:function(){return i.yT},yX:function(){return i.yX},yb:function(){return i.MW},zw:function(){return i.zw}});var r=n(7139),i=n(3396),o=n(4870);const a="http://www.w3.org/2000/svg",s="undefined"!==typeof document?document:null,l=s&&s.createElement("template"),u={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?s.createElementNS(a,e):s.createElement(e,n?{is:n}:void 0);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>s.createTextNode(e),createComment:e=>s.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>s.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r,i,o){const a=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling)){while(1)if(t.insertBefore(i.cloneNode(!0),n),i===o||!(i=i.nextSibling))break}else{l.innerHTML=r?`<svg>${e}</svg>`:e;const i=l.content;if(r){const e=i.firstChild;while(e.firstChild)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function c(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function h(e,t,n){const i=e.style,o=(0,r.HD)(n);if(n&&!o){for(const e in n)p(i,e,n[e]);if(t&&!(0,r.HD)(t))for(const e in t)null==n[e]&&p(i,e,"")}else{const r=i.display;o?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=r)}}const d=/\s*!important$/;function p(e,t,n){if((0,r.kJ)(n))n.forEach((n=>p(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=g(e,t);d.test(n)?e.setProperty((0,r.rs)(i),n.replace(d,""),"important"):e[i]=n}}const f=["Webkit","Moz","ms"],m={};function g(e,t){const n=m[t];if(n)return n;let i=(0,r._A)(t);if("filter"!==i&&i in e)return m[t]=i;i=(0,r.kC)(i);for(let r=0;r<f.length;r++){const n=f[r]+i;if(n in e)return m[t]=n}return t}const b="http://www.w3.org/1999/xlink";function v(e,t,n,i,o){if(i&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(b,t.slice(6,t.length)):e.setAttributeNS(b,t,n);else{const i=(0,r.Pq)(t);null==n||i&&!(0,r.yA)(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function y(e,t,n,i,o,a,s){if("innerHTML"===t||"textContent"===t)return i&&s(i,o,a),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const r=null==n?"":n;return e.value===r&&"OPTION"!==e.tagName||(e.value=r),void(null==n&&e.removeAttribute(t))}let l=!1;if(""===n||null==n){const i=typeof e[t];"boolean"===i?n=(0,r.yA)(n):null==n&&"string"===i?(n="",l=!0):"number"===i&&(n=0,l=!0)}try{e[t]=n}catch(u){0}l&&e.removeAttribute(t)}const[x,w]=(()=>{let e=Date.now,t=!1;if("undefined"!==typeof window){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let k=0;const _=Promise.resolve(),S=()=>{k=0},C=()=>k||(_.then(S),k=x());function I(e,t,n,r){e.addEventListener(t,n,r)}function O(e,t,n,r){e.removeEventListener(t,n,r)}function T(e,t,n,r,i=null){const o=e._vei||(e._vei={}),a=o[t];if(r&&a)a.value=r;else{const[n,s]=E(t);if(r){const a=o[t]=D(r,i);I(e,n,a,s)}else a&&(O(e,n,a,s),o[t]=void 0)}}const N=/(?:Once|Passive|Capture)$/;function E(e){let t;if(N.test(e)){let n;t={};while(n=e.match(N))e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[(0,r.rs)(e.slice(2)),t]}function D(e,t){const n=e=>{const r=e.timeStamp||x();(w||r>=n.attached-1)&&(0,i.$d)($(e,n.value),t,5,[e])};return n.value=e,n.attached=C(),n}function $(e,t){if((0,r.kJ)(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}const A=/^on[a-z]/,R=(e,t,n,i,o=!1,a,s,l,u)=>{"class"===t?c(e,i,o):"style"===t?h(e,n,i):(0,r.F7)(t)?(0,r.tR)(t)||T(e,t,n,i,s):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):M(e,t,i,o))?y(e,t,i,a,s,l,u):("true-value"===t?e._trueValue=i:"false-value"===t&&(e._falseValue=i),v(e,t,i,o))};function M(e,t,n,i){return i?"innerHTML"===t||"textContent"===t||!!(t in e&&A.test(t)&&(0,r.mf)(n)):"spellcheck"!==t&&"draggable"!==t&&"translate"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!A.test(t)||!(0,r.HD)(n))&&t in e))))}function F(e,t){const n=(0,i.aZ)(e);class r extends B{constructor(e){super(n,e,t)}}return r.def=n,r}const P=e=>F(e,Ge),j="undefined"!==typeof HTMLElement?HTMLElement:class{};class B extends j{constructor(e,t={},n){super(),this._def=e,this._props=t,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&n?n(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,(0,i.Y3)((()=>{this._connected||(He(null,this.shadowRoot),this._instance=null)}))}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);new MutationObserver((e=>{for(const t of e)this._setAttr(t.attributeName)})).observe(this,{attributes:!0});const e=e=>{const{props:t,styles:n}=e,i=!(0,r.kJ)(t),o=t?i?Object.keys(t):t:[];let a;if(i)for(const s in this._props){const e=t[s];(e===Number||e&&e.type===Number)&&(this._props[s]=(0,r.He)(this._props[s]),(a||(a=Object.create(null)))[s]=!0)}this._numberProps=a;for(const r of Object.keys(this))"_"!==r[0]&&this._setProp(r,this[r],!0,!1);for(const s of o.map(r._A))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(e){this._setProp(s,e)}});this._applyStyles(n),this._update()},t=this._def.__asyncLoader;t?t().then(e):e(this._def)}_setAttr(e){let t=this.getAttribute(e);this._numberProps&&this._numberProps[e]&&(t=(0,r.He)(t)),this._setProp((0,r._A)(e),t,!1)}_getProp(e){return this._props[e]}_setProp(e,t,n=!0,i=!0){t!==this._props[e]&&(this._props[e]=t,i&&this._instance&&this._update(),n&&(!0===t?this.setAttribute((0,r.rs)(e),""):"string"===typeof t||"number"===typeof t?this.setAttribute((0,r.rs)(e),t+""):t||this.removeAttribute((0,r.rs)(e))))}_update(){He(this._createVNode(),this.shadowRoot)}_createVNode(){const e=(0,i.Wm)(this._def,(0,r.l7)({},this._props));return this._instance||(e.ce=e=>{this._instance=e,e.isCE=!0,e.emit=(e,...t)=>{this.dispatchEvent(new CustomEvent(e,{detail:t}))};let t=this;while(t=t&&(t.parentNode||t.host))if(t instanceof B){e.parent=t._instance;break}}),e}_applyStyles(e){e&&e.forEach((e=>{const t=document.createElement("style");t.textContent=e,this.shadowRoot.appendChild(t)}))}}function L(e="$style"){{const t=(0,i.FN)();if(!t)return r.kT;const n=t.type.__cssModules;if(!n)return r.kT;const o=n[e];return o||r.kT}}function z(e){const t=(0,i.FN)();if(!t)return;const n=()=>V(t.subTree,e(t.proxy));(0,i.Rh)(n),(0,i.bv)((()=>{const e=new MutationObserver(n);e.observe(t.subTree.el.parentNode,{childList:!0}),(0,i.Ah)((()=>e.disconnect()))}))}function V(e,t){if(128&e.shapeFlag){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push((()=>{V(n.activeBranch,t)}))}while(e.component)e=e.component.subTree;if(1&e.shapeFlag&&e.el)U(e.el,t);else if(e.type===i.HY)e.children.forEach((e=>V(e,t)));else if(e.type===i.qG){let{el:n,anchor:r}=e;while(n){if(U(n,t),n===r)break;n=n.nextSibling}}}function U(e,t){if(1===e.nodeType){const n=e.style;for(const e in t)n.setProperty(`--${e}`,t[e])}}const W="transition",H="animation",G=(e,{slots:t})=>(0,i.h)(i.P$,J(e),t);G.displayName="Transition";const q={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Y=G.props=(0,r.l7)({},i.P$.props,q),X=(e,t=[])=>{(0,r.kJ)(e)?e.forEach((e=>e(...t))):e&&e(...t)},K=e=>!!e&&((0,r.kJ)(e)?e.some((e=>e.length>1)):e.length>1);function J(e){const t={};for(const r in e)r in q||(t[r]=e[r]);if(!1===e.css)return t;const{name:n="v",type:i,duration:o,enterFromClass:a=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:u=a,appearActiveClass:c=s,appearToClass:h=l,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=e,m=Z(o),g=m&&m[0],b=m&&m[1],{onBeforeEnter:v,onEnter:y,onEnterCancelled:x,onLeave:w,onLeaveCancelled:k,onBeforeAppear:_=v,onAppear:S=y,onAppearCancelled:C=x}=t,I=(e,t,n)=>{te(e,t?h:l),te(e,t?c:s),n&&n()},O=(e,t)=>{e._isLeaving=!1,te(e,d),te(e,f),te(e,p),t&&t()},T=e=>(t,n)=>{const r=e?S:y,o=()=>I(t,e,n);X(r,[t,o]),ne((()=>{te(t,e?u:a),ee(t,e?h:l),K(r)||ie(t,i,g,o)}))};return(0,r.l7)(t,{onBeforeEnter(e){X(v,[e]),ee(e,a),ee(e,s)},onBeforeAppear(e){X(_,[e]),ee(e,u),ee(e,c)},onEnter:T(!1),onAppear:T(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>O(e,t);ee(e,d),le(),ee(e,p),ne((()=>{e._isLeaving&&(te(e,d),ee(e,f),K(w)||ie(e,i,b,n))})),X(w,[e,n])},onEnterCancelled(e){I(e,!1),X(x,[e])},onAppearCancelled(e){I(e,!0),X(C,[e])},onLeaveCancelled(e){O(e),X(k,[e])}})}function Z(e){if(null==e)return null;if((0,r.Kn)(e))return[Q(e.enter),Q(e.leave)];{const t=Q(e);return[t,t]}}function Q(e){const t=(0,r.He)(e);return t}function ee(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function te(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function ne(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let re=0;function ie(e,t,n,r){const i=e._endId=++re,o=()=>{i===e._endId&&r()};if(n)return setTimeout(o,n);const{type:a,timeout:s,propCount:l}=oe(e,t);if(!a)return r();const u=a+"end";let c=0;const h=()=>{e.removeEventListener(u,d),o()},d=t=>{t.target===e&&++c>=l&&h()};setTimeout((()=>{c<l&&h()}),s+1),e.addEventListener(u,d)}function oe(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),i=r(W+"Delay"),o=r(W+"Duration"),a=ae(i,o),s=r(H+"Delay"),l=r(H+"Duration"),u=ae(s,l);let c=null,h=0,d=0;t===W?a>0&&(c=W,h=a,d=o.length):t===H?u>0&&(c=H,h=u,d=l.length):(h=Math.max(a,u),c=h>0?a>u?W:H:null,d=c?c===W?o.length:l.length:0);const p=c===W&&/\b(transform|all)(,|$)/.test(n[W+"Property"]);return{type:c,timeout:h,propCount:d,hasTransform:p}}function ae(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map(((t,n)=>se(t)+se(e[n]))))}function se(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function le(){return document.body.offsetHeight}const ue=new WeakMap,ce=new WeakMap,he={name:"TransitionGroup",props:(0,r.l7)({},Y,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=(0,i.FN)(),r=(0,i.Y8)();let a,s;return(0,i.ic)((()=>{if(!a.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!ge(a[0].el,n.vnode.el,t))return;a.forEach(pe),a.forEach(fe);const r=a.filter(me);le(),r.forEach((e=>{const n=e.el,r=n.style;ee(n,t),r.transform=r.webkitTransform=r.transitionDuration="";const i=n._moveCb=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",i),n._moveCb=null,te(n,t))};n.addEventListener("transitionend",i)}))})),()=>{const l=(0,o.IU)(e),u=J(l);let c=l.tag||i.HY;a=s,s=t.default?(0,i.Q6)(t.default()):[];for(let e=0;e<s.length;e++){const t=s[e];null!=t.key&&(0,i.nK)(t,(0,i.U2)(t,u,r,n))}if(a)for(let e=0;e<a.length;e++){const t=a[e];(0,i.nK)(t,(0,i.U2)(t,u,r,n)),ue.set(t,t.el.getBoundingClientRect())}return(0,i.Wm)(c,null,s)}}},de=he;function pe(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function fe(e){ce.set(e,e.el.getBoundingClientRect())}function me(e){const t=ue.get(e),n=ce.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${r}px,${i}px)`,t.transitionDuration="0s",e}}function ge(e,t,n){const r=e.cloneNode();e._vtc&&e._vtc.forEach((e=>{e.split(/\s+/).forEach((e=>e&&r.classList.remove(e)))})),n.split(/\s+/).forEach((e=>e&&r.classList.add(e))),r.style.display="none";const i=1===t.nodeType?t:t.parentNode;i.appendChild(r);const{hasTransform:o}=oe(r);return i.removeChild(r),o}const be=e=>{const t=e.props["onUpdate:modelValue"]||!1;return(0,r.kJ)(t)?e=>(0,r.ir)(t,e):t};function ve(e){e.target.composing=!0}function ye(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const xe={created(e,{modifiers:{lazy:t,trim:n,number:i}},o){e._assign=be(o);const a=i||o.props&&"number"===o.props.type;I(e,t?"change":"input",(t=>{if(t.target.composing)return;let i=e.value;n&&(i=i.trim()),a&&(i=(0,r.He)(i)),e._assign(i)})),n&&I(e,"change",(()=>{e.value=e.value.trim()})),t||(I(e,"compositionstart",ve),I(e,"compositionend",ye),I(e,"change",ye))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:i,number:o}},a){if(e._assign=be(a),e.composing)return;if(document.activeElement===e&&"range"!==e.type){if(n)return;if(i&&e.value.trim()===t)return;if((o||"number"===e.type)&&(0,r.He)(e.value)===t)return}const s=null==t?"":t;e.value!==s&&(e.value=s)}},we={deep:!0,created(e,t,n){e._assign=be(n),I(e,"change",(()=>{const t=e._modelValue,n=Ie(e),i=e.checked,o=e._assign;if((0,r.kJ)(t)){const e=(0,r.hq)(t,n),a=-1!==e;if(i&&!a)o(t.concat(n));else if(!i&&a){const n=[...t];n.splice(e,1),o(n)}}else if((0,r.DM)(t)){const e=new Set(t);i?e.add(n):e.delete(n),o(e)}else o(Oe(e,i))}))},mounted:ke,beforeUpdate(e,t,n){e._assign=be(n),ke(e,t,n)}};function ke(e,{value:t,oldValue:n},i){e._modelValue=t,(0,r.kJ)(t)?e.checked=(0,r.hq)(t,i.props.value)>-1:(0,r.DM)(t)?e.checked=t.has(i.props.value):t!==n&&(e.checked=(0,r.WV)(t,Oe(e,!0)))}const _e={created(e,{value:t},n){e.checked=(0,r.WV)(t,n.props.value),e._assign=be(n),I(e,"change",(()=>{e._assign(Ie(e))}))},beforeUpdate(e,{value:t,oldValue:n},i){e._assign=be(i),t!==n&&(e.checked=(0,r.WV)(t,i.props.value))}},Se={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const o=(0,r.DM)(t);I(e,"change",(()=>{const t=Array.prototype.filter.call(e.options,(e=>e.selected)).map((e=>n?(0,r.He)(Ie(e)):Ie(e)));e._assign(e.multiple?o?new Set(t):t:t[0])})),e._assign=be(i)},mounted(e,{value:t}){Ce(e,t)},beforeUpdate(e,t,n){e._assign=be(n)},updated(e,{value:t}){Ce(e,t)}};function Ce(e,t){const n=e.multiple;if(!n||(0,r.kJ)(t)||(0,r.DM)(t)){for(let i=0,o=e.options.length;i<o;i++){const o=e.options[i],a=Ie(o);if(n)(0,r.kJ)(t)?o.selected=(0,r.hq)(t,a)>-1:o.selected=t.has(a);else if((0,r.WV)(Ie(o),t))return void(e.selectedIndex!==i&&(e.selectedIndex=i))}n||-1===e.selectedIndex||(e.selectedIndex=-1)}}function Ie(e){return"_value"in e?e._value:e.value}function Oe(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Te={created(e,t,n){Ee(e,t,n,null,"created")},mounted(e,t,n){Ee(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){Ee(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){Ee(e,t,n,r,"updated")}};function Ne(e,t){switch(e){case"SELECT":return Se;case"TEXTAREA":return xe;default:switch(t){case"checkbox":return we;case"radio":return _e;default:return xe}}}function Ee(e,t,n,r,i){const o=Ne(e.tagName,n.props&&n.props.type),a=o[i];a&&a(e,t,n,r)}function De(){xe.getSSRProps=({value:e})=>({value:e}),_e.getSSRProps=({value:e},t)=>{if(t.props&&(0,r.WV)(t.props.value,e))return{checked:!0}},we.getSSRProps=({value:e},t)=>{if((0,r.kJ)(e)){if(t.props&&(0,r.hq)(e,t.props.value)>-1)return{checked:!0}}else if((0,r.DM)(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},Te.getSSRProps=(e,t)=>{if("string"!==typeof t.type)return;const n=Ne(t.type.toUpperCase(),t.props&&t.props.type);return n.getSSRProps?n.getSSRProps(e,t):void 0}}const $e=["ctrl","shift","alt","meta"],Ae={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>$e.some((n=>e[`${n}Key`]&&!t.includes(n)))},Re=(e,t)=>(n,...r)=>{for(let e=0;e<t.length;e++){const r=Ae[t[e]];if(r&&r(n,t))return}return e(n,...r)},Me={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Fe=(e,t)=>n=>{if(!("key"in n))return;const i=(0,r.rs)(n.key);return t.some((e=>e===i||Me[e]===i))?e(n):void 0},Pe={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):je(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!==!n&&(r?t?(r.beforeEnter(e),je(e,!0),r.enter(e)):r.leave(e,(()=>{je(e,!1)})):je(e,t))},beforeUnmount(e,{value:t}){je(e,t)}};function je(e,t){e.style.display=t?e._vod:"none"}function Be(){Pe.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const Le=(0,r.l7)({patchProp:R},u);let ze,Ve=!1;function Ue(){return ze||(ze=(0,i.Us)(Le))}function We(){return ze=Ve?ze:(0,i.Eo)(Le),Ve=!0,ze}const He=(...e)=>{Ue().render(...e)},Ge=(...e)=>{We().hydrate(...e)},qe=(...e)=>{const t=Ue().createApp(...e);const{mount:n}=t;return t.mount=e=>{const i=Xe(e);if(!i)return;const o=t._component;(0,r.mf)(o)||o.render||o.template||(o.template=i.innerHTML),i.innerHTML="";const a=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t},Ye=(...e)=>{const t=We().createApp(...e);const{mount:n}=t;return t.mount=e=>{const t=Xe(e);if(t)return n(t,!0,t instanceof SVGElement)},t};function Xe(e){if((0,r.HD)(e)){const t=document.querySelector(e);return t}return e}let Ke=!1;const Je=()=>{Ke||(Ke=!0,De(),Be())}},7139:function(e,t,n){"use strict";function r(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}n.d(t,{C_:function(){return p},DM:function(){return A},E9:function(){return ie},F7:function(){return C},Gg:function(){return H},HD:function(){return F},He:function(){return ne},Kn:function(){return j},NO:function(){return _},Nj:function(){return te},Od:function(){return T},PO:function(){return U},Pq:function(){return s},RI:function(){return E},S0:function(){return W},W7:function(){return V},WV:function(){return g},Z6:function(){return w},_A:function(){return Y},_N:function(){return $},aU:function(){return Q},dG:function(){return k},e1:function(){return o},fY:function(){return r},hR:function(){return Z},hq:function(){return b},ir:function(){return ee},j5:function(){return u},kC:function(){return J},kJ:function(){return D},kT:function(){return x},l7:function(){return O},mf:function(){return M},rs:function(){return K},tI:function(){return B},tR:function(){return I},vs:function(){return f},yA:function(){return l},yk:function(){return P},zw:function(){return v}});const i="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",o=r(i);const a="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",s=r(a);function l(e){return!!e||""===e}function u(e){if(D(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=F(r)?d(r):u(r);if(i)for(const e in i)t[e]=i[e]}return t}return F(e)||j(e)?e:void 0}const c=/;(?![^(]*\))/g,h=/:(.+)/;function d(e){const t={};return e.split(c).forEach((e=>{if(e){const n=e.split(h);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function p(e){let t="";if(F(e))t=e;else if(D(e))for(let n=0;n<e.length;n++){const r=p(e[n]);r&&(t+=r+" ")}else if(j(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function f(e){if(!e)return null;let{class:t,style:n}=e;return t&&!F(t)&&(e.class=p(t)),n&&(e.style=u(n)),e}function m(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=g(e[r],t[r]);return n}function g(e,t){if(e===t)return!0;let n=R(e),r=R(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=P(e),r=P(t),n||r)return e===t;if(n=D(e),r=D(t),n||r)return!(!n||!r)&&m(e,t);if(n=j(e),r=j(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const n in e){const r=e.hasOwnProperty(n),i=t.hasOwnProperty(n);if(r&&!i||!r&&i||!g(e[n],t[n]))return!1}}return String(e)===String(t)}function b(e,t){return e.findIndex((e=>g(e,t)))}const v=e=>F(e)?e:null==e?"":D(e)||j(e)&&(e.toString===L||!M(e.toString))?JSON.stringify(e,y,2):String(e),y=(e,t)=>t&&t.__v_isRef?y(e,t.value):$(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:A(t)?{[`Set(${t.size})`]:[...t.values()]}:!j(t)||D(t)||U(t)?t:String(t),x={},w=[],k=()=>{},_=()=>!1,S=/^on[^a-z]/,C=e=>S.test(e),I=e=>e.startsWith("onUpdate:"),O=Object.assign,T=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},N=Object.prototype.hasOwnProperty,E=(e,t)=>N.call(e,t),D=Array.isArray,$=e=>"[object Map]"===z(e),A=e=>"[object Set]"===z(e),R=e=>"[object Date]"===z(e),M=e=>"function"===typeof e,F=e=>"string"===typeof e,P=e=>"symbol"===typeof e,j=e=>null!==e&&"object"===typeof e,B=e=>j(e)&&M(e.then)&&M(e.catch),L=Object.prototype.toString,z=e=>L.call(e),V=e=>z(e).slice(8,-1),U=e=>"[object Object]"===z(e),W=e=>F(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,H=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),G=e=>{const t=Object.create(null);return n=>{const r=t[n];return r||(t[n]=e(n))}},q=/-(\w)/g,Y=G((e=>e.replace(q,((e,t)=>t?t.toUpperCase():"")))),X=/\B([A-Z])/g,K=G((e=>e.replace(X,"-$1").toLowerCase())),J=G((e=>e.charAt(0).toUpperCase()+e.slice(1))),Z=G((e=>e?`on${J(e)}`:"")),Q=(e,t)=>!Object.is(e,t),ee=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},te=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},ne=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let re;const ie=()=>re||(re="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{})},7823:function(e){function t(e,t,n){var r,i,o,a,s;function l(){var u=Date.now()-a;u<t&&u>=0?r=setTimeout(l,t-u):(r=null,n||(s=e.apply(o,i),o=i=null))}null==t&&(t=100);var u=function(){o=this,i=arguments,a=Date.now();var u=n&&!r;return r||(r=setTimeout(l,t)),u&&(s=e.apply(o,i),o=i=null),s};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(s=e.apply(o,i),o=i=null,clearTimeout(r),r=null)},u}t.debounce=t,e.exports=t},2996:function(e,n,r){"use strict";r.d(n,{Z:function(){return uu}});r(1703);function i(){}function o(e){return null==e?i:function(){return this.querySelector(e)}}function a(e){"function"!==typeof e&&(e=o(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,s,l=t[i],u=l.length,c=r[i]=new Array(u),h=0;h<u;++h)(a=l[h])&&(s=e.call(a,a.__data__,h,l))&&("__data__"in a&&(s.__data__=a.__data__),c[h]=s);return new et(r,this._parents)}function s(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function l(){return[]}function u(e){return null==e?l:function(){return this.querySelectorAll(e)}}function c(e){return function(){return s(e.apply(this,arguments))}}function h(e){e="function"===typeof e?c(e):u(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,h=0;h<l;++h)(a=s[h])&&(r.push(e.call(a,a.__data__,h,s)),i.push(a));return new et(r,i)}function d(e){return function(){return this.matches(e)}}function p(e){return function(t){return t.matches(e)}}var f=Array.prototype.find;function m(e){return function(){return f.call(this.children,e)}}function g(){return this.firstElementChild}function b(e){return this.select(null==e?g:m("function"===typeof e?e:p(e)))}var v=Array.prototype.filter;function y(){return Array.from(this.children)}function x(e){return function(){return v.call(this.children,e)}}function w(e){return this.selectAll(null==e?y:x("function"===typeof e?e:p(e)))}function k(e){"function"!==typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new et(r,this._parents)}function _(e){return new Array(e.length)}function S(){return new et(this._enter||this._groups.map(_),this._parents)}function C(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function I(e){return function(){return e}}function O(e,t,n,r,i,o){for(var a,s=0,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new C(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function T(e,t,n,r,i,o,a){var s,l,u,c=new Map,h=t.length,d=o.length,p=new Array(h);for(s=0;s<h;++s)(l=t[s])&&(p[s]=u=a.call(l,l.__data__,s,t)+"",c.has(u)?i[s]=l:c.set(u,l));for(s=0;s<d;++s)u=a.call(e,o[s],s,o)+"",(l=c.get(u))?(r[s]=l,l.__data__=o[s],c.delete(u)):n[s]=new C(e,o[s]);for(s=0;s<h;++s)(l=t[s])&&c.get(p[s])===l&&(i[s]=l)}function N(e){return e.__data__}function E(e,t){if(!arguments.length)return Array.from(this,N);var n=t?T:O,r=this._parents,i=this._groups;"function"!==typeof e&&(e=I(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],h=i[u],d=h.length,p=D(e.call(c,c&&c.__data__,u,r)),f=p.length,m=s[u]=new Array(f),g=a[u]=new Array(f),b=l[u]=new Array(d);n(c,h,m,g,b,p,t);for(var v,y,x=0,w=0;x<f;++x)if(v=m[x]){x>=w&&(w=x+1);while(!(y=g[w])&&++w<f);v._next=y||null}}return a=new et(a,r),a._enter=s,a._exit=l,a}function D(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function $(){return new et(this._exit||this._groups.map(_),this._parents)}function A(e,t,n){var r=this.enter(),i=this,o=this.exit();return"function"===typeof e?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),null!=t&&(i=t(i),i&&(i=i.selection())),null==n?o.remove():n(o),r&&i?r.merge(i).order():i}function R(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var u,c=n[l],h=r[l],d=c.length,p=s[l]=new Array(d),f=0;f<d;++f)(u=c[f]||h[f])&&(p[f]=u);for(;l<i;++l)s[l]=n[l];return new et(s,this._parents)}function M(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this}function F(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=P);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,u=i[o]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(t)}return new et(i,this._parents).order()}function P(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function j(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function B(){return Array.from(this)}function L(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function z(){let e=0;for(const t of this)++e;return e}function V(){return!this.node()}function U(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this}C.prototype={constructor:C,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var W="http://www.w3.org/1999/xhtml",H={svg:"http://www.w3.org/2000/svg",xhtml:W,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function G(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),H.hasOwnProperty(t)?{space:H[t],local:e}:e}function q(e){return function(){this.removeAttribute(e)}}function Y(e){return function(){this.removeAttributeNS(e.space,e.local)}}function X(e,t){return function(){this.setAttribute(e,t)}}function K(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function J(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Z(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Q(e,t){var n=G(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Y:q:"function"===typeof t?n.local?Z:J:n.local?K:X)(n,t))}function ee(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function te(e){return function(){this.style.removeProperty(e)}}function ne(e,t,n){return function(){this.style.setProperty(e,t,n)}}function re(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ie(e,t,n){return arguments.length>1?this.each((null==t?te:"function"===typeof t?re:ne)(e,t,null==n?"":n)):oe(this.node(),e)}function oe(e,t){return e.style.getPropertyValue(t)||ee(e).getComputedStyle(e,null).getPropertyValue(t)}function ae(e){return function(){delete this[e]}}function se(e,t){return function(){this[e]=t}}function le(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ue(e,t){return arguments.length>1?this.each((null==t?ae:"function"===typeof t?le:se)(e,t)):this.node()[e]}function ce(e){return e.trim().split(/^|\s+/)}function he(e){return e.classList||new de(e)}function de(e){this._node=e,this._names=ce(e.getAttribute("class")||"")}function pe(e,t){var n=he(e),r=-1,i=t.length;while(++r<i)n.add(t[r])}function fe(e,t){var n=he(e),r=-1,i=t.length;while(++r<i)n.remove(t[r])}function me(e){return function(){pe(this,e)}}function ge(e){return function(){fe(this,e)}}function be(e,t){return function(){(t.apply(this,arguments)?pe:fe)(this,e)}}function ve(e,t){var n=ce(e+"");if(arguments.length<2){var r=he(this.node()),i=-1,o=n.length;while(++i<o)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?be:t?me:ge)(n,t))}function ye(){this.textContent=""}function xe(e){return function(){this.textContent=e}}function we(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ke(e){return arguments.length?this.each(null==e?ye:("function"===typeof e?we:xe)(e)):this.node().textContent}function _e(){this.innerHTML=""}function Se(e){return function(){this.innerHTML=e}}function Ce(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Ie(e){return arguments.length?this.each(null==e?_e:("function"===typeof e?Ce:Se)(e)):this.node().innerHTML}function Oe(){this.nextSibling&&this.parentNode.appendChild(this)}function Te(){return this.each(Oe)}function Ne(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ee(){return this.each(Ne)}function De(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===W&&t.documentElement.namespaceURI===W?t.createElement(e):t.createElementNS(n,e)}}function $e(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ae(e){var t=G(e);return(t.local?$e:De)(t)}function Re(e){var t="function"===typeof e?e:Ae(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))}function Me(){return null}function Fe(e,t){var n="function"===typeof e?e:Ae(e),r=null==t?Me:"function"===typeof t?t:o(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))}function Pe(){var e=this.parentNode;e&&e.removeChild(this)}function je(){return this.each(Pe)}function Be(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Le(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ze(e){return this.select(e?Le:Be)}function Ve(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ue(e){return function(t){e.call(this,t,this.__data__)}}function We(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function He(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function Ge(e,t,n){return function(){var r,i=this.__on,o=Ue(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function qe(e,t,n){var r,i,o=We(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?Ge:He,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value}function Ye(e,t,n){var r=ee(e),i=r.CustomEvent;"function"===typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Xe(e,t){return function(){return Ye(this,e,t)}}function Ke(e,t){return function(){return Ye(this,e,t.apply(this,arguments))}}function Je(e,t){return this.each(("function"===typeof t?Ke:Xe)(e,t))}function*Ze(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}de.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Qe=[null];function et(e,t){this._groups=e,this._parents=t}function tt(){return new et([[document.documentElement]],Qe)}function nt(){return this}et.prototype=tt.prototype={constructor:et,select:a,selectAll:h,selectChild:b,selectChildren:w,filter:k,data:E,enter:S,exit:$,join:A,merge:R,selection:nt,order:M,sort:F,call:j,nodes:B,node:L,size:z,empty:V,each:U,attr:Q,style:ie,property:ue,classed:ve,text:ke,html:Ie,raise:Te,lower:Ee,append:Re,insert:Fe,remove:je,clone:ze,datum:Ve,on:qe,dispatch:Je,[Symbol.iterator]:Ze};var rt=tt;function it(e){return"string"===typeof e?new et([[document.querySelector(e)]],[document.documentElement]):new et([[e]],Qe)}var ot={value:()=>{}};function at(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new st(r)}function st(e){this._=e}function lt(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function ut(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function ct(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ot,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}st.prototype=at.prototype={constructor:st,on:function(e,t){var n,r=this._,i=lt(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);while(++o<a)if(n=(e=i[o]).type)r[n]=ct(r[n],e.name,t);else if(null==t)for(n in r)r[n]=ct(r[n],e.name,null);return this}while(++o<a)if((n=(e=i[o]).type)&&(n=ut(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new st(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,n=r.length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var ht=at;const dt={passive:!1},pt={capture:!0,passive:!1};function ft(e){e.stopImmediatePropagation()}function mt(e){e.preventDefault(),e.stopImmediatePropagation()}function gt(e){var t=e.document.documentElement,n=it(e).on("dragstart.drag",mt,pt);"onselectstart"in t?n.on("selectstart.drag",mt,pt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function bt(e,t){var n=e.document.documentElement,r=it(e).on("dragstart.drag",null);t&&(r.on("click.drag",mt,pt),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var vt=1e-12;function yt(e){return((e=Math.exp(e))+1/e)/2}function xt(e){return((e=Math.exp(e))-1/e)/2}function wt(e){return((e=Math.exp(2*e))-1)/(e+1)}var kt=function e(t,n,r){function i(e,i){var o,a,s=e[0],l=e[1],u=e[2],c=i[0],h=i[1],d=i[2],p=c-s,f=h-l,m=p*p+f*f;if(m<vt)a=Math.log(d/u)/t,o=function(e){return[s+e*p,l+e*f,u*Math.exp(t*e*a)]};else{var g=Math.sqrt(m),b=(d*d-u*u+r*m)/(2*u*n*g),v=(d*d-u*u-r*m)/(2*d*n*g),y=Math.log(Math.sqrt(b*b+1)-b),x=Math.log(Math.sqrt(v*v+1)-v);a=(x-y)/t,o=function(e){var r=e*a,i=yt(y),o=u/(n*g)*(i*wt(t*r+y)-xt(y));return[s+o*p,l+o*f,u*i/yt(t*r+y)]}}return o.duration=1e3*a*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n,i=r*r;return e(n,r,i)},i}(Math.SQRT2,2,4);function _t(e){let t;while(t=e.sourceEvent)e=t;return e}function St(e,t){if(e=_t(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}var Ct,It,Ot=0,Tt=0,Nt=0,Et=1e3,Dt=0,$t=0,At=0,Rt="object"===typeof performance&&performance.now?performance:Date,Mt="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ft(){return $t||(Mt(Pt),$t=Rt.now()+At)}function Pt(){$t=0}function jt(){this._call=this._time=this._next=null}function Bt(e,t,n){var r=new jt;return r.restart(e,t,n),r}function Lt(){Ft(),++Ot;var e,t=Ct;while(t)(e=$t-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ot}function zt(){$t=(Dt=Rt.now())+At,Ot=Tt=0;try{Lt()}finally{Ot=0,Ut(),$t=0}}function Vt(){var e=Rt.now(),t=e-Dt;t>Et&&(At-=t,Dt=e)}function Ut(){var e,t,n=Ct,r=1/0;while(n)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Ct=t);It=e,Wt(r)}function Wt(e){if(!Ot){Tt&&(Tt=clearTimeout(Tt));var t=e-$t;t>24?(e<1/0&&(Tt=setTimeout(zt,e-Rt.now()-At)),Nt&&(Nt=clearInterval(Nt))):(Nt||(Dt=Rt.now(),Nt=setInterval(Vt,Et)),Ot=1,Mt(zt))}}function Ht(e,t,n){var r=new jt;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}jt.prototype=Bt.prototype={constructor:jt,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?Ft():+n)+(null==t?0:+t),this._next||It===this||(It?It._next=this:Ct=this,It=this),this._call=e,this._time=n,Wt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wt())}};var Gt=ht("start","end","cancel","interrupt"),qt=[],Yt=0,Xt=1,Kt=2,Jt=3,Zt=4,Qt=5,en=6;function tn(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};an(e,n,{name:t,index:r,group:i,on:Gt,tween:qt,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Yt})}function nn(e,t){var n=on(e,t);if(n.state>Yt)throw new Error("too late; already scheduled");return n}function rn(e,t){var n=on(e,t);if(n.state>Jt)throw new Error("too late; already running");return n}function on(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function an(e,t,n){var r,i=e.__transition;function o(e){n.state=Xt,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var u,c,h,d;if(n.state!==Xt)return l();for(u in i)if(d=i[u],d.name===n.name){if(d.state===Jt)return Ht(a);d.state===Zt?(d.state=en,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[u]):+u<t&&(d.state=en,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[u])}if(Ht((function(){n.state===Jt&&(n.state=Zt,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=Kt,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Kt){for(n.state=Jt,r=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function s(t){var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=Qt,1),o=-1,a=r.length;while(++o<a)r[o].call(e,i);n.state===Qt&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=en,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Bt(o,0,n.time)}function sn(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>Kt&&n.state<Qt,n.state=en,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}function ln(e){return this.each((function(){sn(this,e)}))}function un(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var cn,hn=180/Math.PI,dn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pn(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*hn,skewX:Math.atan(l)*hn,scaleX:a,scaleY:s}}function fn(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?dn:pn(t.a,t.b,t.c,t.d,t.e,t.f)}function mn(e){return null==e?dn:(cn||(cn=document.createElementNS("http://www.w3.org/2000/svg","g")),cn.setAttribute("transform",e),(e=cn.transform.baseVal.consolidate())?(e=e.matrix,pn(e.a,e.b,e.c,e.d,e.e,e.f)):dn)}function gn(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}function o(e,r,i,o,a,s){if(e!==i||r!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:un(e,i)},{i:l-2,x:un(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}function a(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:un(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}function s(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:un(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}function l(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:un(e,n)},{i:s-2,x:un(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),o(t.translateX,t.translateY,n.translateX,n.translateY,r,i),a(t.rotate,n.rotate,r,i),s(t.skewX,n.skewX,r,i),l(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){var t,n=-1,o=i.length;while(++n<o)r[(t=i[n]).i]=t.x(e);return r.join("")}}}var bn=gn(fn,"px, ","px)","deg)"),vn=gn(mn,", ",")",")");function yn(e,t){var n,r;return function(){var i=rn(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function xn(e,t,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=rn(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}o.tween=i}}function wn(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=on(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?yn:xn)(n,e,t))}function kn(e,t,n){var r=e._id;return e.each((function(){var e=rn(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return on(e,r).value[t]}}function _n(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Sn(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Cn(){}var In=.7,On=1/In,Tn="\\s*([+-]?\\d+)\\s*",Nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",En="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dn=/^#([0-9a-f]{3,8})$/,$n=new RegExp(`^rgb\\(${Tn},${Tn},${Tn}\\)$`),An=new RegExp(`^rgb\\(${En},${En},${En}\\)$`),Rn=new RegExp(`^rgba\\(${Tn},${Tn},${Tn},${Nn}\\)$`),Mn=new RegExp(`^rgba\\(${En},${En},${En},${Nn}\\)$`),Fn=new RegExp(`^hsl\\(${Nn},${En},${En}\\)$`),Pn=new RegExp(`^hsla\\(${Nn},${En},${En},${Nn}\\)$`),jn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Bn(){return this.rgb().formatHex()}function Ln(){return this.rgb().formatHex8()}function zn(){return nr(this).formatHsl()}function Vn(){return this.rgb().formatRgb()}function Un(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Dn.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Wn(t):3===n?new Yn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Hn(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Hn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=$n.exec(e))?new Yn(t[1],t[2],t[3],1):(t=An.exec(e))?new Yn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Rn.exec(e))?Hn(t[1],t[2],t[3],t[4]):(t=Mn.exec(e))?Hn(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Fn.exec(e))?tr(t[1],t[2]/100,t[3]/100,1):(t=Pn.exec(e))?tr(t[1],t[2]/100,t[3]/100,t[4]):jn.hasOwnProperty(e)?Wn(jn[e]):"transparent"===e?new Yn(NaN,NaN,NaN,0):null}function Wn(e){return new Yn(e>>16&255,e>>8&255,255&e,1)}function Hn(e,t,n,r){return r<=0&&(e=t=n=NaN),new Yn(e,t,n,r)}function Gn(e){return e instanceof Cn||(e=Un(e)),e?(e=e.rgb(),new Yn(e.r,e.g,e.b,e.opacity)):new Yn}function qn(e,t,n,r){return 1===arguments.length?Gn(e):new Yn(e,t,n,null==r?1:r)}function Yn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Xn(){return`#${er(this.r)}${er(this.g)}${er(this.b)}`}function Kn(){return`#${er(this.r)}${er(this.g)}${er(this.b)}${er(255*(isNaN(this.opacity)?1:this.opacity))}`}function Jn(){const e=Zn(this.opacity);return`${1===e?"rgb(":"rgba("}${Qn(this.r)}, ${Qn(this.g)}, ${Qn(this.b)}${1===e?")":`, ${e})`}`}function Zn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Qn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function er(e){return e=Qn(e),(e<16?"0":"")+e.toString(16)}function tr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ir(e,t,n,r)}function nr(e){if(e instanceof ir)return new ir(e.h,e.s,e.l,e.opacity);if(e instanceof Cn||(e=Un(e)),!e)return new ir;if(e instanceof ir)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new ir(a,s,l,e.opacity)}function rr(e,t,n,r){return 1===arguments.length?nr(e):new ir(e,t,n,null==r?1:r)}function ir(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function or(e){return e=(e||0)%360,e<0?e+360:e}function ar(e){return Math.max(0,Math.min(1,e||0))}function sr(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function lr(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function ur(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return lr((n-r/t)*t,a,i,o,s)}}function cr(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return lr((n-r/t)*t,i,o,a,s)}}_n(Cn,Un,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Bn,formatHex:Bn,formatHex8:Ln,formatHsl:zn,formatRgb:Vn,toString:Vn}),_n(Yn,qn,Sn(Cn,{brighter(e){return e=null==e?On:Math.pow(On,e),new Yn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?In:Math.pow(In,e),new Yn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yn(Qn(this.r),Qn(this.g),Qn(this.b),Zn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xn,formatHex:Xn,formatHex8:Kn,formatRgb:Jn,toString:Jn})),_n(ir,rr,Sn(Cn,{brighter(e){return e=null==e?On:Math.pow(On,e),new ir(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?In:Math.pow(In,e),new ir(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Yn(sr(e>=240?e-240:e+120,i,r),sr(e,i,r),sr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ir(or(this.h),ar(this.s),ar(this.l),Zn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zn(this.opacity);return`${1===e?"hsl(":"hsla("}${or(this.h)}, ${100*ar(this.s)}%, ${100*ar(this.l)}%${1===e?")":`, ${e})`}`}}));var hr=e=>()=>e;function dr(e,t){return function(n){return e+n*t}}function pr(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function fr(e){return 1===(e=+e)?mr:function(t,n){return n-t?pr(t,n,e):hr(isNaN(t)?n:t)}}function mr(e,t){var n=t-e;return n?dr(e,n):hr(isNaN(e)?t:e)}var gr=function e(t){var n=fr(t);function r(e,t){var r=n((e=qn(e)).r,(t=qn(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=mr(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function br(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=qn(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}br(ur),br(cr);var vr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yr=new RegExp(vr.source,"g");function xr(e){return function(){return e}}function wr(e){return function(t){return e(t)+""}}function kr(e,t){var n,r,i,o=vr.lastIndex=yr.lastIndex=0,a=-1,s=[],l=[];e+="",t+="";while((n=vr.exec(e))&&(r=yr.exec(t)))(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:un(n,r)})),o=yr.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?wr(l[0].x):xr(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function _r(e,t){var n;return("number"===typeof t?un:t instanceof Un?gr:(n=Un(t))?(t=n,gr):kr)(e,t)}function Sr(e){return function(){this.removeAttribute(e)}}function Cr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ir(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function Or(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function Tr(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return a=this.getAttribute(e),s=l+"",a===s?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttribute(e)}}function Nr(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return a=this.getAttributeNS(e.space,e.local),s=l+"",a===s?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}function Er(e,t){var n=G(e),r="transform"===n?vn:_r;return this.attrTween(e,"function"===typeof t?(n.local?Nr:Tr)(n,r,kn(this,"attr."+e,t)):null==t?(n.local?Cr:Sr)(n):(n.local?Or:Ir)(n,r,t))}function Dr(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function $r(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ar(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&$r(e,i)),n}return i._value=t,i}function Rr(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Dr(e,i)),n}return i._value=t,i}function Mr(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=G(e);return this.tween(n,(r.local?Ar:Rr)(r,t))}function Fr(e,t){return function(){nn(this,e).delay=+t.apply(this,arguments)}}function Pr(e,t){return t=+t,function(){nn(this,e).delay=t}}function jr(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Fr:Pr)(t,e)):on(this.node(),t).delay}function Br(e,t){return function(){rn(this,e).duration=+t.apply(this,arguments)}}function Lr(e,t){return t=+t,function(){rn(this,e).duration=t}}function zr(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Br:Lr)(t,e)):on(this.node(),t).duration}function Vr(e,t){if("function"!==typeof t)throw new Error;return function(){rn(this,e).ease=t}}function Ur(e){var t=this._id;return arguments.length?this.each(Vr(t,e)):on(this.node(),t).ease}function Wr(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;rn(this,e).ease=n}}function Hr(e){if("function"!==typeof e)throw new Error;return this.each(Wr(this._id,e))}function Gr(e){"function"!==typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new wi(r,this._parents,this._name,this._id)}function qr(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,u=t[s],c=n[s],h=u.length,d=a[s]=new Array(h),p=0;p<h;++p)(l=u[p]||c[p])&&(d[p]=l);for(;s<r;++s)a[s]=t[s];return new wi(a,this._parents,this._name,this._id)}function Yr(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}function Xr(e,t,n){var r,i,o=Yr(t)?nn:rn;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}function Kr(e,t){var n=this._id;return arguments.length<2?on(this.node(),n).on.on(e):this.each(Xr(n,e,t))}function Jr(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Zr(){return this.on("end.remove",Jr(this._id))}function Qr(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=o(e));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var l,u,c=r[s],h=c.length,d=a[s]=new Array(h),p=0;p<h;++p)(l=c[p])&&(u=e.call(l,l.__data__,p,c))&&("__data__"in l&&(u.__data__=l.__data__),d[p]=u,tn(d[p],t,n,p,d,on(l,n)));return new wi(a,this._parents,t,n)}function ei(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=u(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,c=r[s],h=c.length,d=0;d<h;++d)if(l=c[d]){for(var p,f=e.call(l,l.__data__,d,c),m=on(l,n),g=0,b=f.length;g<b;++g)(p=f[g])&&tn(p,t,n,g,f,m);o.push(f),a.push(l)}return new wi(o,a,t,n)}var ti=rt.prototype.constructor;function ni(){return new ti(this._groups,this._parents)}function ri(e,t){var n,r,i;return function(){var o=oe(this,e),a=(this.style.removeProperty(e),oe(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function ii(e){return function(){this.style.removeProperty(e)}}function oi(e,t,n){var r,i,o=n+"";return function(){var a=oe(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}function ai(e,t,n){var r,i,o;return function(){var a=oe(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=oe(this,e)),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}function si(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var l=rn(this,e),u=l.on,c=null==l.value[a]?o||(o=ii(t)):void 0;u===n&&i===c||(r=(n=u).copy()).on(s,i=c),l.on=r}}function li(e,t,n){var r="transform"===(e+="")?bn:_r;return null==t?this.styleTween(e,ri(e,r)).on("end.style."+e,ii(e)):"function"===typeof t?this.styleTween(e,ai(e,r,kn(this,"style."+e,t))).each(si(this._id,e)):this.styleTween(e,oi(e,r,t),n).on("end.style."+e,null)}function ui(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function ci(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&ui(e,o,n)),r}return o._value=t,o}function hi(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,ci(e,t,null==n?"":n))}function di(e){return function(){this.textContent=e}}function pi(e){return function(){var t=e(this);this.textContent=null==t?"":t}}function fi(e){return this.tween("text","function"===typeof e?pi(kn(this,"text",e)):di(null==e?"":e+""))}function mi(e){return function(t){this.textContent=e.call(this,t)}}function gi(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&mi(r)),t}return r._value=e,r}function bi(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,gi(e))}function vi(){for(var e=this._name,t=this._id,n=_i(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=on(a,t);tn(a,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new wi(r,this._parents,e,n)}function yi(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},l={value:function(){0===--i&&o()}};n.each((function(){var n=rn(this,r),i=n.on;i!==e&&(t=(e=i).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===i&&o()}))}var xi=0;function wi(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ki(e){return rt().transition(e)}function _i(){return++xi}var Si=rt.prototype;function Ci(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}wi.prototype=ki.prototype={constructor:wi,select:Qr,selectAll:ei,selectChild:Si.selectChild,selectChildren:Si.selectChildren,filter:Gr,merge:qr,selection:ni,transition:vi,call:Si.call,nodes:Si.nodes,node:Si.node,size:Si.size,empty:Si.empty,each:Si.each,on:Kr,attr:Er,attrTween:Mr,style:li,styleTween:hi,text:fi,textTween:bi,remove:Zr,tween:wn,delay:jr,duration:zr,ease:Ur,easeVarying:Hr,end:yi,[Symbol.iterator]:Si[Symbol.iterator]};var Ii={time:null,delay:0,duration:250,ease:Ci};function Oi(e,t){var n;while(!(n=e.__transition)||!(n=n[t]))if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ti(e){var t,n;e instanceof wi?(t=e._id,e=e._name):(t=_i(),(n=Ii).time=Ft(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,u=0;u<l;++u)(a=s[u])&&tn(a,e,t,u,s,n||Oi(a,t));return new wi(r,this._parents,e,t)}rt.prototype.interrupt=ln,rt.prototype.transition=Ti;var Ni=e=>()=>e;function Ei(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Di(e,t,n){this.k=e,this.x=t,this.y=n}Di.prototype={constructor:Di,scale:function(e){return 1===e?this:new Di(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Di(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $i=new Di(1,0,0);function Ai(e){while(!e.__zoom)if(!(e=e.parentNode))return $i;return e.__zoom}function Ri(e){e.stopImmediatePropagation()}function Mi(e){e.preventDefault(),e.stopImmediatePropagation()}function Fi(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function Pi(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ji(){return this.__zoom||$i}function Bi(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Li(){return navigator.maxTouchPoints||"ontouchstart"in this}function zi(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Vi(){var e,t,n,r=Fi,i=Pi,o=zi,a=Bi,s=Li,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,h=kt,d=ht("start","zoom","end"),p=500,f=150,m=0,g=10;function b(e){e.property("__zoom",ji).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",I).filter(s).on("touchstart.zoom",O).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(e,t){return t=Math.max(l[0],Math.min(l[1],t)),t===e.k?e:new Di(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new Di(e.k,r,i)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,t,n,r){e.on("start.zoom",(function(){k(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){k(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,o=arguments,a=k(e,o).event(r),s=i.apply(e,o),l=null==n?x(s):"function"===typeof n?n.apply(e,o):n,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=e.__zoom,d="function"===typeof t?t.apply(e,o):t,p=h(c.invert(l).concat(u/c.k),d.invert(l).concat(u/d.k));return function(e){if(1===e)e=d;else{var t=p(e),n=u/t[2];e=new Di(n,l[0]-t[0]*n,l[1]-t[1]*n)}a.zoom(null,e)}}))}function k(e,t,n){return!n&&e.__zooming||new _(e,t)}function _(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function S(e,...t){if(r.apply(this,arguments)){var n=k(this,t).event(e),i=this.__zoom,s=Math.max(l[0],Math.min(l[1],i.k*Math.pow(2,a.apply(this,arguments)))),c=St(e);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=i.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(i.k===s)return;n.mouse=[c,i.invert(c)],sn(this),n.start()}Mi(e),n.wheel=setTimeout(h,f),n.zoom("mouse",o(y(v(i,s),n.mouse[0],n.mouse[1]),n.extent,u))}function h(){n.wheel=null,n.end()}}function C(e,...t){if(!n&&r.apply(this,arguments)){var i=e.currentTarget,a=k(this,t,!0).event(e),s=it(e.view).on("mousemove.zoom",d,!0).on("mouseup.zoom",p,!0),l=St(e,i),c=e.clientX,h=e.clientY;gt(e.view),Ri(e),a.mouse=[l,this.__zoom.invert(l)],sn(this),a.start()}function d(e){if(Mi(e),!a.moved){var t=e.clientX-c,n=e.clientY-h;a.moved=t*t+n*n>m}a.event(e).zoom("mouse",o(y(a.that.__zoom,a.mouse[0]=St(e,i),a.mouse[1]),a.extent,u))}function p(e){s.on("mousemove.zoom mouseup.zoom",null),bt(e.view,a.moved),Mi(e),a.event(e).end()}}function I(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,a=St(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(a),l=n.k*(e.shiftKey?.5:2),h=o(y(v(n,l),a,s),i.apply(this,t),u);Mi(e),c>0?it(this).transition().duration(c).call(w,h,a,e):it(this).call(b.transform,h,a,e)}}function O(n,...i){if(r.apply(this,arguments)){var o,a,s,l,u=n.touches,c=u.length,h=k(this,i,n.changedTouches.length===c).event(n);for(Ri(n),a=0;a<c;++a)s=u[a],l=St(s,this),l=[l,this.__zoom.invert(l),s.identifier],h.touch0?h.touch1||h.touch0[2]===l[2]||(h.touch1=l,h.taps=0):(h.touch0=l,o=!0,h.taps=1+!!e);e&&(e=clearTimeout(e)),o&&(h.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),p)),sn(this),h.start())}}function T(e,...t){if(this.__zooming){var n,r,i,a,s=k(this,t).event(e),l=e.changedTouches,c=l.length;for(Mi(e),n=0;n<c;++n)r=l[n],i=St(r,this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var h=s.touch0[0],d=s.touch0[1],p=s.touch1[0],f=s.touch1[1],m=(m=p[0]-h[0])*m+(m=p[1]-h[1])*m,g=(g=f[0]-d[0])*g+(g=f[1]-d[1])*g;r=v(r,Math.sqrt(m/g)),i=[(h[0]+p[0])/2,(h[1]+p[1])/2],a=[(d[0]+f[0])/2,(d[1]+f[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],a=s.touch0[1]}s.zoom("touch",o(y(r,i,a),s.extent,u))}}function N(e,...r){if(this.__zooming){var i,o,a=k(this,r).event(e),s=e.changedTouches,l=s.length;for(Ri(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),p),i=0;i<l;++i)o=s[i],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(o=St(o,this),Math.hypot(t[0]-o[0],t[1]-o[1])<g)){var u=it(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return b.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property("__zoom",ji),e!==i?w(e,t,n,r):i.interrupt().each((function(){k(this,arguments).event(r).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()}))},b.scaleBy=function(e,t,n,r){b.scaleTo(e,(function(){var e=this.__zoom.k,n="function"===typeof t?t.apply(this,arguments):t;return e*n}),n,r)},b.scaleTo=function(e,t,n,r){b.transform(e,(function(){var e=i.apply(this,arguments),r=this.__zoom,a=null==n?x(e):"function"===typeof n?n.apply(this,arguments):n,s=r.invert(a),l="function"===typeof t?t.apply(this,arguments):t;return o(y(v(r,l),a,s),e,u)}),n,r)},b.translateBy=function(e,t,n,r){b.transform(e,(function(){return o(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),i.apply(this,arguments),u)}),null,r)},b.translateTo=function(e,t,n,r,a){b.transform(e,(function(){var e=i.apply(this,arguments),a=this.__zoom,s=null==r?x(e):"function"===typeof r?r.apply(this,arguments):r;return o($i.translate(s[0],s[1]).scale(a.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,u)}),r,a)},_.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=it(this.that).datum();d.call(e,this.that,new Ei(e,{sourceEvent:this.sourceEvent,target:b,type:e,transform:this.that.__zoom,dispatch:d}),t)}},b.wheelDelta=function(e){return arguments.length?(a="function"===typeof e?e:Ni(+e),b):a},b.filter=function(e){return arguments.length?(r="function"===typeof e?e:Ni(!!e),b):r},b.touchable=function(e){return arguments.length?(s="function"===typeof e?e:Ni(!!e),b):s},b.extent=function(e){return arguments.length?(i="function"===typeof e?e:Ni([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),b):i},b.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],b):[l[0],l[1]]},b.translateExtent=function(e){return arguments.length?(u[0][0]=+e[0][0],u[1][0]=+e[1][0],u[0][1]=+e[0][1],u[1][1]=+e[1][1],b):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},b.constrain=function(e){return arguments.length?(o=e,b):o},b.duration=function(e){return arguments.length?(c=+e,b):c},b.interpolate=function(e){return arguments.length?(h=e,b):h},b.on=function(){var e=d.on.apply(d,arguments);return e===d?b:e},b.clickDistance=function(e){return arguments.length?(m=(e=+e)*e,b):Math.sqrt(m)},b.tapDistance=function(e){return arguments.length?(g=+e,b):g},b}Ai.prototype=Di.prototype;var Ui=e=>()=>e;function Wi(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}function Hi(e){return!e.ctrlKey&&!e.button}function Gi(){return this.parentNode}function qi(e,t){return null==t?{x:e.x,y:e.y}:t}function Yi(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xi(){var e,t,n,r,i=Hi,o=Gi,a=qi,s=Yi,l={},u=ht("start","drag","end"),c=0,h=0;function d(e){e.on("mousedown.drag",p).filter(s).on("touchstart.drag",g).on("touchmove.drag",b,dt).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(a,s){if(!r&&i.call(this,a,s)){var l=y(this,o.call(this,a,s),a,s,"mouse");l&&(it(a.view).on("mousemove.drag",f,pt).on("mouseup.drag",m,pt),gt(a.view),ft(a),n=!1,e=a.clientX,t=a.clientY,l("start",a))}}function f(r){if(mt(r),!n){var i=r.clientX-e,o=r.clientY-t;n=i*i+o*o>h}l.mouse("drag",r)}function m(e){it(e.view).on("mousemove.drag mouseup.drag",null),bt(e.view,n),mt(e),l.mouse("end",e)}function g(e,t){if(i.call(this,e,t)){var n,r,a=e.changedTouches,s=o.call(this,e,t),l=a.length;for(n=0;n<l;++n)(r=y(this,s,e,t,a[n].identifier,a[n]))&&(ft(e),r("start",e,a[n]))}}function b(e){var t,n,r=e.changedTouches,i=r.length;for(t=0;t<i;++t)(n=l[r[t].identifier])&&(mt(e),n("drag",e,r[t]))}function v(e){var t,n,i=e.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<o;++t)(n=l[i[t].identifier])&&(ft(e),n("end",e,i[t]))}function y(e,t,n,r,i,o){var s,h,p,f=u.copy(),m=St(o||n,t);if(null!=(p=a.call(e,new Wi("beforestart",{sourceEvent:n,target:d,identifier:i,active:c,x:m[0],y:m[1],dx:0,dy:0,dispatch:f}),r)))return s=p.x-m[0]||0,h=p.y-m[1]||0,function n(o,a,u){var g,b=m;switch(o){case"start":l[i]=n,g=c++;break;case"end":delete l[i],--c;case"drag":m=St(u||a,t),g=c;break}f.call(o,e,new Wi(o,{sourceEvent:a,subject:p,target:d,identifier:i,active:g,x:m[0]+s,y:m[1]+h,dx:m[0]-b[0],dy:m[1]-b[1],dispatch:f}),r)}}return d.filter=function(e){return arguments.length?(i="function"===typeof e?e:Ui(!!e),d):i},d.container=function(e){return arguments.length?(o="function"===typeof e?e:Ui(e),d):o},d.subject=function(e){return arguments.length?(a="function"===typeof e?e:Ui(e),d):a},d.touchable=function(e){return arguments.length?(s="function"===typeof e?e:Ui(!!e),d):s},d.on=function(){var e=u.on.apply(u,arguments);return e===u?d:e},d.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,d):Math.sqrt(h)},d}function Ki(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function Ji(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}Wi.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Zi,Qi=r(2689),eo=r.n(Qi),to={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-to.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*to.Bounce.In(2*e):.5*to.Bounce.Out(2*e-1)+.5}}};Zi="undefined"===typeof self&&"undefined"!==typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!==typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};var no=Zi,ro=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=no()),void 0===t&&(t=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;while(n.length>0){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var i=this._tweens[n[r]],o=!t;i&&!1===i.update(e,o)&&!t&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),io={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),o=io.Utils.Linear;return t<0?o(e[0],e[1],r):t>1?o(e[n],e[n-1],n-r):o(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){for(var n=0,r=e.length-1,i=Math.pow,o=io.Utils.Bernstein,a=0;a<=r;a++)n+=i(1-t,r-a)*i(t,a)*e[a]*o(r,a);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),o=io.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(r=n*(1+t))),o(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(o(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):o(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=io.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var r=t;r>1;r--)n*=r;return e[t]=n,n}}(),CatmullRom:function(e,t,n,r,i){var o=.5*(n-e),a=.5*(r-t),s=i*i,l=i*s;return(2*t-2*n+o+a)*l+(-3*t+3*n-2*o-a)*s+o*i+t}}},oo=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),ao=new ro,so=function(){function e(e,t){void 0===t&&(t=ao),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=to.Linear.None,this._interpolationFunction=io.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=oo.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"===typeof e?no()+parseFloat(e):e:no(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,n,r){for(var i in n){var o=e[i],a=Array.isArray(o),s=a?"array":typeof o,l=!a&&Array.isArray(n[i]);if("undefined"!==s&&"function"!==s){if(l){var u=n[i];if(0===u.length)continue;u=u.map(this._handleRelativeValue.bind(this,o)),n[i]=[o].concat(u)}if("object"!==s&&!a||!o||l)"undefined"===typeof t[i]&&(t[i]=o),a||(t[i]*=1),r[i]=l?n[i].slice().reverse():t[i]||0;else{for(var c in t[i]=a?[]:{},o)t[i][c]=o[c];r[i]=a?[]:{},this._setupProperties(o,t[i],n[i],r[i])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=no()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=no()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=no()),void 0===t&&(t=!0),this._isPaused)return!0;var n,r,i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>i)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(e-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var o=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!==typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,s=this._chainedTweens.length;a<s;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,n,r){for(var i in n)if(void 0!==t[i]){var o=t[i]||0,a=n[i],s=Array.isArray(e[i]),l=Array.isArray(a),u=!s&&l;u?e[i]=this._interpolationFunction(a,r):"object"===typeof a&&a?this._updateProperties(e[i],o,a,r):(a=this._handleRelativeValue(o,a),"number"===typeof a&&(e[i]=o+(a-o)*r))}},e.prototype._handleRelativeValue=function(e,t){return"string"!==typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];this._valuesStartRepeat[e]="string"===typeof n?this._valuesStartRepeat[e]+parseFloat(n):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),lo="18.6.4",uo=oo.nextId,co=ao,ho=co.getAll.bind(co),po=co.removeAll.bind(co),fo=co.add.bind(co),mo=co.remove.bind(co),go=co.update.bind(co),bo={Easing:to,Group:ro,Interpolation:io,now:no,Sequence:oo,nextId:uo,Tween:so,VERSION:lo,getAll:ho,removeAll:po,add:fo,remove:mo,update:go},vo=bo,yo=r(7823),xo=r.n(yo);function wo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ko(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _o(e,t,n){return t&&ko(e.prototype,t),n&&ko(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function So(e,t){return Co(e)||Io(e,t)||Oo(e,t)||No()}function Co(e){if(Array.isArray(e))return e}function Io(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(l){s=!0,i=l}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function Oo(e,t){if(e){if("string"===typeof e)return To(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?To(e,t):void 0}}function To(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function No(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Eo=_o((function e(t,n){var r=n["default"],i=void 0===r?null:r,o=n.triggerUpdate,a=void 0===o||o,s=n.onChange,l=void 0===s?function(e,t){}:s;wo(this,e),this.name=t,this.defaultVal=i,this.triggerUpdate=a,this.onChange=l}));function Do(e){var t=e.stateInit,n=void 0===t?function(){return{}}:t,r=e.props,i=void 0===r?{}:r,o=e.methods,a=void 0===o?{}:o,s=e.aliases,l=void 0===s?{}:s,u=e.init,c=void 0===u?function(){}:u,h=e.update,d=void 0===h?function(){}:h,p=Object.keys(i).map((function(e){return new Eo(e,i[e])}));return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},n instanceof Function?n(e):n,{initialised:!1}),r={};function i(t){return o(t,e),s(),i}var o=function(e,n){c.call(i,e,t,n),t.initialised=!0},s=xo()((function(){t.initialised&&(d.call(i,t,r),r={})}),1);return p.forEach((function(e){function n(e){var n=e.name,o=e.triggerUpdate,a=void 0!==o&&o,l=e.onChange,u=void 0===l?function(e,t){}:l,c=e.defaultVal,h=void 0===c?null:c;return function(e){var o=t[n];if(!arguments.length)return o;var l=void 0===e?h:e;return t[n]=l,u.call(i,l,t,o),!r.hasOwnProperty(n)&&(r[n]=o),a&&s(),i}}i[e.name]=n(e)})),Object.keys(a).forEach((function(e){i[e]=function(){for(var n,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=a[e]).call.apply(n,[i,t].concat(o))}})),Object.entries(l).forEach((function(e){var t=So(e,2),n=t[0],r=t[1];return i[n]=i[r]})),i.resetProps=function(){return p.forEach((function(e){i[e.name](e.defaultVal)})),i},i.resetProps(),t._rerender=s,i}}var $o=function(e){return e instanceof Function?e:"string"===typeof e?function(t){return t[e]}:function(t){return e}},Ao=$o,Ro=r(7013),Mo=r.n(Ro);function Fo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jo(e,t,n){return t&&Po(e.prototype,t),n&&Po(e,n),e}function Bo(e){return Lo(e)||zo(e)||Vo(e)||Wo()}function Lo(e){if(Array.isArray(e))return Uo(e)}function zo(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Vo(e,t){if(e){if("string"===typeof e)return Uo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uo(e,t):void 0}}function Uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wo(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ho=123,Go=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},qo=function(e,t,n){return(e<<16)+(t<<8)+n},Yo=function(e){var t=Mo()(e).toRgb(),n=t.r,r=t.g,i=t.b;return qo(n,r,i)},Xo=function(e,t){return e*Ho%Math.pow(2,t)},Ko=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;Fo(this,e),this.csBits=t,this.registry=["__reserved for background__"]}return jo(e,[{key:"register",value:function(e){if(this.registry.length>=Math.pow(2,24-this.csBits))return null;var t=this.registry.length,n=Xo(t,this.csBits),r=Go(t+(n<<24-this.csBits));return this.registry.push(e),r}},{key:"lookup",value:function(e){var t="string"===typeof e?Yo(e):qo.apply(void 0,Bo(e));if(!t)return null;var n=t&Math.pow(2,24-this.csBits)-1,r=t>>24-this.csBits&Math.pow(2,this.csBits)-1;return Xo(n,this.csBits)!==r||n>=this.registry.length?null:this.registry[n]}}]),e}(),Jo=Ko;const Zo=1664525,Qo=1013904223,ea=4294967296;function ta(){let e=1;return()=>(e=(Zo*e+Qo)%ea)/ea}var na=3;function ra(e){return e.x}function ia(e){return e.y}function oa(e){return e.z}var aa=10,sa=Math.PI*(3-Math.sqrt(5)),la=20*Math.PI/(9+Math.sqrt(221));function ua(e,t){t=t||2;var n,r=Math.min(na,Math.max(1,Math.round(t))),i=1,o=.001,a=1-Math.pow(o,1/300),s=0,l=.6,u=new Map,c=Bt(p),h=ht("tick","end"),d=ta();function p(){f(),h.call("tick",n),i<o&&(c.stop(),h.call("end",n))}function f(t){var o,c,h=e.length;void 0===t&&(t=1);for(var d=0;d<t;++d)for(i+=(s-i)*a,u.forEach((function(e){e(i)})),o=0;o<h;++o)c=e[o],null==c.fx?c.x+=c.vx*=l:(c.x=c.fx,c.vx=0),r>1&&(null==c.fy?c.y+=c.vy*=l:(c.y=c.fy,c.vy=0)),r>2&&(null==c.fz?c.z+=c.vz*=l:(c.z=c.fz,c.vz=0));return n}function m(){for(var t,n=0,i=e.length;n<i;++n){if(t=e[n],t.index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),null!=t.fz&&(t.z=t.fz),isNaN(t.x)||r>1&&isNaN(t.y)||r>2&&isNaN(t.z)){var o=aa*(r>2?Math.cbrt(.5+n):r>1?Math.sqrt(.5+n):n),a=n*sa,s=n*la;1===r?t.x=o:2===r?(t.x=o*Math.cos(a),t.y=o*Math.sin(a)):(t.x=o*Math.sin(a)*Math.cos(s),t.y=o*Math.cos(a),t.z=o*Math.sin(a)*Math.sin(s))}(isNaN(t.vx)||r>1&&isNaN(t.vy)||r>2&&isNaN(t.vz))&&(t.vx=0,r>1&&(t.vy=0),r>2&&(t.vz=0))}}function g(t){return t.initialize&&t.initialize(e,d,r),t}return null==e&&(e=[]),m(),n={tick:f,restart:function(){return c.restart(p),n},stop:function(){return c.stop(),n},numDimensions:function(e){return arguments.length?(r=Math.min(na,Math.max(1,Math.round(e))),u.forEach(g),n):r},nodes:function(t){return arguments.length?(e=t,m(),u.forEach(g),n):e},alpha:function(e){return arguments.length?(i=+e,n):i},alphaMin:function(e){return arguments.length?(o=+e,n):o},alphaDecay:function(e){return arguments.length?(a=+e,n):+a},alphaTarget:function(e){return arguments.length?(s=+e,n):s},velocityDecay:function(e){return arguments.length?(l=1-e,n):1-l},randomSource:function(e){return arguments.length?(d=e,u.forEach(g),n):d},force:function(e,t){return arguments.length>1?(null==t?u.delete(e):u.set(e,g(t)),n):u.get(e)},find:function(){var t,n,i,o,a,s,l=Array.prototype.slice.call(arguments),u=l.shift()||0,c=(r>1?l.shift():null)||0,h=(r>2?l.shift():null)||0,d=l.shift()||1/0,p=0,f=e.length;for(d*=d,p=0;p<f;++p)a=e[p],t=u-a.x,n=c-(a.y||0),i=h-(a.z||0),o=t*t+n*n+i*i,o<d&&(s=a,d=o);return s},on:function(e,t){return arguments.length>1?(h.on(e,t),n):h.on(e)}}}function ca(e){return function(){return e}}function ha(e){return 1e-6*(e()-.5)}function da(e){return e.index}function pa(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function fa(e){var t,n,r,i,o,a,s,l=da,u=d,c=ca(30),h=1;function d(e){return 1/Math.min(o[e.source.index],o[e.target.index])}function p(r){for(var o=0,l=e.length;o<h;++o)for(var u,c,d,p,f,m=0,g=0,b=0,v=0;m<l;++m)u=e[m],c=u.source,d=u.target,g=d.x+d.vx-c.x-c.vx||ha(s),i>1&&(b=d.y+d.vy-c.y-c.vy||ha(s)),i>2&&(v=d.z+d.vz-c.z-c.vz||ha(s)),p=Math.sqrt(g*g+b*b+v*v),p=(p-n[m])/p*r*t[m],g*=p,b*=p,v*=p,d.vx-=g*(f=a[m]),i>1&&(d.vy-=b*f),i>2&&(d.vz-=v*f),c.vx+=g*(f=1-f),i>1&&(c.vy+=b*f),i>2&&(c.vz+=v*f)}function f(){if(r){var i,s,u=r.length,c=e.length,h=new Map(r.map(((e,t)=>[l(e,t,r),e])));for(i=0,o=new Array(u);i<c;++i)s=e[i],s.index=i,"object"!==typeof s.source&&(s.source=pa(h,s.source)),"object"!==typeof s.target&&(s.target=pa(h,s.target)),o[s.source.index]=(o[s.source.index]||0)+1,o[s.target.index]=(o[s.target.index]||0)+1;for(i=0,a=new Array(c);i<c;++i)s=e[i],a[i]=o[s.source.index]/(o[s.source.index]+o[s.target.index]);t=new Array(c),m(),n=new Array(c),g()}}function m(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+u(e[n],n,e)}function g(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+c(e[t],t,e)}return null==e&&(e=[]),p.initialize=function(e,...t){r=e,s=t.find((e=>"function"===typeof e))||Math.random,i=t.find((e=>[1,2,3].includes(e)))||2,f()},p.links=function(t){return arguments.length?(e=t,f(),p):e},p.id=function(e){return arguments.length?(l=e,p):l},p.iterations=function(e){return arguments.length?(h=+e,p):h},p.strength=function(e){return arguments.length?(u="function"===typeof e?e:ca(+e),m(),p):u},p.distance=function(e){return arguments.length?(c="function"===typeof e?e:ca(+e),g(),p):c},p}function ma(e){var t=+this._x.call(null,e);return ga(this.cover(t),t,e)}function ga(e,t,n){if(isNaN(t))return e;var r,i,o,a,s,l,u=e._root,c={data:n},h=e._x0,d=e._x1;if(!u)return e._root=c,e;while(u.length)if((a=t>=(i=(h+d)/2))?h=i:d=i,r=u,!(u=u[s=+a]))return r[s]=c,e;if(o=+e._x.call(null,u.data),t===o)return c.next=u,r?r[s]=c:e._root=c,e;do{r=r?r[s]=new Array(2):e._root=new Array(2),(a=t>=(i=(h+d)/2))?h=i:d=i}while((s=+a)===(l=+(o>=i)));return r[l]=u,r[s]=c,e}function ba(e){var t,n,r=e.length,i=new Array(r),o=1/0,a=-1/0;for(t=0;t<r;++t)isNaN(n=+this._x.call(null,e[t]))||(i[t]=n,n<o&&(o=n),n>a&&(a=n));if(o>a)return this;for(this.cover(o).cover(a),t=0;t<r;++t)ga(this,i[t],e[t]);return this}function va(e){if(isNaN(e=+e))return this;var t=this._x0,n=this._x1;if(isNaN(t))n=(t=Math.floor(e))+1;else{var r,i,o=n-t||1,a=this._root;while(t>e||e>=n)switch(i=+(e<t),r=new Array(2),r[i]=a,a=r,o*=2,i){case 0:n=t+o;break;case 1:t=n-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._x1=n,this}function ya(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e}function xa(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function wa(e,t,n){this.node=e,this.x0=t,this.x1=n}function ka(e,t){var n,r,i,o,a,s=this._x0,l=this._x1,u=[],c=this._root;c&&u.push(new wa(c,s,l)),null==t?t=1/0:(s=e-t,l=e+t);while(o=u.pop())if(!(!(c=o.node)||(r=o.x0)>l||(i=o.x1)<s))if(c.length){var h=(r+i)/2;u.push(new wa(c[1],h,i),new wa(c[0],r,h)),(a=+(e>=h))&&(o=u[u.length-1],u[u.length-1]=u[u.length-1-a],u[u.length-1-a]=o)}else{var d=Math.abs(e-+this._x.call(null,c.data));d<t&&(t=d,s=e-d,l=e+d,n=c.data)}return n}function _a(e){if(isNaN(o=+this._x.call(null,e)))return this;var t,n,r,i,o,a,s,l,u,c=this._root,h=this._x0,d=this._x1;if(!c)return this;if(c.length)while(1){if((s=o>=(a=(h+d)/2))?h=a:d=a,t=c,!(c=c[l=+s]))return this;if(!c.length)break;t[l+1&1]&&(n=t,u=l)}while(c.data!==e)if(r=c,!(c=c.next))return this;return(i=c.next)&&delete c.next,r?(i?r.next=i:delete r.next,this):t?(i?t[l]=i:delete t[l],(c=t[0]||t[1])&&c===(t[1]||t[0])&&!c.length&&(n?n[u]=c:this._root=c),this):(this._root=i,this)}function Sa(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Ca(){return this._root}function Ia(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e}function Oa(e){var t,n,r,i,o=[],a=this._root;a&&o.push(new wa(a,this._x0,this._x1));while(t=o.pop())if(!e(a=t.node,r=t.x0,i=t.x1)&&a.length){var s=(r+i)/2;(n=a[1])&&o.push(new wa(n,s,i)),(n=a[0])&&o.push(new wa(n,r,s))}return this}function Ta(e){var t,n=[],r=[];this._root&&n.push(new wa(this._root,this._x0,this._x1));while(t=n.pop()){var i=t.node;if(i.length){var o,a=t.x0,s=t.x1,l=(a+s)/2;(o=i[0])&&n.push(new wa(o,a,l)),(o=i[1])&&n.push(new wa(o,l,s))}r.push(t)}while(t=r.pop())e(t.node,t.x0,t.x1);return this}function Na(e){return e[0]}function Ea(e){return arguments.length?(this._x=e,this):this._x}function Da(e,t){var n=new $a(null==t?Na:t,NaN,NaN);return null==e?n:n.addAll(e)}function $a(e,t,n){this._x=e,this._x0=t,this._x1=n,this._root=void 0}function Aa(e){var t={data:e.data},n=t;while(e=e.next)n=n.next={data:e.data};return t}var Ra=Da.prototype=$a.prototype;function Ma(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Fa(this.cover(t,n),t,n,e)}function Fa(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,l,u,c,h,d,p=e._root,f={data:r},m=e._x0,g=e._y0,b=e._x1,v=e._y1;if(!p)return e._root=f,e;while(p.length)if((u=t>=(o=(m+b)/2))?m=o:b=o,(c=n>=(a=(g+v)/2))?g=a:v=a,i=p,!(p=p[h=c<<1|u]))return i[h]=f,e;if(s=+e._x.call(null,p.data),l=+e._y.call(null,p.data),t===s&&n===l)return f.next=p,i?i[h]=f:e._root=f,e;do{i=i?i[h]=new Array(4):e._root=new Array(4),(u=t>=(o=(m+b)/2))?m=o:b=o,(c=n>=(a=(g+v)/2))?g=a:v=a}while((h=c<<1|u)===(d=(l>=a)<<1|s>=o));return i[d]=p,i[h]=f,e}function Pa(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),l=1/0,u=1/0,c=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<l&&(l=r),r>c&&(c=r),i<u&&(u=i),i>h&&(h=i));if(l>c||u>h)return this;for(this.cover(l,u).cover(c,h),n=0;n<o;++n)Fa(this,a[n],s[n],e[n]);return this}function ja(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{var a,s,l=i-n||1,u=this._root;while(n>e||e>=i||r>t||t>=o)switch(s=(t<r)<<1|e<n,a=new Array(4),a[s]=u,u=a,l*=2,s){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Ba(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e}function La(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function za(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Va(e,t,n){var r,i,o,a,s,l,u,c=this._x0,h=this._y0,d=this._x1,p=this._y1,f=[],m=this._root;m&&f.push(new za(m,c,h,d,p)),null==n?n=1/0:(c=e-n,h=t-n,d=e+n,p=t+n,n*=n);while(l=f.pop())if(!(!(m=l.node)||(i=l.x0)>d||(o=l.y0)>p||(a=l.x1)<c||(s=l.y1)<h))if(m.length){var g=(i+a)/2,b=(o+s)/2;f.push(new za(m[3],g,b,a,s),new za(m[2],i,b,g,s),new za(m[1],g,o,a,b),new za(m[0],i,o,g,b)),(u=(t>=b)<<1|e>=g)&&(l=f[f.length-1],f[f.length-1]=f[f.length-1-u],f[f.length-1-u]=l)}else{var v=e-+this._x.call(null,m.data),y=t-+this._y.call(null,m.data),x=v*v+y*y;if(x<n){var w=Math.sqrt(n=x);c=e-w,h=t-w,d=e+w,p=t+w,r=m.data}}return r}function Ua(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,l,u,c,h,d,p=this._root,f=this._x0,m=this._y0,g=this._x1,b=this._y1;if(!p)return this;if(p.length)while(1){if((u=o>=(s=(f+g)/2))?f=s:g=s,(c=a>=(l=(m+b)/2))?m=l:b=l,t=p,!(p=p[h=c<<1|u]))return this;if(!p.length)break;(t[h+1&3]||t[h+2&3]||t[h+3&3])&&(n=t,d=h)}while(p.data!==e)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):t?(i?t[h]=i:delete t[h],(p=t[0]||t[1]||t[2]||t[3])&&p===(t[3]||t[2]||t[1]||t[0])&&!p.length&&(n?n[d]=p:this._root=p),this):(this._root=i,this)}function Wa(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Ha(){return this._root}function Ga(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e}function qa(e){var t,n,r,i,o,a,s=[],l=this._root;l&&s.push(new za(l,this._x0,this._y0,this._x1,this._y1));while(t=s.pop())if(!e(l=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&l.length){var u=(r+o)/2,c=(i+a)/2;(n=l[3])&&s.push(new za(n,u,c,o,a)),(n=l[2])&&s.push(new za(n,r,c,u,a)),(n=l[1])&&s.push(new za(n,u,i,o,c)),(n=l[0])&&s.push(new za(n,r,i,u,c))}return this}function Ya(e){var t,n=[],r=[];this._root&&n.push(new za(this._root,this._x0,this._y0,this._x1,this._y1));while(t=n.pop()){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,l=t.x1,u=t.y1,c=(a+l)/2,h=(s+u)/2;(o=i[0])&&n.push(new za(o,a,s,c,h)),(o=i[1])&&n.push(new za(o,c,s,l,h)),(o=i[2])&&n.push(new za(o,a,h,c,u)),(o=i[3])&&n.push(new za(o,c,h,l,u))}r.push(t)}while(t=r.pop())e(t.node,t.x0,t.y0,t.x1,t.y1);return this}function Xa(e){return e[0]}function Ka(e){return arguments.length?(this._x=e,this):this._x}function Ja(e){return e[1]}function Za(e){return arguments.length?(this._y=e,this):this._y}function Qa(e,t,n){var r=new es(null==t?Xa:t,null==n?Ja:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function es(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function ts(e){var t={data:e.data},n=t;while(e=e.next)n=n.next={data:e.data};return t}Ra.copy=function(){var e,t,n=new $a(this._x,this._x0,this._x1),r=this._root;if(!r)return n;if(!r.length)return n._root=Aa(r),n;e=[{source:r,target:n._root=new Array(2)}];while(r=e.pop())for(var i=0;i<2;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(2)}):r.target[i]=Aa(t));return n},Ra.add=ma,Ra.addAll=ba,Ra.cover=va,Ra.data=ya,Ra.extent=xa,Ra.find=ka,Ra.remove=_a,Ra.removeAll=Sa,Ra.root=Ca,Ra.size=Ia,Ra.visit=Oa,Ra.visitAfter=Ta,Ra.x=Ea;var ns=Qa.prototype=es.prototype;function rs(e){var t=+this._x.call(null,e),n=+this._y.call(null,e),r=+this._z.call(null,e);return is(this.cover(t,n,r),t,n,r,e)}function is(e,t,n,r,i){if(isNaN(t)||isNaN(n)||isNaN(r))return e;var o,a,s,l,u,c,h,d,p,f,m,g,b=e._root,v={data:i},y=e._x0,x=e._y0,w=e._z0,k=e._x1,_=e._y1,S=e._z1;if(!b)return e._root=v,e;while(b.length)if((d=t>=(a=(y+k)/2))?y=a:k=a,(p=n>=(s=(x+_)/2))?x=s:_=s,(f=r>=(l=(w+S)/2))?w=l:S=l,o=b,!(b=b[m=f<<2|p<<1|d]))return o[m]=v,e;if(u=+e._x.call(null,b.data),c=+e._y.call(null,b.data),h=+e._z.call(null,b.data),t===u&&n===c&&r===h)return v.next=b,o?o[m]=v:e._root=v,e;do{o=o?o[m]=new Array(8):e._root=new Array(8),(d=t>=(a=(y+k)/2))?y=a:k=a,(p=n>=(s=(x+_)/2))?x=s:_=s,(f=r>=(l=(w+S)/2))?w=l:S=l}while((m=f<<2|p<<1|d)===(g=(h>=l)<<2|(c>=s)<<1|u>=a));return o[g]=b,o[m]=v,e}function os(e){var t,n,r,i,o,a=e.length,s=new Array(a),l=new Array(a),u=new Array(a),c=1/0,h=1/0,d=1/0,p=-1/0,f=-1/0,m=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||isNaN(o=+this._z.call(null,t))||(s[n]=r,l[n]=i,u[n]=o,r<c&&(c=r),r>p&&(p=r),i<h&&(h=i),i>f&&(f=i),o<d&&(d=o),o>m&&(m=o));if(c>p||h>f||d>m)return this;for(this.cover(c,h,d).cover(p,f,m),n=0;n<a;++n)is(this,s[n],l[n],u[n],e[n]);return this}function as(e,t,n){if(isNaN(e=+e)||isNaN(t=+t)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._z0,a=this._x1,s=this._y1,l=this._z1;if(isNaN(r))a=(r=Math.floor(e))+1,s=(i=Math.floor(t))+1,l=(o=Math.floor(n))+1;else{var u,c,h=a-r||1,d=this._root;while(r>e||e>=a||i>t||t>=s||o>n||n>=l)switch(c=(n<o)<<2|(t<i)<<1|e<r,u=new Array(8),u[c]=d,d=u,h*=2,c){case 0:a=r+h,s=i+h,l=o+h;break;case 1:r=a-h,s=i+h,l=o+h;break;case 2:a=r+h,i=s-h,l=o+h;break;case 3:r=a-h,i=s-h,l=o+h;break;case 4:a=r+h,s=i+h,o=l-h;break;case 5:r=a-h,s=i+h,o=l-h;break;case 6:a=r+h,i=s-h,o=l-h;break;case 7:r=a-h,i=s-h,o=l-h;break}this._root&&this._root.length&&(this._root=d)}return this._x0=r,this._y0=i,this._z0=o,this._x1=a,this._y1=s,this._z1=l,this}function ss(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e}function ls(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function us(e,t,n,r,i,o,a){this.node=e,this.x0=t,this.y0=n,this.z0=r,this.x1=i,this.y1=o,this.z1=a}function cs(e,t,n,r){var i,o,a,s,l,u,c,h,d,p=this._x0,f=this._y0,m=this._z0,g=this._x1,b=this._y1,v=this._z1,y=[],x=this._root;x&&y.push(new us(x,p,f,m,g,b,v)),null==r?r=1/0:(p=e-r,f=t-r,m=n-r,g=e+r,b=t+r,v=n+r,r*=r);while(h=y.pop())if(!(!(x=h.node)||(o=h.x0)>g||(a=h.y0)>b||(s=h.z0)>v||(l=h.x1)<p||(u=h.y1)<f||(c=h.z1)<m))if(x.length){var w=(o+l)/2,k=(a+u)/2,_=(s+c)/2;y.push(new us(x[7],w,k,_,l,u,c),new us(x[6],o,k,_,w,u,c),new us(x[5],w,a,_,l,k,c),new us(x[4],o,a,_,w,k,c),new us(x[3],w,k,s,l,u,_),new us(x[2],o,k,s,w,u,_),new us(x[1],w,a,s,l,k,_),new us(x[0],o,a,s,w,k,_)),(d=(n>=_)<<2|(t>=k)<<1|e>=w)&&(h=y[y.length-1],y[y.length-1]=y[y.length-1-d],y[y.length-1-d]=h)}else{var S=e-+this._x.call(null,x.data),C=t-+this._y.call(null,x.data),I=n-+this._z.call(null,x.data),O=S*S+C*C+I*I;if(O<r){var T=Math.sqrt(r=O);p=e-T,f=t-T,m=n-T,g=e+T,b=t+T,v=n+T,i=x.data}}return i}function hs(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e))||isNaN(s=+this._z.call(null,e)))return this;var t,n,r,i,o,a,s,l,u,c,h,d,p,f,m,g=this._root,b=this._x0,v=this._y0,y=this._z0,x=this._x1,w=this._y1,k=this._z1;if(!g)return this;if(g.length)while(1){if((h=o>=(l=(b+x)/2))?b=l:x=l,(d=a>=(u=(v+w)/2))?v=u:w=u,(p=s>=(c=(y+k)/2))?y=c:k=c,t=g,!(g=g[f=p<<2|d<<1|h]))return this;if(!g.length)break;(t[f+1&7]||t[f+2&7]||t[f+3&7]||t[f+4&7]||t[f+5&7]||t[f+6&7]||t[f+7&7])&&(n=t,m=f)}while(g.data!==e)if(r=g,!(g=g.next))return this;return(i=g.next)&&delete g.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(g=t[0]||t[1]||t[2]||t[3]||t[4]||t[5]||t[6]||t[7])&&g===(t[7]||t[6]||t[5]||t[4]||t[3]||t[2]||t[1]||t[0])&&!g.length&&(n?n[m]=g:this._root=g),this):(this._root=i,this)}function ds(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function ps(){return this._root}function fs(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e}function ms(e){var t,n,r,i,o,a,s,l,u=[],c=this._root;c&&u.push(new us(c,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));while(t=u.pop())if(!e(c=t.node,r=t.x0,i=t.y0,o=t.z0,a=t.x1,s=t.y1,l=t.z1)&&c.length){var h=(r+a)/2,d=(i+s)/2,p=(o+l)/2;(n=c[7])&&u.push(new us(n,h,d,p,a,s,l)),(n=c[6])&&u.push(new us(n,r,d,p,h,s,l)),(n=c[5])&&u.push(new us(n,h,i,p,a,d,l)),(n=c[4])&&u.push(new us(n,r,i,p,h,d,l)),(n=c[3])&&u.push(new us(n,h,d,o,a,s,p)),(n=c[2])&&u.push(new us(n,r,d,o,h,s,p)),(n=c[1])&&u.push(new us(n,h,i,o,a,d,p)),(n=c[0])&&u.push(new us(n,r,i,o,h,d,p))}return this}function gs(e){var t,n=[],r=[];this._root&&n.push(new us(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));while(t=n.pop()){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,l=t.z0,u=t.x1,c=t.y1,h=t.z1,d=(a+u)/2,p=(s+c)/2,f=(l+h)/2;(o=i[0])&&n.push(new us(o,a,s,l,d,p,f)),(o=i[1])&&n.push(new us(o,d,s,l,u,p,f)),(o=i[2])&&n.push(new us(o,a,p,l,d,c,f)),(o=i[3])&&n.push(new us(o,d,p,l,u,c,f)),(o=i[4])&&n.push(new us(o,a,s,f,d,p,h)),(o=i[5])&&n.push(new us(o,d,s,f,u,p,h)),(o=i[6])&&n.push(new us(o,a,p,f,d,c,h)),(o=i[7])&&n.push(new us(o,d,p,f,u,c,h))}r.push(t)}while(t=r.pop())e(t.node,t.x0,t.y0,t.z0,t.x1,t.y1,t.z1);return this}function bs(e){return e[0]}function vs(e){return arguments.length?(this._x=e,this):this._x}function ys(e){return e[1]}function xs(e){return arguments.length?(this._y=e,this):this._y}function ws(e){return e[2]}function ks(e){return arguments.length?(this._z=e,this):this._z}function _s(e,t,n,r){var i=new Ss(null==t?bs:t,null==n?ys:n,null==r?ws:r,NaN,NaN,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function Ss(e,t,n,r,i,o,a,s,l){this._x=e,this._y=t,this._z=n,this._x0=r,this._y0=i,this._z0=o,this._x1=a,this._y1=s,this._z1=l,this._root=void 0}function Cs(e){var t={data:e.data},n=t;while(e=e.next)n=n.next={data:e.data};return t}ns.copy=function(){var e,t,n=new es(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=ts(r),n;e=[{source:r,target:n._root=new Array(4)}];while(r=e.pop())for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=ts(t));return n},ns.add=Ma,ns.addAll=Pa,ns.cover=ja,ns.data=Ba,ns.extent=La,ns.find=Va,ns.remove=Ua,ns.removeAll=Wa,ns.root=Ha,ns.size=Ga,ns.visit=qa,ns.visitAfter=Ya,ns.x=Ka,ns.y=Za;var Is=_s.prototype=Ss.prototype;function Os(){var e,t,n,r,i,o,a=ca(-30),s=1,l=1/0,u=.81;function c(r){var o,a=e.length,s=(1===t?Da(e,ra):2===t?Qa(e,ra,ia):3===t?_s(e,ra,ia,oa):null).visitAfter(d);for(i=r,o=0;o<a;++o)n=e[o],s.visit(p)}function h(){if(e){var t,n,r=e.length;for(o=new Array(r),t=0;t<r;++t)n=e[t],o[n.index]=+a(n,t,e)}}function d(e){var n,r,i,a,s,l,u=0,c=0,h=e.length;if(h){for(i=a=s=l=0;l<h;++l)(n=e[l])&&(r=Math.abs(n.value))&&(u+=n.value,c+=r,i+=r*(n.x||0),a+=r*(n.y||0),s+=r*(n.z||0));u*=Math.sqrt(4/h),e.x=i/c,t>1&&(e.y=a/c),t>2&&(e.z=s/c)}else{n=e,n.x=n.data.x,t>1&&(n.y=n.data.y),t>2&&(n.z=n.data.z);do{u+=o[n.data.index]}while(n=n.next)}e.value=u}function p(e,a,c,h,d){if(!e.value)return!0;var p=[c,h,d][t-1],f=e.x-n.x,m=t>1?e.y-n.y:0,g=t>2?e.z-n.z:0,b=p-a,v=f*f+m*m+g*g;if(b*b/u<v)return v<l&&(0===f&&(f=ha(r),v+=f*f),t>1&&0===m&&(m=ha(r),v+=m*m),t>2&&0===g&&(g=ha(r),v+=g*g),v<s&&(v=Math.sqrt(s*v)),n.vx+=f*e.value*i/v,t>1&&(n.vy+=m*e.value*i/v),t>2&&(n.vz+=g*e.value*i/v)),!0;if(!(e.length||v>=l)){(e.data!==n||e.next)&&(0===f&&(f=ha(r),v+=f*f),t>1&&0===m&&(m=ha(r),v+=m*m),t>2&&0===g&&(g=ha(r),v+=g*g),v<s&&(v=Math.sqrt(s*v)));do{e.data!==n&&(b=o[e.data.index]*i/v,n.vx+=f*b,t>1&&(n.vy+=m*b),t>2&&(n.vz+=g*b))}while(e=e.next)}}return c.initialize=function(n,...i){e=n,r=i.find((e=>"function"===typeof e))||Math.random,t=i.find((e=>[1,2,3].includes(e)))||2,h()},c.strength=function(e){return arguments.length?(a="function"===typeof e?e:ca(+e),h(),c):a},c.distanceMin=function(e){return arguments.length?(s=e*e,c):Math.sqrt(s)},c.distanceMax=function(e){return arguments.length?(l=e*e,c):Math.sqrt(l)},c.theta=function(e){return arguments.length?(u=e*e,c):Math.sqrt(u)},c}function Ts(e,t,n){var r,i=1;function o(){var o,a,s=r.length,l=0,u=0,c=0;for(o=0;o<s;++o)a=r[o],l+=a.x||0,u+=a.y||0,c+=a.z||0;for(l=(l/s-e)*i,u=(u/s-t)*i,c=(c/s-n)*i,o=0;o<s;++o)a=r[o],l&&(a.x-=l),u&&(a.y-=u),c&&(a.z-=c)}return null==e&&(e=0),null==t&&(t=0),null==n&&(n=0),o.initialize=function(e){r=e},o.x=function(t){return arguments.length?(e=+t,o):e},o.y=function(e){return arguments.length?(t=+e,o):t},o.z=function(e){return arguments.length?(n=+e,o):n},o.strength=function(e){return arguments.length?(i=+e,o):i},o}function Ns(e,t,n,r){var i,o,a,s,l=ca(.1);function u(e){for(var l=0,u=i.length;l<u;++l){var c=i[l],h=c.x-t||1e-6,d=(c.y||0)-n||1e-6,p=(c.z||0)-r||1e-6,f=Math.sqrt(h*h+d*d+p*p),m=(s[l]-f)*a[l]*e/f;c.vx+=h*m,o>1&&(c.vy+=d*m),o>2&&(c.vz+=p*m)}}function c(){if(i){var t,n=i.length;for(a=new Array(n),s=new Array(n),t=0;t<n;++t)s[t]=+e(i[t],t,i),a[t]=isNaN(s[t])?0:+l(i[t],t,i)}}return"function"!==typeof e&&(e=ca(+e)),null==t&&(t=0),null==n&&(n=0),null==r&&(r=0),u.initialize=function(e,...t){i=e,o=t.find((e=>[1,2,3].includes(e)))||2,c()},u.strength=function(e){return arguments.length?(l="function"===typeof e?e:ca(+e),c(),u):l},u.radius=function(t){return arguments.length?(e="function"===typeof t?t:ca(+t),c(),u):e},u.x=function(e){return arguments.length?(t=+e,u):t},u.y=function(e){return arguments.length?(n=+e,u):n},u.z=function(e){return arguments.length?(r=+e,u):r},u}Is.copy=function(){var e,t,n=new Ss(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root;if(!r)return n;if(!r.length)return n._root=Cs(r),n;e=[{source:r,target:n._root=new Array(8)}];while(r=e.pop())for(var i=0;i<8;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(8)}):r.target[i]=Cs(t));return n},Is.add=rs,Is.addAll=os,Is.cover=as,Is.data=ss,Is.extent=ls,Is.find=cs,Is.remove=hs,Is.removeAll=ds,Is.root=ps,Is.size=fs,Is.visit=ms,Is.visitAfter=gs,Is.x=vs,Is.y=xs,Is.z=ks;const{abs:Es,cos:Ds,sin:$s,acos:As,atan2:Rs,sqrt:Ms,pow:Fs}=Math;function Ps(e){return e<0?-Fs(-e,1/3):Fs(e,1/3)}const js=Math.PI,Bs=2*js,Ls=js/2,zs=1e-6,Vs=Number.MAX_SAFE_INTEGER||9007199254740991,Us=Number.MIN_SAFE_INTEGER||-9007199254740991,Ws={x:0,y:0,z:0},Hs={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,t){const n=t(e);let r=n.x*n.x+n.y*n.y;return"undefined"!==typeof n.z&&(r+=n.z*n.z),Ms(r)},compute:function(e,t,n){if(0===e)return t[0].t=0,t[0];const r=t.length-1;if(1===e)return t[r].t=1,t[r];const i=1-e;let o=t;if(0===r)return t[0].t=e,t[0];if(1===r){const t={x:i*o[0].x+e*o[1].x,y:i*o[0].y+e*o[1].y,t:e};return n&&(t.z=i*o[0].z+e*o[1].z),t}if(r<4){let t,a,s,l=i*i,u=e*e,c=0;2===r?(o=[o[0],o[1],o[2],Ws],t=l,a=i*e*2,s=u):3===r&&(t=l*i,a=l*e*3,s=i*u*3,c=e*u);const h={x:t*o[0].x+a*o[1].x+s*o[2].x+c*o[3].x,y:t*o[0].y+a*o[1].y+s*o[2].y+c*o[3].y,t:e};return n&&(h.z=t*o[0].z+a*o[1].z+s*o[2].z+c*o[3].z),h}const a=JSON.parse(JSON.stringify(t));while(a.length>1){for(let t=0;t<a.length-1;t++)a[t]={x:a[t].x+(a[t+1].x-a[t].x)*e,y:a[t].y+(a[t+1].y-a[t].y)*e},"undefined"!==typeof a[t].z&&(a[t]=a[t].z+(a[t+1].z-a[t].z)*e);a.splice(a.length-1,1)}return a[0].t=e,a[0]},computeWithRatios:function(e,t,n,r){const i=1-e,o=n,a=t;let s,l=o[0],u=o[1],c=o[2],h=o[3];return l*=i,u*=e,2===a.length?(s=l+u,{x:(l*a[0].x+u*a[1].x)/s,y:(l*a[0].y+u*a[1].y)/s,z:!!r&&(l*a[0].z+u*a[1].z)/s,t:e}):(l*=i,u*=2*i,c*=e*e,3===a.length?(s=l+u+c,{x:(l*a[0].x+u*a[1].x+c*a[2].x)/s,y:(l*a[0].y+u*a[1].y+c*a[2].y)/s,z:!!r&&(l*a[0].z+u*a[1].z+c*a[2].z)/s,t:e}):(l*=i,u*=1.5*i,c*=3*i,h*=e*e*e,4===a.length?(s=l+u+c+h,{x:(l*a[0].x+u*a[1].x+c*a[2].x+h*a[3].x)/s,y:(l*a[0].y+u*a[1].y+c*a[2].y+h*a[3].y)/s,z:!!r&&(l*a[0].z+u*a[1].z+c*a[2].z+h*a[3].z)/s,t:e}):void 0))},derive:function(e,t){const n=[];for(let r=e,i=r.length,o=i-1;i>1;i--,o--){const e=[];for(let n,i=0;i<o;i++)n={x:o*(r[i+1].x-r[i].x),y:o*(r[i+1].y-r[i].y)},t&&(n.z=o*(r[i+1].z-r[i].z)),e.push(n);n.push(e),r=e}return n},between:function(e,t,n){return t<=e&&e<=n||Hs.approximately(e,t)||Hs.approximately(e,n)},approximately:function(e,t,n){return Es(e-t)<=(n||zs)},length:function(e){const t=.5,n=Hs.Tvalues.length;let r=0;for(let i,o=0;o<n;o++)i=t*Hs.Tvalues[o]+t,r+=Hs.Cvalues[o]*Hs.arcfn(i,e);return t*r},map:function(e,t,n,r,i){const o=n-t,a=i-r,s=e-t,l=s/o;return r+a*l},lerp:function(e,t,n){const r={x:t.x+e*(n.x-t.x),y:t.y+e*(n.y-t.y)};return void 0!==t.z&&void 0!==n.z&&(r.z=t.z+e*(n.z-t.z)),r},pointToString:function(e){let t=e.x+"/"+e.y;return"undefined"!==typeof e.z&&(t+="/"+e.z),t},pointsToString:function(e){return"["+e.map(Hs.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,t,n){const r=t.x-e.x,i=t.y-e.y,o=n.x-e.x,a=n.y-e.y,s=r*a-i*o,l=r*o+i*a;return Rs(s,l)},round:function(e,t){const n=""+e,r=n.indexOf(".");return parseFloat(n.substring(0,r+1+t))},dist:function(e,t){const n=e.x-t.x,r=e.y-t.y;return Ms(n*n+r*r)},closest:function(e,t){let n,r,i=Fs(2,63);return e.forEach((function(e,o){r=Hs.dist(t,e),r<i&&(i=r,n=o)})),{mdist:i,mpos:n}},abcratio:function(e,t){if(2!==t&&3!==t)return!1;if("undefined"===typeof e)e=.5;else if(0===e||1===e)return e;const n=Fs(e,t)+Fs(1-e,t),r=n-1;return Es(r/n)},projectionratio:function(e,t){if(2!==t&&3!==t)return!1;if("undefined"===typeof e)e=.5;else if(0===e||1===e)return e;const n=Fs(1-e,t),r=Fs(e,t)+n;return n/r},lli8:function(e,t,n,r,i,o,a,s){const l=(e*r-t*n)*(i-a)-(e-n)*(i*s-o*a),u=(e*r-t*n)*(o-s)-(t-r)*(i*s-o*a),c=(e-n)*(o-s)-(t-r)*(i-a);return 0!=c&&{x:l/c,y:u/c}},lli4:function(e,t,n,r){const i=e.x,o=e.y,a=t.x,s=t.y,l=n.x,u=n.y,c=r.x,h=r.y;return Hs.lli8(i,o,a,s,l,u,c,h)},lli:function(e,t){return Hs.lli4(e,e.c,t,t.c)},makeline:function(e,t){return new tl(e.x,e.y,(e.x+t.x)/2,(e.y+t.y)/2,t.x,t.y)},findbbox:function(e){let t=Vs,n=Vs,r=Us,i=Us;return e.forEach((function(e){const o=e.bbox();t>o.x.min&&(t=o.x.min),n>o.y.min&&(n=o.y.min),r<o.x.max&&(r=o.x.max),i<o.y.max&&(i=o.y.max)})),{x:{min:t,mid:(t+r)/2,max:r,size:r-t},y:{min:n,mid:(n+i)/2,max:i,size:i-n}}},shapeintersections:function(e,t,n,r,i){if(!Hs.bboxoverlap(t,r))return[];const o=[],a=[e.startcap,e.forward,e.back,e.endcap],s=[n.startcap,n.forward,n.back,n.endcap];return a.forEach((function(t){t.virtual||s.forEach((function(r){if(r.virtual)return;const a=t.intersects(r,i);a.length>0&&(a.c1=t,a.c2=r,a.s1=e,a.s2=n,o.push(a))}))})),o},makeshape:function(e,t,n){const r=t.points.length,i=e.points.length,o=Hs.makeline(t.points[r-1],e.points[0]),a=Hs.makeline(e.points[i-1],t.points[0]),s={startcap:o,forward:e,back:t,endcap:a,bbox:Hs.findbbox([o,e,t,a]),intersections:function(e){return Hs.shapeintersections(s,s.bbox,e,e.bbox,n)}};return s},getminmax:function(e,t,n){if(!n)return{min:0,max:0};let r,i,o=Vs,a=Us;-1===n.indexOf(0)&&(n=[0].concat(n)),-1===n.indexOf(1)&&n.push(1);for(let s=0,l=n.length;s<l;s++)r=n[s],i=e.get(r),i[t]<o&&(o=i[t]),i[t]>a&&(a=i[t]);return{min:o,mid:(o+a)/2,max:a,size:a-o}},align:function(e,t){const n=t.p1.x,r=t.p1.y,i=-Rs(t.p2.y-r,t.p2.x-n),o=function(e){return{x:(e.x-n)*Ds(i)-(e.y-r)*$s(i),y:(e.x-n)*$s(i)+(e.y-r)*Ds(i)}};return e.map(o)},roots:function(e,t){t=t||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=e.length-1,r=Hs.align(e,t),i=function(e){return 0<=e&&e<=1};if(2===n){const e=r[0].y,t=r[1].y,n=r[2].y,o=e-2*t+n;if(0!==o){const r=-Ms(t*t-e*n),a=-e+t,s=-(r+a)/o,l=-(-r+a)/o;return[s,l].filter(i)}return t!==n&&0===o?[(2*t-n)/(2*t-2*n)].filter(i):[]}const o=r[0].y,a=r[1].y,s=r[2].y,l=r[3].y;let u=3*a-o-3*s+l,c=3*o-6*a+3*s,h=-3*o+3*a,d=o;if(Hs.approximately(u,0)){if(Hs.approximately(c,0))return Hs.approximately(h,0)?[]:[-d/h].filter(i);const e=Ms(h*h-4*c*d),t=2*c;return[(e-h)/t,(-h-e)/t].filter(i)}c/=u,h/=u,d/=u;const p=(3*h-c*c)/3,f=p/3,m=(2*c*c*c-9*c*h+27*d)/27,g=m/2,b=g*g+f*f*f;let v,y,x,w,k;if(b<0){const e=-p/3,t=e*e*e,n=Ms(t),r=-m/(2*n),o=r<-1?-1:r>1?1:r,a=As(o),s=Ps(n),l=2*s;return x=l*Ds(a/3)-c/3,w=l*Ds((a+Bs)/3)-c/3,k=l*Ds((a+2*Bs)/3)-c/3,[x,w,k].filter(i)}if(0===b)return v=g<0?Ps(-g):-Ps(g),x=2*v-c/3,w=-v-c/3,[x,w].filter(i);{const e=Ms(b);return v=Ps(-g+e),y=Ps(g+e),[v-y-c/3].filter(i)}},droots:function(e){if(3===e.length){const t=e[0],n=e[1],r=e[2],i=t-2*n+r;if(0!==i){const e=-Ms(n*n-t*r),o=-t+n,a=-(e+o)/i,s=-(-e+o)/i;return[a,s]}return n!==r&&0===i?[(2*n-r)/(2*(n-r))]:[]}if(2===e.length){const t=e[0],n=e[1];return t!==n?[t/(t-n)]:[]}return[]},curvature:function(e,t,n,r,i){let o,a,s,l,u=0,c=0;const h=Hs.compute(e,t),d=Hs.compute(e,n),p=h.x*h.x+h.y*h.y;if(r?(o=Ms(Fs(h.y*d.z-d.y*h.z,2)+Fs(h.z*d.x-d.z*h.x,2)+Fs(h.x*d.y-d.x*h.y,2)),a=Fs(p+h.z*h.z,1.5)):(o=h.x*d.y-h.y*d.x,a=Fs(p,1.5)),0===o||0===a)return{k:0,r:0};if(u=o/a,c=a/o,!i){const i=Hs.curvature(e-.001,t,n,r,!0).k,o=Hs.curvature(e+.001,t,n,r,!0).k;l=(o-u+(u-i))/2,s=(Es(o-u)+Es(u-i))/2}return{k:u,r:c,dk:l,adk:s}},inflections:function(e){if(e.length<4)return[];const t=Hs.align(e,{p1:e[0],p2:e.slice(-1)[0]}),n=t[2].x*t[1].y,r=t[3].x*t[1].y,i=t[1].x*t[2].y,o=t[3].x*t[2].y,a=18*(-3*n+2*r+3*i-o),s=18*(3*n-r-3*i),l=18*(i-n);if(Hs.approximately(a,0)){if(!Hs.approximately(s,0)){let e=-l/s;if(0<=e&&e<=1)return[e]}return[]}const u=2*a;if(Hs.approximately(u,0))return[];const c=s*s-4*a*l;if(c<0)return[];const h=Math.sqrt(c);return[(h-s)/u,-(s+h)/u].filter((function(e){return 0<=e&&e<=1}))},bboxoverlap:function(e,t){const n=["x","y"],r=n.length;for(let i,o,a,s,l=0;l<r;l++)if(i=n[l],o=e[i].mid,a=t[i].mid,s=(e[i].size+t[i].size)/2,Es(o-a)>=s)return!1;return!0},expandbox:function(e,t){t.x.min<e.x.min&&(e.x.min=t.x.min),t.y.min<e.y.min&&(e.y.min=t.y.min),t.z&&t.z.min<e.z.min&&(e.z.min=t.z.min),t.x.max>e.x.max&&(e.x.max=t.x.max),t.y.max>e.y.max&&(e.y.max=t.y.max),t.z&&t.z.max>e.z.max&&(e.z.max=t.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,t,n){const r=e.bbox(),i=t.bbox(),o=1e5,a=n||.5;if(r.x.size+r.y.size<a&&i.x.size+i.y.size<a)return[(o*(e._t1+e._t2)/2|0)/o+"/"+(o*(t._t1+t._t2)/2|0)/o];let s=e.split(.5),l=t.split(.5),u=[{left:s.left,right:l.left},{left:s.left,right:l.right},{left:s.right,right:l.right},{left:s.right,right:l.left}];u=u.filter((function(e){return Hs.bboxoverlap(e.left.bbox(),e.right.bbox())}));let c=[];return 0===u.length||(u.forEach((function(e){c=c.concat(Hs.pairiteration(e.left,e.right,a))})),c=c.filter((function(e,t){return c.indexOf(e)===t}))),c},getccenter:function(e,t,n){const r=t.x-e.x,i=t.y-e.y,o=n.x-t.x,a=n.y-t.y,s=r*Ds(Ls)-i*$s(Ls),l=r*$s(Ls)+i*Ds(Ls),u=o*Ds(Ls)-a*$s(Ls),c=o*$s(Ls)+a*Ds(Ls),h=(e.x+t.x)/2,d=(e.y+t.y)/2,p=(t.x+n.x)/2,f=(t.y+n.y)/2,m=h+s,g=d+l,b=p+u,v=f+c,y=Hs.lli8(h,d,m,g,p,f,b,v),x=Hs.dist(y,e);let w,k=Rs(e.y-y.y,e.x-y.x),_=Rs(t.y-y.y,t.x-y.x),S=Rs(n.y-y.y,n.x-y.x);return k<S?((k>_||_>S)&&(k+=Bs),k>S&&(w=S,S=k,k=w)):S<_&&_<k?(w=S,S=k,k=w):S+=Bs,y.s=k,y.e=S,y.r=x,y},numberSort:function(e,t){return e-t}};class Gs{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map((function(e){return Hs.pointsToString(e.points)})).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map((function(e){return e.length()})).reduce((function(e,t){return e+t}))}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var t=e[0].bbox(),n=1;n<e.length;n++)Hs.expandbox(t,e[n].bbox());return t}offset(e){const t=[];return this.curves.forEach((function(n){t.push(...n.offset(e))})),new Gs(t)}}const{abs:qs,min:Ys,max:Xs,cos:Ks,sin:Js,acos:Zs,sqrt:Qs}=Math,el=Math.PI;class tl{constructor(e){let t=e&&e.forEach?e:Array.from(arguments).slice(),n=!1;if("object"===typeof t[0]){n=t.length;const e=[];t.forEach((function(t){["x","y","z"].forEach((function(n){"undefined"!==typeof t[n]&&e.push(t[n])}))})),t=e}let r=!1;const i=t.length;if(n){if(n>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");r=!0}}else if(6!==i&&8!==i&&9!==i&&12!==i&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!r&&(9===i||12===i)||e&&e[0]&&"undefined"!==typeof e[0].z,a=this.points=[];for(let d=0,p=o?3:2;d<i;d+=p){var s={x:t[d],y:t[d+1]};o&&(s.z=t[d+2]),a.push(s)}const l=this.order=a.length-1,u=this.dims=["x","y"];o&&u.push("z"),this.dimlen=u.length;const c=Hs.align(a,{p1:a[0],p2:a[l]}),h=Hs.dist(a[0],a[l]);this._linear=c.reduce(((e,t)=>e+qs(t.y)),0)<h/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,t,n,r){if("undefined"===typeof r&&(r=.5),0===r)return new tl(t,t,n);if(1===r)return new tl(e,t,t);const i=tl.getABC(2,e,t,n,r);return new tl(e,i.A,n)}static cubicFromPoints(e,t,n,r,i){"undefined"===typeof r&&(r=.5);const o=tl.getABC(3,e,t,n,r);"undefined"===typeof i&&(i=Hs.dist(t,o.C));const a=i*(1-r)/r,s=Hs.dist(e,n),l=(n.x-e.x)/s,u=(n.y-e.y)/s,c=i*l,h=i*u,d=a*l,p=a*u,f={x:t.x-c,y:t.y-h},m={x:t.x+d,y:t.y+p},g=o.A,b={x:g.x+(f.x-g.x)/(1-r),y:g.y+(f.y-g.y)/(1-r)},v={x:g.x+(m.x-g.x)/r,y:g.y+(m.y-g.y)/r},y={x:e.x+(b.x-e.x)/r,y:e.y+(b.y-e.y)/r},x={x:n.x+(v.x-n.x)/(1-r),y:n.y+(v.y-n.y)/(1-r)};return new tl(e,y,x,n)}static getUtils(){return Hs}getUtils(){return tl.getUtils()}static get PolyBezier(){return Gs}valueOf(){return this.toString()}toString(){return Hs.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,t=e[0].x,n=e[0].y,r=["M",t,n,2===this.order?"Q":"C"];for(let i=1,o=e.length;i<o;i++)r.push(e[i].x),r.push(e[i].y);return r.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map((function(e,t){return""+t+e.x+e.y+(e.z?e.z:0)})).join("")}update(){this._lut=[],this.dpoints=Hs.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,t=Hs.angle(e[0],e[this.order],e[1]);this.clockwise=t>0}length(){return Hs.length(this.derivative.bind(this))}static getABC(e=2,t,n,r,i=.5){const o=Hs.projectionratio(i,e),a=1-o,s={x:o*t.x+a*r.x,y:o*t.y+a*r.y},l=Hs.abcratio(i,e),u={x:n.x+(n.x-s.x)/l,y:n.y+(n.y-s.y)/l};return{A:u,B:n,C:s,S:t,E:r}}getABC(e,t){t=t||this.get(e);let n=this.points[0],r=this.points[this.order];return tl.getABC(this.order,n,t,r,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e)return this._lut;this._lut=[],e++,this._lut=[];for(let t,n,r=0;r<e;r++)n=r/(e-1),t=this.compute(n),t.t=n,this._lut.push(t);return this._lut}on(e,n){n=n||5;const r=this.getLUT(),i=[];for(let t,o=0,a=0;o<r.length;o++)t=r[o],Hs.dist(t,e)<n&&(i.push(t),a+=o/r.length);return!!i.length&&(t/=i.length)}project(e){const t=this.getLUT(),n=t.length-1,r=Hs.closest(t,e),i=r.mpos,o=(i-1)/n,a=(i+1)/n,s=.1/n;let l,u,c=r.mdist,h=o,d=h;for(c+=1;h<a+s;h+=s)l=this.compute(h),u=Hs.dist(e,l),u<c&&(c=u,d=h);return d=d<0?0:d>1?1:d,l=this.compute(d),l.t=d,l.d=c,l}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?Hs.computeWithRatios(e,this.points,this.ratios,this._3d):Hs.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,t=[e[0]],n=e.length;for(let r,i,o=1;o<n;o++)r=e[o],i=e[o-1],t[o]={x:(n-o)/n*r.x+o/n*i.x,y:(n-o)/n*r.y+o/n*i.y};return t[n]=e[n-1],new tl(t)}derivative(e){return Hs.compute(e,this.dpoints[0],this._3d)}dderivative(e){return Hs.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new tl(Hs.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return Hs.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return Hs.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const t=this.derivative(e),n=Qs(t.x*t.x+t.y*t.y);return{t:e,x:-t.y/n,y:t.x/n}}__normal3(e){const t=this.derivative(e),n=this.derivative(e+.01),r=Qs(t.x*t.x+t.y*t.y+t.z*t.z),i=Qs(n.x*n.x+n.y*n.y+n.z*n.z);t.x/=r,t.y/=r,t.z/=r,n.x/=i,n.y/=i,n.z/=i;const o={x:n.y*t.z-n.z*t.y,y:n.z*t.x-n.x*t.z,z:n.x*t.y-n.y*t.x},a=Qs(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=a,o.y/=a,o.z/=a;const s=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z],l={t:e,x:s[0]*t.x+s[1]*t.y+s[2]*t.z,y:s[3]*t.x+s[4]*t.y+s[5]*t.z,z:s[6]*t.x+s[7]*t.y+s[8]*t.z};return l}hull(e){let t=this.points,n=[],r=[],i=0;r[i++]=t[0],r[i++]=t[1],r[i++]=t[2],3===this.order&&(r[i++]=t[3]);while(t.length>1){n=[];for(let o,a=0,s=t.length-1;a<s;a++)o=Hs.lerp(e,t[a],t[a+1]),r[i++]=o,n.push(o);t=n}return r}split(e,t){if(0===e&&t)return this.split(t).left;if(1===t)return this.split(e).right;const n=this.hull(e),r={left:2===this.order?new tl([n[0],n[3],n[5]]):new tl([n[0],n[4],n[7],n[9]]),right:2===this.order?new tl([n[5],n[4],n[2]]):new tl([n[9],n[8],n[6],n[3]]),span:n};return r.left._t1=Hs.map(0,0,1,this._t1,this._t2),r.left._t2=Hs.map(e,0,1,this._t1,this._t2),r.right._t1=Hs.map(e,0,1,this._t1,this._t2),r.right._t2=Hs.map(1,0,1,this._t1,this._t2),t?(t=Hs.map(t,e,1,0,1),r.right.split(t).left):r}extrema(){const e={};let t=[];return this.dims.forEach(function(n){let r=function(e){return e[n]},i=this.dpoints[0].map(r);e[n]=Hs.droots(i),3===this.order&&(i=this.dpoints[1].map(r),e[n]=e[n].concat(Hs.droots(i))),e[n]=e[n].filter((function(e){return e>=0&&e<=1})),t=t.concat(e[n].sort(Hs.numberSort))}.bind(this)),e.values=t.sort(Hs.numberSort).filter((function(e,n){return t.indexOf(e)===n})),e}bbox(){const e=this.extrema(),t={};return this.dims.forEach(function(n){t[n]=Hs.getminmax(this,n,e[n])}.bind(this)),t}overlaps(e){const t=this.bbox(),n=e.bbox();return Hs.bboxoverlap(t,n)}offset(e,t){if("undefined"!==typeof t){const n=this.get(e),r=this.normal(e),i={c:n,n:r,x:n.x+r.x*t,y:n.y+r.y*t};return this._3d&&(i.z=n.z+r.z*t),i}if(this._linear){const t=this.normal(0),n=this.points.map((function(n){const r={x:n.x+e*t.x,y:n.y+e*t.y};return n.z&&t.z&&(r.z=n.z+e*t.z),r}));return[new tl(n)]}return this.reduce().map((function(t){return t._linear?t.offset(e)[0]:t.scale(e)}))}simple(){if(3===this.order){const e=Hs.angle(this.points[0],this.points[3],this.points[1]),t=Hs.angle(this.points[0],this.points[3],this.points[2]);if(e>0&&t<0||e<0&&t>0)return!1}const e=this.normal(0),t=this.normal(1);let n=e.x*t.x+e.y*t.y;return this._3d&&(n+=e.z*t.z),qs(Zs(n))<el/3}reduce(){let e,t,n=0,r=0,i=.01,o=[],a=[],s=this.extrema().values;for(-1===s.indexOf(0)&&(s=[0].concat(s)),-1===s.indexOf(1)&&s.push(1),n=s[0],e=1;e<s.length;e++)r=s[e],t=this.split(n,r),t._t1=n,t._t2=r,o.push(t),n=r;return o.forEach((function(e){n=0,r=0;while(r<=1)for(r=n+i;r<=1+i;r+=i)if(t=e.split(n,r),!t.simple()){if(r-=i,qs(n-r)<i)return[];t=e.split(n,r),t._t1=Hs.map(n,0,1,e._t1,e._t2),t._t2=Hs.map(r,0,1,e._t1,e._t2),a.push(t),n=r;break}n<1&&(t=e.split(n,1),t._t1=Hs.map(n,0,1,e._t1,e._t2),t._t2=e._t2,a.push(t))})),a}translate(e,t,n){n="number"===typeof n?n:t;const r=this.order;let i=this.points.map(((e,i)=>(1-i/r)*t+i/r*n));return new tl(this.points.map(((t,n)=>({x:t.x+e.x*i[n],y:t.y+e.y*i[n]}))))}scale(e){const t=this.order;let n=!1;if("function"===typeof e&&(n=e),n&&2===t)return this.raise().scale(n);const r=this.clockwise,i=this.points;if(this._linear)return this.translate(this.normal(0),n?n(0):e,n?n(1):e);const o=n?n(0):e,a=n?n(1):e,s=[this.offset(0,10),this.offset(1,10)],l=[],u=Hs.lli4(s[0],s[0].c,s[1],s[1].c);if(!u)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach((function(e){const n=l[e*t]=Hs.copy(i[e*t]);n.x+=(e?a:o)*s[e].n.x,n.y+=(e?a:o)*s[e].n.y})),n?([0,1].forEach((function(o){if(2!==t||!o){var a=i[o+1],s={x:a.x-u.x,y:a.y-u.y},c=n?n((o+1)/t):e;n&&!r&&(c=-c);var h=Qs(s.x*s.x+s.y*s.y);s.x/=h,s.y/=h,l[o+1]={x:a.x+c*s.x,y:a.y+c*s.y}}})),new tl(l)):([0,1].forEach((e=>{if(2===t&&e)return;const n=l[e*t],r=this.derivative(e),o={x:n.x+r.x,y:n.y+r.y};l[e+1]=Hs.lli4(n,o,u,i[e+1])})),new tl(l))}outline(e,t,n,r){if(t=void 0===t?e:t,this._linear){const i=this.normal(0),o=this.points[0],a=this.points[this.points.length-1];let s,l,u;void 0===n&&(n=e,r=t),s={x:o.x+i.x*e,y:o.y+i.y*e},u={x:a.x+i.x*n,y:a.y+i.y*n},l={x:(s.x+u.x)/2,y:(s.y+u.y)/2};const c=[s,l,u];s={x:o.x-i.x*t,y:o.y-i.y*t},u={x:a.x-i.x*r,y:a.y-i.y*r},l={x:(s.x+u.x)/2,y:(s.y+u.y)/2};const h=[u,l,s],d=Hs.makeline(h[2],c[0]),p=Hs.makeline(c[2],h[0]),f=[d,new tl(c),p,new tl(h)];return new Gs(f)}const i=this.reduce(),o=i.length,a=[];let s,l=[],u=0,c=this.length();const h="undefined"!==typeof n&&"undefined"!==typeof r;function d(e,t,n,r,i){return function(o){const a=r/n,s=(r+i)/n,l=t-e;return Hs.map(o,0,1,e+a*l,e+s*l)}}i.forEach((function(i){const o=i.length();h?(a.push(i.scale(d(e,n,c,u,o))),l.push(i.scale(d(-t,-r,c,u,o)))):(a.push(i.scale(e)),l.push(i.scale(-t))),u+=o})),l=l.map((function(e){return s=e.points,s[3]?e.points=[s[3],s[2],s[1],s[0]]:e.points=[s[2],s[1],s[0]],e})).reverse();const p=a[0].points[0],f=a[o-1].points[a[o-1].points.length-1],m=l[o-1].points[l[o-1].points.length-1],g=l[0].points[0],b=Hs.makeline(m,p),v=Hs.makeline(f,g),y=[b].concat(a).concat([v]).concat(l);return new Gs(y)}outlineshapes(e,t,n){t=t||e;const r=this.outline(e,t).curves,i=[];for(let o=1,a=r.length;o<a/2;o++){const e=Hs.makeshape(r[o],r[a-o],n);e.startcap.virtual=o>1,e.endcap.virtual=o<a/2-1,i.push(e)}return i}intersects(e,t){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof tl&&(e=e.reduce()),this.curveintersects(this.reduce(),e,t)):this.selfintersects(t)}lineIntersects(e){const t=Ys(e.p1.x,e.p2.x),n=Ys(e.p1.y,e.p2.y),r=Xs(e.p1.x,e.p2.x),i=Xs(e.p1.y,e.p2.y);return Hs.roots(this.points,e).filter((e=>{var o=this.get(e);return Hs.between(o.x,t,r)&&Hs.between(o.y,n,i)}))}selfintersects(e){const t=this.reduce(),n=t.length-2,r=[];for(let i,o,a,s=0;s<n;s++)o=t.slice(s,s+1),a=t.slice(s+2),i=this.curveintersects(o,a,e),r.push(...i);return r}curveintersects(e,t,n){const r=[];e.forEach((function(e){t.forEach((function(t){e.overlaps(t)&&r.push({left:e,right:t})}))}));let i=[];return r.forEach((function(e){const t=Hs.pairiteration(e.left,e.right,n);t.length>0&&(i=i.concat(t))})),i}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,t,n,r){const i=(r-n)/4,o=this.get(n+i),a=this.get(r-i),s=Hs.dist(e,t),l=Hs.dist(e,o),u=Hs.dist(e,a);return qs(l-s)+qs(u-s)}_iterate(e,t){let n,r=0,i=1;do{n=0,i=1;let o,a,s,l,u,c=this.get(r),h=!1,d=!1,p=i,f=1,m=0;do{d=h,l=s,p=(r+i)/2,m++,o=this.get(p),a=this.get(i),s=Hs.getccenter(c,o,a),s.interval={start:r,end:i};let t=this._error(s,c,r,i);if(h=t<=e,u=d&&!h,u||(f=i),h){if(i>=1){if(s.interval.end=f=1,l=s,i>1){let e={x:s.x+s.r*Ks(s.e),y:s.y+s.r*Js(s.e)};s.e+=Hs.angle({x:s.x,y:s.y},e,this.get(1))}break}i+=(i-r)/2}else i=p}while(!u&&n++<100);if(n>=100)break;l=l||s,t.push(l),r=f}while(i<1);return t}}function nl(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function rl(e,t){if(null==e)return{};var n,r,i=nl(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function il(e,t){return sl(e)||ul(e,t)||cl(e,t)||pl()}function ol(e){return al(e)||ll(e)||cl(e)||dl()}function al(e){if(Array.isArray(e))return hl(e)}function sl(e){if(Array.isArray(e))return e}function ll(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ul(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(l){s=!0,i=l}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function cl(e,t){if(e){if("string"===typeof e)return hl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hl(e,t):void 0}}function hl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dl(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fl(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function ml(e){var t=fl(e,"string");return"symbol"===typeof t?t:String(t)}var gl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(t instanceof Array?t.length?t:[void 0]:[t]).map((function(e){return{keyAccessor:e,isProp:!(e instanceof Function)}})),o=e.reduce((function(e,t){var r=e,o=t;return i.forEach((function(e,t){var a,s=e.keyAccessor,l=e.isProp;if(l){var u=o,c=u[s],h=rl(u,[s].map(ml));a=c,o=h}else a=s(o,t);t+1<i.length?(r.hasOwnProperty(a)||(r[a]={}),r=r[a]):n?(r.hasOwnProperty(a)||(r[a]=[]),r[a].push(o)):r[a]=o})),e}),{});n instanceof Function&&function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r===i.length?Object.keys(t).forEach((function(e){return t[e]=n(t[e])})):Object.values(t).forEach((function(t){return e(t,r+1)}))}(o);var a=o;return r&&(a=[],function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.length===i.length?a.push({keys:n,vals:t}):Object.entries(t).forEach((function(t){var r=il(t,2),i=r[0],o=r[1];return e(o,[].concat(ol(n),[i]))}))}(o),t instanceof Array&&0===t.length&&1===a.length&&(a[0].keys=[])),a},bl=gl;class vl extends Map{constructor(e,t=kl){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(yl(this,e))}has(e){return super.has(yl(this,e))}set(e,t){return super.set(xl(this,e),t)}delete(e){return super.delete(wl(this,e))}}Set;function yl({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function xl({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function wl({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function kl(e){return null!==e&&"object"===typeof e?e.valueOf():e}function _l(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Sl=Symbol("implicit");function Cl(){var e=new vl,t=[],n=[],r=Sl;function i(i){let o=e.get(i);if(void 0===o){if(r!==Sl)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new vl;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return Cl(t,n).unknown(r)},_l.apply(i,arguments),i}function Il(e){var t=e.length/6|0,n=new Array(t),r=0;while(r<t)n[r]="#"+e.slice(6*r,6*++r);return n}var Ol=Il("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function Tl(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var Nl=".force-graph-container canvas {\n  display: block;\n  user-select: none;\n  outline: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.force-graph-container .graph-tooltip {\n  position: absolute;\n  top: 0;\n  transform: translate(-50%, 25px);\n  font-family: sans-serif;\n  font-size: 16px;\n  padding: 4px;\n  border-radius: 3px;\n  color: #eee;\n  background: rgba(0,0,0,0.65);\n  visibility: hidden; /* by default */\n}\n\n.force-graph-container .clickable {\n  cursor: pointer;\n}\n\n.force-graph-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.force-graph-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n";function El(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?El(Object(n),!0).forEach((function(t){Al(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):El(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $l(e){return $l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$l(e)}function Al(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rl(e,t){return Rl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rl(e,t)}function Ml(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Fl(e,t,n){return Fl=Ml()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=Function.bind.apply(e,r),o=new i;return n&&Rl(o,n.prototype),o},Fl.apply(null,arguments)}function Pl(e,t){return Ll(e)||Vl(e,t)||Ul(e,t)||Gl()}function jl(e){return Bl(e)||zl(e)||Ul(e)||Hl()}function Bl(e){if(Array.isArray(e))return Wl(e)}function Ll(e){if(Array.isArray(e))return e}function zl(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Vl(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(l){s=!0,i=l}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function Ul(e,t){if(e){if("string"===typeof e)return Wl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wl(e,t):void 0}}function Wl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hl(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gl(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Tl(Nl);var ql=Cl(Ol);function Yl(e,t,n){t&&"string"===typeof n&&e.filter((function(e){return!e[n]})).forEach((function(e){e[n]=ql(t(e))}))}function Xl(e,t){var n=e.nodes,r=e.links,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.nodeFilter,a=void 0===o?function(){return!0}:o,s=i.onLoopError,l=void 0===s?function(e){throw"Invalid DAG structure! Found cycle in node path: ".concat(e.join(" -> "),".")}:s,u={};n.forEach((function(e){return u[t(e)]={data:e,out:[],depth:-1,skip:!a(e)}})),r.forEach((function(e){var n=e.source,r=e.target,i=l(n),o=l(r);if(!u.hasOwnProperty(i))throw"Missing source node with id: ".concat(i);if(!u.hasOwnProperty(o))throw"Missing target node with id: ".concat(o);var a=u[i],s=u[o];function l(e){return"object"===$l(e)?t(e):e}a.out.push(s)}));var c=[];d(Object.values(u));var h=Object.assign.apply(Object,[{}].concat(jl(Object.entries(u).filter((function(e){var t=Pl(e,2),n=t[1];return!n.skip})).map((function(e){var t=Pl(e,2),n=t[0],r=t[1];return Al({},n,r.depth)})))));return h;function d(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=0,o=e.length;i<o;i++){var a=e[i];if(-1!==n.indexOf(a)){var s=function(){var e=[].concat(jl(n.slice(n.indexOf(a))),[a]).map((function(e){return t(e.data)}));return c.some((function(t){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))}))||(c.push(e),l(e)),"continue"}();if("continue"===s)continue}r>a.depth&&(a.depth=r,d(a.out,[].concat(jl(n),[a]),r+(a.skip?0:1)))}}}var Kl=2,Jl=function(e,t){return t.onNeedsRedraw&&t.onNeedsRedraw()},Zl=Do({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,t){t.engineRunning=!1}},dagMode:{onChange:function(e,t){!e&&(t.graphData.nodes||[]).forEach((function(e){return e.fx=e.fy=void 0}))}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:Jl},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:Jl},nodeColor:{default:"color",triggerUpdate:!1,onChange:Jl},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:Jl},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Jl},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:Jl},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:Jl},linkColor:{default:"color",triggerUpdate:!1,onChange:Jl},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:Jl},linkWidth:{default:1,triggerUpdate:!1,onChange:Jl},linkCurvature:{default:0,triggerUpdate:!1,onChange:Jl},linkCanvasObject:{triggerUpdate:!1,onChange:Jl},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Jl},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:Jl},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:Jl},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:Jl},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,t){t.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,t){t.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,t){t.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,t,n){return void 0===n?e.forceLayout.force(t):(e.forceLayout.force(t,n),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&t(),r(),!e.isShadow&&i(),!e.isShadow&&o(),n(),this;function t(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function n(){var t=Ao(e.nodeVisibility),n=Ao(e.nodeVal),r=Ao(e.nodeColor),i=Ao(e.nodeCanvasObjectMode),o=e.ctx,a=e.isShadow/e.globalScale,s=e.graphData.nodes.filter(t);o.save(),s.forEach((function(t){var s=i(t);if(!e.nodeCanvasObject||"before"!==s&&"replace"!==s||(e.nodeCanvasObject(t,o,e.globalScale),"replace"!==s)){var l=Math.sqrt(Math.max(0,n(t)||1))*e.nodeRelSize+a;o.beginPath(),o.arc(t.x,t.y,l,0,2*Math.PI,!1),o.fillStyle=r(t)||"rgba(31, 120, 180, 0.92)",o.fill(),e.nodeCanvasObject&&"after"===s&&e.nodeCanvasObject(t,e.ctx,e.globalScale)}else o.restore()})),o.restore()}function r(){var t=Ao(e.linkVisibility),n=Ao(e.linkColor),r=Ao(e.linkWidth),i=Ao(e.linkLineDash),o=Ao(e.linkCurvature),a=Ao(e.linkCanvasObjectMode),s=e.ctx,l=2*e.isShadow,u=e.graphData.links.filter(t);u.forEach(g);var c=[],h=[],d=u;if(e.linkCanvasObject){var p=[],f=[];u.forEach((function(e){return({before:c,after:h,replace:p}[a(e)]||f).push(e)})),d=[].concat(jl(c),h,f),c=c.concat(p)}s.save(),c.forEach((function(t){return e.linkCanvasObject(t,s,e.globalScale)})),s.restore();var m=bl(d,[n,r,i]);function g(e){var t=o(e);if(t){var n=e.source,r=e.target;if(n&&r&&n.hasOwnProperty("x")&&r.hasOwnProperty("x")){var i=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2));if(i>0){var a=Math.atan2(r.y-n.y,r.x-n.x),s=i*t,l={x:(n.x+r.x)/2+s*Math.cos(a-Math.PI/2),y:(n.y+r.y)/2+s*Math.sin(a-Math.PI/2)};e.__controlPoints=[l.x,l.y]}else{var u=70*t;e.__controlPoints=[r.x,r.y-u,r.x+u,r.y]}}}else e.__controlPoints=null}s.save(),Object.entries(m).forEach((function(t){var n=Pl(t,2),r=n[0],o=n[1],a=r&&"undefined"!==r?r:"rgba(0,0,0,0.15)";Object.entries(o).forEach((function(t){var n=Pl(t,2),r=n[0],o=n[1],u=(r||1)/e.globalScale+l;Object.entries(o).forEach((function(e){var t=Pl(e,2);t[0];var n=t[1],r=i(n[0]);s.beginPath(),n.forEach((function(e){var t=e.source,n=e.target;if(t&&n&&t.hasOwnProperty("x")&&n.hasOwnProperty("x")){s.moveTo(t.x,t.y);var r=e.__controlPoints;r?s[2===r.length?"quadraticCurveTo":"bezierCurveTo"].apply(s,jl(r).concat([n.x,n.y])):s.lineTo(n.x,n.y)}})),s.strokeStyle=a,s.lineWidth=u,s.setLineDash(r||[]),s.stroke()}))}))})),s.restore(),s.save(),h.forEach((function(t){return e.linkCanvasObject(t,s,e.globalScale)})),s.restore()}function i(){var t=1.6,n=.2,r=Ao(e.linkDirectionalArrowLength),i=Ao(e.linkDirectionalArrowRelPos),o=Ao(e.linkVisibility),a=Ao(e.linkDirectionalArrowColor||e.linkColor),s=Ao(e.nodeVal),l=e.ctx;l.save(),e.graphData.links.filter(o).forEach((function(o){var u=r(o);if(u&&!(u<0)){var c=o.source,h=o.target;if(c&&h&&c.hasOwnProperty("x")&&h.hasOwnProperty("x")){var d=Math.sqrt(Math.max(0,s(c)||1))*e.nodeRelSize,p=Math.sqrt(Math.max(0,s(h)||1))*e.nodeRelSize,f=Math.min(1,Math.max(0,i(o))),m=a(o)||"rgba(0,0,0,0.28)",g=u/t/2,b=o.__controlPoints&&Fl(tl,[c.x,c.y].concat(jl(o.__controlPoints),[h.x,h.y])),v=b?function(e){return b.get(e)}:function(e){return{x:c.x+(h.x-c.x)*e||0,y:c.y+(h.y-c.y)*e||0}},y=b?b.length():Math.sqrt(Math.pow(h.x-c.x,2)+Math.pow(h.y-c.y,2)),x=d+u+(y-d-p-u)*f,w=v(x/y),k=v((x-u)/y),_=v((x-u*(1-n))/y),S=Math.atan2(w.y-k.y,w.x-k.x)-Math.PI/2;l.beginPath(),l.moveTo(w.x,w.y),l.lineTo(k.x+g*Math.cos(S),k.y+g*Math.sin(S)),l.lineTo(_.x,_.y),l.lineTo(k.x-g*Math.cos(S),k.y-g*Math.sin(S)),l.fillStyle=m,l.fill()}}})),l.restore()}function o(){var t=Ao(e.linkDirectionalParticles),n=Ao(e.linkDirectionalParticleSpeed),r=Ao(e.linkDirectionalParticleWidth),i=Ao(e.linkVisibility),o=Ao(e.linkDirectionalParticleColor||e.linkColor),a=e.ctx;a.save(),e.graphData.links.filter(i).forEach((function(i){var s=t(i);if(i.hasOwnProperty("__photons")&&i.__photons.length){var l=i.source,u=i.target;if(l&&u&&l.hasOwnProperty("x")&&u.hasOwnProperty("x")){var c=n(i),h=i.__photons||[],d=Math.max(0,r(i)/2)/Math.sqrt(e.globalScale),p=o(i)||"rgba(0,0,0,0.28)";a.fillStyle=p;var f=i.__controlPoints?Fl(tl,[l.x,l.y].concat(jl(i.__controlPoints),[u.x,u.y])):null,m=0,g=!1;h.forEach((function(e){var t=!!e.__singleHop;if(e.hasOwnProperty("__progressRatio")||(e.__progressRatio=t?0:m/s),!t&&m++,e.__progressRatio+=c,e.__progressRatio>=1){if(t)return void(g=!0);e.__progressRatio=e.__progressRatio%1}var n=e.__progressRatio,r=f?f.get(n):{x:l.x+(u.x-l.x)*n||0,y:l.y+(u.y-l.y)*n||0};a.beginPath(),a.arc(r.x,r.y,d,0,2*Math.PI,!1),a.fill()})),g&&(i.__photons=i.__photons.filter((function(e){return!e.__singleHop||e.__progressRatio<=1})))}}})),a.restore()}},emitParticle:function(e,t){return t&&(!t.__photons&&(t.__photons=[]),t.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:ua().force("link",fa()).force("charge",Os()).force("center",Ts()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,t){t.ctx=e},update:function(e){if(e.engineRunning=!1,e.onUpdate(),null!==e.nodeAutoColorBy&&Yl(e.graphData.nodes,Ao(e.nodeAutoColorBy),e.nodeColor),null!==e.linkAutoColorBy&&Yl(e.graphData.links,Ao(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach((function(t){t.source=t[e.linkSource],t.target=t[e.linkTarget]})),!e.isShadow){var t=Ao(e.linkDirectionalParticles);e.graphData.links.forEach((function(e){var n=Math.round(Math.abs(t(e)));n?e.__photons=jl(Array(n)).map((function(){return{}})):delete e.__photons}))}e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var n=e.forceLayout.force("link");n&&n.id((function(t){return t[e.nodeId]})).links(e.graphData.links);var r=e.dagMode&&Xl(e.graphData,(function(t){return t[e.nodeId]}),{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),i=Math.max.apply(Math,jl(Object.values(r||[]))),o=e.dagLevelDistance||e.graphData.nodes.length/(i||1)*Kl*(-1!==["radialin","radialout"].indexOf(e.dagMode)?.7:1);if(e.dagMode){var a=function(t,n){return function(a){return t?(r[a[e.nodeId]]-i/2)*o*(n?-1:1):void 0}},s=a(-1!==["lr","rl"].indexOf(e.dagMode),"rl"===e.dagMode),l=a(-1!==["td","bu"].indexOf(e.dagMode),"bu"===e.dagMode);e.graphData.nodes.filter(e.dagNodeFilter).forEach((function(e){e.fx=s(e),e.fy=l(e)}))}e.forceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(e.dagMode)?Ns((function(t){var n=r[t[e.nodeId]]||-1;return("radialin"===e.dagMode?i-n:n)*o})).strength((function(t){return e.dagNodeFilter(t)?1:0})):null);for(var u=0;u<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);u++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function Ql(e,t){var n=e instanceof Array?e:[e],r=new t;return{linkProp:function(e){return{default:r[e](),onChange:function(t,r){n.forEach((function(n){return r[n][e](t)}))},triggerUpdate:!1}},linkMethod:function(e){return function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=[];return n.forEach((function(n){var r=t[n],o=r[e].apply(r,i);o!==r&&a.push(o)})),a.length?a[0]:this}}}}var eu=800,tu=4,nu=Ql("forceGraph",Zl),ru=Ql(["forceGraph","shadowGraph"],Zl),iu=Object.assign.apply(Object,jl(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map((function(e){return Al({},e,nu.linkProp(e))}))).concat(jl(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map((function(e){return Al({},e,ru.linkProp(e))}))))),ou=Object.assign.apply(Object,jl(["d3Force","d3ReheatSimulation","emitParticle"].map((function(e){return Al({},e,nu.linkMethod(e))}))));function au(e){if(e.canvas){var t=e.canvas.width,n=e.canvas.height;300===t&&150===n&&(t=n=0);var r=window.devicePixelRatio;t/=r,n/=r,[e.canvas,e.shadowCanvas].forEach((function(i){i.style.width="".concat(e.width,"px"),i.style.height="".concat(e.height,"px"),i.width=e.width*r,i.height=e.height*r,t||n||i.getContext("2d").scale(r,r)}));var i=Ai(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-t)/2/i,(e.height-n)/2/i),e.needsRedraw=!0}}function su(e){var t=window.devicePixelRatio;e.setTransform(t,0,0,t,0,0)}function lu(e,t,n){e.save(),su(e),e.clearRect(0,0,t,n),e.restore()}var uu=Do({props:Dl({width:{default:window.innerWidth,onChange:function(e,t){return au(t)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,t){return au(t)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,t){function n(e){var n=e.type,r=e.objs;r.filter((function(e){if(!e.hasOwnProperty("__indexColor"))return!0;var n=t.colorTracker.lookup(e.__indexColor);return!n||!n.hasOwnProperty("d")||n.d!==e})).forEach((function(e){e.__indexColor=t.colorTracker.register({type:n,d:e})}))}[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(n),t.forceGraph.graphData(e),t.shadowGraph.graphData(e)},triggerUpdate:!1},backgroundColor:{onChange:function(e,t){t.canvas&&e&&(t.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,t){t.shadowGraph.nodeCanvasObject(e?function(t,n,r){return e(t,t.__indexColor,n,r)}:null),t.flushShadowCanvas&&t.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,t){t.shadowGraph.linkCanvasObject(e?function(t,n,r){return e(t,t.__indexColor,n,r)}:null),t.flushShadowCanvas&&t.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,t){t.zoom.scaleExtent([e,t.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,t){t.zoom.scaleExtent([t.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,t){t.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},iu),aliases:{stopAnimation:"pauseAnimation"},methods:Dl({graph2ScreenCoords:function(e,t,n){var r=Ai(e.canvas);return{x:t*r.k+r.x,y:n*r.k+r.y}},screen2GraphCoords:function(e,t,n){var r=Ai(e.canvas);return{x:(t-r.x)/r.k,y:(n-r.y)/r.k}},centerAt:function(e,t,n,r){if(!e.canvas)return null;if(void 0!==t||void 0!==n){var i=Object.assign({},void 0!==t?{x:t}:{},void 0!==n?{y:n}:{});return r?new vo.Tween(o()).to(i,r).easing(vo.Easing.Quadratic.Out).onUpdate(a).start():a(i),this}return o();function o(){var t=Ai(e.canvas);return{x:(e.width/2-t.x)/t.k,y:(e.height/2-t.y)/t.k}}function a(t){var n=t.x,r=t.y;e.zoom.translateTo(e.zoom.__baseElem,void 0===n?o().x:n,void 0===r?o().y:r),e.needsRedraw=!0}},zoom:function(e,t,n){return e.canvas?void 0!==t?(n?new vo.Tween({k:r()}).to({k:t},n).easing(vo.Easing.Quadratic.Out).onUpdate((function(e){var t=e.k;return i(t)})).start():i(t),this):r():null;function r(){return Ai(e.canvas).k}function i(t){e.zoom.scaleTo(e.zoom.__baseElem,t),e.needsRedraw=!0}},zoomToFit:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a=this.getGraphBbox.apply(this,i);if(a){var s={x:(a.x[0]+a.x[1])/2,y:(a.y[0]+a.y[1])/2},l=Math.max(1e-12,Math.min(1e12,(e.width-2*n)/(a.x[1]-a.x[0]),(e.height-2*n)/(a.y[1]-a.y[0])));this.centerAt(s.x,s.y,t),this.zoom(l,t)}return this},getGraphBbox:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=Ao(e.nodeVal),r=function(t){return Math.sqrt(Math.max(0,n(t)||1))*e.nodeRelSize},i=e.graphData.nodes.filter(t).map((function(e){return{x:e.x,y:e.y,r:r(e)}}));return i.length?{x:[Ki(i,(function(e){return e.x-e.r})),Ji(i,(function(e){return e.x+e.r}))],y:[Ki(i,(function(e){return e.y-e.r})),Ji(i,(function(e){return e.y+e.r}))]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},ou),stateInit:function(){return{lastSetZoom:1,zoom:Vi(),forceGraph:new Zl,shadowGraph:(new Zl).cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new Jo}},init:function(e,t){var n=this;e.innerHTML="";var r=document.createElement("div");r.classList.add("force-graph-container"),r.style.position="relative",e.appendChild(r),t.canvas=document.createElement("canvas"),t.backgroundColor&&(t.canvas.style.background=t.backgroundColor),r.appendChild(t.canvas),t.shadowCanvas=document.createElement("canvas");var i=t.canvas.getContext("2d"),o=t.shadowCanvas.getContext("2d"),a={x:-1e12,y:-1e12},s=function(){var e=null,n=window.devicePixelRatio,r=a.x>0&&a.y>0?o.getImageData(a.x*n,a.y*n,1,1):null;return r&&(e=t.colorTracker.lookup(r.data)),e};it(t.canvas).call(Xi().subject((function(){if(!t.enableNodeDrag)return null;var e=s();return e&&"Node"===e.type?e.d:null})).on("start",(function(e){var n=e.subject;n.__initialDragPos={x:n.x,y:n.y,fx:n.fx,fy:n.fy},e.active||(n.fx=n.x,n.fy=n.y),t.canvas.classList.add("grabbable")})).on("drag",(function(e){var n=e.subject,r=n.__initialDragPos,i=e,o=Ai(t.canvas).k,a={x:r.x+(i.x-r.x)/o-n.x,y:r.y+(i.y-r.y)/o-n.y};["x","y"].forEach((function(e){return n["f".concat(e)]=n[e]=r[e]+(i[e]-r[e])/o})),t.forceGraph.d3AlphaTarget(.3).resetCountdown(),t.isPointerDragging=!0,n.__dragged=!0,t.onNodeDrag(n,a)})).on("end",(function(e){var n=e.subject,r=n.__initialDragPos,i={x:n.x-r.x,y:n.y-r.y};void 0===r.fx&&(n.fx=void 0),void 0===r.fy&&(n.fy=void 0),delete n.__initialDragPos,t.forceGraph.d3AlphaTarget()&&t.forceGraph.d3AlphaTarget(0).resetCountdown(),t.canvas.classList.remove("grabbable"),t.isPointerDragging=!1,n.__dragged&&(delete n.__dragged,t.onNodeDragEnd(n,i))}))),t.zoom(t.zoom.__baseElem=it(t.canvas)),t.zoom.__baseElem.on("dblclick.zoom",null),t.zoom.filter((function(e){return!e.button&&t.enableZoomPanInteraction&&(t.enableZoomInteraction||"wheel"!==e.type)&&(t.enablePanInteraction||"wheel"===e.type)})).on("zoom",(function(e){var r=e.transform;[i,o].forEach((function(e){su(e),e.translate(r.x,r.y),e.scale(r.k,r.k)})),t.onZoom&&t.onZoom(Dl(Dl({},r),n.centerAt())),t.needsRedraw=!0})).on("end",(function(e){return t.onZoomEnd&&t.onZoomEnd(Dl(Dl({},e.transform),n.centerAt()))})),au(t),t.forceGraph.onNeedsRedraw((function(){return t.needsRedraw=!0})).onFinishUpdate((function(){Ai(t.canvas).k===t.lastSetZoom&&t.graphData.nodes.length&&(t.zoom.scaleTo(t.zoom.__baseElem,t.lastSetZoom=tu/Math.cbrt(t.graphData.nodes.length)),t.needsRedraw=!0)}));var l=document.createElement("div");l.classList.add("graph-tooltip"),r.appendChild(l),["pointermove","pointerdown"].forEach((function(e){return r.addEventListener(e,(function(n){"pointerdown"===e&&(t.isPointerPressed=!0,t.pointerDownEvent=n),!t.isPointerDragging&&"pointermove"===n.type&&t.onBackgroundClick&&(n.pressure>0||t.isPointerPressed)&&("touch"!==n.pointerType||void 0===n.movementX||[n.movementX,n.movementY].some((function(e){return Math.abs(e)>1})))&&(t.isPointerDragging=!0);var i=o(r);function o(e){var t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+r,left:t.left+n}}a.x=n.pageX-i.left,a.y=n.pageY-i.top,l.style.top="".concat(a.y,"px"),l.style.left="".concat(a.x,"px")}),{passive:!0})})),r.addEventListener("pointerup",(function(e){if(t.isPointerPressed=!1,t.isPointerDragging)t.isPointerDragging=!1;else{var n=[e,t.pointerDownEvent];requestAnimationFrame((function(){if(0===e.button)if(t.hoverObj){var r=t["on".concat(t.hoverObj.type,"Click")];r&&r.apply(void 0,[t.hoverObj.d].concat(n))}else t.onBackgroundClick&&t.onBackgroundClick.apply(t,n);if(2===e.button)if(t.hoverObj){var i=t["on".concat(t.hoverObj.type,"RightClick")];i&&i.apply(void 0,[t.hoverObj.d].concat(n))}else t.onBackgroundRightClick&&t.onBackgroundRightClick.apply(t,n)}))}}),{passive:!0}),r.addEventListener("contextmenu",(function(e){return!(t.onBackgroundRightClick||t.onNodeRightClick||t.onLinkRightClick)||(e.preventDefault(),!1)})),t.forceGraph(i),t.shadowGraph(o);var u=eo()((function(){lu(o,t.width,t.height),t.shadowGraph.linkWidth((function(e){return Ao(t.linkWidth)(e)+t.linkHoverPrecision}));var e=Ai(t.canvas);t.shadowGraph.globalScale(e.k).tickFrame()}),eu);t.flushShadowCanvas=u.flush,(this._animationCycle=function e(){var n=!t.autoPauseRedraw||!!t.needsRedraw||t.forceGraph.isEngineRunning()||t.graphData.links.some((function(e){return e.__photons&&e.__photons.length}));if(t.needsRedraw=!1,t.enablePointerInteraction){var r=t.isPointerDragging?null:s();if(r!==t.hoverObj){var o=t.hoverObj,a=o?o.type:null,c=r?r.type:null;if(a&&a!==c){var h=t["on".concat(a,"Hover")];h&&h(null,o.d)}if(c){var d=t["on".concat(c,"Hover")];d&&d(r.d,a===c?o.d:null)}var p=r&&Ao(t["".concat(r.type.toLowerCase(),"Label")])(r.d)||"";l.style.visibility=p?"visible":"hidden",l.innerHTML=p,t.canvas.classList[r&&t["on".concat(c,"Click")]||!r&&t.onBackgroundClick?"add":"remove"]("clickable"),t.hoverObj=r}n&&u()}if(n){lu(i,t.width,t.height);var f=Ai(t.canvas).k;t.onRenderFramePre&&t.onRenderFramePre(i,f),t.forceGraph.globalScale(f).tickFrame(),t.onRenderFramePost&&t.onRenderFramePost(i,f)}vo.update(),t.animationFrameRequestId=requestAnimationFrame(e)})()},update:function(e){}})},2689:function(e,t,n){n(1703);var r="Expected a function",i=NaN,o="[object Symbol]",a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,h="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,p=h||d||Function("return this")(),f=Object.prototype,m=f.toString,g=Math.max,b=Math.min,v=function(){return p.Date.now()};function y(e,t,n){var i,o,a,s,l,u,c=0,h=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError(r);function f(t){var n=i,r=o;return i=o=void 0,c=t,s=e.apply(r,n),s}function m(e){return c=e,l=setTimeout(k,t),h?f(e):s}function y(e){var n=e-u,r=e-c,i=t-n;return d?b(i,a-r):i}function x(e){var n=e-u,r=e-c;return void 0===u||n>=t||n<0||d&&r>=a}function k(){var e=v();if(x(e))return _(e);l=setTimeout(k,y(e))}function _(e){return l=void 0,p&&i?f(e):(i=o=void 0,s)}function C(){void 0!==l&&clearTimeout(l),c=0,i=u=o=l=void 0}function I(){return void 0===l?s:_(v())}function O(){var e=v(),n=x(e);if(i=arguments,o=this,u=e,n){if(void 0===l)return m(u);if(d)return l=setTimeout(k,t),f(u)}return void 0===l&&(l=setTimeout(k,t)),s}return t=S(t)||0,w(n)&&(h=!!n.leading,d="maxWait"in n,a=d?g(S(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),O.cancel=C,O.flush=I,O}function x(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError(r);return w(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),y(e,t,{leading:i,maxWait:t,trailing:o})}function w(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function k(e){return!!e&&"object"==typeof e}function _(e){return"symbol"==typeof e||k(e)&&m.call(e)==o}function S(e){if("number"==typeof e)return e;if(_(e))return i;if(w(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=w(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=l.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):s.test(e)?i:+e}e.exports=x},9438:function(e,t,n){n(8675),n(7380),n(1118),n(1703),e.exports=i;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(N){}function i(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function o(e){return!0===(e&&e["__isLong__"])}i.prototype.__isLong__,Object.defineProperty(i.prototype,"__isLong__",{value:!0}),i.isLong=o;var a={},s={};function l(e,t){var n,r,i;return t?(e>>>=0,(i=0<=e&&e<256)&&(r=s[e],r)?r:(n=c(e,(0|e)<0?-1:0,!0),i&&(s[e]=n),n)):(e|=0,(i=-128<=e&&e<128)&&(r=a[e],r)?r:(n=c(e,e<0?-1:0,!1),i&&(a[e]=n),n))}function u(e,t){if(isNaN(e))return t?w:x;if(t){if(e<0)return w;if(e>=b)return I}else{if(e<=-v)return O;if(e+1>=v)return C}return e<0?u(-e,t).neg():c(e%g|0,e/g|0,t)}function c(e,t,n){return new i(e,t,n)}i.fromInt=l,i.fromNumber=u,i.fromBits=c;var h=Math.pow;function d(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return x;if("number"===typeof t?(n=t,t=!1):t=!!t,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return d(e.substring(1),t,n).neg();for(var i=u(h(n,8)),o=x,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),l=parseInt(e.substring(a,a+s),n);if(s<8){var c=u(h(n,s));o=o.mul(c).add(u(l))}else o=o.mul(i),o=o.add(u(l))}return o.unsigned=t,o}function p(e,t){return"number"===typeof e?u(e,t):"string"===typeof e?d(e,t):c(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}i.fromString=d,i.fromValue=p;var f=65536,m=1<<24,g=f*f,b=g*g,v=b/2,y=l(m),x=l(0);i.ZERO=x;var w=l(0,!0);i.UZERO=w;var k=l(1);i.ONE=k;var _=l(1,!0);i.UONE=_;var S=l(-1);i.NEG_ONE=S;var C=c(-1,2147483647,!1);i.MAX_VALUE=C;var I=c(-1,-1,!0);i.MAX_UNSIGNED_VALUE=I;var O=c(0,-2147483648,!1);i.MIN_VALUE=O;var T=i.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*g+(this.low>>>0):this.high*g+(this.low>>>0)},T.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(O)){var t=u(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}var i=u(h(e,6),this.unsigned),o=this,a="";while(1){var s=o.div(i),l=o.sub(s.mul(i)).toInt()>>>0,c=l.toString(e);if(o=s,o.isZero())return c+a;while(c.length<6)c="0"+c;a=""+c+a}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(O)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0;t--)if(0!=(e&1<<t))break;return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1===(1&this.low)},T.isEven=function(){return 0===(1&this.low)},T.equals=function(e){return o(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(e){return this.comp(e)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return this.comp(e)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(e){return this.comp(e)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return this.comp(e)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(e){if(o(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(O)?O:this.not().add(k)},T.neg=T.negate,T.add=function(e){o(e)||(e=p(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,a=e.high>>>16,s=65535&e.high,l=e.low>>>16,u=65535&e.low,h=0,d=0,f=0,m=0;return m+=i+u,f+=m>>>16,m&=65535,f+=r+l,d+=f>>>16,f&=65535,d+=n+s,h+=d>>>16,d&=65535,h+=t+a,h&=65535,c(f<<16|m,h<<16|d,this.unsigned)},T.subtract=function(e){return o(e)||(e=p(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){if(this.isZero())return x;if(o(e)||(e=p(e)),r){var t=r.mul(this.low,this.high,e.low,e.high);return c(t,r.get_high(),this.unsigned)}if(e.isZero())return x;if(this.eq(O))return e.isOdd()?O:x;if(e.eq(O))return this.isOdd()?O:x;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(y)&&e.lt(y))return u(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,a=this.low>>>16,s=65535&this.low,l=e.high>>>16,h=65535&e.high,d=e.low>>>16,f=65535&e.low,m=0,g=0,b=0,v=0;return v+=s*f,b+=v>>>16,v&=65535,b+=a*f,g+=b>>>16,b&=65535,b+=s*d,g+=b>>>16,b&=65535,g+=i*f,m+=g>>>16,g&=65535,g+=a*d,m+=g>>>16,g&=65535,g+=s*h,m+=g>>>16,g&=65535,m+=n*f+i*d+a*h+s*l,m&=65535,c(b<<16|v,m<<16|g,this.unsigned)},T.mul=T.multiply,T.divide=function(e){if(o(e)||(e=p(e)),e.isZero())throw Error("division by zero");if(r){if(!this.unsigned&&-2147483648===this.high&&-1===e.low&&-1===e.high)return this;var t=(this.unsigned?r.div_u:r.div_s)(this.low,this.high,e.low,e.high);return c(t,r.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?w:x;var n,i,a;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return w;if(e.gt(this.shru(1)))return _;a=w}else{if(this.eq(O)){if(e.eq(k)||e.eq(S))return O;if(e.eq(O))return k;var s=this.shr(1);return n=s.div(e).shl(1),n.eq(x)?e.isNegative()?k:S:(i=this.sub(e.mul(n)),a=n.add(i.div(e)),a)}if(e.eq(O))return this.unsigned?w:x;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=x}i=this;while(i.gte(e)){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));var l=Math.ceil(Math.log(n)/Math.LN2),d=l<=48?1:h(2,l-48),f=u(n),m=f.mul(e);while(m.isNegative()||m.gt(i))n-=d,f=u(n,this.unsigned),m=f.mul(e);f.isZero()&&(f=k),a=a.add(f),i=i.sub(m)}return a},T.div=T.divide,T.modulo=function(e){if(o(e)||(e=p(e)),r){var t=(this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,e.low,e.high);return c(t,r.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return c(~this.low,~this.high,this.unsigned)},T.and=function(e){return o(e)||(e=p(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return o(e)||(e=p(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return o(e)||(e=p(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return o(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return o(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){if(o(e)&&(e=e.toInt()),e&=63,0===e)return this;var t=this.high;if(e<32){var n=this.low;return c(n>>>e|t<<32-e,t>>>e,this.unsigned)}return c(32===e?t:t>>>e-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},i.fromBytes=function(e,t,n){return n?i.fromBytesLE(e,t):i.fromBytesBE(e,t)},i.fromBytesLE=function(e,t){return new i(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},i.fromBytesBE=function(e,t){return new i(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},6818:function(e,t,n){n(6314),n(1703),n(2087),function(t,r){e.exports=r(n(6866))}("undefined"!==typeof self&&self,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fae3")}({"00b4":function(e,t,n){"use strict";n("ac1f");var r=n("23e7"),i=n("da84"),o=n("c65b"),a=n("e330"),s=n("1626"),l=n("861d"),u=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),c=i.Error,h=a(/./.test);r({target:"RegExp",proto:!0,forced:!u},{test:function(e){var t=this.exec;if(!s(t))return h(this,e);var n=o(t,this,e);if(null!==n&&!l(n))throw new c("RegExp exec method returned something other than an Object or null");return!!n}})},"00ee":function(e,t,n){var r=n("b622"),i=r("toStringTag"),o={};o[i]="z",e.exports="[object z]"===String(o)},"0366":function(e,t,n){var r=n("e330"),i=n("59ed"),o=n("40d5"),a=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},"057f":function(e,t,n){var r=n("c6b6"),i=n("fc6a"),o=n("241c").f,a=n("4dae"),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(e){try{return o(e)}catch(t){return a(s)}};e.exports.f=function(e){return s&&"Window"==r(e)?l(e):o(i(e))}},"06cf":function(e,t,n){var r=n("83ab"),i=n("c65b"),o=n("d1e7"),a=n("5c6c"),s=n("fc6a"),l=n("a04b"),u=n("1a2d"),c=n("0cfb"),h=Object.getOwnPropertyDescriptor;t.f=r?h:function(e,t){if(e=s(e),t=l(t),c)try{return h(e,t)}catch(n){}if(u(e,t))return a(!i(o.f,e,t),e[t])}},"07fa":function(e,t,n){var r=n("50c4");e.exports=function(e){return r(e.length)}},"0b42":function(e,t,n){var r=n("da84"),i=n("e8b5"),o=n("68ee"),a=n("861d"),s=n("b622"),l=s("species"),u=r.Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,o(t)&&(t===u||i(t.prototype))?t=void 0:a(t)&&(t=t[l],null===t&&(t=void 0))),void 0===t?u:t}},"0cb2":function(e,t,n){var r=n("e330"),i=n("7b0b"),o=Math.floor,a=r("".charAt),s=r("".replace),l=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,h,d){var p=n+e.length,f=r.length,m=c;return void 0!==h&&(h=i(h),m=u),s(d,m,(function(i,s){var u;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,n);case"'":return l(t,p);case"<":u=h[l(s,1,-1)];break;default:var c=+s;if(0===c)return i;if(c>f){var d=o(c/10);return 0===d?i:d<=f?void 0===r[d-1]?a(s,1):r[d-1]+a(s,1):i}u=r[c-1]}return void 0===u?"":u}))}},"0cfb":function(e,t,n){var r=n("83ab"),i=n("d039"),o=n("cc12");e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0d51":function(e,t,n){var r=n("da84"),i=r.String;e.exports=function(e){try{return i(e)}catch(t){return"Object"}}},"107c":function(e,t,n){var r=n("d039"),i=n("da84"),o=i.RegExp;e.exports=r((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},1148:function(e,t,n){"use strict";var r=n("da84"),i=n("5926"),o=n("577e"),a=n("1d80"),s=r.RangeError;e.exports=function(e){var t=o(a(this)),n="",r=i(e);if(r<0||r==1/0)throw s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}},1276:function(e,t,n){"use strict";var r=n("2ba4"),i=n("c65b"),o=n("e330"),a=n("d784"),s=n("44e7"),l=n("825a"),u=n("1d80"),c=n("4840"),h=n("8aa5"),d=n("50c4"),p=n("577e"),f=n("dc4a"),m=n("4dae"),g=n("14c3"),b=n("9263"),v=n("9f7f"),y=n("d039"),x=v.UNSUPPORTED_Y,w=4294967295,k=Math.min,_=[].push,S=o(/./.exec),C=o(_),I=o("".slice),O=!y((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));a("split",(function(e,t,n){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var o=p(u(this)),a=void 0===n?w:n>>>0;if(0===a)return[];if(void 0===e)return[o];if(!s(e))return i(t,o,e,a);var l,c,h,d=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,v=new RegExp(e.source,f+"g");while(l=i(b,v,o)){if(c=v.lastIndex,c>g&&(C(d,I(o,g,l.index)),l.length>1&&l.index<o.length&&r(_,d,m(l,1)),h=l[0].length,g=c,d.length>=a))break;v.lastIndex===l.index&&v.lastIndex++}return g===o.length?!h&&S(v,"")||C(d,""):C(d,I(o,g)),d.length>a?m(d,0,a):d}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:i(t,this,e,n)}:t,[function(t,n){var r=u(this),a=void 0==t?void 0:f(t,e);return a?i(a,t,r,n):i(o,p(r),t,n)},function(e,r){var i=l(this),a=p(e),s=n(o,i,a,r,o!==t);if(s.done)return s.value;var u=c(i,RegExp),f=i.unicode,m=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(x?"g":"y"),b=new u(x?"^(?:"+i.source+")":i,m),v=void 0===r?w:r>>>0;if(0===v)return[];if(0===a.length)return null===g(b,a)?[a]:[];var y=0,_=0,S=[];while(_<a.length){b.lastIndex=x?0:_;var O,T=g(b,x?I(a,_):a);if(null===T||(O=k(d(b.lastIndex+(x?_:0)),a.length))===y)_=h(a,_,f);else{if(C(S,I(a,y,_)),S.length===v)return S;for(var N=1;N<=T.length-1;N++)if(C(S,T[N]),S.length===v)return S;_=y=O}}return C(S,I(a,y)),S}]}),!O,x)},"13d2":function(e,t,n){var r=n("d039"),i=n("1626"),o=n("1a2d"),a=n("83ab"),s=n("5e77").CONFIGURABLE,l=n("8925"),u=n("69f3"),c=u.enforce,h=u.get,d=Object.defineProperty,p=a&&!r((function(){return 8!==d((function(){}),"length",{value:8}).length})),f=String(String).split("String"),m=e.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!o(e,"name")||s&&e.name!==t)&&d(e,"name",{value:t,configurable:!0}),p&&n&&o(n,"arity")&&e.length!==n.arity&&d(e,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?a&&d(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var r=c(e);return o(r,"source")||(r.source=f.join("string"==typeof t?t:"")),e};Function.prototype.toString=m((function(){return i(this)&&h(this).source||l(this)}),"toString")},"14c3":function(e,t,n){var r=n("da84"),i=n("c65b"),o=n("825a"),a=n("1626"),s=n("c6b6"),l=n("9263"),u=r.TypeError;e.exports=function(e,t){var n=e.exec;if(a(n)){var r=i(n,e,t);return null!==r&&o(r),r}if("RegExp"===s(e))return i(l,e,t);throw u("RegExp#exec called on incompatible receiver")}},"159b":function(e,t,n){var r=n("da84"),i=n("fdbc"),o=n("785a"),a=n("17c2"),s=n("9112"),l=function(e){if(e&&e.forEach!==a)try{s(e,"forEach",a)}catch(t){e.forEach=a}};for(var u in i)i[u]&&l(r[u]&&r[u].prototype);l(o)},1626:function(e,t){e.exports=function(e){return"function"==typeof e}},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,i=n("a640"),o=i("forEach");e.exports=o?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"1a2d":function(e,t,n){var r=n("e330"),i=n("7b0b"),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},"1be4":function(e,t,n){var r=n("d066");e.exports=r("document","documentElement")},"1c7e":function(e,t,n){var r=n("b622"),i=r("iterator"),o=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(l){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(l){}return n}},"1d80":function(e,t,n){var r=n("da84"),i=r.TypeError;e.exports=function(e){if(void 0==e)throw i("Can't call method on "+e);return e}},"1dde":function(e,t,n){var r=n("d039"),i=n("b622"),o=n("2d00"),a=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[],n=t.constructor={};return n[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"23cb":function(e,t,n){var r=n("5926"),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},"23e7":function(e,t,n){var r=n("da84"),i=n("06cf").f,o=n("9112"),a=n("cb2d"),s=n("6374"),l=n("e893"),u=n("94ca");e.exports=function(e,t){var n,c,h,d,p,f,m=e.target,g=e.global,b=e.stat;if(c=g?r:b?r[m]||s(m,{}):(r[m]||{}).prototype,c)for(h in t){if(p=t[h],e.dontCallGetSet?(f=i(c,h),d=f&&f.value):d=c[h],n=u(g?h:m+(b?".":"#")+h,e.forced),!n&&void 0!==d){if(typeof p==typeof d)continue;l(p,d)}(e.sham||d&&d.sham)&&o(p,"sham",!0),a(c,h,p,e)}}},"241c":function(e,t,n){var r=n("ca84"),i=n("7839"),o=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},2532:function(e,t,n){"use strict";var r=n("23e7"),i=n("e330"),o=n("5a34"),a=n("1d80"),s=n("577e"),l=n("ab13"),u=i("".indexOf);r({target:"String",proto:!0,forced:!l("includes")},{includes:function(e){return!!~u(s(a(this)),s(o(e)),arguments.length>1?arguments[1]:void 0)}})},"25eb":function(e,t,n){var r=n("23e7"),i=n("c20d");r({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},"2a62":function(e,t,n){var r=n("c65b"),i=n("825a"),o=n("dc4a");e.exports=function(e,t,n){var a,s;i(e);try{if(a=o(e,"return"),!a){if("throw"===t)throw n;return n}a=r(a,e)}catch(l){s=!0,a=l}if("throw"===t)throw n;if(s)throw a;return i(a),n}},"2ba4":function(e,t,n){var r=n("40d5"),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(o):function(){return a.apply(o,arguments)})},"2d00":function(e,t,n){var r,i,o=n("da84"),a=n("342f"),s=o.process,l=o.Deno,u=s&&s.versions||l&&l.version,c=u&&u.v8;c&&(r=c.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),e.exports=i},"342f":function(e,t,n){var r=n("d066");e.exports=r("navigator","userAgent")||""},"35a1":function(e,t,n){var r=n("f5df"),i=n("dc4a"),o=n("3f8c"),a=n("b622"),s=a("iterator");e.exports=function(e){if(void 0!=e)return i(e,s)||i(e,"@@iterator")||o[r(e)]}},"37e8":function(e,t,n){var r=n("83ab"),i=n("aed9"),o=n("9bf2"),a=n("825a"),s=n("fc6a"),l=n("df75");t.f=r&&!i?Object.defineProperties:function(e,t){a(e);var n,r=s(t),i=l(t),u=i.length,c=0;while(u>c)o.f(e,n=i[c++],r[n]);return e}},"3a9b":function(e,t,n){var r=n("e330");e.exports=r({}.isPrototypeOf)},"3bbe":function(e,t,n){var r=n("da84"),i=n("1626"),o=r.String,a=r.TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw a("Can't set "+o(e)+" as a prototype")}},"3ca3":function(e,t,n){"use strict";var r=n("6547").charAt,i=n("577e"),o=n("69f3"),a=n("7dd0"),s="String Iterator",l=o.set,u=o.getterFor(s);a(String,"String",(function(e){l(this,{type:s,string:i(e),index:0})}),(function(){var e,t=u(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},"3d87":function(e,t,n){var r=n("4930");e.exports=r&&!!Symbol["for"]&&!!Symbol.keyFor},"3f8c":function(e,t){e.exports={}},"408a":function(e,t,n){var r=n("e330");e.exports=r(1..valueOf)},"40d5":function(e,t,n){var r=n("d039");e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},"428f":function(e,t,n){var r=n("da84");e.exports=r},"44ad":function(e,t,n){var r=n("da84"),i=n("e330"),o=n("d039"),a=n("c6b6"),s=r.Object,l=i("".split);e.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?l(e,""):s(e)}:s},"44d2":function(e,t,n){var r=n("b622"),i=n("7c73"),o=n("9bf2").f,a=r("unscopables"),s=Array.prototype;void 0==s[a]&&o(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},"44e7":function(e,t,n){var r=n("861d"),i=n("c6b6"),o=n("b622"),a=o("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},"466d":function(e,t,n){"use strict";var r=n("c65b"),i=n("d784"),o=n("825a"),a=n("50c4"),s=n("577e"),l=n("1d80"),u=n("dc4a"),c=n("8aa5"),h=n("14c3");i("match",(function(e,t,n){return[function(t){var n=l(this),i=void 0==t?void 0:u(t,e);return i?r(i,t,n):new RegExp(t)[e](s(n))},function(e){var r=o(this),i=s(e),l=n(t,r,i);if(l.done)return l.value;if(!r.global)return h(r,i);var u=r.unicode;r.lastIndex=0;var d,p=[],f=0;while(null!==(d=h(r,i))){var m=s(d[0]);p[f]=m,""===m&&(r.lastIndex=c(i,a(r.lastIndex),u)),f++}return 0===f?null:p}]}))},4840:function(e,t,n){var r=n("825a"),i=n("5087"),o=n("b622"),a=o("species");e.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||void 0==(n=r(o)[a])?t:i(n)}},"485a":function(e,t,n){var r=n("da84"),i=n("c65b"),o=n("1626"),a=n("861d"),s=r.TypeError;e.exports=function(e,t){var n,r;if("string"===t&&o(n=e.toString)&&!a(r=i(n,e)))return r;if(o(n=e.valueOf)&&!a(r=i(n,e)))return r;if("string"!==t&&o(n=e.toString)&&!a(r=i(n,e)))return r;throw s("Can't convert object to primitive value")}},4930:function(e,t,n){var r=n("2d00"),i=n("d039");e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},"498a":function(e,t,n){"use strict";var r=n("23e7"),i=n("58a8").trim,o=n("c8d2");r({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},"4d64":function(e,t,n){var r=n("fc6a"),i=n("23cb"),o=n("07fa"),a=function(e){return function(t,n,a){var s,l=r(t),u=o(l),c=i(a,u);if(e&&n!=n){while(u>c)if(s=l[c++],s!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},"4dae":function(e,t,n){var r=n("da84"),i=n("23cb"),o=n("07fa"),a=n("8418"),s=r.Array,l=Math.max;e.exports=function(e,t,n){for(var r=o(e),u=i(t,r),c=i(void 0===n?r:n,r),h=s(l(c-u,0)),d=0;u<c;u++,d++)a(h,d,e[u]);return h.length=d,h}},"4de4":function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").filter,o=n("1dde"),a=o("filter");r({target:"Array",proto:!0,forced:!a},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,n){"use strict";var r=n("da84"),i=n("0366"),o=n("c65b"),a=n("7b0b"),s=n("9bdd"),l=n("e95a"),u=n("68ee"),c=n("07fa"),h=n("8418"),d=n("9a1f"),p=n("35a1"),f=r.Array;e.exports=function(e){var t=a(e),n=u(this),r=arguments.length,m=r>1?arguments[1]:void 0,g=void 0!==m;g&&(m=i(m,r>2?arguments[2]:void 0));var b,v,y,x,w,k,_=p(t),S=0;if(!_||this==f&&l(_))for(b=c(t),v=n?new this(b):f(b);b>S;S++)k=g?m(t[S],S):t[S],h(v,S,k);else for(x=d(t,_),w=x.next,v=n?new this:[];!(y=o(w,x)).done;S++)k=g?s(x,m,[y.value,S],!0):y.value,h(v,S,k);return v.length=S,v}},5087:function(e,t,n){var r=n("da84"),i=n("68ee"),o=n("0d51"),a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a constructor")}},"50c4":function(e,t,n){var r=n("5926"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},5319:function(e,t,n){"use strict";var r=n("2ba4"),i=n("c65b"),o=n("e330"),a=n("d784"),s=n("d039"),l=n("825a"),u=n("1626"),c=n("5926"),h=n("50c4"),d=n("577e"),p=n("1d80"),f=n("8aa5"),m=n("dc4a"),g=n("0cb2"),b=n("14c3"),v=n("b622"),y=v("replace"),x=Math.max,w=Math.min,k=o([].concat),_=o([].push),S=o("".indexOf),C=o("".slice),I=function(e){return void 0===e?e:String(e)},O=function(){return"$0"==="a".replace(/./,"$0")}(),T=function(){return!!/./[y]&&""===/./[y]("a","$0")}(),N=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));a("replace",(function(e,t,n){var o=T?"$":"$0";return[function(e,n){var r=p(this),o=void 0==e?void 0:m(e,y);return o?i(o,e,r,n):i(t,d(r),e,n)},function(e,i){var a=l(this),s=d(e);if("string"==typeof i&&-1===S(i,o)&&-1===S(i,"$<")){var p=n(t,a,s,i);if(p.done)return p.value}var m=u(i);m||(i=d(i));var v=a.global;if(v){var y=a.unicode;a.lastIndex=0}var O=[];while(1){var T=b(a,s);if(null===T)break;if(_(O,T),!v)break;var N=d(T[0]);""===N&&(a.lastIndex=f(s,h(a.lastIndex),y))}for(var E="",D=0,$=0;$<O.length;$++){T=O[$];for(var A=d(T[0]),R=x(w(c(T.index),s.length),0),M=[],F=1;F<T.length;F++)_(M,I(T[F]));var P=T.groups;if(m){var j=k([A],M,R,s);void 0!==P&&_(j,P);var B=d(r(i,void 0,j))}else B=g(A,s,R,M,P,i);R>=D&&(E+=C(s,D,R)+B,D=R+A.length)}return E+C(s,D)}]}),!N||!O||T)},5692:function(e,t,n){var r=n("c430"),i=n("c6cd");(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.22.7",mode:r?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.7/LICENSE",source:"https://github.com/zloirock/core-js"})},"56ef":function(e,t,n){var r=n("d066"),i=n("e330"),o=n("241c"),a=n("7418"),s=n("825a"),l=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?l(t,n(e)):t}},"577e":function(e,t,n){var r=n("da84"),i=n("f5df"),o=r.String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},"57b9":function(e,t,n){var r=n("c65b"),i=n("d066"),o=n("b622"),a=n("cb2d");e.exports=function(){var e=i("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,s=o("toPrimitive");t&&!t[s]&&a(t,s,(function(e){return r(n,this)}),{arity:1})}},5899:function(e,t){e.exports="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("e330"),i=n("1d80"),o=n("577e"),a=n("5899"),s=r("".replace),l="["+a+"]",u=RegExp("^"+l+l+"*"),c=RegExp(l+l+"*$"),h=function(e){return function(t){var n=o(i(t));return 1&e&&(n=s(n,u,"")),2&e&&(n=s(n,c,"")),n}};e.exports={start:h(1),end:h(2),trim:h(3)}},5926:function(e,t,n){var r=n("b42e");e.exports=function(e){var t=+e;return t!==t||0===t?0:r(t)}},"59ed":function(e,t,n){var r=n("da84"),i=n("1626"),o=n("0d51"),a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a function")}},"5a34":function(e,t,n){var r=n("da84"),i=n("44e7"),o=r.TypeError;e.exports=function(e){if(i(e))throw o("The method doesn't accept regular expressions");return e}},"5a47":function(e,t,n){var r=n("23e7"),i=n("4930"),o=n("d039"),a=n("7418"),s=n("7b0b"),l=!i||o((function(){a.f(1)}));r({target:"Object",stat:!0,forced:l},{getOwnPropertySymbols:function(e){var t=a.f;return t?t(s(e)):[]}})},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5e77":function(e,t,n){var r=n("83ab"),i=n("1a2d"),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),l=s&&"something"===function(){}.name,u=s&&(!r||r&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:u}},6374:function(e,t,n){var r=n("da84"),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},6547:function(e,t,n){var r=n("e330"),i=n("5926"),o=n("577e"),a=n("1d80"),s=r("".charAt),l=r("".charCodeAt),u=r("".slice),c=function(e){return function(t,n){var r,c,h=o(a(t)),d=i(n),p=h.length;return d<0||d>=p?e?"":void 0:(r=l(h,d),r<55296||r>56319||d+1===p||(c=l(h,d+1))<56320||c>57343?e?s(h,d):r:e?u(h,d,d+2):c-56320+(r-55296<<10)+65536)}};e.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(e,t,n){var r=n("0b42");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},"68ee":function(e,t,n){var r=n("e330"),i=n("d039"),o=n("1626"),a=n("f5df"),s=n("d066"),l=n("8925"),u=function(){},c=[],h=s("Reflect","construct"),d=/^\s*(?:class|function)\b/,p=r(d.exec),f=!d.exec(u),m=function(e){if(!o(e))return!1;try{return h(u,c,e),!0}catch(t){return!1}},g=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(d,l(e))}catch(t){return!0}};g.sham=!0,e.exports=!h||i((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?g:m},"69f3":function(e,t,n){var r,i,o,a=n("7f9a"),s=n("da84"),l=n("e330"),u=n("861d"),c=n("9112"),h=n("1a2d"),d=n("c6cd"),p=n("f772"),f=n("d012"),m="Object already initialized",g=s.TypeError,b=s.WeakMap,v=function(e){return o(e)?i(e):r(e,{})},y=function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw g("Incompatible receiver, "+e+" required");return n}};if(a||d.state){var x=d.state||(d.state=new b),w=l(x.get),k=l(x.has),_=l(x.set);r=function(e,t){if(k(x,e))throw new g(m);return t.facade=e,_(x,e,t),t},i=function(e){return w(x,e)||{}},o=function(e){return k(x,e)}}else{var S=p("state");f[S]=!0,r=function(e,t){if(h(e,S))throw new g(m);return t.facade=e,c(e,S,t),t},i=function(e){return h(e,S)?e[S]:{}},o=function(e){return h(e,S)}}e.exports={set:r,get:i,has:o,enforce:v,getterFor:y}},"6b0d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n}},7156:function(e,t,n){var r=n("1626"),i=n("861d"),o=n("d2bb");e.exports=function(e,t,n){var a,s;return o&&r(a=t.constructor)&&a!==n&&i(s=a.prototype)&&s!==n.prototype&&o(e,s),e}},7418:function(e,t){t.f=Object.getOwnPropertySymbols},"746f":function(e,t,n){var r=n("428f"),i=n("1a2d"),o=n("e538"),a=n("9bf2").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"785a":function(e,t,n){var r=n("cc12"),i=r("span").classList,o=i&&i.constructor&&i.constructor.prototype;e.exports=o===Object.prototype?void 0:o},"7b0b":function(e,t,n){var r=n("da84"),i=n("1d80"),o=r.Object;e.exports=function(e){return o(i(e))}},"7c73":function(e,t,n){var r,i=n("825a"),o=n("37e8"),a=n("7839"),s=n("d012"),l=n("1be4"),u=n("cc12"),c=n("f772"),h=">",d="<",p="prototype",f="script",m=c("IE_PROTO"),g=function(){},b=function(e){return d+f+h+e+d+"/"+f+h},v=function(e){e.write(b("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=u("iframe"),n="java"+f+":";return t.style.display="none",l.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(b("document.F=Object")),e.close(),e.F},x=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}x="undefined"!=typeof document?document.domain&&r?v(r):y():v(r);var e=a.length;while(e--)delete x[p][a[e]];return x()};s[m]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(g[p]=i(e),n=new g,g[p]=null,n[m]=e):n=x(),void 0===t?n:o.f(n,t)}},"7dd0":function(e,t,n){"use strict";var r=n("23e7"),i=n("c65b"),o=n("c430"),a=n("5e77"),s=n("1626"),l=n("9ed3"),u=n("e163"),c=n("d2bb"),h=n("d44e"),d=n("9112"),p=n("cb2d"),f=n("b622"),m=n("3f8c"),g=n("ae93"),b=a.PROPER,v=a.CONFIGURABLE,y=g.IteratorPrototype,x=g.BUGGY_SAFARI_ITERATORS,w=f("iterator"),k="keys",_="values",S="entries",C=function(){return this};e.exports=function(e,t,n,a,f,g,I){l(n,t,a);var O,T,N,E=function(e){if(e===f&&M)return M;if(!x&&e in A)return A[e];switch(e){case k:return function(){return new n(this,e)};case _:return function(){return new n(this,e)};case S:return function(){return new n(this,e)}}return function(){return new n(this)}},D=t+" Iterator",$=!1,A=e.prototype,R=A[w]||A["@@iterator"]||f&&A[f],M=!x&&R||E(f),F="Array"==t&&A.entries||R;if(F&&(O=u(F.call(new e)),O!==Object.prototype&&O.next&&(o||u(O)===y||(c?c(O,y):s(O[w])||p(O,w,C)),h(O,D,!0,!0),o&&(m[D]=C))),b&&f==_&&R&&R.name!==_&&(!o&&v?d(A,"name",_):($=!0,M=function(){return i(R,this)})),f)if(T={values:E(_),keys:g?M:E(k),entries:E(S)},I)for(N in T)(x||$||!(N in A))&&p(A,N,T[N]);else r({target:t,proto:!0,forced:x||$},T);return o&&!I||A[w]===M||p(A,w,M,{name:f}),m[t]=M,T}},"7f9a":function(e,t,n){var r=n("da84"),i=n("1626"),o=n("8925"),a=r.WeakMap;e.exports=i(a)&&/native code/.test(o(a))},"81d5":function(e,t,n){"use strict";var r=n("7b0b"),i=n("23cb"),o=n("07fa");e.exports=function(e){var t=r(this),n=o(t),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),l=a>2?arguments[2]:void 0,u=void 0===l?n:i(l,n);while(u>s)t[s++]=e;return t}},"825a":function(e,t,n){var r=n("da84"),i=n("861d"),o=r.String,a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not an object")}},"83ab":function(e,t,n){var r=n("d039");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(e,t,n){"use strict";var r=n("a04b"),i=n("9bf2"),o=n("5c6c");e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},"857a":function(e,t,n){var r=n("e330"),i=n("1d80"),o=n("577e"),a=/"/g,s=r("".replace);e.exports=function(e,t,n,r){var l=o(i(e)),u="<"+t;return""!==n&&(u+=" "+n+'="'+s(o(r),a,"&quot;")+'"'),u+">"+l+"</"+t+">"}},"861d":function(e,t,n){var r=n("1626");e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},8875:function(e,t,n){var r,i,o;(function(n,a){i=[],r=a,o="function"===typeof r?r.apply(t,i):r,void 0===o||(e.exports=o)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(p){var n,r,i,o=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,a=/@([^@]*):(\d+):(\d+)\s*$/gi,s=o.exec(p.stack)||a.exec(p.stack),l=s&&s[1]||!1,u=s&&s[2]||!1,c=document.location.href.replace(document.location.hash,""),h=document.getElementsByTagName("script");l===c&&(n=document.documentElement.outerHTML,r=new RegExp("(?:[^\\n]+?\\n){0,"+(u-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),i=n.replace(r,"$1").trim());for(var d=0;d<h.length;d++){if("interactive"===h[d].readyState)return h[d];if(h[d].src===l)return h[d];if(l===c&&h[d].innerHTML&&h[d].innerHTML.trim()===i)return h[d]}return null}}return e}))},8925:function(e,t,n){var r=n("e330"),i=n("1626"),o=n("c6cd"),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"8bbf":function(t,n){t.exports=e},"90e3":function(e,t,n){var r=n("e330"),i=0,o=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},9112:function(e,t,n){var r=n("83ab"),i=n("9bf2"),o=n("5c6c");e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9263:function(e,t,n){"use strict";var r=n("c65b"),i=n("e330"),o=n("577e"),a=n("ad6d"),s=n("9f7f"),l=n("5692"),u=n("7c73"),c=n("69f3").get,h=n("fce3"),d=n("107c"),p=l("native-string-replace",String.prototype.replace),f=RegExp.prototype.exec,m=f,g=i("".charAt),b=i("".indexOf),v=i("".replace),y=i("".slice),x=function(){var e=/a/,t=/b*/g;return r(f,e,"a"),r(f,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),w=s.BROKEN_CARET,k=void 0!==/()??/.exec("")[1],_=x||k||w||h||d;_&&(m=function(e){var t,n,i,s,l,h,d,_=this,S=c(_),C=o(e),I=S.raw;if(I)return I.lastIndex=_.lastIndex,t=r(m,I,C),_.lastIndex=I.lastIndex,t;var O=S.groups,T=w&&_.sticky,N=r(a,_),E=_.source,D=0,$=C;if(T&&(N=v(N,"y",""),-1===b(N,"g")&&(N+="g"),$=y(C,_.lastIndex),_.lastIndex>0&&(!_.multiline||_.multiline&&"\n"!==g(C,_.lastIndex-1))&&(E="(?: "+E+")",$=" "+$,D++),n=new RegExp("^(?:"+E+")",N)),k&&(n=new RegExp("^"+E+"$(?!\\s)",N)),x&&(i=_.lastIndex),s=r(f,T?n:_,$),T?s?(s.input=y(s.input,D),s[0]=y(s[0],D),s.index=_.lastIndex,_.lastIndex+=s[0].length):_.lastIndex=0:x&&s&&(_.lastIndex=_.global?s.index+s[0].length:i),k&&s&&s.length>1&&r(p,s[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(s[l]=void 0)})),s&&O)for(s.groups=h=u(null),l=0;l<O.length;l++)d=O[l],h[d[0]]=s[d[1]];return s}),e.exports=m},"94ca":function(e,t,n){var r=n("d039"),i=n("1626"),o=/#|\.prototype\./,a=function(e,t){var n=l[s(e)];return n==c||n!=u&&(i(t)?r(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},l=a.data={},u=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},"99af":function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("d039"),a=n("e8b5"),s=n("861d"),l=n("7b0b"),u=n("07fa"),c=n("8418"),h=n("65f0"),d=n("1dde"),p=n("b622"),f=n("2d00"),m=p("isConcatSpreadable"),g=9007199254740991,b="Maximum allowed index exceeded",v=i.TypeError,y=f>=51||!o((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),x=d("concat"),w=function(e){if(!s(e))return!1;var t=e[m];return void 0!==t?!!t:a(e)},k=!y||!x;r({target:"Array",proto:!0,arity:1,forced:k},{concat:function(e){var t,n,r,i,o,a=l(this),s=h(a,0),d=0;for(t=-1,r=arguments.length;t<r;t++)if(o=-1===t?a:arguments[t],w(o)){if(i=u(o),d+i>g)throw v(b);for(n=0;n<i;n++,d++)n in o&&c(s,d,o[n])}else{if(d>=g)throw v(b);c(s,d++,o)}return s.length=d,s}})},"9a1f":function(e,t,n){var r=n("da84"),i=n("c65b"),o=n("59ed"),a=n("825a"),s=n("0d51"),l=n("35a1"),u=r.TypeError;e.exports=function(e,t){var n=arguments.length<2?l(e):t;if(o(n))return a(i(n,e));throw u(s(e)+" is not iterable")}},"9bdd":function(e,t,n){var r=n("825a"),i=n("2a62");e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(a){i(e,"throw",a)}}},"9bf2":function(e,t,n){var r=n("da84"),i=n("83ab"),o=n("0cfb"),a=n("aed9"),s=n("825a"),l=n("a04b"),u=r.TypeError,c=Object.defineProperty,h=Object.getOwnPropertyDescriptor,d="enumerable",p="configurable",f="writable";t.f=i?a?function(e,t,n){if(s(e),t=l(t),s(n),"function"===typeof e&&"prototype"===t&&"value"in n&&f in n&&!n[f]){var r=h(e,t);r&&r[f]&&(e[t]=n.value,n={configurable:p in n?n[p]:r[p],enumerable:d in n?n[d]:r[d],writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(s(e),t=l(t),s(n),o)try{return c(e,t,n)}catch(r){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"9ed3":function(e,t,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),o=n("5c6c"),a=n("d44e"),s=n("3f8c"),l=function(){return this};e.exports=function(e,t,n,u){var c=t+" Iterator";return e.prototype=i(r,{next:o(+!u,n)}),a(e,c,!1,!0),s[c]=l,e}},"9f7f":function(e,t,n){var r=n("d039"),i=n("da84"),o=i.RegExp,a=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),s=a||r((function(){return!o("a","y").sticky})),l=a||r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:l,MISSED_STICKY:s,UNSUPPORTED_Y:a}},a04b:function(e,t,n){var r=n("c04e"),i=n("d9b5");e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},a15b:function(e,t,n){"use strict";var r=n("23e7"),i=n("e330"),o=n("44ad"),a=n("fc6a"),s=n("a640"),l=i([].join),u=o!=Object,c=s("join",",");r({target:"Array",proto:!0,forced:u||!c},{join:function(e){return l(a(this),void 0===e?",":e)}})},a4d3:function(e,t,n){n("d9f5"),n("b4f8"),n("c513"),n("e9c4"),n("5a47")},a630:function(e,t,n){var r=n("23e7"),i=n("4df4"),o=n("1c7e"),a=!o((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:a},{from:i})},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},a9e3:function(e,t,n){"use strict";var r=n("83ab"),i=n("da84"),o=n("e330"),a=n("94ca"),s=n("cb2d"),l=n("1a2d"),u=n("7156"),c=n("3a9b"),h=n("d9b5"),d=n("c04e"),p=n("d039"),f=n("241c").f,m=n("06cf").f,g=n("9bf2").f,b=n("408a"),v=n("58a8").trim,y="Number",x=i[y],w=x.prototype,k=i.TypeError,_=o("".slice),S=o("".charCodeAt),C=function(e){var t=d(e,"number");return"bigint"==typeof t?t:I(t)},I=function(e){var t,n,r,i,o,a,s,l,u=d(e,"number");if(h(u))throw k("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=v(u),t=S(u,0),43===t||45===t){if(n=S(u,2),88===n||120===n)return NaN}else if(48===t){switch(S(u,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(o=_(u,2),a=o.length,s=0;s<a;s++)if(l=S(o,s),l<48||l>i)return NaN;return parseInt(o,r)}return+u};if(a(y,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var O,T=function(e){var t=arguments.length<1?0:x(C(e)),n=this;return c(w,n)&&p((function(){b(n)}))?u(Object(t),n,T):t},N=r?f(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),E=0;N.length>E;E++)l(x,O=N[E])&&!l(T,O)&&g(T,O,m(x,O));T.prototype=w,w.constructor=T,s(i,y,T,{constructor:!0})}},ab13:function(e,t,n){var r=n("b622"),i=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(r){}}return!1}},ab36:function(e,t,n){var r=n("861d"),i=n("9112");e.exports=function(e,t){r(t)&&"cause"in t&&i(e,"cause",t.cause)}},ac1f:function(e,t,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},ae93:function(e,t,n){"use strict";var r,i,o,a=n("d039"),s=n("1626"),l=n("7c73"),u=n("e163"),c=n("cb2d"),h=n("b622"),d=n("c430"),p=h("iterator"),f=!1;[].keys&&(o=[].keys(),"next"in o?(i=u(u(o)),i!==Object.prototype&&(r=i)):f=!0);var m=void 0==r||a((function(){var e={};return r[p].call(e)!==e}));m?r={}:d&&(r=l(r)),s(r[p])||c(r,p,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},aeb0:function(e,t,n){var r=n("9bf2").f;e.exports=function(e,t,n){n in e||r(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}},aed9:function(e,t,n){var r=n("83ab"),i=n("d039");e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},af03:function(e,t,n){var r=n("d039");e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},b041:function(e,t,n){"use strict";var r=n("00ee"),i=n("f5df");e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(e,t,n){var r=n("83ab"),i=n("5e77").EXISTS,o=n("e330"),a=n("9bf2").f,s=Function.prototype,l=o(s.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,c=o(u.exec),h="name";r&&!i&&a(s,h,{configurable:!0,get:function(){try{return c(u,l(this))[1]}catch(e){return""}}})},b42e:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var t=+e;return(t>0?r:n)(t)}},b4f8:function(e,t,n){var r=n("23e7"),i=n("d066"),o=n("1a2d"),a=n("577e"),s=n("5692"),l=n("3d87"),u=s("string-to-symbol-registry"),c=s("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!l},{for:function(e){var t=a(e);if(o(u,t))return u[t];var n=i("Symbol")(t);return u[t]=n,c[n]=t,n}})},b622:function(e,t,n){var r=n("da84"),i=n("5692"),o=n("1a2d"),a=n("90e3"),s=n("4930"),l=n("fdbf"),u=i("wks"),c=r.Symbol,h=c&&c["for"],d=l?c:c&&c.withoutSetter||a;e.exports=function(e){if(!o(u,e)||!s&&"string"!=typeof u[e]){var t="Symbol."+e;s&&o(c,e)?u[e]=c[e]:u[e]=l&&h?h(t):d(t)}return u[e]}},b64b:function(e,t,n){var r=n("23e7"),i=n("7b0b"),o=n("df75"),a=n("d039"),s=a((function(){o(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(e){return o(i(e))}})},b680:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("e330"),a=n("5926"),s=n("408a"),l=n("1148"),u=n("d039"),c=i.RangeError,h=i.String,d=Math.floor,p=o(l),f=o("".slice),m=o(1..toFixed),g=function(e,t,n){return 0===t?n:t%2===1?g(e,t-1,n*e):g(e*e,t/2,n)},b=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},v=function(e,t,n){var r=-1,i=n;while(++r<6)i+=t*e[r],e[r]=i%1e7,i=d(i/1e7)},y=function(e,t){var n=6,r=0;while(--n>=0)r+=e[n],e[n]=d(r/t),r=r%t*1e7},x=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var r=h(e[t]);n=""===n?r:n+p("0",7-r.length)+r}return n},w=u((function(){return"0.000"!==m(8e-5,3)||"1"!==m(.9,0)||"1.25"!==m(1.255,2)||"1000000000000000128"!==m(0xde0b6b3a7640080,0)}))||!u((function(){m({})}));r({target:"Number",proto:!0,forced:w},{toFixed:function(e){var t,n,r,i,o=s(this),l=a(e),u=[0,0,0,0,0,0],d="",m="0";if(l<0||l>20)throw c("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return h(o);if(o<0&&(d="-",o=-o),o>1e-21)if(t=b(o*g(2,69,1))-69,n=t<0?o*g(2,-t,1):o/g(2,t,1),n*=4503599627370496,t=52-t,t>0){v(u,0,n),r=l;while(r>=7)v(u,1e7,0),r-=7;v(u,g(10,r,1),0),r=t-1;while(r>=23)y(u,1<<23),r-=23;y(u,1<<r),v(u,1,1),y(u,2),m=x(u)}else v(u,0,n),v(u,1<<-t,0),m=x(u)+p("0",l);return l>0?(i=m.length,m=d+(i<=l?"0."+p("0",l-i)+m:f(m,0,i-l)+"."+f(m,i-l))):m=d+m,m}})},b727:function(e,t,n){var r=n("0366"),i=n("e330"),o=n("44ad"),a=n("7b0b"),s=n("07fa"),l=n("65f0"),u=i([].push),c=function(e){var t=1==e,n=2==e,i=3==e,c=4==e,h=6==e,d=7==e,p=5==e||h;return function(f,m,g,b){for(var v,y,x=a(f),w=o(x),k=r(m,g),_=s(w),S=0,C=b||l,I=t?C(f,_):n||d?C(f,0):void 0;_>S;S++)if((p||S in w)&&(v=w[S],y=k(v,S,x),e))if(t)I[S]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return S;case 2:u(I,v)}else switch(e){case 4:return!1;case 7:u(I,v)}return h?-1:i||c?c:I}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},b980:function(e,t,n){var r=n("d039"),i=n("5c6c");e.exports=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)}))},c04e:function(e,t,n){var r=n("da84"),i=n("c65b"),o=n("861d"),a=n("d9b5"),s=n("dc4a"),l=n("485a"),u=n("b622"),c=r.TypeError,h=u("toPrimitive");e.exports=function(e,t){if(!o(e)||a(e))return e;var n,r=s(e,h);if(r){if(void 0===t&&(t="default"),n=i(r,e,t),!o(n)||a(n))return n;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),l(e,t)}},c20d:function(e,t,n){var r=n("da84"),i=n("d039"),o=n("e330"),a=n("577e"),s=n("58a8").trim,l=n("5899"),u=r.parseInt,c=r.Symbol,h=c&&c.iterator,d=/^[+-]?0x/i,p=o(d.exec),f=8!==u(l+"08")||22!==u(l+"0x16")||h&&!i((function(){u(Object(h))}));e.exports=f?function(e,t){var n=s(a(e));return u(n,t>>>0||(p(d,n)?16:10))}:u},c430:function(e,t){e.exports=!1},c513:function(e,t,n){var r=n("23e7"),i=n("1a2d"),o=n("d9b5"),a=n("0d51"),s=n("5692"),l=n("3d87"),u=s("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!l},{keyFor:function(e){if(!o(e))throw TypeError(a(e)+" is not a symbol");if(i(u,e))return u[e]}})},c65b:function(e,t,n){var r=n("40d5"),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},c6b6:function(e,t,n){var r=n("e330"),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},c6cd:function(e,t,n){var r=n("da84"),i=n("6374"),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},c770:function(e,t,n){var r=n("e330"),i=Error,o=r("".replace),a=function(e){return String(i(e).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,l=s.test(a);e.exports=function(e,t){if(l&&"string"==typeof e&&!i.prepareStackTrace)while(t--)e=o(e,s,"");return e}},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},c8d2:function(e,t,n){var r=n("5e77").PROPER,i=n("d039"),o=n("5899"),a="âÂá ";e.exports=function(e){return i((function(){return!!o[e]()||a[e]()!==a||r&&o[e].name!==e}))}},c96a:function(e,t,n){"use strict";var r=n("23e7"),i=n("857a"),o=n("af03");r({target:"String",proto:!0,forced:o("small")},{small:function(){return i(this,"small","","")}})},ca84:function(e,t,n){var r=n("e330"),i=n("1a2d"),o=n("fc6a"),a=n("4d64").indexOf,s=n("d012"),l=r([].push);e.exports=function(e,t){var n,r=o(e),u=0,c=[];for(n in r)!i(s,n)&&i(r,n)&&l(c,n);while(t.length>u)i(r,n=t[u++])&&(~a(c,n)||l(c,n));return c}},caad:function(e,t,n){"use strict";var r=n("23e7"),i=n("4d64").includes,o=n("d039"),a=n("44d2"),s=o((function(){return!Array(1).includes()}));r({target:"Array",proto:!0,forced:s},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},cb29:function(e,t,n){var r=n("23e7"),i=n("81d5"),o=n("44d2");r({target:"Array",proto:!0},{fill:i}),o("fill")},cb2d:function(e,t,n){var r=n("1626"),i=n("9112"),o=n("13d2"),a=n("6374");e.exports=function(e,t,n,s){s||(s={});var l=s.enumerable,u=void 0!==s.name?s.name:t;return r(n)&&o(n,u,s),s.global?l?e[t]=n:a(t,n):(s.unsafe?e[t]&&(l=!0):delete e[t],l?e[t]=n:i(e,t,n)),e}},cc12:function(e,t,n){var r=n("da84"),i=n("861d"),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},cc71:function(e,t,n){"use strict";var r=n("23e7"),i=n("857a"),o=n("af03");r({target:"String",proto:!0,forced:o("bold")},{bold:function(){return i(this,"b","","")}})},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,n){var r=n("da84"),i=n("1626"),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e]):r[e]&&r[e][t]}},d1e7:function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},d28b:function(e,t,n){var r=n("746f");r("iterator")},d2bb:function(e,t,n){var r=n("e330"),i=n("825a"),o=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(n,[]),t=n instanceof Array}catch(a){}return function(n,r){return i(n),o(r),t?e(n,r):n.__proto__=r,n}}():void 0)},d3b7:function(e,t,n){var r=n("00ee"),i=n("cb2d"),o=n("b041");r||i(Object.prototype,"toString",o,{unsafe:!0})},d44e:function(e,t,n){var r=n("9bf2").f,i=n("1a2d"),o=n("b622"),a=o("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,a)&&r(e,a,{configurable:!0,value:t})}},d784:function(e,t,n){"use strict";n("ac1f");var r=n("e330"),i=n("cb2d"),o=n("9263"),a=n("d039"),s=n("b622"),l=n("9112"),u=s("species"),c=RegExp.prototype;e.exports=function(e,t,n,h){var d=s(e),p=!a((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),f=p&&!a((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return t=!0,null},n[d](""),!t}));if(!p||!f||n){var m=r(/./[d]),g=t(d,""[e],(function(e,t,n,i,a){var s=r(e),l=t.exec;return l===o||l===c.exec?p&&!a?{done:!0,value:m(t,n,i)}:{done:!0,value:s(n,t,i)}:{done:!1}}));i(String.prototype,e,g[0]),i(c,d,g[1])}h&&l(c[d],"sham",!0)}},d81d:function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").map,o=n("1dde"),a=o("map");r({target:"Array",proto:!0,forced:!a},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},d9b5:function(e,t,n){var r=n("da84"),i=n("d066"),o=n("1626"),a=n("3a9b"),s=n("fdbf"),l=r.Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return o(t)&&a(t.prototype,l(e))}},d9e2:function(e,t,n){var r=n("23e7"),i=n("da84"),o=n("2ba4"),a=n("e5cb"),s="WebAssembly",l=i[s],u=7!==Error("e",{cause:7}).cause,c=function(e,t){var n={};n[e]=a(e,t,u),r({global:!0,constructor:!0,arity:1,forced:u},n)},h=function(e,t){if(l&&l[e]){var n={};n[e]=a(s+"."+e,t,u),r({target:s,stat:!0,constructor:!0,arity:1,forced:u},n)}};c("Error",(function(e){return function(t){return o(e,this,arguments)}})),c("EvalError",(function(e){return function(t){return o(e,this,arguments)}})),c("RangeError",(function(e){return function(t){return o(e,this,arguments)}})),c("ReferenceError",(function(e){return function(t){return o(e,this,arguments)}})),c("SyntaxError",(function(e){return function(t){return o(e,this,arguments)}})),c("TypeError",(function(e){return function(t){return o(e,this,arguments)}})),c("URIError",(function(e){return function(t){return o(e,this,arguments)}})),h("CompileError",(function(e){return function(t){return o(e,this,arguments)}})),h("LinkError",(function(e){return function(t){return o(e,this,arguments)}})),h("RuntimeError",(function(e){return function(t){return o(e,this,arguments)}}))},d9f5:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("c65b"),a=n("e330"),s=n("c430"),l=n("83ab"),u=n("4930"),c=n("d039"),h=n("1a2d"),d=n("3a9b"),p=n("825a"),f=n("fc6a"),m=n("a04b"),g=n("577e"),b=n("5c6c"),v=n("7c73"),y=n("df75"),x=n("241c"),w=n("057f"),k=n("7418"),_=n("06cf"),S=n("9bf2"),C=n("37e8"),I=n("d1e7"),O=n("cb2d"),T=n("5692"),N=n("f772"),E=n("d012"),D=n("90e3"),$=n("b622"),A=n("e538"),R=n("746f"),M=n("57b9"),F=n("d44e"),P=n("69f3"),j=n("b727").forEach,B=N("hidden"),L="Symbol",z="prototype",V=P.set,U=P.getterFor(L),W=Object[z],H=i.Symbol,G=H&&H[z],q=i.TypeError,Y=i.QObject,X=_.f,K=S.f,J=w.f,Z=I.f,Q=a([].push),ee=T("symbols"),te=T("op-symbols"),ne=T("wks"),re=!Y||!Y[z]||!Y[z].findChild,ie=l&&c((function(){return 7!=v(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=X(W,t);r&&delete W[t],K(e,t,n),r&&e!==W&&K(W,t,r)}:K,oe=function(e,t){var n=ee[e]=v(G);return V(n,{type:L,tag:e,description:t}),l||(n.description=t),n},ae=function(e,t,n){e===W&&ae(te,t,n),p(e);var r=m(t);return p(n),h(ee,r)?(n.enumerable?(h(e,B)&&e[B][r]&&(e[B][r]=!1),n=v(n,{enumerable:b(0,!1)})):(h(e,B)||K(e,B,b(1,{})),e[B][r]=!0),ie(e,r,n)):K(e,r,n)},se=function(e,t){p(e);var n=f(t),r=y(n).concat(de(n));return j(r,(function(t){l&&!o(ue,n,t)||ae(e,t,n[t])})),e},le=function(e,t){return void 0===t?v(e):se(v(e),t)},ue=function(e){var t=m(e),n=o(Z,this,t);return!(this===W&&h(ee,t)&&!h(te,t))&&(!(n||!h(this,t)||!h(ee,t)||h(this,B)&&this[B][t])||n)},ce=function(e,t){var n=f(e),r=m(t);if(n!==W||!h(ee,r)||h(te,r)){var i=X(n,r);return!i||!h(ee,r)||h(n,B)&&n[B][r]||(i.enumerable=!0),i}},he=function(e){var t=J(f(e)),n=[];return j(t,(function(e){h(ee,e)||h(E,e)||Q(n,e)})),n},de=function(e){var t=e===W,n=J(t?te:f(e)),r=[];return j(n,(function(e){!h(ee,e)||t&&!h(W,e)||Q(r,ee[e])})),r};u||(H=function(){if(d(G,this))throw q("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,t=D(e),n=function(e){this===W&&o(n,te,e),h(this,B)&&h(this[B],t)&&(this[B][t]=!1),ie(this,t,b(1,e))};return l&&re&&ie(W,t,{configurable:!0,set:n}),oe(t,e)},G=H[z],O(G,"toString",(function(){return U(this).tag})),O(H,"withoutSetter",(function(e){return oe(D(e),e)})),I.f=ue,S.f=ae,C.f=se,_.f=ce,x.f=w.f=he,k.f=de,A.f=function(e){return oe($(e),e)},l&&(K(G,"description",{configurable:!0,get:function(){return U(this).description}}),s||O(W,"propertyIsEnumerable",ue,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:H}),j(y(ne),(function(e){R(e)})),r({target:L,stat:!0,forced:!u},{useSetter:function(){re=!0},useSimple:function(){re=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!l},{create:le,defineProperty:ae,defineProperties:se,getOwnPropertyDescriptor:ce}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:he}),M(),F(H,L),E[B]=!0},da84:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dbb4:function(e,t,n){var r=n("23e7"),i=n("83ab"),o=n("56ef"),a=n("fc6a"),s=n("06cf"),l=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,n,r=a(e),i=s.f,u=o(r),c={},h=0;while(u.length>h)n=i(r,t=u[h++]),void 0!==n&&l(c,t,n);return c}})},dc4a:function(e,t,n){var r=n("59ed");e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},ddb0:function(e,t,n){var r=n("da84"),i=n("fdbc"),o=n("785a"),a=n("e260"),s=n("9112"),l=n("b622"),u=l("iterator"),c=l("toStringTag"),h=a.values,d=function(e,t){if(e){if(e[u]!==h)try{s(e,u,h)}catch(r){e[u]=h}if(e[c]||s(e,c,t),i[t])for(var n in a)if(e[n]!==a[n])try{s(e,n,a[n])}catch(r){e[n]=a[n]}}};for(var p in i)d(r[p]&&r[p].prototype,p);d(o,"DOMTokenList")},df75:function(e,t,n){var r=n("ca84"),i=n("7839");e.exports=Object.keys||function(e){return r(e,i)}},e01a:function(e,t,n){"use strict";var r=n("23e7"),i=n("83ab"),o=n("da84"),a=n("e330"),s=n("1a2d"),l=n("1626"),u=n("3a9b"),c=n("577e"),h=n("9bf2").f,d=n("e893"),p=o.Symbol,f=p&&p.prototype;if(i&&l(p)&&(!("description"in f)||void 0!==p().description)){var m={},g=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:c(arguments[0]),t=u(f,this)?new p(e):void 0===e?p():p(e);return""===e&&(m[t]=!0),t};d(g,p),g.prototype=f,f.constructor=g;var b="Symbol(test)"==String(p("test")),v=a(f.toString),y=a(f.valueOf),x=/^Symbol\((.*)\)[^)]+$/,w=a("".replace),k=a("".slice);h(f,"description",{configurable:!0,get:function(){var e=y(this),t=v(e);if(s(m,e))return"";var n=b?k(t,7,-1):w(t,x,"$1");return""===n?void 0:n}}),r({global:!0,constructor:!0,forced:!0},{Symbol:g})}},e163:function(e,t,n){var r=n("da84"),i=n("1a2d"),o=n("1626"),a=n("7b0b"),s=n("f772"),l=n("e177"),u=s("IE_PROTO"),c=r.Object,h=c.prototype;e.exports=l?c.getPrototypeOf:function(e){var t=a(e);if(i(t,u))return t[u];var n=t.constructor;return o(n)&&t instanceof n?n.prototype:t instanceof c?h:null}},e177:function(e,t,n){var r=n("d039");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e260:function(e,t,n){"use strict";var r=n("fc6a"),i=n("44d2"),o=n("3f8c"),a=n("69f3"),s=n("9bf2").f,l=n("7dd0"),u=n("c430"),c=n("83ab"),h="Array Iterator",d=a.set,p=a.getterFor(h);e.exports=l(Array,"Array",(function(e,t){d(this,{type:h,target:r(e),index:0,kind:t})}),(function(){var e=p(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");var f=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!u&&c&&"values"!==f.name)try{s(f,"name",{value:"values"})}catch(m){}},e330:function(e,t,n){var r=n("40d5"),i=Function.prototype,o=i.bind,a=i.call,s=r&&o.bind(a,a);e.exports=r?function(e){return e&&s(e)}:function(e){return e&&function(){return a.apply(e,arguments)}}},e391:function(e,t,n){var r=n("577e");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},e439:function(e,t,n){var r=n("23e7"),i=n("d039"),o=n("fc6a"),a=n("06cf").f,s=n("83ab"),l=i((function(){a(1)})),u=!s||l;r({target:"Object",stat:!0,forced:u,sham:!s},{getOwnPropertyDescriptor:function(e,t){return a(o(e),t)}})},e538:function(e,t,n){var r=n("b622");t.f=r},e5cb:function(e,t,n){"use strict";var r=n("d066"),i=n("1a2d"),o=n("9112"),a=n("3a9b"),s=n("d2bb"),l=n("e893"),u=n("aeb0"),c=n("7156"),h=n("e391"),d=n("ab36"),p=n("c770"),f=n("b980"),m=n("83ab"),g=n("c430");e.exports=function(e,t,n,b){var v="stackTraceLimit",y=b?2:1,x=e.split("."),w=x[x.length-1],k=r.apply(null,x);if(k){var _=k.prototype;if(!g&&i(_,"cause")&&delete _.cause,!n)return k;var S=r("Error"),C=t((function(e,t){var n=h(b?t:e,void 0),r=b?new k(e):new k;return void 0!==n&&o(r,"message",n),f&&o(r,"stack",p(r.stack,2)),this&&a(_,this)&&c(r,this,C),arguments.length>y&&d(r,arguments[y]),r}));if(C.prototype=_,"Error"!==w?s?s(C,S):l(C,S,{name:!0}):m&&v in k&&(u(C,k,v),u(C,k,"prepareStackTrace")),l(C,k),!g)try{_.name!==w&&o(_,"name",w),_.constructor=C}catch(I){}return C}}},e893:function(e,t,n){var r=n("1a2d"),i=n("56ef"),o=n("06cf"),a=n("9bf2");e.exports=function(e,t,n){for(var s=i(t),l=a.f,u=o.f,c=0;c<s.length;c++){var h=s[c];r(e,h)||n&&r(n,h)||l(e,h,u(t,h))}}},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},e95a:function(e,t,n){var r=n("b622"),i=n("3f8c"),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},e9c4:function(e,t,n){var r=n("23e7"),i=n("d066"),o=n("2ba4"),a=n("c65b"),s=n("e330"),l=n("d039"),u=n("e8b5"),c=n("1626"),h=n("861d"),d=n("d9b5"),p=n("f36a"),f=n("4930"),m=i("JSON","stringify"),g=s(/./.exec),b=s("".charAt),v=s("".charCodeAt),y=s("".replace),x=s(1..toString),w=/[\uD800-\uDFFF]/g,k=/^[\uD800-\uDBFF]$/,_=/^[\uDC00-\uDFFF]$/,S=!f||l((function(){var e=i("Symbol")();return"[null]"!=m([e])||"{}"!=m({a:e})||"{}"!=m(Object(e))})),C=l((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),I=function(e,t){var n=p(arguments),r=t;if((h(t)||void 0!==e)&&!d(e))return u(t)||(t=function(e,t){if(c(r)&&(t=a(r,this,e,t)),!d(t))return t}),n[1]=t,o(m,null,n)},O=function(e,t,n){var r=b(n,t-1),i=b(n,t+1);return g(k,e)&&!g(_,i)||g(_,e)&&!g(k,r)?"\\u"+x(v(e,0),16):e};m&&r({target:"JSON",stat:!0,arity:3,forced:S||C},{stringify:function(e,t,n){var r=p(arguments),i=o(S?I:m,null,r);return C&&"string"==typeof i?y(i,w,O):i}})},f36a:function(e,t,n){var r=n("e330");e.exports=r([].slice)},f5df:function(e,t,n){var r=n("da84"),i=n("00ee"),o=n("1626"),a=n("c6b6"),s=n("b622"),l=s("toStringTag"),u=r.Object,c="Arguments"==a(function(){return arguments}()),h=function(e,t){try{return e[t]}catch(n){}};e.exports=i?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=h(t=u(e),l))?n:c?a(t):"Object"==(r=a(t))&&o(t.callee)?"Arguments":r}},f772:function(e,t,n){var r=n("5692"),i=n("90e3"),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"MDBBadge",(function(){return d})),n.d(t,"MDBBtn",(function(){return O})),n.d(t,"MDBCardBody",(function(){return U})),n.d(t,"MDBCardTitle",(function(){return q})),n.d(t,"MDBCardText",(function(){return J})),n.d(t,"MDBCardImg",(function(){return te})),n.d(t,"MDBCardHeader",(function(){return oe})),n.d(t,"MDBCardFooter",(function(){return ue})),n.d(t,"MDBCardLink",(function(){return pe})),n.d(t,"MDBCardGroup",(function(){return be})),n.d(t,"MDBCarousel",(function(){return Re})),n.d(t,"MDBBtnGroup",(function(){return D})),n.d(t,"MDBBtnClose",(function(){return M})),n.d(t,"MDBCard",(function(){return B})),n.d(t,"MDBListGroup",(function(){return je})),n.d(t,"MDBListGroupItem",(function(){return Ve})),n.d(t,"MDBProgress",(function(){return Ge})),n.d(t,"MDBProgressBar",(function(){return Ke})),n.d(t,"MDBSpinner",(function(){return tt})),n.d(t,"MDBCollapse",(function(){return Ct})),n.d(t,"MDBDropdown",(function(){return Lr})),n.d(t,"MDBDropdownToggle",(function(){return Gr})),n.d(t,"MDBDropdownMenu",(function(){return Kr})),n.d(t,"MDBDropdownItem",(function(){return ni})),n.d(t,"MDBTooltip",(function(){return si})),n.d(t,"MDBPopover",(function(){return fi})),n.d(t,"MDBModal",(function(){return wi})),n.d(t,"MDBModalHeader",(function(){return Ci})),n.d(t,"MDBModalTitle",(function(){return Ni})),n.d(t,"MDBModalBody",(function(){return Ai})),n.d(t,"MDBModalFooter",(function(){return Pi})),n.d(t,"MDBAccordion",(function(){return zi})),n.d(t,"MDBAccordionItem",(function(){return Gi})),n.d(t,"MDBTabs",(function(){return ta})),n.d(t,"MDBTabNav",(function(){return oa})),n.d(t,"MDBTabItem",(function(){return ha})),n.d(t,"MDBTabPane",(function(){return ma})),n.d(t,"MDBTabContent",(function(){return ya})),n.d(t,"MDBIcon",(function(){return Ki})),n.d(t,"MDBNavbar",(function(){return eo})),n.d(t,"MDBNavbarToggler",(function(){return io})),n.d(t,"MDBNavbarBrand",(function(){return lo})),n.d(t,"MDBNavbarNav",(function(){return po})),n.d(t,"MDBNavbarItem",(function(){return vo})),n.d(t,"MDBPagination",(function(){return ko})),n.d(t,"MDBPageNav",(function(){return $o})),n.d(t,"MDBPageItem",(function(){return Bo})),n.d(t,"MDBBreadcrumb",(function(){return Uo})),n.d(t,"MDBBreadcrumbItem",(function(){return qo})),n.d(t,"MDBFooter",(function(){return Jo})),n.d(t,"MDBCol",(function(){return _a})),n.d(t,"MDBRow",(function(){return Oa})),n.d(t,"MDBContainer",(function(){return Da})),n.d(t,"MDBTable",(function(){return Ma})),n.d(t,"MDBInput",(function(){return es})),n.d(t,"MDBTextarea",(function(){return bs})),n.d(t,"MDBCheckbox",(function(){return Cs})),n.d(t,"MDBRadio",(function(){return As})),n.d(t,"MDBFile",(function(){return Bs})),n.d(t,"MDBRange",(function(){return Gs})),n.d(t,"MDBSwitch",(function(){return Zs})),n.d(t,"mdbClickOutside",(function(){return Ur})),n.d(t,"mdbRipple",(function(){return S})),n.d(t,"mdbScrollspy",(function(){return il})),"undefined"!==typeof window){var r=window.document.currentScript,i=n("8875");r=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i});var o=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(n.p=o[1])}var a=n("8bbf");function s(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var l={name:"MDBBadge",props:{badge:String,color:String,pill:Boolean,dot:Boolean,notification:Boolean,tag:{type:String,default:"span"}},setup:function(e,t){var n=t.attrs,r=Object(a["computed"])((function(){return["badge",e.color&&"bg-".concat(e.color),e.badge&&"badge-".concat(e.badge),e.pill&&"rounded-pill",e.dot&&"badge-dot",e.notification&&"badge-notification"]}));return{className:r,attrs:n,props:e}}},u=n("6b0d"),c=n.n(u);const h=c()(l,[["render",s]]);var d=h;function p(e,t,n,r,i,o){var s=Object(a["resolveDirective"])("mdb-ripple");return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{type:n.type,role:n.role,class:Object(a["normalizeClass"])(r.className),onClick:r.handleClick},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["type","role","class","onClick"])),[[s,n.ripple]])}n("caad"),n("99af"),n("d81d"),n("ac1f"),n("466d"),n("a9e3"),n("a15b"),n("1276");var f=["primary","secondary","success","danger","warning","info","light","dark"],m="rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%",g=[0,0,0],b=.5,v=function(e){return f.includes(e.toLowerCase())},y=function(e,t){var n=function(e){var t=7,n=e.length<t;return n&&(e="#".concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2]).concat(e[3]).concat(e[3])),[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]},r=function(e){var n=document.body.appendChild(document.createElement("fictum")),r="rgb(1, 2, 3)";return n.style.color=r,n.style.color!==r?t:(n.style.color=e,n.style.color===r||""===n.style.color?t:(e=getComputedStyle(n).color,document.body.removeChild(n),e))},i=function(e){return e=e.match(/[.\d]+/g).map((function(e){return+Number(e)})),e.length=3,e};return"transparent"===e.toLowerCase()?t:"#"===e[0]?n(e):(-1===e.indexOf("rgb")&&(e=r(e)),0===e.indexOf("rgb")?i(e):t)},x=function(e){var t=e.offsetX,n=e.offsetY,r=e.height,i=e.width,o=n<=r/2,a=t<=i/2,s=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},l=n===r/2&&t===i/2,u={first:!0===o&&!1===a,second:!0===o&&!0===a,third:!1===o&&!0===a,fourth:!1===o&&!1===a},c={topLeft:s(t,n),topRight:s(i-t,n),bottomLeft:s(t,r-n),bottomRight:s(i-t,r-n)},h=0;return l||u.fourth?h=c.topLeft:u.third?h=c.topRight:u.second?h=c.bottomRight:u.first&&(h=c.bottomLeft),2*h},w=function(e,t){for(var n in t)e.style[n]=t[n]},k=function(e){if(""!==e){var t=y(e,g).join(","),n=m.split("{{color}}").join("".concat(t));return"radial-gradient(circle, ".concat(n,")")}},_=function(e,t,n){var r=document.createElement("div");r.classList.add("ripple-wave");var i={offsetX:n.centered?t.height/2:t.left,offsetY:n.centered?t.width/2:t.top,height:t.height,width:t.width},o=x(i),a=n.radius||o/2,s={delay:n.duration*b,duration:n.duration-n.duration*b},l={left:n.centered?"".concat(Math.round(t.width/2-a),"px"):"".concat(Math.round(t.left-a),"px"),top:n.centered?"".concat(Math.round(t.height/2-a),"px"):"".concat(Math.round(t.top-a),"px"),height:"".concat(Math.round(2*n.radius||o),"px"),width:"".concat(Math.round(2*n.radius||o),"px"),transitionDelay:"0s, ".concat(s.delay,"ms"),transitionDuration:"".concat(n.duration,"ms, ").concat(s.duration,"ms")};n.unbound&&e.classList.add("ripple-surface-unbound"),v(n.color)?e.classList.add("ripple-surface-".concat(n.color)):l.backgroundImage=k(n.color),w(r,l),e.appendChild(r),setTimeout((function(){r.classList.add("active")}),50),setTimeout((function(){e.removeChild(r)}),n.duration+1e3)},S={mounted:function(e,t){if(!1!==t.value){var n={centered:t.value&&t.value.centered||!1,color:t.value&&t.value.color||"",duration:t.value&&t.value.duration||500,radius:t.value&&t.value.radius||0,unbound:t.value&&t.value.unbound||!1};e.classList.add("ripple-surface"),e.waves=function(t){var r={top:t.layerY,left:t.layerX,height:e.offsetHeight,width:e.offsetWidth};_(e,r,n)},e.addEventListener("click",e.waves)}},updated:function(e){e.classList.contains("ripple-surface")||e.classList.add("ripple-surface")},unmounted:function(e){e.removeEventListener("click",e.waves)}},C={name:"MDBBtn",props:{color:String,size:String,outline:String,rounded:Boolean,floating:Boolean,toggler:Boolean,toggle:Boolean,role:{type:String,default:"button"},type:{type:String,default:"button"},tag:{type:String,default:"button"},block:{type:Boolean,default:!1},ripple:{type:[Object,Boolean],default:function(e){return!e.outline&&"light"!==e.color&&"link"!==e.color||{color:"dark"}}},picker:Boolean},directives:{mdbRipple:S},emits:["update:toggle"],setup:function(e,t){var n=t.emit,r=Object(a["ref"])(e.toggle),i=Object(a["computed"])((function(){return[!e.picker&&"btn",e.color&&"btn-".concat(e.color),e.size&&"btn-".concat(e.size),e.outline&&"btn-outline-".concat(e.outline),e.rounded&&"btn-rounded",e.floating&&"btn-floating",e.block&&"btn-block",r.value&&"active"]}));function o(){e.toggler&&(r.value=!r.value,n("update:toggle",r.value))}return{className:i,props:e,handleClick:o}}};const I=c()(C,[["render",p]]);var O=I;function T(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className),role:n.role},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class","role"])}var N={name:"MDBBtnGroup",props:{size:String,vertical:Boolean,role:{type:String,default:"group"},tag:{type:String,default:"div"}},setup:function(e){var t=Object(a["computed"])((function(){return[e.size&&"btn-group-".concat(e.size),e.vertical?"btn-group-vertical":"btn-group"]}));return{className:t,props:e}}};const E=c()(N,[["render",T]]);var D=E;function $(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{class:Object(a["normalizeClass"])(r.className),"aria-label":"Close"},null,2)}var A={name:"MDBBtnClose",props:{white:{type:Boolean,default:!1}},setup:function(e){var t=Object(a["computed"])((function(){return["btn-close",e.white&&"btn-close-white"]}));return{className:t}}};const R=c()(A,[["render",$]]);var M=R;function F(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}n("498a");var P={name:"MDBCard",props:{tag:{type:String,default:"div"},border:{type:String},bg:{type:String},text:{type:[String,Array]},shadow:{type:String}},setup:function(e){var t=Object(a["computed"])((function(){return["card",e.border&&"border border-".concat(e.border),e.bg&&"bg-".concat(e.bg),e.shadow&&"shadow-".concat(e.shadow),e.text&&n(e.text)]})),n=function(e){return"string"===typeof e?"text-".concat(e):e.map((function(e){return"text-".concat(e).trim()})).join(" ")};return{className:t,props:e}}};const j=c()(P,[["render",F]]);var B=j;function L(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var z={name:"MDBCardBody",props:{tag:{type:String,default:"div"},text:{type:[String,Array]}},setup:function(e){var t=Object(a["computed"])((function(){return["card-body",e.text&&n(e.text)]})),n=function(e){return"string"===typeof e?"text-".concat(e):e.map((function(e){return"text-".concat(e).trim()})).join(" ")};return{className:t,props:e}}};const V=c()(z,[["render",L]]);var U=V;function W(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(r.tagName),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var H={name:"MDBCardTitle",props:{tag:{type:String,default:"h5"},subtitle:{type:Boolean,default:!1}},setup:function(e){var t=Object(a["computed"])((function(){return e.subtitle?"h5"!==e.tag?e.tag:"h6":e.tag})),n=Object(a["computed"])((function(){return[e.subtitle?"card-subtitle":"card-title"]}));return{className:n,tagName:t,props:e}}};const G=c()(H,[["render",W]]);var q=G;function Y(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var X={name:"MDBCardText",props:{tag:{type:String,default:"p"}},setup:function(e){var t=Object(a["computed"])((function(){return["card-text"]}));return{className:t,props:e}}};const K=c()(X,[["render",Y]]);var J=K;function Z(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),Object(a["mergeProps"])({src:n.src,alt:n.alt,class:r.className},e.$attrs),null,16,["src","alt","class"])),n.overlay?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Object(a["mergeProps"])({key:0,class:"card-img-overlay"},e.$attrs),[Object(a["renderSlot"])(e.$slots,"default")],16)):Object(a["createCommentVNode"])("",!0)],64)}var Q={name:"MDBCardImg",props:{tag:{type:String,default:"img"},src:{type:String,required:!0},alt:String,top:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},fluid:{type:Boolean,default:!1},overlay:{type:Boolean,default:!1}},setup:function(e){var t=Object(a["computed"])((function(){return[e.top&&"card-img-top",e.bottom&&"card-img-bottom",e.fluid&&"img-fluid",e.overlay&&"card-img",!e.top&&!e.bottom&&!e.fluid&&!e.overlay&&"card-img"]}));return{className:t,props:e}}};const ee=c()(Q,[["render",Z]]);var te=ee;function ne(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var re={name:"MDBCardHeader",props:{tag:{type:String,default:"div"},bg:String,border:String},setup:function(e){var t=Object(a["computed"])((function(){return["card-header",e.border&&"border-".concat(e.border),e.bg&&"bg-".concat(e.bg)]}));return{className:t,props:e}}};const ie=c()(re,[["render",ne]]);var oe=ie;function ae(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var se={name:"MDBCardFooter",props:{tag:{type:String,default:"div"},bg:String,border:String},setup:function(e){var t=Object(a["computed"])((function(){return["card-footer",e.border&&"border-".concat(e.border),e.bg&&"bg-".concat(e.bg)]}));return{className:t,props:e}}};const le=c()(se,[["render",ae]]);var ue=le;function ce(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var he={name:"MDBCardLink",props:{tag:{type:String,default:"a"}},setup:function(e){var t=Object(a["computed"])((function(){return["card-link"]}));return{className:t,props:e}}};const de=c()(he,[["render",ce]]);var pe=de;function fe(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var me={name:"MDBCardGroup",props:{tag:{type:String,default:"div"}},setup:function(e){var t=Object(a["computed"])((function(){return["card-group"]}));return{className:t,props:e}}};const ge=c()(me,[["render",fe]]);var be=ge,ve={key:0,class:"carousel-indicators"},ye=["aria-current","aria-label","onClick"],xe={key:0,class:"img-fluid",autoplay:"",loop:"",muted:""},we=["src","type"],ke=["src","alt"],_e={key:0},Se={key:1},Ce=Object(a["createElementVNode"])("span",{class:"carousel-control-prev-icon","aria-hidden":"true"},null,-1),Ie=Object(a["createElementVNode"])("span",{class:"visually-hidden"},"Previous",-1),Oe=[Ce,Ie],Te=Object(a["createElementVNode"])("span",{class:"carousel-control-next-icon","aria-hidden":"true"},null,-1),Ne=Object(a["createElementVNode"])("span",{class:"visually-hidden"},"Next",-1),Ee=[Te,Ne];function De(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className),onMouseenter:r.handleMouseenter,onMouseleave:r.handleMouseleave,onKeydown:[Object(a["withKeys"])(r.handleRight,["right"]),Object(a["withKeys"])(r.handleLeft,["left"])],onTouchstart:r.handleTouchstart,onTouchmove:r.handleTouchmove,onTouchend:r.handleTouchend},{default:Object(a["withCtx"])((function(){return[n.indicators?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ve,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(n.items,(function(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:t,type:"button",class:Object(a["normalizeClass"])(r.activeItemKey===t&&"active"),"aria-current":r.activeItemKey===t&&"true","aria-label":"Slide ".concat(t+1),onClick:function(e){return r.slideTo(t)}},null,10,ye)})),128))])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(r.innerClassName),ref:"carouselInnerRef"},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(n.items,(function(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"carousel-item",key:t},[e.video?(Object(a["openBlock"])(),Object(a["createElementBlock"])("video",xe,[Object(a["createElementVNode"])("source",{src:e.video,type:e.videoType},null,8,we)])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("img",{key:1,src:e.src,alt:e.alt,class:Object(a["normalizeClass"])(n.itemsClass)},null,10,ke)),e.label||e.caption?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:2,class:Object(a["normalizeClass"])(n.captionsClass)},[e.label?(Object(a["openBlock"])(),Object(a["createElementBlock"])("h5",_e,Object(a["toDisplayString"])(e.label),1)):Object(a["createCommentVNode"])("",!0),e.caption?(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",Se,Object(a["toDisplayString"])(e.caption),1)):Object(a["createCommentVNode"])("",!0)],2)):Object(a["createCommentVNode"])("",!0)])})),128))],2),n.controls?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:1,onClick:t[0]||(t[0]=function(){return r.prev&&r.prev.apply(r,arguments)}),class:"carousel-control-prev",type:"button"},Oe)):Object(a["createCommentVNode"])("",!0),n.controls?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:2,onClick:t[1]||(t[1]=function(){return r.next&&r.next.apply(r,arguments)}),class:"carousel-control-next",type:"button"},Ee)):Object(a["createCommentVNode"])("",!0)]})),_:1},40,["class","onMouseenter","onMouseleave","onKeydown","onTouchstart","onTouchmove","onTouchend"])}var $e={name:"MDBCarousel",props:{captionsClass:{type:String,default:"carousel-caption d-none d-md-block"},controls:{type:Boolean,default:!0},dark:Boolean,fade:Boolean,indicators:{type:Boolean,default:!0},interval:{type:[Number,Boolean],default:5e3},items:{type:Array,reguired:!0},itemsClass:{type:String,default:"d-block w-100"},keyboard:{type:Boolean,default:!0},modelValue:{type:Number,default:0},pause:{type:[String,Boolean],default:"hover"},tag:{type:String,default:"div"},touch:{type:Boolean,default:!0},innerClass:String},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,r=Object(a["computed"])((function(){return["carousel","slide",e.fade&&"carousel-fade",e.dark&&"carousel-dark"]})),i=Object(a["computed"])((function(){return["carousel-inner",e.innerClass]})),o=Object(a["ref"])(e.modelValue),s=Object(a["ref"])(null),l=Object(a["ref"])(!1),u=null,c=!1,h=function(){p("prev")},d=function(){p("next")},p=function(e){if(!l.value){var t=c;c=!1,f(e),c=t}},f=function(t){if(!c&&s.value){l.value=!0;var r=m(t),i=g(t),a=b(i),u=v(i),h=y(o.value),d=y(r);o.value=r,d.classList.add(u),n("update:modelValue",o.value),e.interval&&x(),setTimeout((function(){h.classList.add(a),d.classList.add(a)}),20),setTimeout((function(){h.classList.remove("active"),h.classList.remove(a),d.classList.remove(a),d.classList.remove(u),d.classList.add("active"),l.value=!1}),600)}},m=function(t){return"prev"===t&&o.value<=0?e.items.length-1:"prev"===t?o.value-1:"next"===t&&o.value>=e.items.length-1?0:"next"===t?o.value+1:t},g=function(e){return"next"===e||e>o.value},b=function(e){return e?"carousel-item-start":"carousel-item-end"},v=function(e){return e?"carousel-item-next":"carousel-item-prev"},y=function(e){return s.value.querySelectorAll(".carousel-item")[e]},x=function(){clearInterval(u),u=null;var t=e.items[o.value].interval||e.interval;u=setInterval((function(){f("next")}),t)},w=function(){"hover"===e.pause&&e.interval&&(clearInterval(u),u=null,c=!0)},k=function(){"hover"===e.pause&&e.interval&&(x(),c=!1)},_=function(){e.keyboard&&d()},S=function(){e.keyboard&&h()},C=Boolean(window.PointerEvent),I=Object(a["ref"])(0),O=Object(a["ref"])(0),T=function(t){e.touch&&(!C||"pen"!==t.pointerType&&"touch"!==t.pointerType?I.value=t.touches[0].clientX:I.value=t.clientX)},N=function(t){e.touch&&(O.value=t.touches&&t.touches.length>1?0:t.touches[0].clientX-I.value)},E=function(t){e.touch&&(!C||"pen"!==t.pointerType&&"touch"!==t.pointerType||(O.value=t.clientX-I.value),D())},D=function(){var e=Math.abs(O.value);if(!(e<=40)){var t=e/O.value;O.value=0,t&&(t>0?h():d())}};return Object(a["onMounted"])((function(){var t=s.value.querySelectorAll(".carousel-item")[o.value];t.classList.add("active"),e.interval&&x()})),Object(a["onUnmounted"])((function(){e.interval&&(clearInterval(u),u=null)})),Object(a["watch"])((function(){return e.modelValue}),(function(e){return p(e)})),{className:r,innerClassName:i,carouselInnerRef:s,activeItemKey:o,handleMouseenter:w,handleMouseleave:k,handleRight:_,handleLeft:S,handleTouchstart:T,handleTouchmove:N,handleTouchend:E,slideTo:p,next:d,prev:h}}};const Ae=c()($e,[["render",De]]);var Re=Ae;function Me(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}n("c96a");var Fe={name:"MDBListGroup",props:{flush:{type:Boolean,default:!1},horizontal:{type:[Boolean,String],default:!1},numbered:Boolean,tag:{type:String,default:"ul"},light:{type:Boolean,default:!1},small:{type:Boolean,default:!1}},setup:function(e){var t=Object(a["computed"])((function(){return["list-group",e.horizontal&&n.value,e.flush&&"list-group-flush",e.numbered&&"list-group-numbered",e.light&&"list-group-light",e.small&&"list-group-small"]})),n=Object(a["computed"])((function(){if(e.horizontal)return!0!==e.horizontal?"list-group-horizontal-".concat(e.horizontal):"list-group-horizontal"}));return{className:t,props:e}}};const Pe=c()(Fe,[["render",Me]]);var je=Pe;function Be(e,t,n,r,i,o){var s=Object(a["resolveDirective"])("mdb-ripple");return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className),"aria-current":!!n.active||null,"aria-disabled":!!n.disabled||null,disabled:!!n.disabled||null},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class","aria-current","aria-disabled","disabled"])),[[s,r.props.ripple]])}var Le={name:"MDBListGroupItem",props:{tag:{type:String,default:"li"},active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},action:{type:Boolean,default:!1},color:String,noBorder:{type:Boolean,default:!1},spacing:{type:[Boolean,String],default:!1},ripple:{type:[Object,Boolean],default:!1}},directives:{mdbRipple:S},setup:function(e){var t=Object(a["computed"])((function(){if(e.spacing)return!0!==e.spacing?e.spacing:"px-3"})),n=Object(a["computed"])((function(){return["list-group-item",e.active&&"active",e.disabled&&"disabled",e.action&&"list-group-item-action",e.color&&"list-group-item-".concat(e.color),e.noBorder&&"border-0",e.spacing&&t.value]}));return{className:n,props:e}}};const ze=c()(Le,[["render",Be]]);var Ve=ze;function Ue(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className),style:Object(a["normalizeStyle"])(r.style)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class","style"])}var We={name:"MDBProgress",props:{tag:{type:String,default:"div"},height:Number},setup:function(e){var t=Object(a["computed"])((function(){return["progress"]})),n=Object(a["computed"])((function(){return{height:e.height+"px"}}));return{className:t,style:n,props:e}}};const He=c()(We,[["render",Ue]]);var Ge=He;function qe(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className),role:"progressbar","aria-valuenow":n.value,"aria-valuemin":n.min,"aria-valuemax":n.max,style:Object(a["normalizeStyle"])([{width:(n.value-n.min)/(n.max-n.min)*100+"%"}])},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class","aria-valuenow","aria-valuemin","aria-valuemax","style"])}var Ye={name:"MDBProgressBar",props:{tag:{type:String,default:"div"},bg:String,striped:{type:Boolean,default:!1},animated:{type:Boolean,default:!1},value:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100}},setup:function(e){var t=Object(a["computed"])((function(){return["progress-bar",e.bg&&"bg-".concat(e.bg),e.striped&&"progress-bar-striped",e.animated&&"progress-bar-animated"]}));return{className:t,props:e}}};const Xe=c()(Ye,[["render",qe]]);var Ke=Xe,Je=Object(a["createElementVNode"])("span",{class:"visually-hidden"},"Loading...",-1);function Ze(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className),role:"status"},{default:Object(a["withCtx"])((function(){return[Je,Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var Qe={name:"MDBSpinner",props:{tag:{type:String,default:"div"},grow:{type:Boolean,default:!1},color:String,size:String},setup:function(e){var t=Object(a["computed"])((function(){return[e.grow?"spinner-grow":"spinner-border",e.color&&"text-".concat(e.color),"".concat(e.size?e.grow?"spinner-grow-"+e.size:"spinner-border-"+e.size:"")]}));return{className:t,props:e}}};const et=c()(Qe,[["render",Ze]]);var tt=et;function nt(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(a["Transition"],{onBeforeEnter:r.beforeEnter,onEnter:r.enter,onAfterEnter:r.afterEnter,onBeforeLeave:r.beforeLeave,onLeave:r.leave,onAfterLeave:r.afterLeave,"enter-active-class":"collapsing","leave-active-class":"collapsing show",duration:n.duration},{default:Object(a["withCtx"])((function(){return[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className),id:r.uid,ref:"collapse"},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class","id"])),[[a["vShow"],r.isActive]])]})),_:3},8,["onBeforeEnter","onEnter","onAfterEnter","onBeforeLeave","onLeave","onAfterLeave","duration"])}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function it(e){if(Array.isArray(e))return rt(e)}function ot(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function at(e,t){if(e){if("string"===typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rt(e,t):void 0}}function st(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lt(e){return it(e)||ot(e)||at(e)||st()}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("e260"),n("3ca3"),n("ddb0"),n("a630"),n("fb6a"),n("b0c0"),n("00b4"),n("d9e2"),n("4de4");var ut=1e6,ct=function(e){do{e+=Math.floor(Math.random()*ut)}while(document.getElementById(e));return e};function ht(e){if(Array.isArray(e))return e}function dt(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(l){s=!0,i=l}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function pt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ft(e,t){return ht(e)||dt(e,t)||at(e,t)||pt()}n("5319");var mt=/\..*/,gt={mouseenter:"mouseover",mouseleave:"mouseout"},bt=["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"];function vt(e,t,n){var r="string"===typeof t,i=r?n:t,o=e.replace(mt,""),a=gt[o];a&&(o=a);var s=bt.indexOf(o)>-1;return s||(o=e),[r,i,o]}function yt(e,t,n,r){if("string"===typeof t&&e){n||(n=r,r=null);var i=vt(t,n,r),o=ft(i,3),a=o[0],s=o[1],l=o[2];e.addEventListener(l,s,a)}}function xt(e,t,n,r){e.removeEventListener(t,n,!!r)}var wt=function(e,t,n,r){yt(e,t,n,r)},kt=function(e,t,n,r){if("string"===typeof t&&e){var i=vt(t,n,r),o=ft(i,3),a=o[0],s=o[1],l=o[2];xt(e,l,s,a?n:null)}},_t={name:"MDBCollapse",props:{tag:{type:String,default:"div"},modelValue:Boolean,id:String,collapseClass:String,duration:{type:Number,default:300},sidenav:{type:Boolean,default:!1}},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,r=Object(a["ref"])(null),i=Object(a["ref"])(e.modelValue),o=Object(a["computed"])((function(){return[s.value,e.collapseClass,m.value?"navbar-collapse":"",g.value]})),s=Object(a["computed"])((function(){return e.sidenav?"sidenav-collapse":i.value?"collapse":null})),l=Object(a["inject"])("accordionState",null),u=Object(a["inject"])("incrementAccordionItemsCount",!1),c=Object(a["inject"])("setAccordionActiveItem",!1),h=Object(a["ref"])(null),d=function(){null!==h.value&&i.value&&c(h.value)};Object(a["watchEffect"])((function(){l&&l.active!==h.value&&n("update:modelValue",!1)}),{flush:"post"}),Object(a["onMounted"])((function(){i.value&&(r.value.style.height=r.value.scrollHeight+"px"),l&&(h.value=u(),i.value&&c(h.value))}));var p=!1;Object(a["watch"])((function(){return e.modelValue}),(function(t,r){p?setTimeout((function(){n("update:modelValue",r)}),e.duration):(i.value=t,l&&d())}));var f=function(){n("update:modelValue",!0)};Object(a["provide"])("openCollapse",f);var m=Object(a["inject"])("navbarFlexWrapValue",!1),g=Object(a["computed"])((function(){return!m||"wrap"===m.value&&i.value?"show":("nowrap"===m&&i.value,!1)})),b=function(t,n){"null"===n&&e.modelValue?i.value=!0:"null"!==n||e.modelValue?"nowrap"===n&&(i.value=!1):i.value=!1};Object(a["watch"])((function(){return m.value}),(function(e,t){"nowrap"===e?i.value=!0:"wrap"===e&&b(e,t),n("update:modelValue",i.value)}),{immediate:!0});var v=Object(a["computed"])((function(){return e.id?e.id:ct("collapsibleContent-")})),y=function(e){e.style.height="0",p=!0},x=function(e){e.style.height=r.value.scrollHeight+"px"},w=function(e){e.classList.contains("show")||e.classList.add("show"),e.style.height="",p=!1},k=function(e){e.style.height||(e.classList.add("show"),e.style.height=r.value.scrollHeight+"px"),p=!0},_=function(e){e.style.height="0px"},S=function(e){e.classList.add("collapse"),p=!1},C=Object(a["ref"])(null),I=Object(a["ref"])(!1),O=function(){var e=lt(document.getElementById(v.value).childNodes).filter((function(e){return""!=e.textContent.trim()}));return e.reduce((function(e,t){return e+T(t)}),0)},T=function(e){var t=e.offsetHeight;if(t){var n=window.getComputedStyle(e);return["top","bottom"].map((function(e){return parseInt(n["margin-".concat(e)])})).reduce((function(e,t){return e+t}),t)}if(document.createRange){var r=document.createRange();if(r.selectNodeContents(e),r.getBoundingClientRect){var i=r.getBoundingClientRect();if(i)return i.bottom-i.top}}},N=function(){if(i.value&&!I.value){I.value=!0;var e=window.innerWidth,t=O();r.value.style.height="".concat(t,"px"),C.value=e,setTimeout((function(){I.value=!1}),100)}};return Object(a["onMounted"])((function(){C.value=window.innerWidth,wt(window,"resize",N)})),Object(a["onUnmounted"])((function(){kt(window,"resize",N)})),{navbarFlexWrapValue:m,collapse:r,className:o,isActive:i,uid:v,beforeEnter:y,enter:x,afterEnter:w,beforeLeave:k,leave:_,afterLeave:S,props:e}}};const St=c()(_t,[["render",nt]]);var Ct=St;function It(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className),ref:"root"},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(n),!0).forEach((function(t){Ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Et(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Dt(e){var t=Et(e).Element;return e instanceof t||e instanceof Element}function $t(e){var t=Et(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function At(e){if("undefined"===typeof ShadowRoot)return!1;var t=Et(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}n("b64b"),n("e439"),n("159b"),n("dbb4"),n("2532"),n("25eb");var Rt=Math.max,Mt=Math.min,Ft=Math.round;function Pt(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,i=1;if($t(e)&&t){var o=e.offsetHeight,a=e.offsetWidth;a>0&&(r=Ft(n.width)/a||1),o>0&&(i=Ft(n.height)/o||1)}return{width:n.width/r,height:n.height/i,top:n.top/i,right:n.right/r,bottom:n.bottom/i,left:n.left/r,x:n.left/r,y:n.top/i}}function jt(e){var t=Et(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Bt(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Lt(e){return e!==Et(e)&&$t(e)?Bt(e):jt(e)}function zt(e){return e?(e.nodeName||"").toLowerCase():null}function Vt(e){return((Dt(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ut(e){return Pt(Vt(e)).left+jt(e).scrollLeft}function Wt(e){return Et(e).getComputedStyle(e)}function Ht(e){var t=Wt(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Gt(e){var t=e.getBoundingClientRect(),n=Ft(t.width)/e.offsetWidth||1,r=Ft(t.height)/e.offsetHeight||1;return 1!==n||1!==r}function qt(e,t,n){void 0===n&&(n=!1);var r=$t(t),i=$t(t)&&Gt(t),o=Vt(t),a=Pt(e,i),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==zt(t)||Ht(o))&&(s=Lt(t)),$t(t)?(l=Pt(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=Ut(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function Yt(e){var t=Pt(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Xt(e){return"html"===zt(e)?e:e.assignedSlot||e.parentNode||(At(e)?e.host:null)||Vt(e)}function Kt(e){return["html","body","#document"].indexOf(zt(e))>=0?e.ownerDocument.body:$t(e)&&Ht(e)?e:Kt(Xt(e))}function Jt(e,t){var n;void 0===t&&(t=[]);var r=Kt(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=Et(r),a=i?[o].concat(o.visualViewport||[],Ht(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(Jt(Xt(a)))}function Zt(e){return["table","td","th"].indexOf(zt(e))>=0}function Qt(e){return $t(e)&&"fixed"!==Wt(e).position?e.offsetParent:null}function en(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),n=-1!==navigator.userAgent.indexOf("Trident");if(n&&$t(e)){var r=Wt(e);if("fixed"===r.position)return null}var i=Xt(e);At(i)&&(i=i.host);while($t(i)&&["html","body"].indexOf(zt(i))<0){var o=Wt(i);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||t&&"filter"===o.willChange||t&&o.filter&&"none"!==o.filter)return i;i=i.parentNode}return null}function tn(e){var t=Et(e),n=Qt(e);while(n&&Zt(n)&&"static"===Wt(n).position)n=Qt(n);return n&&("html"===zt(n)||"body"===zt(n)&&"static"===Wt(n).position)?t:n||en(e)||t}var nn="top",rn="bottom",on="right",an="left",sn="auto",ln=[nn,rn,on,an],un="start",cn="end",hn="clippingParents",dn="viewport",pn="popper",fn="reference",mn=ln.reduce((function(e,t){return e.concat([t+"-"+un,t+"-"+cn])}),[]),gn=[].concat(ln,[sn]).reduce((function(e,t){return e.concat([t,t+"-"+un,t+"-"+cn])}),[]),bn="beforeRead",vn="read",yn="afterRead",xn="beforeMain",wn="main",kn="afterMain",_n="beforeWrite",Sn="write",Cn="afterWrite",In=[bn,vn,yn,xn,wn,kn,_n,Sn,Cn];function On(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name);var o=[].concat(e.requires||[],e.requiresIfExists||[]);o.forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function Tn(e){var t=On(e);return In.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}function Nn(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}function En(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}var Dn={placement:"bottom",modifiers:[],strategy:"absolute"};function $n(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function An(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?Dn:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},Dn,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],s=!1,l={state:i,setOptions:function(n){var a="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},o,i.options,a),i.scrollParents={reference:Dt(e)?Jt(e):e.contextElement?Jt(e.contextElement):[],popper:Jt(t)};var s=Tn(En([].concat(r,i.options.modifiers)));return i.orderedModifiers=s.filter((function(e){return e.enabled})),u(),l.update()},forceUpdate:function(){if(!s){var e=i.elements,t=e.reference,n=e.popper;if($n(t,n)){i.rects={reference:qt(t,tn(n),"fixed"===i.options.strategy),popper:Yt(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],a=o.fn,u=o.options,c=void 0===u?{}:u,h=o.name;"function"===typeof a&&(i=a({state:i,options:c,name:h,instance:l})||i)}else i.reset=!1,r=-1}}},update:Nn((function(){return new Promise((function(e){l.forceUpdate(),e(i)}))})),destroy:function(){c(),s=!0}};if(!$n(e,t))return l;function u(){i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var s=o({state:i,name:t,instance:l,options:r}),u=function(){};a.push(s||u)}}))}function c(){a.forEach((function(e){return e()})),a=[]}return l.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var Rn={passive:!0};function Mn(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=Et(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach((function(e){e.addEventListener("scroll",n.update,Rn)})),s&&l.addEventListener("resize",n.update,Rn),function(){o&&u.forEach((function(e){e.removeEventListener("scroll",n.update,Rn)})),s&&l.removeEventListener("resize",n.update,Rn)}}var Fn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Mn,data:{}};function Pn(e){return e.split("-")[0]}function jn(e){return e.split("-")[1]}function Bn(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ln(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?Pn(i):null,a=i?jn(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case nn:t={x:s,y:n.y-r.height};break;case rn:t={x:s,y:n.y+n.height};break;case on:t={x:n.x+n.width,y:l};break;case an:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var u=o?Bn(o):null;if(null!=u){var c="y"===u?"height":"width";switch(a){case un:t[u]=t[u]-(n[c]/2-r[c]/2);break;case cn:t[u]=t[u]+(n[c]/2-r[c]/2);break;default:}}return t}function zn(e){var t=e.state,n=e.name;t.modifiersData[n]=Ln({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var Vn={name:"popperOffsets",enabled:!0,phase:"read",fn:zn,data:{}},Un={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Wn(e){var t=e.x,n=e.y,r=window,i=r.devicePixelRatio||1;return{x:Ft(t*i)/i||0,y:Ft(n*i)/i||0}}function Hn(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,h=e.isFixed,d=a.x,p=void 0===d?0:d,f=a.y,m=void 0===f?0:f,g="function"===typeof c?c({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var b=a.hasOwnProperty("x"),v=a.hasOwnProperty("y"),y=an,x=nn,w=window;if(u){var k=tn(n),_="clientHeight",S="clientWidth";if(k===Et(n)&&(k=Vt(n),"static"!==Wt(k).position&&"absolute"===s&&(_="scrollHeight",S="scrollWidth")),i===nn||(i===an||i===on)&&o===cn){x=rn;var C=h&&k===w&&w.visualViewport?w.visualViewport.height:k[_];m-=C-r.height,m*=l?1:-1}if(i===an||(i===nn||i===rn)&&o===cn){y=on;var I=h&&k===w&&w.visualViewport?w.visualViewport.width:k[S];p-=I-r.width,p*=l?1:-1}}var O,T=Object.assign({position:s},u&&Un),N=!0===c?Wn({x:p,y:m}):{x:p,y:m};return p=N.x,m=N.y,l?Object.assign({},T,(O={},O[x]=v?"0":"",O[y]=b?"0":"",O.transform=(w.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",O)):Object.assign({},T,(t={},t[x]=v?m+"px":"",t[y]=b?p+"px":"",t.transform="",t))}function Gn(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,u={placement:Pn(t.placement),variation:jn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Hn(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Hn(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var qn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Gn,data:{}};function Yn(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];$t(i)&&zt(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))}function Xn(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]),a=o.reduce((function(e,t){return e[t]="",e}),{});$t(r)&&zt(r)&&(Object.assign(r.style,a),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}}var Kn={name:"applyStyles",enabled:!0,phase:"write",fn:Yn,effect:Xn,requires:["computeStyles"]};function Jn(e,t,n){var r=Pn(e),i=[an,nn].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[an,on].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}function Zn(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,a=gn.reduce((function(e,n){return e[n]=Jn(n,t.rects,o),e}),{}),s=a[t.placement],l=s.x,u=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=a}var Qn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Zn},er={left:"right",right:"left",bottom:"top",top:"bottom"};function tr(e){return e.replace(/left|right|bottom|top/g,(function(e){return er[e]}))}var nr={start:"end",end:"start"};function rr(e){return e.replace(/start|end/g,(function(e){return nr[e]}))}function ir(e){var t=Et(e),n=Vt(e),r=t.visualViewport,i=n.clientWidth,o=n.clientHeight,a=0,s=0;return r&&(i=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,s=r.offsetTop)),{width:i,height:o,x:a+Ut(e),y:s}}function or(e){var t,n=Vt(e),r=jt(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=Rt(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Rt(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+Ut(e),l=-r.scrollTop;return"rtl"===Wt(i||n).direction&&(s+=Rt(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}function ar(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&At(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function sr(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function lr(e){var t=Pt(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function ur(e,t){return t===dn?sr(ir(e)):Dt(t)?lr(t):sr(or(Vt(e)))}function cr(e){var t=Jt(Xt(e)),n=["absolute","fixed"].indexOf(Wt(e).position)>=0,r=n&&$t(e)?tn(e):e;return Dt(r)?t.filter((function(e){return Dt(e)&&ar(e,r)&&"body"!==zt(e)})):[]}function hr(e,t,n){var r="clippingParents"===t?cr(e):[].concat(t),i=[].concat(r,[n]),o=i[0],a=i.reduce((function(t,n){var r=ur(e,n);return t.top=Rt(r.top,t.top),t.right=Mt(r.right,t.right),t.bottom=Mt(r.bottom,t.bottom),t.left=Rt(r.left,t.left),t}),ur(e,o));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function dr(){return{top:0,right:0,bottom:0,left:0}}function pr(e){return Object.assign({},dr(),e)}function fr(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function mr(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.boundary,a=void 0===o?hn:o,s=n.rootBoundary,l=void 0===s?dn:s,u=n.elementContext,c=void 0===u?pn:u,h=n.altBoundary,d=void 0!==h&&h,p=n.padding,f=void 0===p?0:p,m=pr("number"!==typeof f?f:fr(f,ln)),g=c===pn?fn:pn,b=e.rects.popper,v=e.elements[d?g:c],y=hr(Dt(v)?v:v.contextElement||Vt(e.elements.popper),a,l),x=Pt(e.elements.reference),w=Ln({reference:x,element:b,strategy:"absolute",placement:i}),k=sr(Object.assign({},b,w)),_=c===pn?k:x,S={top:y.top-_.top+m.top,bottom:_.bottom-y.bottom+m.bottom,left:y.left-_.left+m.left,right:_.right-y.right+m.right},C=e.modifiersData.offset;if(c===pn&&C){var I=C[i];Object.keys(S).forEach((function(e){var t=[on,rn].indexOf(e)>=0?1:-1,n=[nn,rn].indexOf(e)>=0?"y":"x";S[e]+=I[n]*t}))}return S}function gr(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=void 0===l?gn:l,c=jn(r),h=c?s?mn:mn.filter((function(e){return jn(e)===c})):ln,d=h.filter((function(e){return u.indexOf(e)>=0}));0===d.length&&(d=h);var p=d.reduce((function(t,n){return t[n]=mr(e,{placement:n,boundary:i,rootBoundary:o,padding:a})[Pn(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}function br(e){if(Pn(e)===sn)return[];var t=tr(e);return[rr(e),t,rr(t)]}function vr(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,u=n.padding,c=n.boundary,h=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,b=Pn(g),v=b===g,y=l||(v||!f?[tr(g)]:br(g)),x=[g].concat(y).reduce((function(e,n){return e.concat(Pn(n)===sn?gr(t,{placement:n,boundary:c,rootBoundary:h,padding:u,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),w=t.rects.reference,k=t.rects.popper,_=new Map,S=!0,C=x[0],I=0;I<x.length;I++){var O=x[I],T=Pn(O),N=jn(O)===un,E=[nn,rn].indexOf(T)>=0,D=E?"width":"height",$=mr(t,{placement:O,boundary:c,rootBoundary:h,altBoundary:d,padding:u}),A=E?N?on:an:N?rn:nn;w[D]>k[D]&&(A=tr(A));var R=tr(A),M=[];if(o&&M.push($[T]<=0),s&&M.push($[A]<=0,$[R]<=0),M.every((function(e){return e}))){C=O,S=!1;break}_.set(O,M)}if(S)for(var F=f?3:1,P=function(e){var t=x.find((function(t){var n=_.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return C=t,"break"},j=F;j>0;j--){var B=P(j);if("break"===B)break}t.placement!==C&&(t.modifiersData[r]._skip=!0,t.placement=C,t.reset=!0)}}var yr={name:"flip",enabled:!0,phase:"main",fn:vr,requiresIfExists:["offset"],data:{_skip:!1}};function xr(e){return"x"===e?"y":"x"}function wr(e,t,n){return Rt(e,Mt(t,n))}function kr(e,t,n){var r=wr(e,t,n);return r>n?n:r}function _r(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,h=n.padding,d=n.tether,p=void 0===d||d,f=n.tetherOffset,m=void 0===f?0:f,g=mr(t,{boundary:l,rootBoundary:u,padding:h,altBoundary:c}),b=Pn(t.placement),v=jn(t.placement),y=!v,x=Bn(b),w=xr(x),k=t.modifiersData.popperOffsets,_=t.rects.reference,S=t.rects.popper,C="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,I="number"===typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),O=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,T={x:0,y:0};if(k){if(o){var N,E="y"===x?nn:an,D="y"===x?rn:on,$="y"===x?"height":"width",A=k[x],R=A+g[E],M=A-g[D],F=p?-S[$]/2:0,P=v===un?_[$]:S[$],j=v===un?-S[$]:-_[$],B=t.elements.arrow,L=p&&B?Yt(B):{width:0,height:0},z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:dr(),V=z[E],U=z[D],W=wr(0,_[$],L[$]),H=y?_[$]/2-F-W-V-I.mainAxis:P-W-V-I.mainAxis,G=y?-_[$]/2+F+W+U+I.mainAxis:j+W+U+I.mainAxis,q=t.elements.arrow&&tn(t.elements.arrow),Y=q?"y"===x?q.clientTop||0:q.clientLeft||0:0,X=null!=(N=null==O?void 0:O[x])?N:0,K=A+H-X-Y,J=A+G-X,Z=wr(p?Mt(R,K):R,A,p?Rt(M,J):M);k[x]=Z,T[x]=Z-A}if(s){var Q,ee="x"===x?nn:an,te="x"===x?rn:on,ne=k[w],re="y"===w?"height":"width",ie=ne+g[ee],oe=ne-g[te],ae=-1!==[nn,an].indexOf(b),se=null!=(Q=null==O?void 0:O[w])?Q:0,le=ae?ie:ne-_[re]-S[re]-se+I.altAxis,ue=ae?ne+_[re]+S[re]-se-I.altAxis:oe,ce=p&&ae?kr(le,ne,ue):wr(p?le:ie,ne,p?ue:oe);k[w]=ce,T[w]=ce-ne}t.modifiersData[r]=T}}var Sr={name:"preventOverflow",enabled:!0,phase:"main",fn:_r,requiresIfExists:["offset"]},Cr=function(e,t){return e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e,pr("number"!==typeof e?e:fr(e,ln))};function Ir(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=Pn(n.placement),l=Bn(s),u=[an,on].indexOf(s)>=0,c=u?"height":"width";if(o&&a){var h=Cr(i.padding,n),d=Yt(o),p="y"===l?nn:an,f="y"===l?rn:on,m=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],g=a[l]-n.rects.reference[l],b=tn(o),v=b?"y"===l?b.clientHeight||0:b.clientWidth||0:0,y=m/2-g/2,x=h[p],w=v-d[c]-h[f],k=v/2-d[c]/2+y,_=wr(x,k,w),S=l;n.modifiersData[r]=(t={},t[S]=_,t.centerOffset=_-k,t)}}function Or(e){var t=e.state,n=e.options,r=n.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"!==typeof i||(i=t.elements.popper.querySelector(i),i))&&ar(t.elements.popper,i)&&(t.elements.arrow=i)}var Tr={name:"arrow",enabled:!0,phase:"main",fn:Ir,effect:Or,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Nr(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Er(e){return[nn,on,rn,an].some((function(t){return e[t]>=0}))}function Dr(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=mr(t,{elementContext:"reference"}),s=mr(t,{altBoundary:!0}),l=Nr(a,r),u=Nr(s,i,o),c=Er(l),h=Er(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}var $r={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Dr},Ar=[Fn,Vn,qn,Kn,Qn,yr,Sr,Tr,$r],Rr=An({defaultModifiers:Ar});function Mr(){var e=Object(a["ref"])(!1),t=Object(a["ref"])(null),n=Object(a["ref"])(null),r=Object(a["ref"])(void 0),i=Object(a["reactive"])({});function o(e,r,o){t.value=e,n.value=r,i.value=Nt({placement:"bottom",modifiers:[{name:"offset",options:{offset:[0,0]}}]},o)}function s(){e.value=!e.value,e.value&&Object(a["nextTick"])((function(){return c()}))}function l(){e.value||(e.value=!0,Object(a["nextTick"])((function(){return r.value=c()})))}function u(){e.value&&(e.value=!e.value)}function c(){void 0!==r.value&&r.value?r.value.update():r.value=Rr(t.value,n.value,i.value)}function h(e,o){i.value[e]=o,r.value=Rr(t.value,n.value,i.value)}function d(){r.value&&(r.value.destroy(),r.value=void 0)}function p(e,t){return"string"===typeof e?e.split(",").map((function(e){return Number.parseInt(e,10)})):"function"===typeof e?function(n){return e(n,t)}:e}return{setPopper:o,togglePopper:s,isPopperActive:e,openPopper:l,closePopper:u,updatePopper:h,destroyPopper:d,getPopperOffset:p}}var Fr=Mr,Pr=function(e,t){var n={none:{width:0,attr:null},sm:{width:576,attr:null},md:{width:768,attr:null},lg:{width:992,attr:null},xl:{width:1200,attr:null},xxl:{width:1400,attr:null},mega:{width:1e4,attr:null}};t.forEach((function(e){var t=Object.keys(n).filter((function(t){return!!e.includes(t)&&t}))[0];t?n[t].attr=e:n.none.attr=e}));var r={};Object.keys(n).reduce((function(e,t,i){return n[e].attr&&n[t].attr||n[e].attr&&!t?(r[n[e].attr]={min:n[e].width,max:n[t].width},t):n[e].attr&&!n[t].attr?(i===Object.keys(n).length-1&&(r[n[e].attr]={min:n[e].width,max:n[t].width}),e):void 0}));var i=Object.keys(r).filter((function(t){if(e>r[t].min&&e<r[t].max)return t}))[0];return i},jr={name:"MDBDropdown",props:{tag:{type:String,default:"div"},boundary:{type:String,default:"clippingParent"},btnGroup:{type:Boolean,default:!1},dropup:{type:Boolean,default:!1},dropend:{type:Boolean,default:!1},dropstart:{type:Boolean,default:!1},align:{type:[String,Array],default:"start"},offset:{type:[Array,String,Function],default:function(){return[0,0]}},popperConfig:[null,Object,Function],target:String,modelValue:Boolean},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,r=Object(a["computed"])((function(){return[e.btnGroup?"btn-group":"dropdown",e.dropup&&"dropup",e.dropend&&"dropend",e.dropstart&&"dropstart"]})),i=Fr(),o=i.setPopper,s=i.isPopperActive,l=i.closePopper,u=i.openPopper,c=i.updatePopper,h=i.getPopperOffset,d=Object(a["ref"])("root"),p=Object(a["ref"])(null),f=Object(a["ref"])(null),m=Object(a["ref"])(window.innerWidth),g=Object(a["ref"])("");Object(a["provide"])("menuAlignClasses",g),Object(a["provide"])("closePopper",l);var b=Object(a["ref"])(e.modelValue);Object(a["watchEffect"])((function(){return b.value=e.modelValue})),Object(a["provide"])("isActive",b);var v=Object(a["ref"])(!1),y=Object(a["ref"])(null),x=function(e,t){v.value=e,y.value=t};Object(a["provide"])("setMenuMountedState",x);var w=function(e){e?(C(),u()):l()};Object(a["watch"])((function(){return v.value}),(function(e){return w(e)}),{immediate:!0}),Object(a["provide"])("isPopperActive",s),Object(a["provide"])("externalTarget",e.target);var k=function(){n("update:modelValue",!1)};Object(a["provide"])("handleEscAndOutsideClick",k);var _=e.dropup?"top":e.dropend?"right":e.dropstart?"left":"bottom",S=function(){"string"===typeof e.align?g.value="dropdown-menu-".concat(e.align):g.value=e.align.map((function(e){return"dropdown-menu-".concat(e).trim()}));var t=e.align;("string"!==typeof e.align||"start"!==e.align&&"end"!==e.align)&&(t=I(),wt(window,"resize",O));var n="".concat(_,"-").concat(t),r=document.querySelector(e.boundary);r||(r=e.boundary);var i={placement:n,modifiers:[{name:"preventOverflow",options:{boundary:r}},{name:"offset",options:{offset:h(e.offset,d.value)}}]};return Nt(Nt({},i),"function"===typeof e.popperConfig?e.popperConfig(i):e.popperConfig)},C=function(){p.value=e.target?document.querySelector(e.target):d.value.querySelector("[data-trigger]"),f.value=y.value;var t=S();o(p.value,f.value,t)},I=function(){m.value=window.innerWidth;var t=e.align;"string"===typeof e.align&&(t=["start",e.align]);var n=Pr(m.value,t);if(n)return n.includes("start")?"start":"end"},O=function(){var e=I();c("placement","".concat(_,"-").concat(e))};return Object(a["onUnmounted"])((function(){kt(window,"resize",O)})),{className:r,root:d,props:e}}};const Br=c()(jr,[["render",It]]);var Lr=Br,zr={key:1,class:"visually-hidden"};function Vr(e,t,n,r,i,o){var s=Object(a["resolveDirective"])("mdb-click-outside");return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{type:"button",class:Object(a["normalizeClass"])(r.className),"aria-expanded":r.expanded,"aria-haspopup":"true",onClick:r.toggle,"data-trigger":""},{default:Object(a["withCtx"])((function(){return[n.split?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",zr,"Toggle Dropdown")):Object(a["renderSlot"])(e.$slots,"default",{key:0})]})),_:3},8,["class","aria-expanded","onClick"])),[[s,r.handleClickOutside]])}var Ur={stopProp:function(e){e.stopPropagation()},mounted:function(e,t){var n=function(n){e.contains(n.target)||e===n.target||t.value(n)};e.clickOutside=n;var r=t.modifiers.mousedown?"mousedown":"click";document.addEventListener(r,e.clickOutside),document.addEventListener("touchstart",e.clickOutside)},unmounted:function(e,t){if(e.clickOutside){var n=t.modifiers.mousedown?"mousedown":"click";document.removeEventListener(n,e.clickOutside),document.removeEventListener("touchstart",e.clickOutside),delete e.clickOutside}}},Wr={name:"MDBDropdownToggle",components:{MDBBtn:O},emits:["toggle-dropdown"],props:Nt(Nt({},O.props),{},{tag:{type:String,default:"button"},href:[String,null],split:{type:Boolean,default:!1}}),directives:{mdbClickOutside:Ur},setup:function(e){var t=Object(a["computed"])((function(){return[n.value,"dropdown-toggle",e.split&&"dropdown-toggle-split",e.size&&"btn-".concat(e.size),e.outline&&"btn-outline-".concat(e.outline)]})),n=Object(a["computed"])((function(){if("button"===e.tag){var t=e.color&&!e.outline?"btn-".concat(e.color):e.outline?"":"btn-primary";return"btn ".concat(t)}})),r=Object(a["ref"])(!1),i=function(){r.value=!r.value},o=Object(a["inject"])("isPopperActive",!1);Object(a["watchEffect"])((function(){r.value=o.value}));var s=Object(a["inject"])("handleEscAndOutsideClick",!1),l=function(e){o&&!e.target.closest(".dropdown-menu")&&s()};return{className:t,expanded:r,toggle:i,handleClickOutside:l,props:e}}};const Hr=c()(Wr,[["render",Vr]]);var Gr=Hr;function qr(e,t,n,r,i,o){return r.shouldTeleport?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Teleport"],{key:1,to:r.externalTarget},[Object(a["createVNode"])(a["Transition"],null,{default:Object(a["withCtx"])((function(){return[r.isMounted?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),Object(a["mergeProps"])({key:0,class:r.className,style:r.staticStyle},e.$attrs,{"data-popper":r.externalTarget,ref:"root"}),{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},16,["class","style","data-popper"])):Object(a["createCommentVNode"])("",!0)]})),_:3})],8,["to"])):(Object(a["openBlock"])(),Object(a["createBlock"])(a["Transition"],{key:0},{default:Object(a["withCtx"])((function(){return[r.isMounted?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),Object(a["mergeProps"])({key:0,class:r.className,style:r.staticStyle},e.$attrs,{"data-popper":"",ref:"root"}),{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},16,["class","style"])):Object(a["createCommentVNode"])("",!0)]})),_:3}))}var Yr={name:"MDBDropdownMenu",inheritAttrs:!1,props:{tag:{type:String,default:"ul"},fadeIn:{type:String,default:"fade-in"},fadeOut:{type:String,default:"fade-out"},animation:{type:Boolean,default:!0},dark:{type:Boolean,default:!1},static:{type:Boolean,default:!1}},setup:function(e){var t=Object(a["computed"])((function(){return["dropdown-menu",n.value,i.value,o.value&&"show",e.dark&&"dropdown-menu-dark"]})),n=Object(a["inject"])("menuAlignClasses","dropdown-menu-start"),r=Object(a["ref"])("root"),i=Object(a["ref"])(""),o=Object(a["ref"])(!1),s=Object(a["computed"])((function(){return!!e.static&&{display:"block",position:"static"}})),l=function(){e.animation&&setTimeout((function(){i.value=!1}),300)},u=Object(a["inject"])("setMenuMountedState",(function(){return!1})),c=Object(a["inject"])("isActive",!1);Object(a["watch"])((function(){return c.value}),(function(e){e?setTimeout((function(){u(!0,r.value)}),100):!e&&m&&(h(),setTimeout((function(){u(!1)}),300))}));var h=function(){kt(document,"keydown",x),b.value=0,i.value=e.animation&&"animation ".concat(e.fadeOut),o.value=!1,l()},d=Object(a["computed"])((function(){return!!e.static||!!(c.value||!c.value&&m.value)||(c.value||m.value||setTimeout((function(){return!1}),300),!1)})),p=Object(a["inject"])("externalTarget",!1),f=Object(a["ref"])(!1);Object(a["onMounted"])((function(){if(p){var e=document.body.querySelector(p);e&&(f.value=!0)}}));var m=Object(a["inject"])("isPopperActive",!1),g=function(){wt(document,"keydown",x),i.value=e.animation&&"animation ".concat(e.fadeIn),l()};Object(a["watch"])((function(){return m.value}),(function(e,t){(!t&&!0===e||!1===t)&&(v.value=r.value.querySelectorAll(".dropdown-item"),o.value=!0,g())}));var b=Object(a["ref"])(0),v=Object(a["ref"])(null),y=Object(a["inject"])("handleEscAndOutsideClick",(function(){return!1})),x=function(e){var t,n,r=e.key;if("ArrowUp"!==r&&"ArrowDown"!==r||e.preventDefault(),c.value){switch(v.value.forEach((function(e){e.classList.remove("active")})),r){case"Escape":return void y();case"Enter":return void(null===(t=v.value[b.value-1])||void 0===t||t.click());case"ArrowUp":b.value--,b.value<=0&&(b.value=v.value.length);break;case"ArrowDown":b.value++,b.value>v.value.length&&(b.value=1);break;default:break}null===(n=v.value[b.value-1])||void 0===n||n.classList.add("active")}};return{staticStyle:s,showClass:o,className:t,isMounted:d,shouldTeleport:f,externalTarget:p,root:r,props:e}}};const Xr=c()(Yr,[["render",qr]]);var Kr=Xr,Jr=["tabindex"],Zr={key:1,class:"dropdown-divider"};function Qr(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{onKeyup:t[0]||(t[0]=Object(a["withKeys"])(Object(a["withModifiers"])((function(){return e.handleKeypress&&e.handleKeypress.apply(e,arguments)}),["stop"]),["enter"])),tabindex:n.divider?null:0},[r.hasLinkOrTag?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(r.tagName),Object(a["mergeProps"])({key:0},e.$attrs,{to:n.to,exact:n.to?n.exact:null,href:n.to?null:n.href,class:r.className,target:r.tab,type:"button"===n.tag?"button":null,"aria-current":!!n.active||null,"aria-disabled":!!n.disabled||null,disabled:!!n.disabled||null}),{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},16,["to","exact","href","class","target","type","aria-current","aria-disabled","disabled"])):n.divider?(Object(a["openBlock"])(),Object(a["createElementBlock"])("hr",Zr)):Object(a["renderSlot"])(e.$slots,"default",{key:2})],40,Jr)}var ei={name:"MDBDropdownItem",inheritAttrs:!1,props:{tag:{type:String,default:"a"},to:[String,Object],href:{type:String},disabled:{type:Boolean,default:!1},active:{type:Boolean,default:!1},exact:{type:Boolean,default:!1},newTab:{type:Boolean,default:!1},submenu:{type:Boolean,default:!1},submenuIcon:String,divider:{type:Boolean,default:!1},text:{type:Boolean,default:!1},header:{type:Boolean,default:!1}},setup:function(e){var t=Object(a["computed"])((function(){return[r.value,e.disabled?"disabled":"",e.active?"active":"",e.submenu&&"dropdown-submenu"]})),n=Object(a["computed"])((function(){return!(void 0===e.to&&void 0===e.href&&"a"===e.tag&&!e.text)})),r=Object(a["computed"])((function(){return e.text?"dropdown-item-text":e.header?"dropdown-header":"dropdown-item"})),i=Object(a["computed"])((function(){return e.to?"router-link":e.text?"span":e.tag})),o=Object(a["computed"])((function(){return e.newTab?"_blank":null}));return{className:t,hasLinkOrTag:n,tagName:i,tab:o,props:e}}};const ti=c()(ei,[["render",Qr]]);var ni=ti,ri={key:0,"data-popper-arrow":"",class:"tooltip_arrow"};function ii(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),Object(a["mergeProps"])({ref:"triggerEl",style:{display:"inline-block"}},e.$attrs,{onMouseenter:r.onMouseEnter,onMouseleave:r.onMouseLeave,onFocus:r.onMouseEnter,onBlur:r.onMouseLeave}),{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"reference")]})),_:3},16,["onMouseenter","onMouseleave","onFocus","onBlur"])),Object(a["createVNode"])(a["Transition"],{name:"fade"},{default:Object(a["withCtx"])((function(){return[r.isActive?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:0,ref:"popperEl",class:Object(a["normalizeClass"])({tooltip:!0,fade:!0,"tooltip-inner":!0}),style:Object(a["normalizeStyle"])([r.widthStyle])},[Object(a["renderSlot"])(e.$slots,"tip"),n.arrow?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ri)):Object(a["createCommentVNode"])("",!0)],4)):Object(a["createCommentVNode"])("",!0)]})),_:3})],64)}var oi={name:"MDBTooltip",props:{tag:{type:String,default:"span"},modelValue:Boolean,reference:String,popover:String,options:{type:[Object,Function],default:function(){return{}}},boundary:{type:String,default:"clippingParent"},fallbackPlacements:{type:Array,default:function(){return["top","right","bottom","left"]}},offset:{type:String,default:"0, 5"},direction:{type:String,default:"top",validator:function(e){return["top","right","bottom","left"].indexOf(e.toLowerCase())>-1}},maxWidth:{type:Number,default:276},arrow:{type:Boolean,default:!1},disabled:Boolean},setup:function(e,t){var n=t.emit,r=Fr(),i=r.setPopper,o=r.isPopperActive,s=r.openPopper,l=r.closePopper,u=r.getPopperOffset,c=Object(a["ref"])("triggerEl"),h=Object(a["ref"])("popperEl"),d=Object(a["computed"])((function(){return"max-width: ".concat(e.maxWidth,"px!important")})),p=function(){var t=e.direction,n=document.querySelector(e.boundary);n||(n=e.boundary);var r={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:e.fallbackPlacements}},{name:"preventOverflow",options:{boundary:n}},{name:"offset",options:{offset:u(e.offset,c.value)}},{name:"arrow",options:{element:".tooltip_arrow",padding:5}}]};return Nt(Nt({},r),"function"===typeof e.options?e.options(r):e.options)},f=function(){c.value=e.reference?document.querySelector(e.reference):c.value,h.value=e.popover?document.querySelector(e.popover):h.value;var t=p();i(c.value,h.value,t)},m=Object(a["ref"])(!1);Object(a["watchEffect"])((function(){if(e.modelValue){if(m.value)return;Object(a["nextTick"])((function(){f(),setTimeout(s,0),setTimeout((function(){h.value.classList.add("show")}),0)}))}else{if(!o.value)return;setTimeout((function(){h.value.classList.remove("show")}),10),m.value=!0,setTimeout((function(){l(),m.value=!1}),150)}}));var g=Object(a["computed"])((function(){return!!(e.modelValue||!e.modelValue&&o.value)||(e.modelValue||o.value,!1)})),b=function(){!e.disabled&&n("update:modelValue",!0)},v=function(){!e.disabled&&n("update:modelValue",!1)};return{isActive:g,triggerEl:c,popperEl:h,widthStyle:d,onMouseEnter:b,onMouseLeave:v,props:e}}};const ai=c()(oi,[["render",ii]]);var si=ai,li={key:0,class:"popover-header"},ui={key:1,class:"popover-body"},ci={key:2,"data-popper-arrow":"",class:"popover_arrow"};function hi(e,t,n,r,i,o){var s=Object(a["resolveDirective"])("mdb-click-outside");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),Object(a["mergeProps"])({ref:"triggerEl",style:{display:"inline-block"},tabindex:n.dismissible?0:null},e.$attrs),{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"reference")]})),_:3},16,["tabindex"])),[[s,r.handleClickOutside]]),Object(a["createVNode"])(a["Transition"],null,{default:Object(a["withCtx"])((function(){return[r.isActive&&(e.$slots.header||e.$slots.body)?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:0,ref:"popperEl",class:Object(a["normalizeClass"])({popover:!0,fade:!0}),style:Object(a["normalizeStyle"])([r.widthStyle])},[e.$slots.header?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",li,[Object(a["renderSlot"])(e.$slots,"header")])):Object(a["createCommentVNode"])("",!0),e.$slots.body?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ui,[Object(a["renderSlot"])(e.$slots,"body")])):Object(a["createCommentVNode"])("",!0),Object(a["renderSlot"])(e.$slots,"default"),n.arrow?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ci)):Object(a["createCommentVNode"])("",!0)],4)):Object(a["createCommentVNode"])("",!0)]})),_:3})],64)}var di={name:"MDBPopover",props:{tag:{type:String,default:"span"},modelValue:Boolean,reference:String,popover:String,options:{type:[Object,Function],default:function(){return{}}},boundary:{type:String,default:"clippingParent"},fallbackPlacements:{type:Array,default:function(){return["top","right","bottom","left"]}},offset:{type:String,default:"0, 5"},direction:{type:String,default:"bottom",validator:function(e){return["top","right","bottom","left"].indexOf(e.toLowerCase())>-1}},maxWidth:{type:Number,default:276},arrow:{type:Boolean,default:!1},dismissible:{type:Boolean,default:!1},hover:{type:Boolean,default:!1}},directives:{mdbClickOutside:Ur},setup:function(e,t){var n=t.emit,r=Fr(),i=r.setPopper,o=r.isPopperActive,s=r.openPopper,l=r.closePopper,u=r.destroyPopper,c=r.getPopperOffset,h=Object(a["ref"])("triggerEl"),d=Object(a["ref"])("popperEl"),p=Object(a["computed"])((function(){return"max-width: ".concat(e.maxWidth,"px!important")})),f=function(){return e.arrow?[0,10]:e.offset},m=function(){var t=e.direction,n=document.querySelector(e.boundary);n||(n=e.boundary);var r=f(),i={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:e.fallbackPlacements}},{name:"preventOverflow",options:{boundary:n}},{name:"offset",options:{offset:c(r,h.value)}},{name:"arrow",options:{element:".popover_arrow",padding:5}}]};return Nt(Nt({},i),"function"===typeof e.options?e.options(i):e.options)},g=function(){h.value=e.reference?document.querySelector(e.reference):h.value,d.value=e.popover?document.querySelector(e.popover):d.value;var t=m();i(h.value,d.value,t)};Object(a["watchEffect"])((function(){if(e.modelValue)Object(a["nextTick"])((function(){g(),setTimeout(s,0),setTimeout((function(){d.value.classList.add("show"),e.hover&&(wt(d.value,"mouseover",v),wt(d.value,"mouseout",y))}),0)}));else{if(!o.value)return;setTimeout((function(){kt(d.value,"mouseover",v),kt(d.value,"mouseout",y),d.value.classList.remove("show")}),0),setTimeout(l,0),u()}}));var b=Object(a["computed"])((function(){return!!(e.modelValue||!e.modelValue&&o.value)||(e.modelValue||o.value,!1)})),v=function(){n("update:modelValue",!0)},y=function(){n("update:modelValue",!1)},x=function(){e.dismissible&&e.modelValue&&n("update:modelValue",!1)},w=function(){kt(h.value,"mouseover",v),kt(h.value,"mouseout",y),u()};return Object(a["onMounted"])((function(){e.hover&&(wt(h.value,"mouseover",v),wt(h.value,"mouseout",y))})),Object(a["onUnmounted"])((function(){w()})),{isActive:b,triggerEl:h,popperEl:d,widthStyle:p,handleClickOutside:x,props:e}}};const pi=c()(di,[["render",hi]]);var fi=pi;function mi(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(a["Transition"],{onEnter:r.enter,onAfterEnter:r.afterEnter,onBeforeLeave:r.beforeLeave,onAfterLeave:r.afterLeave},{default:Object(a["withCtx"])((function(){return[r.isActive?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{key:0,ref:"root",class:Object(a["normalizeClass"])(r.wrapperClass),style:Object(a["normalizeStyle"])([r.backdropStyle,r.backdropOverflowStyle]),"aria-hidden":!r.isActive,"aria-modal":!!r.isActive||null,"aria-labelledby":n.labelledby,role:"dialog",onClick:t[0]||(t[0]=Object(a["withModifiers"])((function(){n.staticBackdrop?r.animateStaticBackdrop():r.closeModal()}),["self"]))},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(r.dialogClass),role:"document",ref:"dialog"},[Object(a["createElementVNode"])("div",{class:"modal-content",style:Object(a["normalizeStyle"])(r.computedContentStyle)},[Object(a["renderSlot"])(e.$slots,"default")],4)],2)]})),_:3},8,["class","style","aria-hidden","aria-modal","aria-labelledby"])):Object(a["createCommentVNode"])("",!0)]})),_:3},8,["onEnter","onAfterEnter","onBeforeLeave","onAfterLeave"])}function gi(){var e=Object(a["ref"])(null),t=Object(a["ref"])(null),n=Object(a["ref"])(null);function r(t){return e.value=t,i(),wt(window,"keydown",l),!0}function i(){var r=Array.from(e.value.querySelectorAll('button, a, input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter((function(e){return!e.classList.contains("ps__thumb-x")&&!e.classList.contains("ps__thumb-y")&&!e.disabled}));0!==r.length&&(t.value=r[0],n.value=r[r.length-1],wt(n.value,"keydown",(function(e){return o(e,!0)})))}function o(e){"Tab"===e.key&&(e.preventDefault(),s())}function s(){t.value&&t.value.focus()}function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"Tab"===e.key&&(e.preventDefault(),s()),t||kt(window,"keydown",l)}function u(){kt(n.value,"keydown",o)}return{initFocusTrap:r,removeFocusTrap:u}}n("b680");var bi=gi;function vi(e,t){var n=Object(a["ref"])("root"),r=Object(a["ref"])("dialog"),i=Object(a["ref"])(""),o=Object(a["ref"])(null),s=Object(a["ref"])(e.modelValue),l=Object(a["ref"])(null);Object(a["watchEffect"])((function(){s.value=e.modelValue,s.value&&t("update:modelValue",!0)}));var u=Object(a["computed"])((function(){return["modal",e.animation&&"fade",s.value&&"show",e.staticBackdrop&&"modal-static"]})),c=Object(a["computed"])((function(){return["modal-dialog",e.size&&"modal-"+e.size,e.centered&&"modal-dialog-centered",e.scrollable&&"modal-dialog-scrollable",e.fullscreen&&m.value,e.dialogClasses]})),h=Object(a["computed"])((function(){return!e.removeBackdrop&&{"background-color":"rgba(0,0,0, 0.5)"}})),d=Object(a["ref"])(!1),p=Object(a["computed"])((function(){if(!d.value&&!e.keepOverflow)return"overflow: hidden"})),f=Object(a["computed"])((function(){return!!e.bgSrc&&{"background-image":'url("'.concat(e.bgSrc,'")')}})),m=Object(a["computed"])((function(){return!!e.fullscreen&&[!0!==e.fullscreen?"modal-fullscreen-".concat(e.fullscreen):"modal-fullscreen"]})),g=function(){v(r.value)},b=function(){t("update:modelValue",!1)};Object(a["provide"])("closeModal",b);var v=function(e){e.style.transform="scale(1.02)",setTimeout((function(){return e.style.transform="scale(1.0)"}),300)},y=function(e){"Escape"===e.key&&s.value&&b()},x=Object(a["ref"])(null),w=Object(a["ref"])(0),k=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},_=function(){var e=document.body.getBoundingClientRect();x.value=Math.round(e.left+e.right)<window.innerWidth,w.value=x.value?k().toFixed(2):0},S=function(e){d.value=!1,i.value="translate(0, -25%)",e.childNodes[0].style.transform=i.value,e.style.opacity=0,e.style.display="block",_(),document.body.style.paddingRight="".concat(w.value,"px"),e.style.paddingRight="".concat(w.value,"px"),document.body.classList.add("modal-open"),t("show",n.value)},C=function(r){r.childNodes[0].style.transform="translate(0,0)",r.style.opacity=1,setTimeout((function(){d.value=!0,t("shown",n.value)}),400),l.value=n.value,e.keyboard&&wt(window,"keyup",y),e.focus&&(o.value=bi(),o.value.initFocusTrap(n.value))},I=function(n){n.childNodes[0].style.transform=i.value,n.style.opacity=0,setTimeout((function(){n.style.paddingRight=null,document.body.style.paddingRight=null,document.body.classList.remove("modal-open")}),200),t("hide",l.value),e.keyboard&&kt(window,"keyup",y),e.focus&&o.value&&o.value.removeFocusTrap()},O=function(){t("hidden",l.value),d.value=!1};return Object(a["onBeforeUnmount"])((function(){kt(window,"keyup",y)})),{wrapperClass:u,dialogClass:c,backdropStyle:h,backdropOverflowStyle:p,computedContentStyle:f,root:n,dialog:r,isActive:s,closeModal:b,animateStaticBackdrop:g,enter:S,afterEnter:C,beforeLeave:I,afterLeave:O,scrollbarWidth:w,setScrollbar:_,shouldOverflow:d,thisElement:l,handleEscKeyUp:y,focusTrap:o,dialogTransform:i,animateStaticModal:v,fullscreenClass:m}}var yi={name:"MDBModal",props:{tag:{type:String,default:"div"},modelValue:Boolean,size:{type:String,validator:function(e){return["sm","lg","xl"].indexOf(e.toLowerCase())>-1}},removeBackdrop:{type:Boolean,default:!1},staticBackdrop:{type:Boolean,default:!1},centered:{type:Boolean,default:!1},bgSrc:{type:String,default:""},scrollable:{type:Boolean,default:!1},duration:{type:Number,default:400},labelledby:String,fullscreen:{type:[Boolean,String],default:!1},animation:{type:Boolean,default:!0},dialogClasses:{type:String},keyboard:{type:Boolean,default:!0},focus:{type:Boolean,default:!0}},emits:["show","shown","hide","hidden","update:modelValue"],setup:function(e,t){var n=t.emit,r=vi(e,n),i=r.wrapperClass,o=r.dialogClass,a=r.backdropStyle,s=r.backdropOverflowStyle,l=r.computedContentStyle,u=r.root,c=r.dialog,h=r.isActive,d=r.closeModal,p=r.animateStaticBackdrop,f=r.enter,m=r.afterEnter,g=r.beforeLeave,b=r.afterLeave;return{wrapperClass:i,dialogClass:o,backdropStyle:a,backdropOverflowStyle:s,computedContentStyle:l,root:u,dialog:c,isActive:h,closeModal:d,animateStaticBackdrop:p,enter:f,afterEnter:m,beforeLeave:g,afterLeave:b,props:e}}};const xi=c()(yi,[["render",mi]]);var wi=xi;function ki(e,t,n,r,i,o){var s=Object(a["resolveComponent"])("MDBBtnClose");return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default"),n.close?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0,white:n.closeWhite,onClick:Object(a["withModifiers"])(r.closeModal,["prevent"])},null,8,["white","onClick"])):Object(a["createCommentVNode"])("",!0)]})),_:3},8,["class"])}var _i={name:"MDBModalHeader",components:{MDBBtnClose:M},props:{tag:{type:String,default:"div"},close:{type:Boolean,default:!0},closeWhite:{type:Boolean,default:!1},color:String},setup:function(e){var t=Object(a["inject"])("closeModal",!1),n=Object(a["computed"])((function(){return["modal-header",e.color&&"bg-".concat(e.color)]}));return{className:n,closeModal:t,props:e}}};const Si=c()(_i,[["render",ki]]);var Ci=Si;function Ii(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}n("cc71");var Oi={name:"MDBModalTitle",props:{tag:{type:String,default:"h5"},bold:{type:Boolean,default:!1}},setup:function(e){var t=Object(a["computed"])((function(){return["modal-title",e.bold&&"font-weight-bold"]}));return{className:t,props:e}}};const Ti=c()(Oi,[["render",Ii]]);var Ni=Ti;function Ei(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var Di={name:"MDBModalBody",props:{tag:{type:String,default:"div"}},setup:function(e){var t=Object(a["computed"])((function(){return["modal-body"]}));return{className:t,props:e}}};const $i=c()(Di,[["render",Ei]]);var Ai=$i;function Ri(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var Mi={name:"MDBModalFooter",props:{tag:{type:String,default:"div"}},setup:function(e){var t=Object(a["computed"])((function(){return["modal-footer"]}));return{className:t,props:e}}};const Fi=c()(Mi,[["render",Ri]]);var Pi=Fi;function ji(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className),ref:"accordionRef"},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var Bi={name:"MDBAccordion",props:{tag:{type:String,default:"div"},modelValue:String,stayOpen:Boolean,flush:Boolean,classes:String},setup:function(e,t){var n=t.emit,r=Object(a["ref"])(null),i=Object(a["computed"])((function(){return["accordion",e.flush&&"accordion-flush",e.classes]})),o=Object(a["ref"])(e.modelValue),s=function(e){o.value=e,n("update:modelValue",e)};return Object(a["watchEffect"])((function(){return o.value=e.modelValue})),Object(a["provide"])("activeItem",o),Object(a["provide"])("stayOpen",e.stayOpen),Object(a["provide"])("setActiveItem",s),{accordionRef:r,setActiveItem:s,className:i}}};const Li=c()(Bi,[["render",ji]]);var zi=Li,Vi=["aria-controls"];function Ui(e,t,n,r,i,o){var s=Object(a["resolveComponent"])("MDBCollapse");return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.itemClassName),ref:"itemRef"},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("h2",{class:Object(a["normalizeClass"])(r.headerClassName)},[Object(a["createElementVNode"])("button",{onClick:t[0]||(t[0]=function(){return r.toggleAccordion(n.collapseId)}),class:Object(a["normalizeClass"])(r.buttonClassName),"aria-expanded":"true","aria-controls":n.collapseId},Object(a["toDisplayString"])(n.headerTitle),11,Vi)],2),Object(a["createVNode"])(s,{id:n.collapseId,modelValue:r.isActive,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.isActive=e})},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(r.bodyClassName)},[Object(a["renderSlot"])(e.$slots,"default")],2)]})),_:3},8,["id","modelValue"])]})),_:3},8,["class"])}var Wi={name:"MDBAccordionItem",components:{MDBCollapse:Ct},props:{tag:{type:String,default:"div"},collapseId:{type:String,required:!0},headerTitle:String,headerClasses:String,bodyClasses:String,itemClasses:String},setup:function(e){var t=Object(a["ref"])(null),n=Object(a["computed"])((function(){return["accordion-item",e.itemClasses]})),r=Object(a["computed"])((function(){return["accordion-header",e.headerClasses]})),i=Object(a["computed"])((function(){return["accordion-body",e.bodyClasses]})),o=Object(a["computed"])((function(){return["accordion-button",!c.value&&"collapsed"]})),s=Object(a["inject"])("setActiveItem",null),l=Object(a["inject"])("activeItem",null),u=Object(a["inject"])("stayOpen",!1),c=Object(a["ref"])(l.value===e.collapseId);Object(a["watchEffect"])((function(){u||(c.value=l.value===e.collapseId)}));var h=function(){u?c.value=!c.value:c.value?s(""):s(e.collapseId)};return{itemRef:t,itemClassName:n,headerClassName:r,bodyClassName:i,buttonClassName:o,toggleAccordion:h,isActive:c}}};const Hi=c()(Wi,[["render",Ui]]);var Gi=Hi;function qi(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])("i",{class:Object(a["normalizeClass"])(r.className)},[Object(a["renderSlot"])(e.$slots,"default")],2)}var Yi={name:"MDBIcon",props:{iconStyle:{type:String,default:"fas"},icon:String,flag:String,size:String,fw:Boolean,solid:Boolean},setup:function(e){var t=Object(a["computed"])((function(){return[!e.flag&&e.iconStyle,e.flag?"flag flag-".concat(e.flag):"fa-".concat(e.icon),e.size&&"fa-".concat(e.size),e.fw&&"fa-fw",e.solid&&"fa-solid"]}));return{className:t}}};const Xi=c()(Yi,[["render",qi]]);var Ki=Xi;function Ji(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.navClass),role:"navigation",ref:"navbar"},{default:Object(a["withCtx"])((function(){return[n.container?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:0,class:Object(a["normalizeClass"])(r.containerClass)},[Object(a["renderSlot"])(e.$slots,"default")],2)):Object(a["createCommentVNode"])("",!0),n.container?Object(a["createCommentVNode"])("",!0):Object(a["renderSlot"])(e.$slots,"default",{key:1})]})),_:3},8,["class"])}var Zi={name:"MDBNavbar",props:{tag:{type:String,default:"nav"},bg:{type:String},dark:{type:Boolean,default:!1},light:{type:Boolean,default:!1},double:{type:Boolean,default:!1},expand:{type:String},position:{type:String},transparent:{type:Boolean,default:!1},scrolling:{type:Boolean,default:!1},scrollingOffset:{type:Number,default:100},center:{type:Boolean,default:!1},container:{type:[Boolean,String],default:!1},classContainer:{type:String},classNavbar:String},setup:function(e){var t=Object(a["computed"])((function(){return["navbar",e.dark&&"navbar-dark",e.light&&"navbar-light",e.bg&&!e.transparent?"bg-".concat(e.bg):"",e.expand?"small"===e.expand||"sm"===e.expand?"navbar-expand-sm":"medium"===e.expand||"md"===e.expand?"navbar-expand-md":"large"===e.expand||"lg"===e.expand?"navbar-expand-lg":"navbar-expand-xl":"","top"===e.position?"fixed-top":"bottom"===e.position?"fixed-bottom":"sticky"===e.position?"sticky-top":"",e.scrolling&&r.value,e.double&&"double-nav",e.center&&"justify-content-center",e.classNavbar]})),n=Object(a["computed"])((function(){return!!e.container&&[!0!==e.container?"container-".concat(e.container):"container-fluid",e.classContainer&&e.classContainer]})),r=Object(a["ref"])("navbar-scroll"),i=function(){window.pageYOffset>e.scrollingOffset?r.value="navbar-scroll navbar-scrolled":r.value="navbar-scroll"},o=Object(a["ref"])(null),s=Object(a["ref"])("nowrap");Object(a["provide"])("navbarFlexWrapValue",s);var l=function(){if(o.value){var e=getComputedStyle(o.value).flexWrap;"nowrap"===e?s.value="nowrap":"wrap"===e&&(s.value="wrap")}};return Object(a["onMounted"])((function(){return getComputedStyle(o.value)&&"wrap"===getComputedStyle(o.value).flexWrap?s.value="wrap":s.value="nowrap",window.addEventListener("resize",(function(){return l()})),e.scrolling&&window.addEventListener("scroll",i),function(){window.removeEventListener("scroll",i)}})),{navbar:o,navClass:t,containerClass:n,props:e}}};const Qi=c()(Zi,[["render",Ji]]);var eo=Qi;function to(e,t,n,r,i,o){var s=Object(a["resolveComponent"])("MDBIcon");return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.navTogglerClass),type:"button","aria-controls":n.target,"aria-expanded":r.isExpanded,"aria-label":"Toggle navigation",onClick:r.handleClick},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(s,{icon:n.togglerIcon,size:n.togglerSize,iconStyle:n.iconStyle},null,8,["icon","size","iconStyle"])]})),_:1},8,["class","aria-controls","aria-expanded","onClick"])}var no={name:"MDBNavbarToggler",components:{MDBIcon:Ki},props:{tag:{type:String,default:"button"},target:{type:String,default:"#navbarSupportedContent"},togglerClass:{type:String},togglerIcon:{type:String,default:"bars"},togglerSize:{type:String,default:"1x"},iconStyle:{type:String,default:"fas"}},setup:function(e){var t=Object(a["computed"])((function(){return["navbar-toggler",e.togglerClass]})),n=Object(a["ref"])(!1),r=function(){n.value=!n.value};return{navTogglerClass:t,handleClick:r,isExpanded:n,props:e}}};const ro=c()(no,[["render",to]]);var io=ro;function oo(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(r.isLink),{class:"navbar-brand"},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3})}var ao={name:"MDBNavbarBrand",props:{tag:{type:String,default:"div"}},setup:function(e,t){var n=t.attrs,r=Object(a["computed"])((function(){return n.href?"a":e.tag}));return{isLink:r,props:e}}};const so=c()(ao,[["render",oo]]);var lo=so;function uo(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var co={name:"MDBNavbarNav",components:{MDBCollapse:Ct},props:{tag:{type:String,default:"ul"},right:{type:Boolean,default:!1},center:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},justifyAround:{type:Boolean,default:!1},class:{type:String},nav:{type:Boolean,default:!1}},setup:function(e){var t=Object(a["computed"])((function(){return[e.nav?"nav":"navbar-nav",e.right?"ms-auto":e.center?"justify-content-center w-100":e.vertical?"flex-column":e.justifyAround?"justify-content-around w-100":"me-auto",e.class&&"".concat(e.class)]}));return{props:e,className:t}}};const ho=c()(co,[["render",uo]]);var po=ho,fo=["href","target"];function mo(e,t,n,r,i,o){var s=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(r.props.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[n.to?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0,class:Object(a["normalizeClass"])(r.linkClassName),exact:n.exact,to:n.to,target:r.tab},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class","exact","to","target"])):n.href?(Object(a["openBlock"])(),Object(a["createElementBlock"])("a",{key:1,href:n.href,class:Object(a["normalizeClass"])(r.linkClassName),target:r.tab},[Object(a["renderSlot"])(e.$slots,"default")],10,fo)):Object(a["renderSlot"])(e.$slots,"default",{key:2})]})),_:3},8,["class"])}var go={name:"MDBNavbarItem",props:{tag:{type:String,default:"li"},active:{type:Boolean,default:!1},disabled:{type:Boolean},exact:{type:Boolean,default:!1},newTab:{type:Boolean,default:!1},to:[Object,String],href:{type:String},linkClass:{type:String}},setup:function(e){var t=Object(a["computed"])((function(){return["nav-item",!e.to&&!e.href&&e.active&&"active"]})),n=Object(a["computed"])((function(){return["nav-link",e.disabled&&"disabled",e.active&&"active",e.linkClass]})),r=Object(a["computed"])((function(){return!!e.newTab&&"_blank"}));return{props:e,className:t,linkClassName:n,tab:r}}};const bo=c()(go,[["render",mo]]);var vo=bo;function yo(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var xo={name:"MDBPagination",props:{tag:{type:String,default:"ul"},circle:{type:Boolean,default:!1},lg:{type:Boolean,default:!1},sm:{type:Boolean,default:!1}},setup:function(e){var t=Object(a["computed"])((function(){return["pagination",e.sm&&"pagination-sm",e.lg&&"pagination-lg",e.circle&&"pagination-circle"]}));return{className:t,props:e}}};const wo=c()(xo,[["render",yo]]);var ko=wo,_o=["href","tabindex","aria-disabled"],So={"aria-hidden":"true"},Co=Object(a["createElementVNode"])("span",{class:"sr-only"},"Previous",-1),Io=["href","tabindex","aria-disabled"],Oo={"aria-hidden":"true"},To=Object(a["createElementVNode"])("span",{class:"sr-only"},"Next",-1);function No(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[n.prev?(Object(a["openBlock"])(),Object(a["createElementBlock"])("a",{key:0,class:"page-link",href:n.href,tabindex:r.disabledTabindex,"aria-disabled":n.disabled,"aria-label":"Previous"},[Object(a["createElementVNode"])("span",So,Object(a["toDisplayString"])(r.prevValue),1),Co],8,_o)):Object(a["createCommentVNode"])("",!0),n.next?(Object(a["openBlock"])(),Object(a["createElementBlock"])("a",{key:1,class:"page-link",href:n.href,tabindex:r.disabledTabindex,"aria-disabled":n.disabled,"aria-label":"Next"},[Object(a["createElementVNode"])("span",Oo,Object(a["toDisplayString"])(r.nextValue),1),To],8,Io)):Object(a["createCommentVNode"])("",!0)]})),_:1},8,["class"])}var Eo={name:"MDBPageNav",props:{tag:{type:String,default:"li"},disabled:{type:Boolean,default:!1},href:{type:String,default:"#"},prev:{type:Boolean,default:!1},next:{type:Boolean,default:!1},icon:{type:Boolean,default:!1}},setup:function(e){var t=Object(a["computed"])((function(){return["page-item",e.disabled&&"disabled"]})),n=Object(a["computed"])((function(){return e.icon?"Â«":"Previous"})),r=Object(a["computed"])((function(){return e.icon?"Â»":"Next"})),i=Object(a["computed"])((function(){return e.disabled?"-1":" false"}));return{className:t,prevValue:n,nextValue:r,disabledTabindex:i,props:e}}};const Do=c()(Eo,[["render",No]]);var $o=Do,Ao=["href","aria-label","aria-disabled","tabindex"],Ro={key:0,"aria-hidden":"true"},Mo={key:1,class:"sr-only"};function Fo(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("a",{class:"page-link",href:n.href,"aria-label":r.labelValue,"aria-disabled":n.disabled,tabindex:r.disabledTabindex},[n.icon?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",Ro,[Object(a["renderSlot"])(e.$slots,"default")])):Object(a["createCommentVNode"])("",!0),n.icon?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",Mo,Object(a["toDisplayString"])(r.labelValue),1)):Object(a["renderSlot"])(e.$slots,"default",{key:2})],8,Ao)]})),_:3},8,["class"])}var Po={name:"MDBPageItem",props:{tag:{type:String,default:"li"},active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},href:{type:String},icon:{type:Boolean,defaul:!1},label:{type:String}},setup:function(e){var t=Object(a["computed"])((function(){return["page-item",e.active&&"active",e.disabled&&"disabled"]})),n=Object(a["computed"])((function(){return e.icon&&e.label?e.label:e.href})),r=Object(a["computed"])((function(){return e.disabled?"-1":" false"}));return{className:t,labelValue:n,disabledTabindex:r,props:e}}};const jo=c()(Po,[["render",Fo]]);var Bo=jo;function Lo(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var zo={name:"MDBBreadcrumb",props:{tag:{type:String,default:"ol"}},setup:function(e){var t=Object(a["computed"])((function(){return["breadcrumb"]}));return{className:t,props:e}}};const Vo=c()(zo,[["render",Lo]]);var Uo=Vo;function Wo(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className),"aria-current":r.currentName},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class","aria-current"])}var Ho={name:"MDBBreadcrumbItem",props:{tag:{type:String,default:"li"},active:{type:Boolean,default:!1},current:{type:String,default:"page"}},setup:function(e){var t=Object(a["computed"])((function(){return["breadcrumb-item",e.active&&"active"]})),n=Object(a["computed"])((function(){return e.active&&e.current}));return{className:t,currentName:n,props:e}}};const Go=c()(Ho,[["render",Wo]]);var qo=Go;function Yo(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var Xo={name:"MDBFooter",props:{tag:{type:String,default:"footer"},bg:{type:String,default:"light"},text:{type:[String,Array]}},setup:function(e){var t=Object(a["computed"])((function(){return[e.bg&&"none"!==e.bg&&"bg-".concat(e.bg),e.text&&n(e.text)]})),n=function(e){return"string"===typeof e?"text-".concat(e):e.map((function(e){return"text-".concat(e).trim()})).join(" ")};return{className:t,props:e}}};const Ko=c()(Xo,[["render",Yo]]);var Jo=Ko;function Zo(e,t,n,r,i,o){return r.isVertical?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),Object(a["mergeProps"])({key:0,class:"row"},e.$attrs),{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},16)):Object(a["renderSlot"])(e.$slots,"default",{key:1})}var Qo={name:"MDBTabs",props:{tag:{type:String,default:"div"},modelValue:{type:String,required:!0},vertical:{type:[Boolean,String],default:!1}},emits:["update:modelValue","hide","hidden","show","shown"],setup:function(e,t){var n=t.emit,r=Object(a["ref"])(null),i=Object(a["ref"])(null),o=Object(a["ref"])(e.modelValue);Object(a["watch"])((function(){return e.modelValue}),(function(e){e!==o.value&&(o.value=e,s(null,e))}));var s=function(e,t){e||(e=document.body.querySelector("#tab-".concat(t))),r.value&&n("hide",{target:r.value,relatedTarget:e}),n("show",{target:e,relatedTarget:r.value}),n("update:modelValue",t),i.value=e,o.value=t},l=function(){n("shown",{target:i.value,relatedTarget:r.value}),r.value=i.value},u=function(){n("hidden",{target:r.value,relatedTarget:i.value})};Object(a["provide"])("activeTab",o),Object(a["provide"])("updateActiveTab",s),Object(a["provide"])("emitShown",l),Object(a["provide"])("emitHidden",u);var c=Object(a["ref"])(!1),h=Object(a["ref"])(window.innerWidth),d=Object(a["ref"])(null);Object(a["provide"])("isVertical",c);var p=function(){h.value=window.innerWidth;var t=Pr(h.value,["column",e.vertical]);t!==d.value&&(c.value=t===e.vertical,d.value=t)};return Object(a["onMounted"])((function(){e.vertical&&(!0===e.vertical?c.value=!0:(p(),wt(window,"resize",p)))})),Object(a["onUnmounted"])((function(){kt(window,"resize",p)})),{isVertical:c,props:e}}};const ea=c()(Qo,[["render",Zo]]);var ta=ea;function na(e,t,n,r,i,o){return r.isVertical?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:0,class:Object(a["normalizeClass"])(r.columnClassName)},[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"]))],2)):(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{key:1,class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"]))}n("cb29");var ra={name:"MDBTabNav",props:{tag:{type:String,default:"ul"},pills:{type:Boolean},justify:{type:Boolean},fill:{type:Boolean},col:{type:String,default:"3"},tabsClasses:String},setup:function(e){var t=Object(a["computed"])((function(){return["nav",e.pills?"nav-pills":"nav-tabs",e.justify&&"nav-justified",e.fill&&"nav-fill",r.value&&"flex-column",e.tabsClasses&&e.tabsClasses]})),n=Object(a["computed"])((function(){return["col-".concat(e.col)]})),r=Object(a["inject"])("isVertical",!1);return{className:t,columnClassName:n,isVertical:r,props:e}}};const ia=c()(ra,[["render",na]]);var oa=ia,aa={key:0,class:"nav-item",role:"presentation"},sa=["aria-controls","id","href"];function la(e,t,n,r,i,o){return n.href?(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",aa,[Object(a["createElementVNode"])("a",Object(a["mergeProps"])({class:r.className,role:"tab","aria-controls":r.controls,id:r.uid,href:n.href},e.$attrs,{onClick:t[0]||(t[0]=Object(a["withModifiers"])((function(e){return r.handleClick(n.tabId)}),["prevent"])),ref:"item"}),[Object(a["renderSlot"])(e.$slots,"default")],16,sa)])):(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),Object(a["mergeProps"])({key:1,class:r.className,role:"tab","aria-controls":r.controls,id:r.uid},e.$attrs,{onClick:t[1]||(t[1]=Object(a["withModifiers"])((function(e){return r.handleClick(n.tabId)}),["prevent"])),ref:"item"}),{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},16,["class","aria-controls","id"]))}var ua={name:"MDBTabItem",inheritAttrs:!1,props:{tag:{type:String,default:"a"},tabId:{type:String,required:!0},href:String},setup:function(e){var t=Object(a["ref"])("item"),n=Object(a["computed"])((function(){return["nav-link",s.value&&"active"]})),r=Object(a["computed"])((function(){return"tab-".concat(e.tabId)})),i=Object(a["computed"])((function(){return"".concat(e.tabId)})),o=Object(a["inject"])("activeTab",!1),s=Object(a["ref"])(o&&(o.value===e.tabId||o&&o===e.tabId)),l=Object(a["inject"])("updateActiveTab",!1);Object(a["watchEffect"])((function(){return s.value=o&&(o.value===e.tabId||o&&o===e.tabId)}));var u=function(){l(t.value,e.tabId)};return Object(a["onMounted"])((function(){s.value&&l&&l(t.value,e.tabId)})),{item:t,uid:r,controls:i,className:n,handleClick:u,props:e}}};const ca=c()(ua,[["render",la]]);var ha=ca;function da(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(a["Transition"],{onEnter:r.enter,onAfterEnter:r.afterEnter,onBeforeLeave:r.beforeLeave,onAfterLeave:r.afterLeave,duration:150},{default:Object(a["withCtx"])((function(){return[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className),ref:"item",role:"tabpanel","aria-labelledby":r.labelledby,id:r.uid},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class","aria-labelledby","id"])),[[a["vShow"],r.isActive]])]})),_:3},8,["onEnter","onAfterEnter","onBeforeLeave","onAfterLeave"])}var pa={name:"MDBTabPane",props:{tag:{type:String,default:"div"},tabId:{type:String,required:!0}},setup:function(e){var t=Object(a["computed"])((function(){return["tab-pane fade",s.value&&"show active"]})),n=Object(a["ref"])("item"),r=Object(a["computed"])((function(){return"".concat(e.tabId)})),i=Object(a["computed"])((function(){return"tab-".concat(e.tabId)})),o=Object(a["inject"])("activeTab",!1),s=Object(a["ref"])(o&&(o.value===e.tabId||o===e.tabId));Object(a["watchEffect"])((function(){return s.value=o&&(o.value===e.tabId||o===e.tabId)}));var l=Object(a["inject"])("emitShown",!1),u=Object(a["inject"])("emitHidden",!1);Object(a["onMounted"])((function(){s.value&&l&&l(e.tabId)}));var c=function(e){e.style.opacity="1"},h=function(t){t.style.opacity="0",l(e.tabId)},d=function(t){t.style.opacity="1",u(e.tabId)},p=function(e){e.style.opacity="0"};return{isActive:s,item:n,uid:r,labelledby:i,afterEnter:c,enter:h,beforeLeave:d,afterLeave:p,className:t,props:e}}};const fa=c()(pa,[["render",da]]);var ma=fa;function ga(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(a["KeepAlive"],null,[r.isVertical?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:0,class:Object(a["normalizeClass"])(r.columnClassName)},[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),Object(a["mergeProps"])({class:r.className},e.$attrs),{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},16,["class"]))],2)):(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),Object(a["mergeProps"])({key:1,class:r.className},e.$attrs),{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},16,["class"]))],1024)}var ba={name:"MDBTabContent",inheritAttrs:!1,props:{tag:{type:String,default:"div"},col:{type:String,default:"9"},contentClasses:String},setup:function(e){var t=Object(a["computed"])((function(){return["tab-content",e.contentClasses&&e.contentClasses]})),n=Object(a["computed"])((function(){return["col-".concat(e.col)]})),r=Object(a["inject"])("isVertical",!1);return{isVertical:r,className:t,columnClassName:n,props:e}}};const va=c()(ba,[["render",ga]]);var ya=va;function xa(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var wa={name:"MDBCol",props:{tag:{type:String,default:"div"},col:{type:String},sm:{type:String},md:{type:String},lg:{type:String},xl:{type:String},offset:{type:String},offsetSm:{type:String},offsetMd:{type:String},offsetLg:{type:String},offsetXl:{type:String},auto:{type:Boolean,default:!1}},setup:function(e){var t=Object(a["computed"])((function(){return[e.col?"col-"+e.col:"",e.sm?"col-sm-"+e.sm:"",e.md?"col-md-"+e.md:"",e.lg?"col-lg-"+e.lg:"",e.xl?"col-xl-"+e.xl:"",e.col||e.sm||e.md||e.lg||e.xl?"":"col",e.offset?"offset-"+e.offset:"",e.offsetSm?"offset-sm-"+e.offsetSm:"",e.offsetMd?"offset-md-"+e.offsetMd:"",e.offsetLg?"offset-lg-"+e.offsetLg:"",e.offsetXl?"offset-xl-"+e.offsetXl:"",e.auto?"col-auto":""]}));return{className:t,props:e}}};const ka=c()(wa,[["render",xa]]);var _a=ka;function Sa(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var Ca={name:"MDBRow",props:{tag:{type:String,default:"div"},start:{type:Boolean,default:!1},end:{type:Boolean,default:!1},center:{type:Boolean,default:!1},between:{type:Boolean,default:!1},around:{type:Boolean,default:!1},cols:{type:[String,Array]}},setup:function(e){var t=Object(a["computed"])((function(){return["row",e.cols?"".concat(n(e.cols)):"",e.start&&"justify-content-start",e.end&&"justify-content-end",e.center&&"justify-content-center",e.between&&"justify-content-between",e.around&&"justify-content-around"]})),n=function(e){return"string"===typeof e?"row-cols-".concat(e):e.map((function(e){return"row-cols-".concat(e).trim()})).join(" ")};return{className:t,props:e}}};const Ia=c()(Ca,[["render",Sa]]);var Oa=Ia;function Ta(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.className)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},8,["class"])}var Na={name:"MDBContainer",props:{tag:{type:String,default:"div"},sm:{type:Boolean,default:!1},md:{type:Boolean,default:!1},lg:{type:Boolean,default:!1},xl:{type:Boolean,default:!1},xxl:{type:Boolean,default:!1},fluid:{type:Boolean,default:!1}},setup:function(e){var t=Object(a["computed"])((function(){return[e.fluid?"container-fluid":"",e.sm?"container-sm":"",e.md?"container-md":"",e.lg?"container-lg":"",e.xl?"container-xl":"",e.xxl?"container-xxl":"",e.fluid||e.sm||e.md||e.lg||e.xl||e.xxl?"":"container"]}));return{className:t,props:e}}};const Ea=c()(Na,[["render",Ta]]);var Da=Ea;function $a(e,t,n,r,i,o){return n.responsive?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:0,class:Object(a["normalizeClass"])(r.wrapperClasses)},[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),Object(a["mergeProps"])({class:r.tableClasses,style:n.tableStyle},e.$attrs),{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},16,["class","style"]))],2)):(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),Object(a["mergeProps"])({key:1,class:r.tableClasses,style:n.tableStyle},e.$attrs),{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"default")]})),_:3},16,["class","style"]))}var Aa={name:"MDBTable",inheritAttrs:!1,props:{tag:{type:String,default:"table"},variant:{type:String},dark:{type:Boolean,default:!1},light:{type:Boolean,default:!1},border:{type:[Boolean,String],default:!1},borderless:{type:Boolean,default:!1},striped:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},responsive:{type:[Boolean,String],default:!1},align:{type:String},sm:{type:Boolean,default:!1},tableStyle:{type:String},captionTop:{type:Boolean,default:!1}},setup:function(e){var t=Object(a["computed"])((function(){return!!e.responsive&&(!0!==e.responsive?"table-responsive-".concat(e.responsive):"table-responsive")})),n=Object(a["computed"])((function(){return e.border?!0!==e.border?"table-bordered border-".concat(e.border):"table-bordered":""})),r=Object(a["computed"])((function(){return["table",e.dark&&"table-dark",e.light&&"table-light",e.variant&&"table-".concat(e.variant),e.striped&&"table-striped",n.value,e.borderless&&"table-borderless",e.hover&&"table-hover",e.sm&&"table-sm",e.align&&"top"===e.align?"align-top":"bottom"===e.align?"align-bottom":"middle"===e.align?"align-middle":"",e.captionTop&&"caption-top",e.tableStyle]}));return{wrapperClasses:t,tableClasses:r,props:e}}};const Ra=c()(Aa,[["render",$a]]);var Ma=Ra,Fa=["id","value"],Pa=["for"],ja={key:2,class:"form-helper"},Ba={key:3,class:"form-helper"},La={class:"form-counter"},za={key:7,class:"form-notch"},Va=Object(a["createElementVNode"])("div",{class:"form-notch-trailing"},null,-1),Ua=["id","value"],Wa=["for"],Ha={key:1,class:"form-helper"},Ga={key:2,class:"form-helper"},qa={class:"form-counter"},Ya={key:5,class:"form-notch"},Xa=Object(a["createElementVNode"])("div",{class:"form-notch-trailing"},null,-1),Ka={key:9,class:"form-text"};function Ja(e,t,n,r,i,o){var s=Object(a["resolveDirective"])("mdb-click-outside");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[n.wrap?Object(a["createCommentVNode"])("",!0):Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("input",Object(a["mergeProps"])({key:0,class:r.inputClassName,id:r.uid,value:r.inputValue},e.$attrs,{onInput:t[0]||(t[0]=function(){return r.handleInput&&r.handleInput.apply(r,arguments)}),ref:"inputRef",onFocus:t[1]||(t[1]=function(e){return r.checkDateType(!0)}),onBlur:t[2]||(t[2]=function(e){return r.checkDateType()})}),null,16,Fa)),[[s,r.clickOutside]]),n.label&&!n.wrap?(Object(a["openBlock"])(),Object(a["createElementBlock"])("label",{key:1,ref:"labelRef",class:Object(a["normalizeClass"])(r.labelClassName),for:r.uid},Object(a["toDisplayString"])(n.label),11,Pa)):Object(a["createCommentVNode"])("",!0),!n.wrap&&n.helper?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ja,Object(a["toDisplayString"])(n.helper),1)):Object(a["createCommentVNode"])("",!0),!n.wrap&&n.counter?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ba,[Object(a["createElementVNode"])("div",La,Object(a["toDisplayString"])(r.currentLength)+" / "+Object(a["toDisplayString"])(n.maxlength),1)])):Object(a["createCommentVNode"])("",!0),n.wrap?Object(a["createCommentVNode"])("",!0):Object(a["renderSlot"])(e.$slots,"default",{key:4}),!n.wrap&&n.validFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:5,class:Object(a["normalizeClass"])(r.validFeedbackClassName)},Object(a["toDisplayString"])(n.validFeedback),3)):Object(a["createCommentVNode"])("",!0),!n.wrap&&r.customInvalidFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:6,class:Object(a["normalizeClass"])(r.invalidFeedbackClassName)},Object(a["toDisplayString"])(r.customInvalidFeedback),3)):Object(a["createCommentVNode"])("",!0),!n.wrap&&n.formOutline?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",za,[Object(a["createElementVNode"])("div",{class:"form-notch-leading",style:Object(a["normalizeStyle"])({width:"".concat(r.notchLeadingWidth,"px")})},null,4),Object(a["createElementVNode"])("div",{class:"form-notch-middle",style:Object(a["normalizeStyle"])({width:"".concat(r.notchMiddleWidth,"px")})},null,4),Va])):Object(a["createCommentVNode"])("",!0),n.wrap?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{key:8,class:Object(a["normalizeClass"])(r.wrapperClassName),style:Object(a["normalizeStyle"])(r.validationStyle)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"prepend"),Object(a["createElementVNode"])("input",Object(a["mergeProps"])({class:r.inputClassName},e.$attrs,{id:r.uid,value:r.inputValue,onInput:t[3]||(t[3]=function(){return r.handleInput&&r.handleInput.apply(r,arguments)}),ref:"inputRef",onFocus:t[4]||(t[4]=function(e){return r.checkDateType(!0)}),onBlur:t[5]||(t[5]=function(e){return r.checkDateType()})}),null,16,Ua),n.label?(Object(a["openBlock"])(),Object(a["createElementBlock"])("label",{key:0,ref:"labelRef",class:Object(a["normalizeClass"])(r.labelClassName),for:r.uid},Object(a["toDisplayString"])(n.label),11,Wa)):Object(a["createCommentVNode"])("",!0),n.helper?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ha,Object(a["toDisplayString"])(n.helper),1)):Object(a["createCommentVNode"])("",!0),n.counter?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ga,[Object(a["createElementVNode"])("div",qa,Object(a["toDisplayString"])(r.currentLength)+" / "+Object(a["toDisplayString"])(n.maxlength),1)])):Object(a["createCommentVNode"])("",!0),Object(a["renderSlot"])(e.$slots,"default"),n.validFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:3,class:Object(a["normalizeClass"])(r.validFeedbackClassName)},Object(a["toDisplayString"])(n.validFeedback),3)):Object(a["createCommentVNode"])("",!0),r.customInvalidFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:4,class:Object(a["normalizeClass"])(r.invalidFeedbackClassName)},Object(a["toDisplayString"])(r.customInvalidFeedback),3)):Object(a["createCommentVNode"])("",!0),n.formOutline?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ya,[Object(a["createElementVNode"])("div",{class:"form-notch-leading",style:Object(a["normalizeStyle"])({width:"".concat(r.notchLeadingWidth,"px")})},null,4),Object(a["createElementVNode"])("div",{class:"form-notch-middle",style:Object(a["normalizeStyle"])({width:"".concat(r.notchMiddleWidth,"px")})},null,4),Xa])):Object(a["createCommentVNode"])("",!0)]})),_:3},8,["class","style"])),[[s,r.clickOutside]]):Object(a["createCommentVNode"])("",!0),n.formText?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ka,Object(a["toDisplayString"])(n.formText),1)):Object(a["createCommentVNode"])("",!0)],64)}var Za={name:"MDBInput",inheritAttrs:!1,props:{id:String,label:String,labelClass:String,modelValue:[String,Number,Date],size:String,formOutline:{type:Boolean,default:!0},wrapperClass:String,inputGroup:{type:[Boolean,String],default:!1},wrap:{type:Boolean,default:!0},formText:String,white:Boolean,validationEvent:String,isValidated:Boolean,isValid:Boolean,validFeedback:String,invalidFeedback:String,tooltipFeedback:{type:Boolean,default:!1},tag:{type:String,default:"div"},helper:String,counter:Boolean,maxlength:{type:Number,default:0}},directives:{mdbClickOutside:Ur},emits:["update:modelValue","click-outside","on-validate"],setup:function(e,t){var n,r=t.attrs,i=t.emit,o=Object(a["ref"])("inputRef"),s=Object(a["ref"])(e.modelValue),l=Object(a["ref"])(null),u=Object(a["ref"])(!1),c=Object(a["ref"])(9),h=Object(a["ref"])(0),d=e.id||ct("MDBInput-"),p=Object(a["computed"])((function(){return[e.formOutline&&"form-outline",g.value,e.white&&"form-white",e.wrapperClass]})),f=Object(a["computed"])((function(){return["form-control",e.size&&"form-control-".concat(e.size),s.value&&"active",u.value&&"placeholder-active",x.value&&w.value&&"is-valid",x.value&&!w.value&&"is-invalid"]})),m=Object(a["computed"])((function(){return["form-label",e.labelClass]})),g=Object(a["computed"])((function(){if(e.inputGroup)return!0!==e.inputGroup?"input-group input-group-".concat(e.inputGroup):"input-group"})),b=Object(a["computed"])((function(){return e.inputGroup&&x.value?{marginBottom:"1rem"}:""})),v=Object(a["computed"])((function(){return e.tooltipFeedback?"valid-tooltip":"valid-feedback"})),y=Object(a["computed"])((function(){return e.tooltipFeedback?"invalid-tooltip":"invalid-feedback"})),x=Object(a["ref"])(e.isValidated),w=Object(a["ref"])(e.isValid),k=Object(a["ref"])(""),_=Object(a["computed"])((function(){return x.value&&!w.value&&e.validationEvent?k.value:e.invalidFeedback})),S=function(e){w.value=e.target.checkValidity(),w.value||(k.value=e.target.validationMessage),x.value=!0,i("on-validate",w.value)},C=function(){"submit"!==e.validationEvent&&wt(o.value,e.validationEvent,S)};function I(){l.value&&(h.value=.8*l.value.clientWidth+8)}function O(){r.placeholder&&!l.value?u.value=!0:u.value=!1}var T=Object(a["ref"])((null===(n=s.value)||void 0===n?void 0:n.length)||0);function N(t){if(e.counter){if(t.target.value.length>e.maxlength)return void(t.target.value=s.value);T.value=t.target.value.length}s.value=t.target.value,i("update:modelValue",s.value)}function E(){i("click-outside")}var D=r.type&&"date"===r.type,$=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];D&&(o.value.type=e?"date":"text")};return Object(a["onMounted"])((function(){I(),O(),$(),e.validationEvent&&C()})),Object(a["onUpdated"])((function(){I(),O()})),Object(a["onUnmounted"])((function(){kt(o.value,e.validationEvent,S)})),Object(a["watchEffect"])((function(){if(e.counter){var t,n;if((null===(t=e.modelValue)||void 0===t?void 0:t.length)>e.maxlength)return s.value=e.modelValue.slice(0,e.maxlength),void(T.value=e.maxlength);T.value=(null===(n=e.modelValue)||void 0===n?void 0:n.length)||0}s.value=e.modelValue})),Object(a["watch"])((function(){return e.isValidated}),(function(e){return x.value=e})),Object(a["watch"])((function(){return e.isValid}),(function(e){return w.value=e})),{inputRef:o,uid:d,inputValue:s,labelRef:l,handleInput:N,wrapperClassName:p,inputClassName:f,labelClassName:m,validFeedbackClassName:v,invalidFeedbackClassName:y,validationStyle:b,customInvalidFeedback:_,notchLeadingWidth:c,notchMiddleWidth:h,clickOutside:E,props:e,currentLength:T,checkDateType:$}}};const Qa=c()(Za,[["render",Ja]]);var es=Qa,ts=["id","value","rows"],ns=["for"],rs={key:2,class:"form-helper"},is={key:3,class:"form-helper"},os={class:"form-counter"},as=["id","value","rows"],ss=["for"],ls={key:1,class:"form-helper"},us={key:2,class:"form-helper"},cs={class:"form-counter"},hs={key:5,class:"form-notch"},ds=Object(a["createElementVNode"])("div",{class:"form-notch-trailing"},null,-1),ps={key:8,class:"form-text"};function fs(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[n.wrap?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("textarea",Object(a["mergeProps"])({key:0,class:r.textareaClassName},e.$attrs,{id:r.uid,value:r.textareaValue,onInput:t[0]||(t[0]=function(){return r.handleInput&&r.handleInput.apply(r,arguments)}),rows:n.rows,ref:"textareaRef"}),null,16,ts)),n.label&&!n.wrap?(Object(a["openBlock"])(),Object(a["createElementBlock"])("label",{key:1,ref:"labelRef",class:"form-label",for:r.uid},Object(a["toDisplayString"])(n.label),9,ns)):Object(a["createCommentVNode"])("",!0),!n.wrap&&n.helper?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",rs,Object(a["toDisplayString"])(n.helper),1)):Object(a["createCommentVNode"])("",!0),!n.wrap&&n.counter?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",is,[Object(a["createElementVNode"])("div",os,Object(a["toDisplayString"])(r.currentLength)+" / "+Object(a["toDisplayString"])(n.maxLength),1)])):Object(a["createCommentVNode"])("",!0),n.wrap?Object(a["createCommentVNode"])("",!0):Object(a["renderSlot"])(e.$slots,"default",{key:4}),!n.wrap&&n.validFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:5,class:Object(a["normalizeClass"])(r.validFeedbackClassName)},Object(a["toDisplayString"])(n.validFeedback),3)):Object(a["createCommentVNode"])("",!0),!n.wrap&&r.customInvalidFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:6,class:Object(a["normalizeClass"])(r.invalidFeedbackClassName)},Object(a["toDisplayString"])(r.customInvalidFeedback),3)):Object(a["createCommentVNode"])("",!0),n.wrap?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{key:7,class:Object(a["normalizeClass"])(r.wrapperClassName),style:Object(a["normalizeStyle"])(r.validationStyle)},{default:Object(a["withCtx"])((function(){return[Object(a["renderSlot"])(e.$slots,"prepend"),Object(a["createElementVNode"])("textarea",Object(a["mergeProps"])({class:r.textareaClassName},e.$attrs,{id:r.uid,value:r.textareaValue,onInput:t[1]||(t[1]=function(){return r.handleInput&&r.handleInput.apply(r,arguments)}),rows:n.rows,ref:"textareaRef"}),null,16,as),n.label?(Object(a["openBlock"])(),Object(a["createElementBlock"])("label",{key:0,ref:"labelRef",class:"form-label",for:r.uid},Object(a["toDisplayString"])(n.label),9,ss)):Object(a["createCommentVNode"])("",!0),n.helper?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ls,Object(a["toDisplayString"])(n.helper),1)):Object(a["createCommentVNode"])("",!0),n.counter?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",us,[Object(a["createElementVNode"])("div",cs,Object(a["toDisplayString"])(r.currentLength)+" / "+Object(a["toDisplayString"])(n.maxLength),1)])):Object(a["createCommentVNode"])("",!0),n.validFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:3,class:Object(a["normalizeClass"])(r.validFeedbackClassName)},Object(a["toDisplayString"])(n.validFeedback),3)):Object(a["createCommentVNode"])("",!0),r.customInvalidFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:4,class:Object(a["normalizeClass"])(r.invalidFeedbackClassName)},Object(a["toDisplayString"])(r.customInvalidFeedback),3)):Object(a["createCommentVNode"])("",!0),n.formOutline?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",hs,[Object(a["createElementVNode"])("div",{class:"form-notch-leading",style:Object(a["normalizeStyle"])({width:"".concat(r.notchLeadingWidth,"px")})},null,4),Object(a["createElementVNode"])("div",{class:"form-notch-middle",style:Object(a["normalizeStyle"])({width:"".concat(r.notchMiddleWidth,"px")})},null,4),ds])):Object(a["createCommentVNode"])("",!0)]})),_:3},8,["class","style"])):Object(a["createCommentVNode"])("",!0),n.formText?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ps,Object(a["toDisplayString"])(n.formText),1)):Object(a["createCommentVNode"])("",!0)],64)}var ms={name:"MDBTextarea",inheritAttrs:!1,props:{id:String,rows:{type:[String,Number],default:4},label:String,modelValue:[String,Number],size:String,formOutline:{type:Boolean,default:!0},wrapperClass:String,inputGroup:{type:[Boolean,String],default:!1},wrap:{type:Boolean,default:!0},formText:String,white:Boolean,validationEvent:String,isValidated:Boolean,isValid:Boolean,validFeedback:String,invalidFeedback:String,tooltipFeedback:{type:Boolean,default:!1},tag:{type:String,default:"div"},helper:String,counter:Boolean,maxLength:{type:Number,default:0}},emits:["update:modelValue","on-validate"],setup:function(e,t){var n,r=t.attrs,i=t.emit,o=Object(a["ref"])("textareaRef"),s=Object(a["ref"])(e.modelValue),l=Object(a["ref"])(null),u=Object(a["ref"])(!1),c=Object(a["ref"])(9),h=Object(a["ref"])(0),d=e.id||ct("MDBTextarea-"),p=Object(a["computed"])((function(){return[e.formOutline&&"form-outline",m.value,e.white&&"form-white",e.wrapperClass]})),f=Object(a["computed"])((function(){return["form-control",e.size&&"form-control-".concat(e.size),s.value&&"active",u.value&&"placeholder-active",y.value&&x.value&&"is-valid",y.value&&!x.value&&"is-invalid"]})),m=Object(a["computed"])((function(){if(e.inputGroup)return!0!==e.inputGroup?"input-group input-group-".concat(e.inputGroup):"input-group"})),g=Object(a["computed"])((function(){return e.inputGroup&&y.value?{marginBottom:"1rem"}:""})),b=Object(a["computed"])((function(){return e.tooltipFeedback?"valid-tooltip":"valid-feedback"})),v=Object(a["computed"])((function(){return e.tooltipFeedback?"invalid-tooltip":"invalid-feedback"})),y=Object(a["ref"])(e.isValidated),x=Object(a["ref"])(e.isValid),w=Object(a["ref"])(""),k=Object(a["computed"])((function(){return y.value&&!x.value&&e.validationEvent?w.value:e.invalidFeedback})),_=function(e){x.value=e.target.checkValidity(),x.value||(w.value=e.target.validationMessage),y.value=!0,i("on-validate",x.value)},S=function(){"submit"!==e.validationEvent&&wt(o.value,e.validationEvent,_)};function C(){l.value&&(h.value=.8*l.value.clientWidth+8)}function I(){r.placeholder&&!l.value?u.value=!0:u.value=!1}var O=Object(a["ref"])((null===(n=s.value)||void 0===n?void 0:n.length)||0);function T(t){if(e.counter){if(t.target.value.length>e.maxLength)return void(t.target.value=s.value);O.value=t.target.value.length}s.value=t.target.value,i("update:modelValue",s.value)}return Object(a["onMounted"])((function(){C(),I(),e.validationEvent&&S()})),Object(a["onUpdated"])((function(){C(),I()})),Object(a["onUnmounted"])((function(){kt(o.value,e.validationEvent,_)})),Object(a["watchEffect"])((function(){if(e.counter){var t,n;if((null===(t=e.modelValue)||void 0===t?void 0:t.length)>e.maxLength)return s.value=e.modelValue.slice(0,e.maxLength),void(O.value=e.maxLength);O.value=(null===(n=e.modelValue)||void 0===n?void 0:n.length)||0}s.value=e.modelValue})),Object(a["watch"])((function(){return e.isValidated}),(function(e){return y.value=e})),Object(a["watch"])((function(){return e.isValid}),(function(e){return x.value=e})),{textareaRef:o,uid:d,textareaValue:s,labelRef:l,handleInput:T,wrapperClassName:p,textareaClassName:f,validFeedbackClassName:b,invalidFeedbackClassName:v,validationStyle:g,customInvalidFeedback:k,notchLeadingWidth:c,notchMiddleWidth:h,props:e,currentLength:O}}};const gs=c()(ms,[["render",fs]]);var bs=gs,vs=["id","checked","required","aria-required"],ys=["for","innerHTML"],xs=["id","checked","required","aria-required"],ws=["for","innerHTML"];function ks(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[n.wrap?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{key:0,class:Object(a["normalizeClass"])(r.wrapperClassName)},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("input",Object(a["mergeProps"])({class:r.inputClassName,type:"checkbox"},e.$attrs,{id:r.uid,checked:r.inputValue,onChange:t[0]||(t[0]=function(){return r.handleChange&&r.handleChange.apply(r,arguments)}),required:!!n.required||null,"aria-required":n.required,ref:"inputRef"}),null,16,vs),n.label?(Object(a["openBlock"])(),Object(a["createElementBlock"])("label",{key:0,class:Object(a["normalizeClass"])(r.labelClassName),for:r.uid,innerHTML:n.label},null,10,ys)):Object(a["createCommentVNode"])("",!0),n.validFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:1,class:Object(a["normalizeClass"])(r.validFeedbackClassName)},Object(a["toDisplayString"])(n.validFeedback),3)):Object(a["createCommentVNode"])("",!0),n.invalidFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:2,class:Object(a["normalizeClass"])(r.invalidFeedbackClassName)},Object(a["toDisplayString"])(n.invalidFeedback),3)):Object(a["createCommentVNode"])("",!0)]})),_:1},8,["class"])):Object(a["createCommentVNode"])("",!0),n.wrap?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("input",Object(a["mergeProps"])({key:1,class:r.inputClassName,type:"checkbox"},e.$attrs,{id:r.uid,checked:r.inputValue,onChange:t[1]||(t[1]=function(){return r.handleChange&&r.handleChange.apply(r,arguments)}),required:!!n.required||null,"aria-required":n.required,ref:"inputRef"}),null,16,xs)),!n.wrap&&n.label?(Object(a["openBlock"])(),Object(a["createElementBlock"])("label",{key:2,class:Object(a["normalizeClass"])(r.labelClassName),for:r.uid,innerHTML:n.label},null,10,ws)):Object(a["createCommentVNode"])("",!0),!n.wrap&&n.validFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:3,class:Object(a["normalizeClass"])(r.validFeedbackClassName)},Object(a["toDisplayString"])(n.validFeedback),3)):Object(a["createCommentVNode"])("",!0),!n.wrap&&n.invalidFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:4,class:Object(a["normalizeClass"])(r.invalidFeedbackClassName)},Object(a["toDisplayString"])(n.invalidFeedback),3)):Object(a["createCommentVNode"])("",!0)],64)}var _s={name:"MDBCheckbox",inheritAttrs:!1,props:{id:String,label:String,modelValue:Boolean,inline:Boolean,wrapperClass:String,labelClass:String,inputClass:String,btnCheck:Boolean,required:Boolean,validateOnChange:Boolean,isValidated:Boolean,isValid:Boolean,validFeedback:String,invalidFeedback:String,tooltipFeedback:{type:Boolean,default:!1},wrap:{type:Boolean,default:!0},formCheck:{type:Boolean,default:!0},tag:{type:String,default:"div"}},emits:["update:modelValue","on-validate"],setup:function(e,t){var n=t.emit,r=Object(a["ref"])("inputRef"),i=Object(a["ref"])(e.modelValue),o=e.id||ct("MDBCheckbox-"),s=Object(a["computed"])((function(){return[e.formCheck&&!e.btnCheck?"form-check":"",e.inline&&"form-check-inline",e.wrapperClass]})),l=Object(a["computed"])((function(){return[e.btnCheck?"btn-check":"form-check-input",e.inputClass&&e.inputClass,d.value&&p.value&&"is-valid",d.value&&!p.value&&"is-invalid"]})),u=Object(a["computed"])((function(){return[e.labelClass||"form-check-label"]})),c=Object(a["computed"])((function(){return e.tooltipFeedback?"valid-tooltip":"valid-feedback"})),h=Object(a["computed"])((function(){return e.tooltipFeedback?"invalid-tooltip":"invalid-feedback"})),d=Object(a["ref"])(e.isValidated),p=Object(a["ref"])(e.isValid),f=function(e){p.value=e.target.checkValidity(),d.value=!0,n("on-validate",p.value)},m=function(){wt(r.value,"change",f)};function g(){i.value=!i.value,n("update:modelValue",i.value)}return Object(a["onMounted"])((function(){e.validateOnChange&&m()})),Object(a["onUnmounted"])((function(){kt(r.value,"change",f)})),Object(a["watchEffect"])((function(){return i.value=e.modelValue})),Object(a["watch"])((function(){return e.isValidated}),(function(e){return d.value=e})),Object(a["watch"])((function(){return e.isValid}),(function(e){return p.value=e})),{inputRef:r,wrapperClassName:s,inputClassName:l,labelClassName:u,validFeedbackClassName:c,invalidFeedbackClassName:h,inputValue:i,handleChange:g,uid:o,props:e}}};const Ss=c()(_s,[["render",ks]]);var Cs=Ss,Is=["id","required","aria-required"],Os=["for"],Ts=["id","required","aria-required"],Ns=["for"];function Es(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[n.wrap?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{key:0,class:Object(a["normalizeClass"])(r.wrapperClassName)},{default:Object(a["withCtx"])((function(){return[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",Object(a["mergeProps"])({class:r.inputClassName,type:"radio"},e.$attrs,{id:r.uid,onChange:t[0]||(t[0]=function(){return r.handleChange&&r.handleChange.apply(r,arguments)}),"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.inputValue=e}),required:!!n.required||null,"aria-required":n.required,ref:"inputRef"}),null,16,Is),[[a["vModelRadio"],r.inputValue]]),n.label?(Object(a["openBlock"])(),Object(a["createElementBlock"])("label",{key:0,class:Object(a["normalizeClass"])(r.labelClassName),for:r.uid},Object(a["toDisplayString"])(n.label),11,Os)):Object(a["createCommentVNode"])("",!0),n.validFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:1,class:Object(a["normalizeClass"])(r.validFeedbackClassName)},Object(a["toDisplayString"])(n.validFeedback),3)):Object(a["createCommentVNode"])("",!0),n.invalidFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:2,class:Object(a["normalizeClass"])(r.invalidFeedbackClassName)},Object(a["toDisplayString"])(n.invalidFeedback),3)):Object(a["createCommentVNode"])("",!0)]})),_:1},8,["class"])):Object(a["createCommentVNode"])("",!0),n.wrap?Object(a["createCommentVNode"])("",!0):Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("input",Object(a["mergeProps"])({key:1,class:r.inputClassName,type:"radio"},e.$attrs,{id:r.uid,onChange:t[2]||(t[2]=function(){return r.handleChange&&r.handleChange.apply(r,arguments)}),"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.inputValue=e}),required:!!n.required||null,"aria-required":n.required,ref:"inputRef"}),null,16,Ts)),[[a["vModelRadio"],r.inputValue]]),!n.wrap&&n.label?(Object(a["openBlock"])(),Object(a["createElementBlock"])("label",{key:2,class:Object(a["normalizeClass"])(r.labelClassName),for:r.uid},Object(a["toDisplayString"])(n.label),11,Ns)):Object(a["createCommentVNode"])("",!0),!n.wrap&&n.validFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:3,class:Object(a["normalizeClass"])(r.validFeedbackClassName)},Object(a["toDisplayString"])(n.validFeedback),3)):Object(a["createCommentVNode"])("",!0),!n.wrap&&n.invalidFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:4,class:Object(a["normalizeClass"])(r.invalidFeedbackClassName)},Object(a["toDisplayString"])(n.invalidFeedback),3)):Object(a["createCommentVNode"])("",!0)],64)}var Ds={name:"MDBRadio",inheritAttrs:!1,props:{id:String,label:String,inline:Boolean,modelValue:String,wrapperClass:String,labelClass:String,btnCheck:Boolean,required:Boolean,validateOnChange:Boolean,isValidated:Boolean,isValid:Boolean,validFeedback:String,invalidFeedback:String,tooltipFeedback:{type:Boolean,default:!1},wrap:{type:Boolean,default:!0},formCheck:{type:Boolean,default:!0},tag:{type:String,default:"div"}},emits:["update:modelValue","on-validate"],setup:function(e,t){var n=t.emit,r=Object(a["ref"])("inputRef"),i=Object(a["ref"])(e.modelValue||!1),o=e.id||ct("MDBRadio-"),s=Object(a["computed"])((function(){return[e.formCheck&&!e.btnCheck?"form-check":"",e.inline&&"form-check-inline",e.wrapperClass]})),l=Object(a["computed"])((function(){return[e.btnCheck?"btn-check":"form-check-input",d.value&&p.value&&"is-valid",d.value&&!p.value&&"is-invalid"]})),u=Object(a["computed"])((function(){return[e.labelClass||"form-check-label"]})),c=Object(a["computed"])((function(){return e.tooltipFeedback?"valid-tooltip":"valid-feedback"})),h=Object(a["computed"])((function(){return e.tooltipFeedback?"invalid-tooltip":"invalid-feedback"})),d=Object(a["ref"])(e.isValidated),p=Object(a["ref"])(e.isValid),f=function(e){p.value=e.target.checkValidity(),d.value=!0,n("on-validate",p.value)},m=function(){wt(r.value,"change",f)};function g(e){n("update:modelValue",e.target.value)}return Object(a["onMounted"])((function(){e.validateOnChange&&m()})),Object(a["onUnmounted"])((function(){kt(r.value,"change",f)})),Object(a["watchEffect"])((function(){return i.value=e.modelValue})),Object(a["watch"])((function(){return e.isValidated}),(function(e){return d.value=e})),Object(a["watch"])((function(){return e.isValid}),(function(e){return p.value=e})),{inputRef:r,inputValue:i,handleChange:g,wrapperClassName:s,inputClassName:l,labelClassName:u,validFeedbackClassName:c,invalidFeedbackClassName:h,uid:o,props:e}}};const $s=c()(Ds,[["render",Es]]);var As=$s,Rs=["for"],Ms=["id"];function Fs(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[n.label?(Object(a["openBlock"])(),Object(a["createElementBlock"])("label",{key:0,class:Object(a["normalizeClass"])(r.labelClassName),for:r.uid},Object(a["toDisplayString"])(n.label),11,Rs)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("input",Object(a["mergeProps"])({type:"file",class:r.inputClassName},e.$attrs,{id:r.uid,onChange:t[0]||(t[0]=function(){return r.handleChange&&r.handleChange.apply(r,arguments)})}),null,16,Ms),n.validFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:1,class:Object(a["normalizeClass"])(r.validFeedbackClassName)},Object(a["toDisplayString"])(n.validFeedback),3)):Object(a["createCommentVNode"])("",!0),n.invalidFeedback?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:2,class:Object(a["normalizeClass"])(r.invalidFeedbackClassName)},Object(a["toDisplayString"])(n.invalidFeedback),3)):Object(a["createCommentVNode"])("",!0)],64)}var Ps={name:"MDBFile",props:{id:String,inputClass:String,invalidFeedback:String,isInvalid:Boolean,isValid:Boolean,isValidated:Boolean,label:String,labelClass:String,modelValue:{type:[FileList,Array],default:function(){return[]}},size:String,tooltipFeedback:Boolean,validFeedback:String,validateOnChange:Boolean},emits:["update:modelValue","on-validate"],setup:function(e,t){var n=t.emit,r=e.id||ct("MDBFile-"),i=Object(a["ref"])(e.modelValue),o=Object(a["computed"])((function(){return["form-control",e.size&&"form-control-".concat(e.size),c.value&&h.value&&"is-valid",c.value&&!h.value&&"is-invalid",e.inputClass]})),s=Object(a["computed"])((function(){return["form-label",e.labelClass]})),l=Object(a["computed"])((function(){return e.tooltipFeedback?"valid-tooltip":"valid-feedback"})),u=Object(a["computed"])((function(){return e.tooltipFeedback?"invalid-tooltip":"invalid-feedback"})),c=Object(a["ref"])(e.isValidated),h=Object(a["ref"])(e.isValid),d=function(e){h.value=e.target.files.length>0,c.value=!0,n("on-validate",h.value)},p=function(t){i.value=t.target.files,n("update:modelValue",i.value),e.validateOnChange&&d(t)};return Object(a["watch"])((function(){return e.modelValue}),(function(e){return i.value=e})),Object(a["watch"])((function(){return e.isValidated}),(function(e){return c.value=e})),Object(a["watch"])((function(){return e.isValid}),(function(e){h.value=e})),{uid:r,inputClassName:o,labelClassName:s,validFeedbackClassName:l,invalidFeedbackClassName:u,handleChange:p}}};const js=c()(Ps,[["render",Fs]]);var Bs=js,Ls=["for"],zs=["id","value","min","max"],Vs={class:"thumb-value"};function Us(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[n.label?(Object(a["openBlock"])(),Object(a["createElementBlock"])("label",{key:0,class:Object(a["normalizeClass"])(r.labelClassName),for:r.uid},Object(a["toDisplayString"])(n.label),11,Ls)):Object(a["createCommentVNode"])("",!0),(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.wrapperClassName)},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("input",Object(a["mergeProps"])({type:"range",class:r.inputClassName,id:r.uid,value:r.inputValue,min:r.minValue,max:r.maxValue},e.$attrs,{onInput:t[0]||(t[0]=function(){return r.handleInput&&r.handleInput.apply(r,arguments)}),onMousedown:t[1]||(t[1]=function(e){return r.toggleThumb(!0)}),onTouchstart:t[2]||(t[2]=function(e){return r.toggleThumb(!0)}),onMouseup:t[3]||(t[3]=function(e){return r.toggleThumb(!1)}),onTouchend:t[4]||(t[4]=function(e){return r.toggleThumb(!1)})}),null,16,zs),n.thumb?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",{key:0,class:Object(a["normalizeClass"])(r.thumbClassName),style:Object(a["normalizeStyle"])({left:r.thumbLeftPosition})},[Object(a["createElementVNode"])("span",Vs,Object(a["toDisplayString"])(r.inputValue),1)],6)):Object(a["createCommentVNode"])("",!0)]})),_:1},8,["class"]))],64)}var Ws={name:"MDBRange",inheritAttrs:!1,props:{id:String,inputClass:String,label:String,labelClass:String,max:{type:Number,default:100},min:{type:Number,default:0},modelValue:{type:Number,default:50},tag:{type:String,default:"div"},thumb:{type:Boolean,default:!0},thumbClass:String,wrapperClass:String},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,r=Object(a["ref"])(e.modelValue),i=Object(a["ref"])(e.min),o=Object(a["ref"])(e.max),s=e.id||ct("MDBRange-"),l=Object(a["ref"])(!1),u=Object(a["computed"])((function(){return["range",e.wrapperClass]})),c=Object(a["computed"])((function(){return["form-range",e.inputClass]})),h=Object(a["computed"])((function(){return["form-label",e.labelClass]})),d=Object(a["computed"])((function(){return["thumb",l.value&&"thumb-active",e.thumbClass]})),p=Object(a["ref"])(0),f=function(e){r.value=parseFloat(e.target.value),n("update:modelValue",r.value),g()},m=function(e){l.value=e},g=function(){var e=parseFloat(100*(r.value-i.value)/(o.value-i.value));p.value="calc(".concat(e,"% + (").concat(8-.15*e,"px))")};return Object(a["nextTick"])((function(){g()})),Object(a["watch"])((function(){return e.modelValue}),(function(e){r.value=e,g()})),{inputValue:r,minValue:i,maxValue:o,uid:s,wrapperClassName:u,inputClassName:c,labelClassName:h,thumbClassName:d,thumbLeftPosition:p,props:e,handleInput:f,toggleThumb:m}}};const Hs=c()(Ws,[["render",Us]]);var Gs=Hs,qs=["id","checked"],Ys=["for"];function Xs(e,t,n,r,i,o){return Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(n.tag),{class:Object(a["normalizeClass"])(r.wrapperClassName)},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("input",Object(a["mergeProps"])({type:"checkbox",class:r.inputClassName,id:r.uid},e.$attrs,{checked:r.inputValue,onChange:t[0]||(t[0]=function(){return r.handleChange&&r.handleChange.apply(r,arguments)})}),null,16,qs),Object(a["createElementVNode"])("label",{class:Object(a["normalizeClass"])(r.labelClassName),for:r.uid},Object(a["toDisplayString"])(n.label),11,Ys)]})),_:1},8,["class"])}var Ks={name:"MDBSwitch",inheritAttrs:!1,props:{id:String,inputClass:String,label:String,labelClass:String,modelValue:{type:Boolean,default:!1},tag:{type:String,default:"div"},wrapperClass:String},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,r=Object(a["ref"])(e.modelValue),i=e.id||ct("MDBSwitch-"),o=Object(a["computed"])((function(){return["form-check form-switch",e.wrapperClass]})),s=Object(a["computed"])((function(){return["form-check-input",e.inputClass]})),l=Object(a["computed"])((function(){return["form-check-label",e.labelClass]}));function u(){r.value=!r.value,n("update:modelValue",r.value)}return Object(a["watch"])((function(){return e.modelValue}),(function(e){return r.value=e})),{inputValue:r,uid:i,wrapperClassName:o,inputClassName:s,labelClassName:l,handleChange:u}}};const Js=c()(Ks,[["render",Xs]]);var Zs=Js,Qs={mounted:function(e,t){e.scrollspy={links:[],container:window,scrollPosition:null,async:!1,offset:0},t.value&&(e.scrollspy.container=document.getElementById(t.value.container)||window,e.scrollspy.async=t.value.async||!1,e.scrollspy.offset=t.value.offset||0),e.scrollspy.scrollPosition=nl(e.scrollspy.container),e.scrollspy.findHrefs=function(t){if(t.attributes&&t.attributes.href){if(e.scrollspy.links.push(t),t.classList.contains("collapsible-scrollspy")){var n=t.parentNode.querySelector("ul");n.dataset.mdbCollapsibleScrollspyHeight=n.clientHeight,n.style.overflow="hidden",n.style.height="0"}}else t.childNodes&&t.childNodes.forEach((function(t){return e.scrollspy.findHrefs(t)}))},e.scrollspy.setActive=function(n){t.value&&t.value.callback?t.instance[t.value.callback](n):(e.scrollspy.links.forEach((function(e,t){n===t?e.classList.add("active"):e.classList.remove("active")})),el(e.scrollspy.links,n,e.scrollspy.container),rl(e.scrollspy.links))},e.scrollspy.spy=function(){if(!e.disableScroll){var t=e.scrollspy.container;e.scrollspy.scrollPosition=nl(t),e.scrollspy.links.forEach((function(e){var n=document.querySelector(e.hash);if(n){var r,i=n.getBoundingClientRect();if(t===window)r=window.innerHeight>i.top&&i.top+i.height>=0;else{var o=t.getBoundingClientRect();r=i.top<=o.top+o.height&&i.top+i.height>=o.top}e.isLinkActive=r}}));var n=e.scrollspy.links.filter((function(e){return e.isLinkActive}));if(n.length>0){var r=n[0],i=r.scrollspyIndex;e.scrollspy.setActive(i)}else e.scrollspy.setActive(-1)}},e.scrollspy.clickHandler=function(t,n){var r=e.scrollspy.container;window.clearTimeout(e.disableScrollTimeout),e.disableScroll=!0,t.preventDefault();var i=document.querySelector(n.hash);if(i){var o=i.getBoundingClientRect();if(r===window)window.scrollTo({top:window.scrollY+o.y-e.scrollspy.offset});else{var a=r.getBoundingClientRect();r.style.scrollBehavior="smooth",r.scrollTop=r.scrollTop+o.y-a.y-e.scrollspy.offset}e.scrollspy.setActive(n.scrollspyIndex),tl(e.scrollspy.links[n.scrollspyIndex],e),rl(e.scrollspy.links),e.disableScrollTimeout=setTimeout((function(){e.disableScroll=!1}),800)}},e.scrollspy.findHrefs(e),e.scrollspy.links.forEach((function(t,n){t.scrollspyIndex=n,t.addEventListener("click",(function(n){return e.scrollspy.clickHandler(n,t)}))})),e.scrollspy.spy(),e.scrollspy.container.addEventListener("scroll",e.scrollspy.spy),window.addEventListener("resize",e.scrollspy.spy)},updated:function(e,t){t.modifiers.async&&!t.value.loading&&t.oldValue.loading&&setTimeout((function(){e.scrollspy.links=[],e.scrollspy.findHrefs(e),e.scrollspy.links.forEach((function(t,n){t.scrollspyIndex=n,t.addEventListener("click",(function(n){return e.scrollspy.clickHandler(n,t)}))})),e.scrollspy.spy()}),0)},unmounted:function(e){window.removeEventListener("scroll",e.scrollspy.spy),window.removeEventListener("resize",e.scrollspy.spy)}},el=function(e,t,n){var r=e[t];if(r){var i=lt(r.parentNode.querySelectorAll("a"));i.shift(),i.forEach((function(e){var t=document.querySelector(e.hash);if(t){var r,i=t.getBoundingClientRect();if(n===window)r=window.innerHeight>i.top&&i.top+i.height>=0;else{var o=n.getBoundingClientRect();r=i.top<o.top&&i.top+i.height>o.top}e.isActive=r}}));var o=i.filter((function(e){return e.isLinkActive}));o.length>0&&o[0].classList.add("active")}},tl=function(e,t){var n=e.parentNode;if(n)while(n!==t)n.classList.contains("nav-item")&&n.querySelector("a").classList.add("active"),n=n.parentNode},nl=function(e){return e===window?e.scrollY:e.scrollTop},rl=function(e){e.forEach((function(e){if(e.classList.contains("collapsible-scrollspy")&&e.classList.contains("active")){var t=e.parentNode.querySelector("ul");t.style.overflow="hidden",t.style.height="".concat(t.dataset.mdbCollapsibleScrollspyHeight,"px")}else if(e.classList.contains("collapsible-scrollspy")){var n=e.parentNode.querySelector("ul");n.style.overflow="hidden",n.style.height="0"}}))},il=Qs},fb6a:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("e8b5"),a=n("68ee"),s=n("861d"),l=n("23cb"),u=n("07fa"),c=n("fc6a"),h=n("8418"),d=n("b622"),p=n("1dde"),f=n("f36a"),m=p("slice"),g=d("species"),b=i.Array,v=Math.max;r({target:"Array",proto:!0,forced:!m},{slice:function(e,t){var n,r,i,d=c(this),p=u(d),m=l(e,p),y=l(void 0===t?p:t,p);if(o(d)&&(n=d.constructor,a(n)&&(n===b||o(n.prototype))?n=void 0:s(n)&&(n=n[g],null===n&&(n=void 0)),n===b||void 0===n))return f(d,m,y);for(r=new(void 0===n?b:n)(v(y-m,0)),i=0;m<y;m++,i++)m in d&&h(r,i,d[m]);return r.length=i,r}})},fc6a:function(e,t,n){var r=n("44ad"),i=n("1d80");e.exports=function(e){return r(i(e))}},fce3:function(e,t,n){var r=n("d039"),i=n("da84"),o=i.RegExp;e.exports=r((function(){var e=o(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,n){var r=n("4930");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}})}))},5431:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});n(1703);var r,i=function(){return Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))};function o(e,t){void 0===t&&(t={});var n=t.registrationOptions;void 0===n&&(n={}),delete t.registrationOptions;var o=function(e){var n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];t&&t[e]&&t[e].apply(t,n)};"serviceWorker"in navigator&&r.then((function(){i()?(l(e,o,n),navigator.serviceWorker.ready.then((function(e){o("ready",e)})).catch((function(e){return a(o,e)}))):(s(e,o,n),navigator.serviceWorker.ready.then((function(e){o("ready",e)})).catch((function(e){return a(o,e)})))}))}function a(e,t){navigator.onLine||e("offline"),e("error",t)}function s(e,t,n){navigator.serviceWorker.register(e,n).then((function(e){t("registered",e),e.waiting?t("updated",e):e.onupdatefound=function(){t("updatefound",e);var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?t("updated",e):t("cached",e))}}})).catch((function(e){return a(t,e)}))}function l(e,t,n){fetch(e).then((function(r){404===r.status?(t("error",new Error("Service worker not found at "+e)),u()):-1===r.headers.get("content-type").indexOf("javascript")?(t("error",new Error("Expected "+e+" to have javascript content-type, but received "+r.headers.get("content-type"))),u()):s(e,t,n)})).catch((function(e){return a(t,e)}))}function u(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){return a(emit,e)}))}"undefined"!==typeof window&&(r="undefined"!==typeof Promise?new Promise((function(e){return window.addEventListener("load",e)})):{then:function(e){return window.addEventListener("load",e)}})},4332:function(e,t,n){var r=n(4805),i=n(6788),o=n(9787),a=n(661),s=n(2629),l=n(3363),u=n(4878);u.alea=r,u.xor128=i,u.xorwow=o,u.xorshift7=a,u.xor4096=s,u.tychei=l,e.exports=u},4805:function(e,t,n){var r;e=n.nmd(e),function(e,i,o){function a(e){var t=this,n=u();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new a(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}function u(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){e+=t.charCodeAt(n);var r=.02519603282416938*e;e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=4294967296*r}return 2.3283064365386963e-10*(e>>>0)};return t}i&&i.exports?i.exports=l:n.amdD&&n.amdO?(r=function(){return l}.call(t,n,t,i),void 0===r||(i.exports=r)):this.alea=l}(0,e,n.amdD)},3363:function(e,t,n){var r;e=n.nmd(e),function(e,i,o){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?(r=function(){return l}.call(t,n,t,i),void 0===r||(i.exports=r)):this.tychei=l}(0,e,n.amdD)},6788:function(e,t,n){var r;e=n.nmd(e),function(e,i,o){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?(r=function(){return l}.call(t,n,t,i),void 0===r||(i.exports=r)):this.xor128=l}(0,e,n.amdD)},2629:function(e,t,n){var r;e=n.nmd(e),function(e,i,o){function a(e){var t=this;function n(e,t){var n,r,i,o,a,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,o=-32;o<l;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,n=s[127&o]^=r+a,i=0==n?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,o=512;o>0;--o)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=a,e.X=s,e.i=i}t.next=function(){var e,n,r=t.w,i=t.X,o=t.i;return t.w=r=r+1640531527|0,n=i[o+34&127],e=i[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[o]=n^e,t.i=o,n+(r^r>>>16)|0},n(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&(r.X&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?(r=function(){return l}.call(t,n,t,i),void 0===r||(i.exports=r)):this.xor4096=l}(0,e,n.amdD)},661:function(e,t,n){var r;e=n.nmd(e),function(e,i,o){function a(e){var t=this;function n(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;while(r.length<8)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],e^=e>>>7,n=e^e<<24,e=r[i+1&7],n^=e^e>>>10,e=r[i+3&7],n^=e^e>>>3,e=r[i+4&7],n^=e^e<<7,e=r[i+7&7],e^=e<<13,n^=e^e<<9,r[i]=n,t.i=i+1&7,n},n(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&(r.x&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?(r=function(){return l}.call(t,n,t,i),void 0===r||(i.exports=r)):this.xorshift7=l}(0,e,n.amdD)},9787:function(e,t,n){var r;e=n.nmd(e),function(e,i,o){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?(r=function(){return l}.call(t,n,t,i),void 0===r||(i.exports=r)):this.xorwow=l}(0,e,n.amdD)},4878:function(e,t,n){var r;n(8675),n(7380),n(1118),function(i,o,a){var s,l=256,u=6,c=52,h="random",d=a.pow(l,u),p=a.pow(2,c),f=2*p,m=l-1;function g(e,t,n){var r=[];t=1==t?{entropy:!0}:t||{};var i=x(y(t.entropy?[e,k(o)]:null==e?w():e,3),r),s=new b(r),c=function(){var e=s.g(u),t=d,n=0;while(e<p)e=(e+n)*l,t*=l,n=s.g(1);while(e>=f)e/=2,t/=2,n>>>=1;return(e+n)/t};return c.int32=function(){return 0|s.g(4)},c.quick=function(){return s.g(4)/4294967296},c.double=c,x(k(s.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,s),e.state=function(){return v(s,{})}),n?(a[h]=e,t):e})(c,i,"global"in t?t.global:this==a,t.state)}function b(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];n||(e=[n++]);while(i<l)a[i]=i++;for(i=0;i<l;i++)a[i]=a[o=m&o+e[i%n]+(t=a[i])],a[o]=t;(r.g=function(e){var t,n=0,i=r.i,o=r.j,a=r.S;while(e--)t=a[i=m&i+1],n=n*l+a[m&(a[i]=a[o=m&o+t])+(a[o]=t)];return r.i=i,r.j=o,n})(l)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function y(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(y(e[n],t-1))}catch(o){}return r.length?r:"string"==i?e:e+"\0"}function x(e,t){var n,r=e+"",i=0;while(i<r.length)t[m&i]=m&(n^=19*t[m&i])+r.charCodeAt(i++);return k(t)}function w(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(i.crypto||i.msCrypto).getRandomValues(e)),k(e)}catch(r){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,k(o)]}}function k(e){return String.fromCharCode.apply(0,e)}if(x(a.random(),o),e.exports){e.exports=g;try{s=n(5042)}catch(_){}}else r=function(){return g}.call(t,n,t,e),void 0===r||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},7013:function(e,t,n){var r;(function(i){var o=/^\s+/,a=/\s+$/,s=0,l=i.round,u=i.min,c=i.max,h=i.random;function d(e,t){if(e=e||"",t=t||{},e instanceof d)return e;if(!(this instanceof d))return new d(e,t);var n=p(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=l(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=n.ok,this._tc_id=s++}function p(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,s=!1;return"string"==typeof e&&(e=K(e)),"object"==typeof e&&(X(e.r)&&X(e.g)&&X(e.b)?(t=f(e.r,e.g,e.b),a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):X(e.h)&&X(e.s)&&X(e.v)?(r=H(e.s),i=H(e.v),t=v(e.h,r,i),a=!0,s="hsv"):X(e.h)&&X(e.s)&&X(e.l)&&(r=H(e.s),o=H(e.l),t=g(e.h,r,o),a=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=j(n),{ok:a,format:e.format||s,r:u(255,c(t.r,0)),g:u(255,c(t.g,0)),b:u(255,c(t.b,0)),a:n}}function f(e,t,n){return{r:255*B(e,255),g:255*B(t,255),b:255*B(n,255)}}function m(e,t,n){e=B(e,255),t=B(t,255),n=B(n,255);var r,i,o=c(e,t,n),a=u(e,t,n),s=(o+a)/2;if(o==a)r=i=0;else{var l=o-a;switch(i=s>.5?l/(2-o-a):l/(o+a),o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4;break}r/=6}return{h:r,s:i,l:s}}function g(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=B(e,360),t=B(t,100),n=B(n,100),0===t)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),i=a(l,s,e),o=a(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*o}}function b(e,t,n){e=B(e,255),t=B(t,255),n=B(n,255);var r,i,o=c(e,t,n),a=u(e,t,n),s=o,l=o-a;if(i=0===o?0:l/o,o==a)r=0;else{switch(o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4;break}r/=6}return{h:r,s:i,v:s}}function v(e,t,n){e=6*B(e,360),t=B(t,100),n=B(n,100);var r=i.floor(e),o=e-r,a=n*(1-t),s=n*(1-o*t),l=n*(1-(1-o)*t),u=r%6,c=[n,s,a,a,l,n][u],h=[l,n,n,s,a,a][u],d=[a,a,l,n,n,s][u];return{r:255*c,g:255*h,b:255*d}}function y(e,t,n,r){var i=[W(l(e).toString(16)),W(l(t).toString(16)),W(l(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function x(e,t,n,r,i){var o=[W(l(e).toString(16)),W(l(t).toString(16)),W(l(n).toString(16)),W(G(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function w(e,t,n,r){var i=[W(G(r)),W(l(e).toString(16)),W(l(t).toString(16)),W(l(n).toString(16))];return i.join("")}function k(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.s-=t/100,n.s=L(n.s),d(n)}function _(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.s+=t/100,n.s=L(n.s),d(n)}function S(e){return d(e).desaturate(100)}function C(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.l+=t/100,n.l=L(n.l),d(n)}function I(e,t){t=0===t?0:t||10;var n=d(e).toRgb();return n.r=c(0,u(255,n.r-l(-t/100*255))),n.g=c(0,u(255,n.g-l(-t/100*255))),n.b=c(0,u(255,n.b-l(-t/100*255))),d(n)}function O(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.l-=t/100,n.l=L(n.l),d(n)}function T(e,t){var n=d(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,d(n)}function N(e){var t=d(e).toHsl();return t.h=(t.h+180)%360,d(t)}function E(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+120)%360,s:t.s,l:t.l}),d({h:(n+240)%360,s:t.s,l:t.l})]}function D(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+90)%360,s:t.s,l:t.l}),d({h:(n+180)%360,s:t.s,l:t.l}),d({h:(n+270)%360,s:t.s,l:t.l})]}function $(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+72)%360,s:t.s,l:t.l}),d({h:(n+216)%360,s:t.s,l:t.l})]}function A(e,t,n){t=t||6,n=n||30;var r=d(e).toHsl(),i=360/n,o=[d(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(d(r));return o}function R(e,t){t=t||6;var n=d(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;while(t--)a.push(d({h:r,s:i,v:o})),o=(o+s)%1;return a}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r,o,a,s=this.toRgb();return e=s.r/255,t=s.g/255,n=s.b/255,r=e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4),o=t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4),a=n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4),.2126*r+.7152*o+.0722*a},setAlpha:function(e){return this._a=j(e),this._roundA=l(100*this._a)/100,this},toHsv:function(){var e=b(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=b(this._r,this._g,this._b),t=l(360*e.h),n=l(100*e.s),r=l(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=m(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=m(this._r,this._g,this._b),t=l(360*e.h),n=l(100*e.s),r=l(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return y(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return x(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*B(this._r,255))+"%",g:l(100*B(this._g,255))+"%",b:l(100*B(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*B(this._r,255))+"%, "+l(100*B(this._g,255))+"%, "+l(100*B(this._b,255))+"%)":"rgba("+l(100*B(this._r,255))+"%, "+l(100*B(this._g,255))+"%, "+l(100*B(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(F[y(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+w(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=d(e);n="#"+w(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,i=!t&&r&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e);return i?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return d(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(C,arguments)},brighten:function(){return this._applyModification(I,arguments)},darken:function(){return this._applyModification(O,arguments)},desaturate:function(){return this._applyModification(k,arguments)},saturate:function(){return this._applyModification(_,arguments)},greyscale:function(){return this._applyModification(S,arguments)},spin:function(){return this._applyModification(T,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(N,arguments)},monochromatic:function(){return this._applyCombination(R,arguments)},splitcomplement:function(){return this._applyCombination($,arguments)},triad:function(){return this._applyCombination(E,arguments)},tetrad:function(){return this._applyCombination(D,arguments)}},d.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:H(e[r]));e=n}return d(e,t)},d.equals=function(e,t){return!(!e||!t)&&d(e).toRgbString()==d(t).toRgbString()},d.random=function(){return d.fromRatio({r:h(),g:h(),b:h()})},d.mix=function(e,t,n){n=0===n?0:n||50;var r=d(e).toRgb(),i=d(t).toRgb(),o=n/100,a={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return d(a)},d.readability=function(e,t){var n=d(e),r=d(t);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},d.isReadable=function(e,t,n){var r,i,o=d.readability(e,t);switch(i=!1,r=J(n),r.level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7;break}return i},d.mostReadable=function(e,t,n){var r,i,o,a,s=null,l=0;n=n||{},i=n.includeFallbackColors,o=n.level,a=n.size;for(var u=0;u<t.length;u++)r=d.readability(e,t[u]),r>l&&(l=r,s=d(t[u]));return d.isReadable(e,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,d.mostReadable(e,["#fff","#000"],n))};var M=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},F=d.hexNames=P(M);function P(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function j(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function B(e,t){V(e)&&(e="100%");var n=U(e);return e=u(t,c(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),i.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function L(e){return u(1,c(0,e))}function z(e){return parseInt(e,16)}function V(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function U(e){return"string"===typeof e&&-1!=e.indexOf("%")}function W(e){return 1==e.length?"0"+e:""+e}function H(e){return e<=1&&(e=100*e+"%"),e}function G(e){return i.round(255*parseFloat(e)).toString(16)}function q(e){return z(e)/255}var Y=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function X(e){return!!Y.CSS_UNIT.exec(e)}function K(e){e=e.replace(o,"").replace(a,"").toLowerCase();var t,n=!1;if(M[e])e=M[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=Y.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=Y.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Y.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=Y.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Y.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=Y.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Y.hex8.exec(e))?{r:z(t[1]),g:z(t[2]),b:z(t[3]),a:q(t[4]),format:n?"name":"hex8"}:(t=Y.hex6.exec(e))?{r:z(t[1]),g:z(t[2]),b:z(t[3]),format:n?"name":"hex"}:(t=Y.hex4.exec(e))?{r:z(t[1]+""+t[1]),g:z(t[2]+""+t[2]),b:z(t[3]+""+t[3]),a:q(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=Y.hex3.exec(e))&&{r:z(t[1]+""+t[1]),g:z(t[2]+""+t[2]),b:z(t[3]+""+t[3]),format:n?"name":"hex"}}function J(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}e.exports?e.exports=d:(r=function(){return d}.call(t,n,t,e),void 0===r||(e.exports=r))})(Math)},89:function(e,t){"use strict";t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n}},6735:function(e,t,n){"use strict";n.d(t,{Z:function(){return W}});var r=n(3396),i=n(7139);function o(e,t,n,o,a,s){return(0,r.wg)(),(0,r.iD)("div",{ref:"root",class:"vue-zoomer",style:(0,i.j5)({backgroundColor:n.backgroundColor}),onMousewheel:t[0]||(t[0]=(...e)=>s.onMouseWheel&&s.onMouseWheel(...e)),onDOMMouseScroll:t[1]||(t[1]=(...e)=>s.onMouseWheel&&s.onMouseWheel(...e)),onMousedown:t[2]||(t[2]=(...e)=>s.onMouseDown&&s.onMouseDown(...e)),onMouseup:t[3]||(t[3]=(...e)=>s.onMouseUp&&s.onMouseUp(...e)),onMousemove:t[4]||(t[4]=(...e)=>s.onMouseMove&&s.onMouseMove(...e)),onMouseout:t[5]||(t[5]=(...e)=>s.setPointerPosCenter&&s.setPointerPosCenter(...e)),onTouchstart:t[6]||(t[6]=(...e)=>s.onTouchStart&&s.onTouchStart(...e)),onTouchend:t[7]||(t[7]=(...e)=>s.onTouchEnd&&s.onTouchEnd(...e)),onTouchmove:t[8]||(t[8]=(...e)=>s.onTouchMove&&s.onTouchMove(...e))},[(0,r._)("div",{class:"zoomer",style:(0,i.j5)(s.wrapperStyle)},[(0,r.WI)(e.$slots,"default",{},void 0,!0)],4)],36)}n(1703);if("undefined"===typeof a)var a=window;var s=Object.create,l=Object.defineProperty,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,h=Object.getOwnPropertyNames,d=Object.getOwnPropertyDescriptor,p=e=>l(e,"__esModule",{value:!0}),f=(e,t)=>()=>(t||(t={exports:{}},e(t.exports,t)),t.exports),m=(e,t,n)=>{if(p(e),t&&"object"==typeof t||"function"==typeof t)for(let r of h(t))!c.call(e,r)&&"default"!==r&&l(e,r,{get:()=>t[r],enumerable:!(n=d(t,r))||n.enumerable});return e},g=e=>e&&e.__esModule?e:m(l(null!=e?s(u(e)):{},"default",{value:e,enumerable:!0}),e),b=f(((e,t)=>{function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}t.exports=n})),v=f(((e,t)=>{var n="object"==typeof a&&a&&a.Object===Object&&a;t.exports=n})),y=f(((e,t)=>{var n=v(),r="object"==typeof self&&self&&self.Object===Object&&self,i=n||r||Function("return this")();t.exports=i})),x=f(((e,t)=>{var n=y(),r=function(){return n.Date.now()};t.exports=r})),w=f(((e,t)=>{var n=y(),r=n.Symbol;t.exports=r})),k=f(((e,t)=>{var n=w(),r=Object.prototype,i=r.hasOwnProperty,o=r.toString,a=n?n.toStringTag:void 0;function s(e){var t=i.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(l){}var s=o.call(e);return r&&(t?e[a]=n:delete e[a]),s}t.exports=s})),_=f(((e,t)=>{var n=Object.prototype,r=n.toString;function i(e){return r.call(e)}t.exports=i})),S=f(((e,t)=>{var n=w(),r=k(),i=_(),o="[object Null]",a="[object Undefined]",s=n?n.toStringTag:void 0;function l(e){return null==e?void 0===e?a:o:s&&s in Object(e)?r(e):i(e)}t.exports=l})),C=f(((e,t)=>{function n(e){return null!=e&&"object"==typeof e}t.exports=n})),I=f(((e,t)=>{var n=S(),r=C(),i="[object Symbol]";function o(e){return"symbol"==typeof e||r(e)&&n(e)==i}t.exports=o})),O=f(((e,t)=>{var n=b(),r=I(),i=NaN,o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;function c(e){if("number"==typeof e)return e;if(r(e))return i;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var c=s.test(e);return c||l.test(e)?u(e.slice(2),c?2:8):a.test(e)?i:+e}t.exports=c})),T=f(((e,t)=>{var n=b(),r=x(),i=O(),o="Expected a function",a=Math.max,s=Math.min;function l(e,t,l){var u,c,h,d,p,f,m=0,g=!1,b=!1,v=!0;if("function"!=typeof e)throw new TypeError(o);function y(t){var n=u,r=c;return u=c=void 0,m=t,d=e.apply(r,n),d}function x(e){return m=e,p=setTimeout(_,t),g?y(e):d}function w(e){var n=e-f,r=e-m,i=t-n;return b?s(i,h-r):i}function k(e){var n=e-f,r=e-m;return void 0===f||n>=t||n<0||b&&r>=h}function _(){var e=r();if(k(e))return S(e);p=setTimeout(_,w(e))}function S(e){return p=void 0,v&&u?y(e):(u=c=void 0,d)}function C(){void 0!==p&&clearTimeout(p),m=0,u=f=c=p=void 0}function I(){return void 0===p?d:S(r())}function O(){var e=r(),n=k(e);if(u=arguments,c=this,f=e,n){if(void 0===p)return x(f);if(b)return clearTimeout(p),p=setTimeout(_,t),y(f)}return void 0===p&&(p=setTimeout(_,t)),d}return t=i(t)||0,n(l)&&(g=!!l.leading,b="maxWait"in l,h=b?a(i(l.maxWait)||0,t):h,v="trailing"in l?!!l.trailing:v),O.cancel=C,O.flush=I,O}t.exports=l})),N=g(T()),E=N.default;function D(){let e=[],t=[];function n(e,t){e.forEach((e=>{e.call(null,t)}))}this.onSingleTap=function(t){"function"!==typeof t||e.includes(t)||e.push(t)},this.onDoubleTap=function(e){"function"!==typeof e||t.includes(e)||t.push(e)},this.attach=function(e){e instanceof Element?(e.addEventListener("touchstart",u),e.addEventListener("touchmove",h),e.addEventListener("touchend",c),e.addEventListener("mousedown",d),e.addEventListener("mouseup",p),e.addEventListener("mousemove",f)):console.error("TapDetector.attach: arg must be an Element")},this.detach=function(e){e.removeEventListener("touchstart",u),e.removeEventListener("touchmove",h),e.removeEventListener("touchend",c),e.removeEventListener("mousedown",d),e.removeEventListener("mouseup",p),e.removeEventListener("mousemove",f)};let r=!1,i=0,o=0,a=0,s=0,l=0;function u(e){r=!0,1===e.touches.length&&m(e.touches[0].clientX,e.touches[0].clientY)}function c(e){0===e.touches.length&&g()}function h(e){1===e.touches.length&&b(e.touches[0].clientX,e.touches[0].clientY)}function d(e){r||m(e.clientX,e.clientY)}function p(e){r||g()}function f(e){r||0===e.button&&b(e.clientX,e.clientY)}function m(e,t){s=e,l=t,a=0}function g(){let r=Date.now();a<10&&(r-i<300?o+=1:o=1,i=Date.now(),n(e,{clientX:s,clientY:l}),2===o&&(n(t,{clientX:s,clientY:l}),o=0)),a=0}function b(e,t){let n=s-e,r=l-t,i=Math.sqrt(n*n+r*r);a+=i,s=e,l=t}}var $=D,A={props:{minScale:{type:Number,default:1},maxScale:{type:Number,default:5},zoomed:{type:Boolean,default:!1},resetTrigger:{type:Number,default:1e5},aspectRatio:{type:Number,default:1},backgroundColor:{type:String,default:"transparent"},pivot:{type:String,default:"cursor"},zoomingElastic:{type:Boolean,default:!0},limitTranslation:{type:Boolean,default:!0},doubleClickToZoom:{type:Boolean,default:!0},mouseWheelToZoom:{type:Boolean,default:!0}},data(){return{containerWidth:1,containerHeight:1,containerLeft:0,containerTop:0,translateX:0,animTranslateX:0,translateY:0,animTranslateY:0,scale:1,animScale:1,lastFullWheelTime:0,lastWheelTime:0,lastWheelDirection:"y",isPointerDown:!1,pointerPosX:-1,pointerPosY:-1,twoFingerInitDist:0,panLocked:!0,raf:null,tapDetector:null}},computed:{wrapperStyle(){let e=this.containerWidth*this.animTranslateX,t=this.containerHeight*this.animTranslateY;return{transform:[`translate(${e}px, ${t}px)`,`scale(${this.animScale})`].join(" ")}}},watch:{scale(e){1!==e&&(this.$emit("update:zoomed",!0),this.panLocked=!1)},resetTrigger:"reset"},mounted(){this.tapDetector=new $,this.tapDetector.attach(this.$refs.root),this.doubleClickToZoom&&this.tapDetector.onDoubleTap(this.onDoubleTap),window.addEventListener("resize",this.onWindowResize),this.onWindowResize(),this.refreshContainerPos(),this.loop()},beforeUnmount(){this.tapDetector.detach(this.$refs.root),window.removeEventListener("resize",this.onWindowResize),window.cancelAnimationFrame(this.raf)},methods:{reset(){this.scale=1,this.panLocked=!0,this.translateX=0,this.translateY=0},zoomIn(e=2){this.tryToScale(e),this.onInteractionEnd()},zoomOut(e=.5){this.tryToScale(e),this.onInteractionEnd()},tryToScale(e){let t=this.scale*e;if(this.zoomingElastic){if(t<this.minScale||t>this.maxScale){let n=Math.log2(e);n*=.2,e=Math.pow(2,n),t=this.scale*e}}else t<this.minScale?t=this.minScale:t>this.maxScale&&(t=this.maxScale);if(e=t/this.scale,this.scale=t,"image-center"!==this.pivot){let t=(this.pointerPosX-this.containerLeft)/this.containerWidth,n=(this.pointerPosY-this.containerTop)/this.containerHeight;this.translateX=(.5+this.translateX-t)*e+t-.5,this.translateY=(.5+this.translateY-n)*e+n-.5}},setPointerPosCenter(){this.pointerPosX=this.containerLeft+this.containerWidth/2,this.pointerPosY=this.containerTop+this.containerHeight/2},onPointerMove(e,t){if(this.isPointerDown){let n=e-this.pointerPosX,r=t-this.pointerPosY;this.panLocked||(this.translateX+=n/this.containerWidth,this.translateY+=r/this.containerHeight)}this.pointerPosX=e,this.pointerPosY=t},onInteractionEnd:E((function(){this.limit(),this.panLocked=1===this.scale,this.$emit("update:zoomed",!this.panLocked)}),100),limit(){if(this.scale<this.minScale?this.scale=this.minScale:this.scale>this.maxScale&&this.tryToScale(this.maxScale/this.scale),this.limitTranslation){let e=this.calcTranslateLimit();Math.abs(this.translateX)>e.x&&(this.translateX*=e.x/Math.abs(this.translateX)),Math.abs(this.translateY)>e.y&&(this.translateY*=e.y/Math.abs(this.translateY))}},calcTranslateLimit(){if("y"===this.getMarginDirection()){let e=this.containerWidth/this.aspectRatio/this.containerHeight,t=(this.scale*e-1)/2;return t<0&&(t=0),{x:(this.scale-1)/2,y:t}}{let e=this.containerHeight*this.aspectRatio/this.containerWidth,t=(this.scale*e-1)/2;return t<0&&(t=0),{x:t,y:(this.scale-1)/2}}},getMarginDirection(){let e=this.containerWidth/this.containerHeight;return e>this.aspectRatio?"x":"y"},onDoubleTap(e){1===this.scale?(e.clientX>0&&(this.pointerPosX=e.clientX,this.pointerPosY=e.clientY),this.tryToScale(Math.min(3,this.maxScale))):this.reset(),this.onInteractionEnd()},onWindowResize(){let e=window.getComputedStyle(this.$refs.root);this.containerWidth=parseFloat(e.width),this.containerHeight=parseFloat(e.height),this.setPointerPosCenter(),this.limit()},refreshContainerPos(){let e=this.$refs.root.getBoundingClientRect();this.containerLeft=e.left,this.containerTop=e.top},loop(){this.animScale=this.gainOn(this.animScale,this.scale),this.animTranslateX=this.gainOn(this.animTranslateX,this.translateX),this.animTranslateY=this.gainOn(this.animTranslateY,this.translateY),this.raf=window.requestAnimationFrame(this.loop)},gainOn(e,t){let n=.3*(t-e);return Math.abs(n)>1e-5?e+n:t},onMouseWheel(e){if(!this.mouseWheelToZoom)return;e.preventDefault(),e.detail&&(e.wheelDelta=-10*e.detail);let t=Date.now();120===Math.abs(e.wheelDelta)?t-this.lastFullWheelTime>50&&(this.onMouseWheelDo(e.wheelDelta),this.lastFullWheelTime=t):(t-this.lastWheelTime>50&&"number"===typeof e.deltaX&&(this.lastWheelDirection=0==e.detail&&Math.abs(e.deltaX)>Math.abs(e.deltaY)?"x":"y","x"===this.lastWheelDirection&&this.$emit("swipe",e.deltaX>0?"left":"right")),"y"===this.lastWheelDirection&&this.onMouseWheelDo(e.wheelDelta)),this.lastWheelTime=t},onMouseWheelDo(e){let t=Math.pow(1.25,e/120);this.tryToScale(t),this.onInteractionEnd()},onMouseDown(e){this.refreshContainerPos(),this.isPointerDown=!0,this.pointerPosX=e.clientX,this.pointerPosY=e.clientY},onMouseUp(e){this.isPointerDown=!1,this.onInteractionEnd()},onMouseMove(e){this.onPointerMove(e.clientX,e.clientY)},onTouchStart(e){if(1===e.touches.length)this.refreshContainerPos(),this.pointerPosX=e.touches[0].clientX,this.pointerPosY=e.touches[0].clientY,this.isPointerDown=!0;else if(2===e.touches.length){this.isPointerDown=!0,this.pointerPosX=(e.touches[0].clientX+e.touches[1].clientX)/2,this.pointerPosY=(e.touches[0].clientY+e.touches[1].clientY)/2;let t=e.touches[0].clientX-e.touches[1].clientX,n=e.touches[0].clientY-e.touches[1].clientY;this.twoFingerInitDist=Math.sqrt(t*t+n*n)}},onTouchEnd(e){0===e.touches.length?(this.isPointerDown=!1,Math.abs(this.scale-1)<.1&&(this.scale=1),this.onInteractionEnd()):1===e.touches.length&&(this.pointerPosX=e.touches[0].clientX,this.pointerPosY=e.touches[0].clientY)},onTouchMove(e){if(1===e.touches.length)this.onPointerMove(e.touches[0].clientX,e.touches[0].clientY);else if(2===e.touches.length){let t=(e.touches[0].clientX+e.touches[1].clientX)/2,n=(e.touches[0].clientY+e.touches[1].clientY)/2;this.onPointerMove(t,n),this.pointerPosX=t,this.pointerPosY=n;let r=e.touches[0].clientX-e.touches[1].clientX,i=e.touches[0].clientY-e.touches[1].clientY,o=Math.sqrt(r*r+i*i);this.tryToScale(o/this.twoFingerInitDist),this.twoFingerInitDist=o}}}},R=n(89);const M=(0,R.Z)(A,[["render",o],["__scopeId","data-v-35945d4e"]]);var F=M,P=n(9242);const j=["src","onLoad"];function B(e,t,n,o,a,s){const l=(0,r.up)("v-zoomer");return(0,r.wg)(),(0,r.iD)("div",{ref:"root",class:(0,i.C_)([{anim:a.autoSliding&&!a.isPointerDown},"vue-zoomer-gallery"]),style:(0,i.j5)({"background-color":n.backgroundColor}),onMousemove:t[2]||(t[2]=(...e)=>s.onMouseMove&&s.onMouseMove(...e)),onMousedown:t[3]||(t[3]=(...e)=>s.onMouseDown&&s.onMouseDown(...e)),onMouseout:t[4]||(t[4]=(...e)=>s.onMouseUp&&s.onMouseUp(...e)),onMouseup:t[5]||(t[5]=(...e)=>s.onMouseUp&&s.onMouseUp(...e)),onTouchstart:t[6]||(t[6]=(...e)=>s.onTouchStart&&s.onTouchStart(...e)),onTouchend:t[7]||(t[7]=(...e)=>s.onTouchEnd&&s.onTouchEnd(...e)),onTouchmove:t[8]||(t[8]=(0,P.iM)(((...e)=>s.onTouchMove&&s.onTouchMove(...e)),["prevent"]))},[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(3,((e,o)=>(0,r.Wm)(l,{ref_for:!0,ref:e=>{a.zoomerRefs[o]=e},key:o+"-"+a.selIndex,class:(0,i.C_)([["left","middle","right"][o],"slide"]),style:(0,i.j5)([s.leftStyle,s.middleStyle,s.rightStyle][o]),"max-scale":10,zoomed:a.currentZoomed,"onUpdate:zoomed":t[1]||(t[1]=e=>a.currentZoomed=e),"reset-trigger":o,"aspect-ratio":a.imageAspectRatios[a.selIndex+o-1]||1,pivot:n.pivot,"zooming-elastic":n.zoomingElastic,"limit-translation":n.limitTranslation,"double-click-to-zoom":n.doubleClickToZoom,"mouse-wheel-to-zoom":n.mouseWheelToZoom,onSwipe:s.onImageSwipe},{default:(0,r.w5)((()=>[a.selIndex+o-1>-1&&a.selIndex+o-1<n.list.length?((0,r.wg)(),(0,r.iD)("img",{key:0,src:n.list[a.selIndex+o-1],draggable:"false",style:{"object-fit":"contain",width:"100%",height:"100%"},onLoad:e=>s.onImageLoad(a.selIndex+o-1,e),onDragstart:t[0]||(t[0]=(...e)=>s.onImageDragStart&&s.onImageDragStart(...e))},null,40,j)):(0,r.kq)("",!0)])),_:2},1032,["class","style","zoomed","reset-trigger","aspect-ratio","pivot","zooming-elastic","limit-translation","double-click-to-zoom","mouse-wheel-to-zoom","onSwipe"]))),64))],38)}const L=50;var z={props:{modelValue:{type:Number,required:!0},list:{type:Array,required:!0},backgroundColor:{type:String,default:"#333"},pivot:{type:String,default:"cursor"},zoomingElastic:{type:Boolean,default:!0},limitTranslation:{type:Boolean,default:!0},doubleClickToZoom:{type:Boolean,default:!0},mouseWheelToZoom:{type:Boolean,default:!0}},data(){return{zoomerRefs:[],containerWidth:1,containerHeight:1,selIndex:this.modelValue,animSelIndex:this.modelValue,currentZoomed:!1,autoSliding:!1,imageAspectRatios:[],isPointerDown:!1,lastPointerX:0,slideOffsetX:0}},computed:{middleStyle(){return{left:`${0+this.slideOffsetX}px`}},leftStyle(){return{left:`${-this.containerWidth+this.slideOffsetX}px`}},rightStyle(){return{left:`${this.containerWidth+this.slideOffsetX}px`}},slideThresh(){return Math.max(L,.1*this.containerWidth)}},watch:{modelValue(e){e!==this.animSelIndex&&(this.selIndex=e,this.animSelIndex=e)},selIndex(){this.$nextTick((()=>{this.zoomerRefs.forEach((e=>{e.refreshContainerPos()}))}))}},mounted(){window.addEventListener("resize",this.onWindowResize),this.onWindowResize()},unmounted(){window.removeEventListener("resize",this.onWindowResize)},methods:{reset(){this.zoomerRefs.forEach((e=>{e.reset()}))},zoomIn(e){this.zoomerRefs[1]&&this.zoomerRefs[1].zoomIn(e)},zoomOut(e){this.zoomerRefs[1]&&this.zoomerRefs[1].zoomOut(e)},onWindowResize(){let e=window.getComputedStyle(this.$refs.root);this.containerWidth=parseFloat(e.width),this.containerHeight=parseFloat(e.height)},onPointerMove(e){if(this.isPointerDown&&!this.currentZoomed){let t=0===this.selIndex&&e>0&&this.slideOffsetX+e>0||this.selIndex===this.list.length-1&&e<0&&this.slideOffsetX+e<0?.3:1;this.slideOffsetX+=e*t}},onPointerUp(){this.slideOffsetX<-this.slideThresh?this.paginate(1):this.slideOffsetX>this.slideThresh?this.paginate(-1):this.paginate(0)},onImageDragStart(e){return e.preventDefault(),!1},paginate(e){let t=this.selIndex+e;t<0||t>=this.list.length?this.slideOffsetX=0:(this.slideOffsetX=this.containerWidth*-e,this.autoSliding=!0,this.$emit("update:modelValue",t),this.animSelIndex=t,setTimeout((()=>{this.selIndex=t,this.slideOffsetX=0,this.autoSliding=!1}),400))},onMouseDown(e){this.isPointerDown=!0,this.lastPointerX=e.clientX},onMouseUp(e){this.isPointerDown=!1,this.onPointerUp()},onMouseMove(e){this.isPointerDown&&(this.onPointerMove(e.clientX-this.lastPointerX),this.lastPointerX=e.clientX)},onTouchStart(e){1===e.touches.length&&(this.isPointerDown=!0,this.lastPointerX=e.touches[0].clientX)},onTouchEnd(e){0===e.touches.length&&(this.isPointerDown=!1,this.onPointerUp())},onTouchMove(e){1===e.touches.length&&(this.onPointerMove(e.touches[0].clientX-this.lastPointerX),this.lastPointerX=e.touches[0].clientX)},onImageLoad(e,t){let n=t.target.naturalWidth/t.target.naturalHeight;this.imageAspectRatios[e]=n},onImageSwipe(e){this.paginate("right"==e?-1:1)}}};const V=(0,R.Z)(z,[["render",B],["__scopeId","data-v-31d37d68"]]);var U=V,W={install(e){e.component("VZoomer",F),e.component("VZoomerGallery",U)},Zoomer:F,Gallery:U}},6866:function(e,t,n){"use strict";n.r(t),n.d(t,{BaseTransition:function(){return r.P$},Comment:function(){return r.sv},EffectScope:function(){return r.Bj},Fragment:function(){return r.HY},KeepAlive:function(){return r.Ob},ReactiveEffect:function(){return r.qq},Static:function(){return r.qG},Suspense:function(){return r.n4},Teleport:function(){return r.lR},Text:function(){return r.xv},Transition:function(){return r.uT},TransitionGroup:function(){return r.W3},VueElement:function(){return r.a2},callWithAsyncErrorHandling:function(){return r.$d},callWithErrorHandling:function(){return r.KU},camelize:function(){return r._A},capitalize:function(){return r.kC},cloneVNode:function(){return r.Ho},compatUtils:function(){return r.ry},compile:function(){return i},computed:function(){return r.Fl},createApp:function(){return r.ri},createBlock:function(){return r.j4},createCommentVNode:function(){return r.kq},createElementBlock:function(){return r.iD},createElementVNode:function(){return r._},createHydrationRenderer:function(){return r.Eo},createPropsRestProxy:function(){return r.p1},createRenderer:function(){return r.Us},createSSRApp:function(){return r.vr},createSlots:function(){return r.Nv},createStaticVNode:function(){return r.uE},createTextVNode:function(){return r.Uk},createVNode:function(){return r.Wm},customRef:function(){return r.ZM},defineAsyncComponent:function(){return r.RC},defineComponent:function(){return r.aZ},defineCustomElement:function(){return r.MW},defineEmits:function(){return r.Bz},defineExpose:function(){return r.WY},defineProps:function(){return r.yb},defineSSRCustomElement:function(){return r.Ah},devtools:function(){return r.mW},effect:function(){return r.cE},effectScope:function(){return r.B},getCurrentInstance:function(){return r.FN},getCurrentScope:function(){return r.nZ},getTransitionRawChildren:function(){return r.Q6},guardReactiveProps:function(){return r.F4},h:function(){return r.h},handleError:function(){return r.S3},hydrate:function(){return r.ZB},initCustomFormatter:function(){return r.Mr},initDirectivesForSSR:function(){return r.Nd},inject:function(){return r.f3},isMemoSame:function(){return r.nQ},isProxy:function(){return r.X3},isReactive:function(){return r.PG},isReadonly:function(){return r.$y},isRef:function(){return r.dq},isRuntimeOnly:function(){return r.of},isShallow:function(){return r.yT},isVNode:function(){return r.lA},markRaw:function(){return r.Xl},mergeDefaults:function(){return r.u_},mergeProps:function(){return r.dG},nextTick:function(){return r.Y3},normalizeClass:function(){return r.C_},normalizeProps:function(){return r.vs},normalizeStyle:function(){return r.j5},onActivated:function(){return r.dl},onBeforeMount:function(){return r.wF},onBeforeUnmount:function(){return r.Jd},onBeforeUpdate:function(){return r.Xn},onDeactivated:function(){return r.se},onErrorCaptured:function(){return r.d1},onMounted:function(){return r.bv},onRenderTracked:function(){return r.bT},onRenderTriggered:function(){return r.Yq},onScopeDispose:function(){return r.EB},onServerPrefetch:function(){return r.vl},onUnmounted:function(){return r.SK},onUpdated:function(){return r.ic},openBlock:function(){return r.wg},popScopeId:function(){return r.Cn},provide:function(){return r.JJ},proxyRefs:function(){return r.WL},pushScopeId:function(){return r.dD},queuePostFlushCb:function(){return r.qb},reactive:function(){return r.qj},readonly:function(){return r.OT},ref:function(){return r.iH},registerRuntimeCompiler:function(){return r.Y1},render:function(){return r.sY},renderList:function(){return r.Ko},renderSlot:function(){return r.WI},resolveComponent:function(){return r.up},resolveDirective:function(){return r.Q2},resolveDynamicComponent:function(){return r.LL},resolveFilter:function(){return r.eq},resolveTransitionHooks:function(){return r.U2},setBlockTracking:function(){return r.qZ},setDevtoolsHook:function(){return r.ec},setTransitionHooks:function(){return r.nK},shallowReactive:function(){return r.Um},shallowReadonly:function(){return r.YS},shallowRef:function(){return r.XI},ssrContextKey:function(){return r.Uc},ssrUtils:function(){return r.G},stop:function(){return r.sT},toDisplayString:function(){return r.zw},toHandlerKey:function(){return r.hR},toHandlers:function(){return r.mx},toRaw:function(){return r.IU},toRef:function(){return r.Vh},toRefs:function(){return r.BK},transformVNodeArgs:function(){return r.C3},triggerRef:function(){return r.oR},unref:function(){return r.SU},useAttrs:function(){return r.l1},useCssModule:function(){return r.fb},useCssVars:function(){return r.sj},useSSRContext:function(){return r.Zq},useSlots:function(){return r.Rr},useTransitionState:function(){return r.Y8},vModelCheckbox:function(){return r.e8},vModelDynamic:function(){return r.YZ},vModelRadio:function(){return r.G2},vModelSelect:function(){return r.bM},vModelText:function(){return r.nr},vShow:function(){return r.F8},version:function(){return r.i8},warn:function(){return r.ZK},watch:function(){return r.YP},watchEffect:function(){return r.m0},watchPostEffect:function(){return r.Rh},watchSyncEffect:function(){return r.yX},withAsyncContext:function(){return r.mv},withCtx:function(){return r.w5},withDefaults:function(){return r.b9},withDirectives:function(){return r.wy},withKeys:function(){return r.D2},withMemo:function(){return r.MX},withModifiers:function(){return r.iM},withScopeId:function(){return r.HX}});var r=n(9242);const i=()=>{0}},1716:function(e,t,n){n(2801),n(1703),e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"24fb":function(e,t,n){"use strict";function r(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"===typeof btoa){var o=i(r),a=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(a).concat([o]).join("\n")}return[n].join("\n")}function i(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t);return"/*# ".concat(n," */")}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=r(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"===typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);r&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},"2c5c":function(e,t,n){var r=n("24fb");t=r(!1),t.push([e.i,".fade-enter-active,.fade-leave-active{transition:opacity .2s}.fade-enter,.fade-leave-to{opacity:0}.vue3-slider{box-sizing:border-box;width:var(--width,100%);height:var(--height,6px);position:relative;margin:3px 0;cursor:pointer;font-family:inherit}.vue3-slider[disabled]{cursor:unset}.vue3-slider.vertical{width:var(--height,6px);height:var(--width,100%)}.vue3-slider.vertical .track-filled{width:100%;bottom:0;top:auto}.vue3-slider.vertical .handle{top:unset;bottom:0;left:0}.vue3-slider.vertical .tooltip{bottom:0;top:auto}.vue3-slider.circular{height:var(--width,100%);margin:0}.vue3-slider.circular .round-end{position:absolute;margin:0 auto;width:var(--height,6px);height:var(--height,6px);transform:scale(1);left:0;right:0;top:calc(var(--height, 6px)*-0.5)}.vue3-slider.circular .handle-container{-webkit-user-select:none;-ms-user-select:none;user-select:none;width:100%;height:100%;position:absolute;top:0;left:0;transform-origin:center;display:flex;justify-content:center;align-items:center}.vue3-slider.circular .handle-container .handle{top:calc(var(--height, 6px)*-0.5);width:var(--height,6px);height:var(--height,6px);transform:scale(1)}.vue3-slider.circular .handle-container .handle.hover{transform:scale(var(--handle-scale,1.35))}.vue3-slider.circular .handle-container .tooltip{position:absolute;bottom:auto;left:unset}.vue3-slider *{-webkit-user-drag:none;-webkit-app-region:no-drag}.vue3-slider .tooltip{position:absolute;left:0;height:25px;background-color:var(--tooltip-color);color:var(--tooltip-text-color);font-family:inherit;padding:3px 7px;border-radius:4px;font-weight:700;display:flex;align-items:center;transition:bottom .3s ease,left .3s ease,top .3s ease,right .3s ease}.vue3-slider .track,.vue3-slider .track-filled{background-color:var(--track-color,rgba(241,246,248,.156863));width:100%;height:100%;border-radius:calc(var(--height, 6px)/2)}.vue3-slider .track-filled{left:0;width:auto;opacity:1}.vue3-slider .handle,.vue3-slider .track-filled{position:absolute;top:0;background-color:var(--color,#fb2727)}.vue3-slider .handle{width:var(--height,6px);height:var(--height,6px);border-radius:calc(var(--height, 6px)/2);transform:scale(0);transition:transform .2s ease;-webkit-user-select:none;-ms-user-select:none;user-select:none}.vue3-slider .handle.hover{transform:scale(var(--handle-scale,1.35))}",""]),e.exports=t},"499e":function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=o[0],s=o[1],l=o[2],u=o[3],c={id:e+":"+i,css:s,media:l,sourceMap:u};r[a]?r[a].parts.push(c):n.push(r[a]={id:a,parts:[c]})}return n}n.r(t),n.d(t,"default",(function(){return f}));var i="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},a=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,u=!1,c=function(){},h=null,d="data-vue-ssr-id",p="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,n,i){u=n,h=i||{};var a=r(e,t);return m(a),function(t){for(var n=[],i=0;i<a.length;i++){var s=a[i],l=o[s.id];l.refs--,n.push(l)}t?(a=r(e,t),m(a)):a=[];for(i=0;i<n.length;i++){l=n[i];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete o[l.id]}}}}function m(e){for(var t=0;t<e.length;t++){var n=e[t],r=o[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(b(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(b(n.parts[i]));o[n.id]={id:n.id,refs:1,parts:a}}}}function g(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function b(e){var t,n,r=document.querySelector("style["+d+'~="'+e.id+'"]');if(r){if(u)return c;r.parentNode.removeChild(r)}if(p){var i=l++;r=s||(s=g()),t=y.bind(null,r,i,!1),n=y.bind(null,r,i,!0)}else r=g(),t=x.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var v=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function y(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=v(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function x(e,t){var n=t.css,r=t.media,i=t.sourceMap;if(r&&e.setAttribute("media",r),h.ssrId&&e.setAttribute(d,t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{while(e.firstChild)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},"5d0f":function(e,t,n){var r=n("2c5c");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("499e").default;i("72eb4f88",r,!0,{sourceMap:!1,shadowMode:!1})},8875:function(e,t,n){var r,i,o;(function(n,a){i=[],r=a,o="function"===typeof r?r.apply(t,i):r,void 0===o||(e.exports=o)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(p){var n,r,i,o=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,a=/@([^@]*):(\d+):(\d+)\s*$/gi,s=o.exec(p.stack)||a.exec(p.stack),l=s&&s[1]||!1,u=s&&s[2]||!1,c=document.location.href.replace(document.location.hash,""),h=document.getElementsByTagName("script");l===c&&(n=document.documentElement.outerHTML,r=new RegExp("(?:[^\\n]+?\\n){0,"+(u-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),i=n.replace(r,"$1").trim());for(var d=0;d<h.length;d++){if("interactive"===h[d].readyState)return h[d];if(h[d].src===l)return h[d];if(l===c&&h[d].innerHTML&&h[d].innerHTML.trim()===i)return h[d]}return null}}return e}))},"8bbf":function(e,t){e.exports=n(6866)},e503:function(e,t,n){"use strict";n("5d0f")},fb15:function(e,t,n){"use strict";n.r(t);var r={};if(n.r(r),n.d(r,"default",(function(){return R})),"undefined"!==typeof window){var i=window.document.currentScript,o=n("8875");i=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var a=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);a&&(n.p=a[1])}var s=n("8bbf");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=["tabindex","disabled"],d=Object(s["createElementVNode"])("div",{class:"track"},null,-1),p=["tabindex","disabled"],f=Object(s["createElementVNode"])("div",{class:"track"},null,-1),m=["tabindex","disabled"],g={width:"100%",height:"100%",viewBox:"0 0 100 100",style:{overflow:"visible"}},b=Object(s["createElementVNode"])("circle",{stroke:"var(--track-color)","vector-effect":"non-scaling-stroke",fill:"none","stroke-width":"var(--height)",r:"50%",cx:"50",cy:"50"},null,-1),v=["stroke-dasharray","stroke-dashoffset"],y=Object(s["createElementVNode"])("div",{class:"handle round-end"},null,-1),x=[y];function w(e,t,n,r,i,o){return"horizontal"==e.orientation?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",{key:"horizontal",style:Object(s["normalizeStyle"])(u({},e.vars)),class:"vue3-slider",ref:"slider",tabindex:e.disabled?void 0:0,onTouchstart:t[0]||(t[0]=function(t){return e.disabled?null:e.clickHandler(t)}),onMousedown:t[1]||(t[1]=function(t){return e.disabled?null:e.clickHandler(t)}),onMouseenter:t[2]||(t[2]=function(t){return e.disabled?null:e.hovering=!0}),onMouseleave:t[3]||(t[3]=function(t){return e.hovering=!1}),onKeydown:t[4]||(t[4]=function(t){return e.disabled?null:e.handleKeydown(t)}),disabled:e.disabled?"":void 0},[Object(s["createVNode"])(s["Transition"],{name:"fade"},{default:Object(s["withCtx"])((function(){return[Object(s["withDirectives"])(Object(s["createElementVNode"])("div",{class:"tooltip",ref:"tooltip",style:Object(s["normalizeStyle"])({transform:e.flip?"translate(".concat(-e.tooltipOffset,"px)"):"translate(".concat(e.tooltipOffset,"px)"),right:e.flip?"0px":void 0,left:e.flip?"auto":void 0,"--tooltip-margin":"max(calc(var(--height, 6px) + 12px), calc(var(--height, 6px) * ".concat(e.applyHandleHoverClass?"var(--handle-scale, 1.35)":"1.35","))"),bottom:e.flipTooltip?"unset":"var(--tooltip-margin)",top:e.flipTooltip?"var(--tooltip-margin)":"unset"})},Object(s["toDisplayString"])(e.tooltipText),5),[[s["vShow"],e.showTooltip&&!e.disabled&&(e.hovering||e.holding)||e.alwaysShowTooltip]])]})),_:1}),d,Object(s["createElementVNode"])("div",{class:"track-filled",style:Object(s["normalizeStyle"])({width:e.filledWidth+"px",right:e.flip?"0px":void 0,left:e.flip?"auto":void 0})},null,4),Object(s["createElementVNode"])("div",{class:Object(s["normalizeClass"])(["handle",{hover:e.applyHandleHoverClass&&!e.disabled}]),style:Object(s["normalizeStyle"])(c({},e.flip?"right":"left",e.filledWidth-1.35*e.height/2+"px"))},null,6)],44,h)):"vertical"==e.orientation?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",{key:"vertical",style:Object(s["normalizeStyle"])(u({},e.vars)),class:"vue3-slider vertical",ref:"slider",tabindex:e.disabled?void 0:0,onTouchstart:t[5]||(t[5]=function(t){return e.disabled?null:e.clickHandler(t)}),onMousedown:t[6]||(t[6]=function(t){return e.disabled?null:e.clickHandler(t)}),onMouseenter:t[7]||(t[7]=function(t){return e.disabled?null:e.hovering=!0}),onMouseleave:t[8]||(t[8]=function(t){return e.hovering=!1}),onKeydown:t[9]||(t[9]=function(t){return e.disabled?null:e.handleKeydown(t)}),disabled:e.disabled?"":void 0},[Object(s["createVNode"])(s["Transition"],{name:"fade"},{default:Object(s["withCtx"])((function(){return[Object(s["withDirectives"])(Object(s["createElementVNode"])("div",{class:"tooltip",ref:"tooltip",style:Object(s["normalizeStyle"])({transform:e.flip?"translateY(".concat(e.tooltipOffset,"px)"):"translateY(".concat(-e.tooltipOffset,"px)"),top:e.flip?"0px":void 0,bottom:e.flip?"auto":void 0,"--tooltip-margin":"max(calc(var(--height, 6px) + 14px), calc(var(--height, 6px) * ".concat(e.applyHandleHoverClass?"var(--handle-scale, 1.35)":"1.35","))"),left:e.flipTooltip?"unset":"var(--tooltip-margin)",right:e.flipTooltip?"var(--tooltip-margin)":"unset"})},Object(s["toDisplayString"])(e.tooltipText),5),[[s["vShow"],e.showTooltip&&!e.disabled&&(e.hovering||e.holding)||e.alwaysShowTooltip]])]})),_:1}),f,Object(s["createElementVNode"])("div",{class:"track-filled",style:Object(s["normalizeStyle"])({height:e.filledWidth+"px",top:e.flip?"0px":void 0,bottom:e.flip?"auto":void 0})},null,4),Object(s["createElementVNode"])("div",{class:Object(s["normalizeClass"])(["handle",{hover:e.applyHandleHoverClass&&!e.disabled}]),style:Object(s["normalizeStyle"])(c({},e.flip?"top":"bottom",e.filledWidth-1.35*e.height/2+"px"))},null,6)],44,p)):(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",{key:"circular",class:"vue3-slider circular",style:Object(s["normalizeStyle"])(u({},e.vars)),ref:"slider",tabindex:e.disabled?void 0:0,onTouchstart:t[10]||(t[10]=function(t){return e.disabled?null:e.clickHandler(t)}),onMousedown:t[11]||(t[11]=function(t){return e.disabled?null:e.clickHandler(t)}),onMouseenter:t[12]||(t[12]=function(t){return e.disabled?null:e.hovering=!0}),onMouseleave:t[13]||(t[13]=function(t){return e.hovering=!1}),onKeydown:t[14]||(t[14]=function(t){return e.disabled?null:e.handleKeydown(t)}),disabled:e.disabled?"":void 0},[(Object(s["openBlock"])(),Object(s["createElementBlock"])("svg",g,[b,Object(s["createElementVNode"])("circle",{style:Object(s["normalizeStyle"])([{transform:"rotate(".concat(-90+e.circleOffset,"deg) ").concat(e.flip?"scaleY(-1)":"")},{"transform-origin":"center"}]),stroke:"var(--color)","vector-effect":"non-scaling-stroke",fill:"none","stroke-width":"var(--height)",r:"50%",cx:"50",cy:"50","stroke-dasharray":e.circumference,"stroke-dashoffset":e.strokeOffset},null,12,v)])),Object(s["createElementVNode"])("div",{class:"handle-container",style:Object(s["normalizeStyle"])({transform:"rotate(".concat(e.circleOffset,"deg)")})},x,4),Object(s["createElementVNode"])("div",{class:"handle-container",style:Object(s["normalizeStyle"])({transform:"rotate(".concat(e.sliderValueDegrees+e.circleOffset,"deg)")})},[Object(s["createElementVNode"])("div",{class:Object(s["normalizeClass"])(["handle",{hover:e.applyHandleHoverClass&&!e.disabled}])},null,2),Object(s["createVNode"])(s["Transition"],{name:"fade"},{default:Object(s["withCtx"])((function(){return[Object(s["withDirectives"])(Object(s["createElementVNode"])("div",{class:"tooltip",ref:"tooltip",style:Object(s["normalizeStyle"])({transform:"rotate(".concat(-e.sliderValueDegrees-e.circleOffset,"deg)"),"--tooltip-margin":"calc(max(calc(".concat(e.tooltipOffset,"px + 34px), calc(").concat(e.tooltipOffset,"px + var(--height) * ").concat(e.applyHandleHoverClass?"calc(var(--handle-scale, 1.35) * 0.9)":1.35,")) * -1)"),top:e.flipTooltip?"calc(var(--tooltip-margin) * -0.7)":"var(--tooltip-margin)"})},Object(s["toDisplayString"])(e.tooltipText),5),[[s["vShow"],e.showTooltip&&!e.disabled&&(e.hovering||e.holding)||e.alwaysShowTooltip]])]})),_:1})],4)],44,m))}var k=/(\d*\.?\d+)\s?(cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%+)/i,_=function(e){var t=e.match(k);return null!==t&&t.length<=3},S={width:{type:String,default:"100%",validator:_},height:{type:Number,default:6},handleScale:{type:Number,default:1.35},alwaysShowHandle:{type:Boolean,default:!1},color:{type:String,default:"#FB2727"},trackColor:{type:String,default:"#f1f6f828"},max:{type:Number,default:100},min:{type:Number,default:0},step:{type:Number,default:1,validator:function(e){return 0!==e||(console.error("[Vue3Slider] Error: Step cannot be 0"),!1)}},limit:{type:Number,default:void 0,validator:function(e){return void 0===e||"number"===typeof e}},tooltip:{type:Boolean,default:!1},tooltipText:{type:String,default:"%v",validator:function(e){return!!e.includes("%v")||(console.error("[Vue3Slider] Error: tooltip text must contain %v"),!1)}},tooltipColor:{type:String,default:"#FFFFFF"},tooltipTextColor:{type:String,default:"#000000"},formatTooltip:{validator:function(e){return"function"!==typeof e?(console.error("[Vue3Slider] Error: formatTooltip must be a function"),!1):"string"===typeof e(0)||(console.error("[Vue3Slider] Error: formatTooltip must return a string"),!1)}},alwaysShowTooltip:{type:Boolean,default:!1},flipTooltip:{type:Boolean,default:!1},orientation:{type:String,default:"horizontal",validator:function(e){return"horizontal"===e||"vertical"===e||"circular"===e}},modelValue:{type:Number,default:0,required:!0},repeat:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},flip:{type:Boolean,default:!1},circleOffset:{type:Number,default:0,validator:function(e){return e>=0&&e<=360}},disabled:{type:Boolean,default:!1}};function C(e){var t=Object(s["ref"])(document.createElement("div")),n=Object(s["ref"])(e.modelValue);0!==e.min&&(n.value-=e.min);var r=Object(s["ref"])(0),i=Object(s["ref"])(0),o=Object(s["ref"])(0),a=Object(s["ref"])(1),l=Object(s["computed"])((function(){var t=0;return t=e.min<0?e.max+Math.abs(e.min):e.max-e.min,t})),u=Object(s["computed"])((function(){if("circular"!==e.orientation)return 0;var t=n.value/(l.value/360);return e.flip?-t:t})),c=Object(s["ref"])(!1),h={slider:t,modelValueUnrounded:n,formattedSliderValue:r,filledWidth:o,pixelsPerStep:a,sliderRange:l,sliderValueDegrees:u,sliderWidth:i,holding:c};return h}function I(e,t){Object(s["watchEffect"])((function(){e.filledWidth.value=O(e,t)}));var n=new ResizeObserver((function(r){e.filledWidth.value=O(e,t),e.sliderWidth.value=e.slider.value?"vertical"===t.orientation?e.slider.value.clientHeight:e.slider.value.clientWidth:0,e.slider.value!==r[0].target&&e.slider.value instanceof Element&&(n.unobserve(r[0].target),n.observe(e.slider.value))}));e.slider.value&&n.observe(e.slider.value)}function O(e,t){var n=e.slider;if(!n.value)return 0;var r="vertical"===t.orientation?n.value.clientHeight:n.value.clientWidth;e.pixelsPerStep.value=r/e.sliderRange.value;var i=Math.max(Math.min(e.modelValueUnrounded.value*e.pixelsPerStep.value,r),0);return i}function T(e,t){var n=new ResizeObserver((function(r){e.value&&(t.value=e.value.clientWidth,e.value!==r[0].target&&(n.unobserve(r[0].target),e.value&&n.observe(e.value)))}));e.value&&n.observe(e.value)}var N=function(e,t,n){var r=function(r){var i=e.modelValueUnrounded.value+r;i=Math.min(e.sliderRange.value,Math.max(0,i)),void 0!==t.limit&&(i=Math.min(i,t.limit+Math.abs(t.min))),n(i)},i=function(e){switch(e.key){case"ArrowRight":case"ArrowUp":r(t.step);break;case"ArrowLeft":case"ArrowDown":r(-t.step);break;default:break}};return{handleKeydown:i}},E=function(e,t,n){var r=Object(s["ref"])(t.modelValue);Object(s["watchEffect"])((function(){return r.value=t.modelValue})),Object(s["watch"])(r,(function(n){if(e.formattedSliderValue.value!==n){void 0!==t.limit&&(n=Math.min(n,t.limit));var r=0;r=t.min<0?n+Math.abs(t.min):n-t.min,r=Math.min(r,e.sliderRange.value),o(r)}}));var i=function(e){var n=t.step,r=0;return r=e>0?Math.round(e/n)*n:0,r+=t.min,void 0!==t.limit&&(r=Math.min(r,t.limit)),r},o=function(r){e.formattedSliderValue.value=i(r),t.sticky?e.modelValueUnrounded.value=e.formattedSliderValue.value-t.min:e.modelValueUnrounded.value=r,n("update:modelValue",e.formattedSliderValue.value),n("change",e.formattedSliderValue.value)};return{formatModelValue:i,updateModelValue:o,modelValueRef:r}},D=function(e,t,n,r){var i=e.formattedSliderValue.value,o=function(n,r,o){var a=e.slider.value.getBoundingClientRect(),s=0;if("horizontal"===t.orientation)s=(n-a.x)/e.pixelsPerStep.value,t.flip&&(s=e.sliderRange.value-s);else if("vertical"===t.orientation)s=(a.y+a.height-r)/e.pixelsPerStep.value,t.flip&&(s=e.sliderRange.value-s);else{var l=n-a.x,u=r-a.y,c=a.width/2,h=a.height/2,d=(u-h)/(l-c),p=180*Math.atan(d)/Math.PI;l>=c?u<h?p=180===Math.ceil(p)?0:90-Math.abs(p):p+=90:p=270+p;var f=e.sliderRange.value/360;if(s=p*f-t.circleOffset*f,s<0&&(s+=e.sliderRange.value),t.flip&&(s=e.sliderRange.value-s),!t.repeat&&o){var m=Math.abs(s-i);m>30*f&&(s=i)}}return s=Math.min(e.sliderRange.value,Math.max(s,0)),void 0!==t.limit&&(s=Math.min(s,t.limit+Math.abs(t.min))),i=s,s},a=function(i){var a;if("mousemove"===i.type)a=i;else{if(i.touches.length>1)return;a=i.touches[0]}if(e.holding.value){var s=e.slider.value.getBoundingClientRect(),l="vertical"===t.orientation?s.y+s.height-a.pageY:a.pageX-s.x;l=Math.min(e.sliderWidth.value,Math.max(l,0)),r(o(a.pageX-window.scrollX,a.pageY-window.scrollY,!0)),n("dragging",e.formattedSliderValue.value,a)}},s=function t(r){e.holding.value&&(e.holding.value=!1),"mouseup"===r.type?(window.removeEventListener("mouseup",t),window.removeEventListener("mousemove",a)):(window.removeEventListener("touchend",t),window.removeEventListener("touchmove",a)),n("drag-end",e.formattedSliderValue.value,r)},l=function(t){if(t.preventDefault(),e.holding.value=!0,n("drag-start",e.formattedSliderValue.value,t),"touchstart"===t.type){if(t.touches.length>1)return;var i=t.touches[0];r(o(i.pageX-window.scrollX,i.pageY-window.scrollY,!1)),window.addEventListener("touchend",s),window.addEventListener("touchmove",a)}else r(o(t.pageX-window.scrollX,t.pageY-window.scrollY,!1)),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a)};return{clickHandler:l}},$=Object(s["defineComponent"])({name:"vue3-slider",props:S,setup:function(e,t){var n=t.emit;(e.modelValue<e.min||e.modelValue>e.max)&&console.error("[Vue3Slider] Error: value exceeds limits of slider"),e.max<=e.min&&console.error("[Vue3Slider] Error: Max value cannot be less than or equal to the min value. This will cause unexpected errors to occur, please fix.");var r=C(e),i=E(r,e,n),o=i.updateModelValue,a=i.formatModelValue,l=N(r,e,o),u=l.handleKeydown,c=D(r,e,n,o),h=c.clickHandler,d=Object(s["ref"])(!1),p=Object(s["computed"])((function(){return!!r.holding.value||(e.alwaysShowHandle||d.value)})),f=Object(s["ref"])(),m=Object(s["computed"])((function(){if(!e.tooltip)return"";var t="";return t=null!==e.formatTooltip&&"function"===typeof e.formatTooltip?e.formatTooltip(r.formattedSliderValue.value||a(r.modelValueUnrounded.value)):(r.formattedSliderValue.value||a(r.modelValueUnrounded.value)).toString(),e.tooltipText.replace("%v",t)})),g=Object(s["ref"])(0),b=Object(s["computed"])((function(){if(!e.tooltip)return 0;var t,n=g.value;if("horizontal"!==e.orientation){if(n=null===(t=f.value)||void 0===t?void 0:t.clientHeight,n||(n=20),"vertical"!==e.orientation)return n}else n?n+=e.height/3:n=14+9*r.formattedSliderValue.value.toString().length;return r.filledWidth.value-n/2})),v=Object(s["computed"])((function(){return r.slider.value&&"circular"===e.orientation?2*Math.PI*(r.sliderWidth.value/2):1})),y=Object(s["computed"])((function(){return"circular"!==e.orientation?0:(r.sliderRange.value-r.modelValueUnrounded.value)/r.sliderRange.value*v.value})),x=Object(s["computed"])((function(){return{"--width":e.width,"--height":e.height+"px","--color":e.color,"--track-color":e.trackColor,"--tooltip-color":e.tooltipColor,"--tooltip-text-color":e.tooltipTextColor,"--handle-scale":e.handleScale}}));return Object(s["onMounted"])((function(){I(r,e),T(f,g)})),{filledWidth:r.filledWidth,slider:r.slider,holding:r.holding,flip:Object(s["computed"])((function(){return e.flip})),clickHandler:h,handleKeydown:u,applyHandleHoverClass:p,hovering:d,showTooltip:Object(s["computed"])((function(){return e.tooltip})),alwaysShowTooltip:Object(s["computed"])((function(){return e.alwaysShowTooltip})),tooltip:f,tooltipText:m,tooltipOffset:b,vars:x,circumference:v,strokeOffset:y,circleOffset:Object(s["computed"])((function(){return e.circleOffset})),sliderValueDegrees:r.sliderValueDegrees}}});n("e503");$.render=w;var A=$,R=function(){var e=A;return e.install=function(t){t.component("Vue3Slider",e)},e}();function M(e,t){return L(e)||B(e,t)||P(e,t)||F()}function F(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P(e,t){if(e){if("string"===typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(l){s=!0,i=l}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function L(e){if(Array.isArray(e))return e}Object.entries(r).forEach((function(e){var t=M(e,2),n=t[0],r=t[1];"default"!==n&&(R[n]=r)}));var z=R;t["default"]=z}})},8524:function(e,t,n){"use strict";n.d(t,{Z:function(){return As}});var r=n(3396),i=n(4870),o=n(7139),a=n(9242),s=(n(1703),{lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}}),l=function(e,t,n){var r,i=s[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},u=l;function c(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var h={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},d={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},p={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},f={date:c({formats:h,defaultWidth:"full"}),time:c({formats:d,defaultWidth:"full"}),dateTime:c({formats:p,defaultWidth:"full"})},m=f,g={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},b=function(e,t,n,r){return g[e]},v=b;function y(e){return function(t,n){var r,i=null!==n&&void 0!==n&&n.context?String(n.context):"standalone";if("formatting"===i&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):o;r=e.formattingValues[a]||e.formattingValues[o]}else{var s=e.defaultWidth,l=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[l]||e.values[s]}var u=e.argumentCallback?e.argumentCallback(t):t;return r[u]}}var x={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},w={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},k={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},S={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},C={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},I=function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},O={ordinalNumber:I,era:y({values:x,defaultWidth:"wide"}),quarter:y({values:w,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:y({values:k,defaultWidth:"wide"}),day:y({values:_,defaultWidth:"wide"}),dayPeriod:y({values:S,defaultWidth:"wide",formattingValues:C,defaultFormattingWidth:"wide"})},T=O;function N(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var a,s=o[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?D(l,(function(e){return e.test(s)})):E(l,(function(e){return e.test(s)}));a=e.valueCallback?e.valueCallback(u):u,a=n.valueCallback?n.valueCallback(a):a;var c=t.slice(s.length);return{value:a,rest:c}}}function E(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function D(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function $(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var i=r[0],o=t.match(e.parsePattern);if(!o)return null;var a=e.valueCallback?e.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;var s=t.slice(i.length);return{value:a,rest:s}}}var A=/^(\d+)(th|st|nd|rd)?/i,R=/\d+/i,M={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},F={any:[/^b/i,/^(a|c)/i]},P={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},j={any:[/1/i,/2/i,/3/i,/4/i]},B={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},L={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},z={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},V={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},U={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},W={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},H={ordinalNumber:$({matchPattern:A,parsePattern:R,valueCallback:function(e){return parseInt(e,10)}}),era:N({matchPatterns:M,defaultMatchWidth:"wide",parsePatterns:F,defaultParseWidth:"any"}),quarter:N({matchPatterns:P,defaultMatchWidth:"wide",parsePatterns:j,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:N({matchPatterns:B,defaultMatchWidth:"wide",parsePatterns:L,defaultParseWidth:"any"}),day:N({matchPatterns:z,defaultMatchWidth:"wide",parsePatterns:V,defaultParseWidth:"any"}),dayPeriod:N({matchPatterns:U,defaultMatchWidth:"any",parsePatterns:W,defaultParseWidth:"any"})},G=H,q={code:"en-US",formatDistance:u,formatLong:m,formatRelative:v,localize:T,match:G,options:{weekStartsOn:0,firstWeekContainsDate:1}},Y=q,X=Y;function K(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function J(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Z(e){J(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function Q(e,t){J(2,arguments);var n=Z(e).getTime(),r=K(t);return new Date(n+r)}function ee(e,t){J(2,arguments);var n=K(t);return Q(e,-n)}function te(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}var ne=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},re=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ie=function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],o=r[2];if(!o)return ne(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"});break}return n.replace("{{date}}",ne(i,t)).replace("{{time}}",re(o,t))},oe={p:re,P:ie},ae=oe;function se(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var le=["D","DD"],ue=["YY","YYYY"];function ce(e){return-1!==le.indexOf(e)}function he(e){return-1!==ue.indexOf(e)}function de(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe=10;class me{constructor(){pe(this,"priority",void 0),pe(this,"subPriority",0)}validate(e,t){return!0}}class ge extends me{constructor(e,t,n,r,i){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=r,i&&(this.subPriority=i)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class be extends me{constructor(){super(...arguments),pe(this,"priority",fe),pe(this,"subPriority",-1)}set(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ye{constructor(){ve(this,"incompatibleTokens",void 0),ve(this,"priority",void 0),ve(this,"subPriority",void 0)}run(e,t,n,r){var i=this.parse(e,t,n,r);return i?{setter:new ge(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,t,n){return!0}}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class we extends ye{constructor(){super(...arguments),xe(this,"priority",140),xe(this,"incompatibleTokens",["R","u","t","T"])}parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});case"GGGG":default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}Math.pow(10,8);var ke=6e4,_e=36e5,Se=1e3,Ce={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ie={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Oe(e,t){return e?{value:t(e.value),rest:e.rest}:e}function Te(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function Ne(e,t){var n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};var r="+"===n[1]?1:-1,i=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,a=n[5]?parseInt(n[5],10):0;return{value:r*(i*_e+o*ke+a*Se),rest:t.slice(n[0].length)}}function Ee(e){return Te(Ce.anyDigitsSigned,e)}function De(e,t){switch(e){case 1:return Te(Ce.singleDigit,t);case 2:return Te(Ce.twoDigits,t);case 3:return Te(Ce.threeDigits,t);case 4:return Te(Ce.fourDigits,t);default:return Te(new RegExp("^\\d{1,"+e+"}"),t)}}function $e(e,t){switch(e){case 1:return Te(Ce.singleDigitSigned,t);case 2:return Te(Ce.twoDigitsSigned,t);case 3:return Te(Ce.threeDigitsSigned,t);case 4:return Te(Ce.fourDigitsSigned,t);default:return Te(new RegExp("^-?\\d{1,"+e+"}"),t)}}function Ae(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Re(e,t){var n,r=t>0,i=r?t:1-t;if(i<=50)n=e||100;else{var o=i+50,a=100*Math.floor(o/100),s=e>=o%100;n=e+a-(s?100:0)}return r?n:1-n}function Me(e){return e%400===0||e%4===0&&e%100!==0}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Pe extends ye{constructor(){super(...arguments),Fe(this,"priority",130),Fe(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return Oe(De(4,e),r);case"yo":return Oe(n.ordinalNumber(e,{unit:"year"}),r);default:return Oe(De(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var i=Re(n.year,r);return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}}var je={};function Be(){return je}function Le(e,t){var n,r,i,o,a,s,l,u;J(1,arguments);var c=Be(),h=K(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:c.weekStartsOn)&&void 0!==r?r:null===(l=c.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==n?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=Z(e),p=d.getUTCDay(),f=(p<h?7:0)+p-h;return d.setUTCDate(d.getUTCDate()-f),d.setUTCHours(0,0,0,0),d}function ze(e,t){var n,r,i,o,a,s,l,u;J(1,arguments);var c=Z(e),h=c.getUTCFullYear(),d=Be(),p=K(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:d.firstWeekContainsDate)&&void 0!==r?r:null===(l=d.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==n?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(h+1,0,p),f.setUTCHours(0,0,0,0);var m=Le(f,t),g=new Date(0);g.setUTCFullYear(h,0,p),g.setUTCHours(0,0,0,0);var b=Le(g,t);return c.getTime()>=m.getTime()?h+1:c.getTime()>=b.getTime()?h:h-1}function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ue extends ye{constructor(){super(...arguments),Ve(this,"priority",130),Ve(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return Oe(De(4,e),r);case"Yo":return Oe(n.ordinalNumber(e,{unit:"year"}),r);default:return Oe(De(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,r){var i=ze(e,r);if(n.isTwoDigitYear){var o=Re(n.year,i);return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Le(e,r)}var a="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(a,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Le(e,r)}}function We(e){J(1,arguments);var t=1,n=Z(e),r=n.getUTCDay(),i=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ge extends ye{constructor(){super(...arguments),He(this,"priority",130),He(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,t){return $e("R"===t?4:t.length,e)}set(e,t,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),We(r)}}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ye extends ye{constructor(){super(...arguments),qe(this,"priority",130),qe(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,t){return $e("u"===t?4:t.length,e)}set(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ke extends ye{constructor(){super(...arguments),Xe(this,"priority",120),Xe(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"Q":case"QQ":return De(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ze extends ye{constructor(){super(...arguments),Je(this,"priority",120),Je(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"q":case"qq":return De(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}function Qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class et extends ye{constructor(){super(...arguments),Qe(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Qe(this,"priority",110)}parse(e,t,n){var r=function(e){return e-1};switch(t){case"M":return Oe(Te(Ce.month,e),r);case"MM":return Oe(De(2,e),r);case"Mo":return Oe(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}function tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class nt extends ye{constructor(){super(...arguments),tt(this,"priority",110),tt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,t,n){var r=function(e){return e-1};switch(t){case"L":return Oe(Te(Ce.month,e),r);case"LL":return Oe(De(2,e),r);case"Lo":return Oe(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}function rt(e,t){var n,r,i,o,a,s,l,u;J(1,arguments);var c=Be(),h=K(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:c.firstWeekContainsDate)&&void 0!==r?r:null===(l=c.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==n?n:1),d=ze(e,t),p=new Date(0);p.setUTCFullYear(d,0,h),p.setUTCHours(0,0,0,0);var f=Le(p,t);return f}var it=6048e5;function ot(e,t){J(1,arguments);var n=Z(e),r=Le(n,t).getTime()-rt(n,t).getTime();return Math.round(r/it)+1}function at(e,t,n){J(2,arguments);var r=Z(e),i=K(t),o=ot(r,n)-i;return r.setUTCDate(r.getUTCDate()-7*o),r}function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class lt extends ye{constructor(){super(...arguments),st(this,"priority",100),st(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,t,n){switch(t){case"w":return Te(Ce.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return De(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,r){return Le(at(e,n,r),r)}}function ut(e){J(1,arguments);var t=Z(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=We(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=We(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function ct(e){J(1,arguments);var t=ut(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=We(n);return r}var ht=6048e5;function dt(e){J(1,arguments);var t=Z(e),n=We(t).getTime()-ct(t).getTime();return Math.round(n/ht)+1}function pt(e,t){J(2,arguments);var n=Z(e),r=K(t),i=dt(n)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}function ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class mt extends ye{constructor(){super(...arguments),ft(this,"priority",100),ft(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,t,n){switch(t){case"I":return Te(Ce.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return De(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return We(pt(e,n))}}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bt=[31,28,31,30,31,30,31,31,30,31,30,31],vt=[31,29,31,30,31,30,31,31,30,31,30,31];class yt extends ye{constructor(){super(...arguments),gt(this,"priority",90),gt(this,"subPriority",1),gt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"d":return Te(Ce.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return De(t.length,e)}}validate(e,t){var n=e.getUTCFullYear(),r=Me(n),i=e.getUTCMonth();return r?t>=1&&t<=vt[i]:t>=1&&t<=bt[i]}set(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class wt extends ye{constructor(){super(...arguments),xt(this,"priority",90),xt(this,"subpriority",1),xt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,t,n){switch(t){case"D":case"DD":return Te(Ce.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return De(t.length,e)}}validate(e,t){var n=e.getUTCFullYear(),r=Me(n);return r?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}function kt(e,t,n){var r,i,o,a,s,l,u,c;J(2,arguments);var h=Be(),d=K(null!==(r=null!==(i=null!==(o=null!==(a=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==a?a:null===n||void 0===n||null===(s=n.locale)||void 0===s||null===(l=s.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==o?o:h.weekStartsOn)&&void 0!==i?i:null===(u=h.locale)||void 0===u||null===(c=u.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==r?r:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=Z(e),f=K(t),m=p.getUTCDay(),g=f%7,b=(g+7)%7,v=(b<d?7:0)+f-m;return p.setUTCDate(p.getUTCDate()+v),p}function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class St extends ye{constructor(){super(...arguments),_t(this,"priority",90),_t(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return e=kt(e,n,r),e.setUTCHours(0,0,0,0),e}}function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class It extends ye{constructor(){super(...arguments),Ct(this,"priority",90),Ct(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Oe(De(t.length,e),i);case"eo":return Oe(n.ordinalNumber(e,{unit:"day"}),i);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return e=kt(e,n,r),e.setUTCHours(0,0,0,0),e}}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Tt extends ye{constructor(){super(...arguments),Ot(this,"priority",90),Ot(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Oe(De(t.length,e),i);case"co":return Oe(n.ordinalNumber(e,{unit:"day"}),i);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return e=kt(e,n,r),e.setUTCHours(0,0,0,0),e}}function Nt(e,t){J(2,arguments);var n=K(t);n%7===0&&(n-=7);var r=1,i=Z(e),o=i.getUTCDay(),a=n%7,s=(a+7)%7,l=(s<r?7:0)+n-o;return i.setUTCDate(i.getUTCDate()+l),i}function Et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Dt extends ye{constructor(){super(...arguments),Et(this,"priority",90),Et(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,t,n){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return De(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return Oe(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return Oe(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Oe(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiii":default:return Oe(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return e=Nt(e,n),e.setUTCHours(0,0,0,0),e}}function $t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class At extends ye{constructor(){super(...arguments),$t(this,"priority",80),$t(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setUTCHours(Ae(n),0,0,0),e}}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Mt extends ye{constructor(){super(...arguments),Rt(this,"priority",80),Rt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setUTCHours(Ae(n),0,0,0),e}}function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Pt extends ye{constructor(){super(...arguments),Ft(this,"priority",80),Ft(this,"incompatibleTokens",["a","b","t","T"])}parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setUTCHours(Ae(n),0,0,0),e}}function jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Bt extends ye{constructor(){super(...arguments),jt(this,"priority",70),jt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,t,n){switch(t){case"h":return Te(Ce.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return De(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e}}function Lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class zt extends ye{constructor(){super(...arguments),Lt(this,"priority",70),Lt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,t,n){switch(t){case"H":return Te(Ce.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return De(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setUTCHours(n,0,0,0),e}}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ut extends ye{constructor(){super(...arguments),Vt(this,"priority",70),Vt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,t,n){switch(t){case"K":return Te(Ce.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return De(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}function Wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ht extends ye{constructor(){super(...arguments),Wt(this,"priority",70),Wt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,t,n){switch(t){case"k":return Te(Ce.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return De(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e}}function Gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class qt extends ye{constructor(){super(...arguments),Gt(this,"priority",60),Gt(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"m":return Te(Ce.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return De(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setUTCMinutes(n,0,0),e}}function Yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Xt extends ye{constructor(){super(...arguments),Yt(this,"priority",50),Yt(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"s":return Te(Ce.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return De(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setUTCSeconds(n,0),e}}function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Jt extends ye{constructor(){super(...arguments),Kt(this,"priority",30),Kt(this,"incompatibleTokens",["t","T"])}parse(e,t){var n=function(e){return Math.floor(e*Math.pow(10,3-t.length))};return Oe(De(t.length,e),n)}set(e,t,n){return e.setUTCMilliseconds(n),e}}function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Qt extends ye{constructor(){super(...arguments),Zt(this,"priority",10),Zt(this,"incompatibleTokens",["t","T","x"])}parse(e,t){switch(t){case"X":return Ne(Ie.basicOptionalMinutes,e);case"XX":return Ne(Ie.basic,e);case"XXXX":return Ne(Ie.basicOptionalSeconds,e);case"XXXXX":return Ne(Ie.extendedOptionalSeconds,e);case"XXX":default:return Ne(Ie.extended,e)}}set(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}function en(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class tn extends ye{constructor(){super(...arguments),en(this,"priority",10),en(this,"incompatibleTokens",["t","T","X"])}parse(e,t){switch(t){case"x":return Ne(Ie.basicOptionalMinutes,e);case"xx":return Ne(Ie.basic,e);case"xxxx":return Ne(Ie.basicOptionalSeconds,e);case"xxxxx":return Ne(Ie.extendedOptionalSeconds,e);case"xxx":default:return Ne(Ie.extended,e)}}set(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}function nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class rn extends ye{constructor(){super(...arguments),nn(this,"priority",40),nn(this,"incompatibleTokens","*")}parse(e){return Ee(e)}set(e,t,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}function on(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class an extends ye{constructor(){super(...arguments),on(this,"priority",20),on(this,"incompatibleTokens","*")}parse(e){return Ee(e)}set(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}var sn={G:new we,y:new Pe,Y:new Ue,R:new Ge,u:new Ye,Q:new Ke,q:new Ze,M:new et,L:new nt,w:new lt,I:new mt,d:new yt,D:new wt,E:new St,e:new It,c:new Tt,i:new Dt,a:new At,b:new Mt,B:new Pt,h:new Bt,H:new zt,K:new Ut,k:new Ht,m:new qt,s:new Xt,S:new Jt,X:new Qt,x:new tn,t:new rn,T:new an},ln=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,un=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cn=/^'([^]*?)'?$/,hn=/''/g,dn=/\S/,pn=/[a-zA-Z]/;function fn(e,t,n,r){var i,o,a,s,l,u,c,h,d,p,f,m,g,b,v,y,x,w;J(3,arguments);var k=String(e),_=String(t),S=Be(),C=null!==(i=null!==(o=null===r||void 0===r?void 0:r.locale)&&void 0!==o?o:S.locale)&&void 0!==i?i:X;if(!C.match)throw new RangeError("locale must contain match property");var I=K(null!==(a=null!==(s=null!==(l=null!==(u=null===r||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==u?u:null===r||void 0===r||null===(c=r.locale)||void 0===c||null===(h=c.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==l?l:S.firstWeekContainsDate)&&void 0!==s?s:null===(d=S.locale)||void 0===d||null===(p=d.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==a?a:1);if(!(I>=1&&I<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var O=K(null!==(f=null!==(m=null!==(g=null!==(b=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==b?b:null===r||void 0===r||null===(v=r.locale)||void 0===v||null===(y=v.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==g?g:S.weekStartsOn)&&void 0!==m?m:null===(x=S.locale)||void 0===x||null===(w=x.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==f?f:0);if(!(O>=0&&O<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===_)return""===k?Z(n):new Date(NaN);var T={firstWeekContainsDate:I,weekStartsOn:O,locale:C},N=[new be],E=_.match(un).map((function(e){var t=e[0];if(t in ae){var n=ae[t];return n(e,C.formatLong)}return e})).join("").match(ln),D=[],$=function(t){null!==r&&void 0!==r&&r.useAdditionalWeekYearTokens||!he(t)||de(t,_,e),null!==r&&void 0!==r&&r.useAdditionalDayOfYearTokens||!ce(t)||de(t,_,e);var n=t[0],i=sn[n];if(i){var o=i.incompatibleTokens;if(Array.isArray(o)){var a=D.find((function(e){return o.includes(e.token)||e.token===n}));if(a)throw new RangeError("The format string mustn't contain `".concat(a.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===i.incompatibleTokens&&D.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));D.push({token:n,fullToken:t});var s=i.run(k,t,C.match,T);if(!s)return A=t,{v:new Date(NaN)};N.push(s.setter),k=s.rest}else{if(n.match(pn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===t?t="'":"'"===n&&(t=mn(t)),0!==k.indexOf(t))return A=t,{v:new Date(NaN)};k=k.slice(t.length)}A=t};for(var A of E){var R=$(A);if("object"===typeof R)return R.v}if(k.length>0&&dn.test(k))return new Date(NaN);var M=N.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return N.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),F=Z(n);if(isNaN(F.getTime()))return new Date(NaN);var P=ee(F,se(F)),j={};for(var B of M){if(!B.validate(P,T))return new Date(NaN);var L=B.set(P,j,T);Array.isArray(L)?(P=L[0],te(j,L[1])):P=L}return P}function mn(e){return e.match(cn)[1].replace(hn,"'")}function gn(e){return J(1,arguments),e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function bn(e){if(J(1,arguments),!gn(e)&&"number"!==typeof e)return!1;var t=Z(e);return!isNaN(Number(t))}function vn(e,t){J(2,arguments);var n=Z(e),r=K(t);return n.setHours(r),n}function yn(e,t){J(2,arguments);var n=Z(e),r=K(t);return n.setMinutes(r),n}function xn(e,t){J(2,arguments);var n=Z(e),r=K(t);return n.setSeconds(r),n}function wn(e,t){J(2,arguments);var n=Z(e),r=K(t);return n.setMilliseconds(r),n}function kn(e,t){J(2,arguments);var n=Z(e),r=K(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+r+1,0);var a=o.getDate();return i>=a?o:(n.setFullYear(o.getFullYear(),o.getMonth(),i),n)}function _n(e){J(1,arguments);var t=Z(e),n=t.getMonth();return n}function Sn(e){return J(1,arguments),Z(e).getFullYear()}function Cn(e){J(1,arguments);var t=Z(e),n=t.getFullYear(),r=t.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function In(e,t){J(2,arguments);var n=Z(e),r=K(t),i=n.getFullYear(),o=n.getDate(),a=new Date(0);a.setFullYear(i,r,15),a.setHours(0,0,0,0);var s=Cn(a);return n.setMonth(r,Math.min(o,s)),n}function On(e,t){J(2,arguments);var n=Z(e),r=K(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}function Tn(e){J(1,arguments);var t=Z(e),n=t.getHours();return n}function Nn(e){J(1,arguments);var t=Z(e),n=t.getMinutes();return n}function En(e){J(1,arguments);var t=Z(e),n=t.getSeconds();return n}var Dn=864e5;function $n(e){J(1,arguments);var t=Z(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),i=n-r;return Math.floor(i/Dn)+1}function An(e,t){var n=e<0?"-":"",r=Math.abs(e).toString();while(r.length<t)r="0"+r;return n+r}var Rn={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return An("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):An(n+1,2)},d:function(e,t){return An(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return An(e.getUTCHours()%12||12,t.length)},H:function(e,t){return An(e.getUTCHours(),t.length)},m:function(e,t){return An(e.getUTCMinutes(),t.length)},s:function(e,t){return An(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds(),i=Math.floor(r*Math.pow(10,n-3));return An(i,t.length)}},Mn=Rn,Fn={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Pn={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Mn.y(e,t)},Y:function(e,t,n,r){var i=ze(e,r),o=i>0?i:1-i;if("YY"===t){var a=o%100;return An(a,2)}return"Yo"===t?n.ordinalNumber(o,{unit:"year"}):An(o,t.length)},R:function(e,t){var n=ut(e);return An(n,t.length)},u:function(e,t){var n=e.getUTCFullYear();return An(n,t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return An(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return An(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return Mn.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return An(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=ot(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):An(i,t.length)},I:function(e,t,n){var r=dt(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):An(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Mn.d(e,t)},D:function(e,t,n){var r=$n(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):An(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return An(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return An(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return An(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours(),i=r/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?Fn.noon:0===i?Fn.midnight:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?Fn.evening:i>=12?Fn.afternoon:i>=4?Fn.morning:Fn.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Mn.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Mn.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):An(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):An(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Mn.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Mn.s(e,t)},S:function(e,t){return Mn.S(e,t)},X:function(e,t,n,r){var i=r._originalDate||e,o=i.getTimezoneOffset();if(0===o)return"Z";switch(t){case"X":return Bn(o);case"XXXX":case"XX":return Ln(o);case"XXXXX":case"XXX":default:return Ln(o,":")}},x:function(e,t,n,r){var i=r._originalDate||e,o=i.getTimezoneOffset();switch(t){case"x":return Bn(o);case"xxxx":case"xx":return Ln(o);case"xxxxx":case"xxx":default:return Ln(o,":")}},O:function(e,t,n,r){var i=r._originalDate||e,o=i.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+jn(o,":");case"OOOO":default:return"GMT"+Ln(o,":")}},z:function(e,t,n,r){var i=r._originalDate||e,o=i.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+jn(o,":");case"zzzz":default:return"GMT"+Ln(o,":")}},t:function(e,t,n,r){var i=r._originalDate||e,o=Math.floor(i.getTime()/1e3);return An(o,t.length)},T:function(e,t,n,r){var i=r._originalDate||e,o=i.getTime();return An(o,t.length)}};function jn(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=t||"";return n+String(i)+a+An(o,2)}function Bn(e,t){if(e%60===0){var n=e>0?"-":"+";return n+An(Math.abs(e)/60,2)}return Ln(e,t)}function Ln(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e),o=An(Math.floor(i/60),2),a=An(i%60,2);return r+o+n+a}var zn=Pn,Vn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Un=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Wn=/^'([^]*?)'?$/,Hn=/''/g,Gn=/[a-zA-Z]/;function qn(e,t,n){var r,i,o,a,s,l,u,c,h,d,p,f,m,g,b,v,y,x;J(2,arguments);var w=String(t),k=Be(),_=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:k.locale)&&void 0!==r?r:X,S=K(null!==(o=null!==(a=null!==(s=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(u=n.locale)||void 0===u||null===(c=u.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==s?s:k.firstWeekContainsDate)&&void 0!==a?a:null===(h=k.locale)||void 0===h||null===(d=h.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==o?o:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=K(null!==(p=null!==(f=null!==(m=null!==(g=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==g?g:null===n||void 0===n||null===(b=n.locale)||void 0===b||null===(v=b.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==m?m:k.weekStartsOn)&&void 0!==f?f:null===(y=k.locale)||void 0===y||null===(x=y.options)||void 0===x?void 0:x.weekStartsOn)&&void 0!==p?p:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!_.localize)throw new RangeError("locale must contain localize property");if(!_.formatLong)throw new RangeError("locale must contain formatLong property");var I=Z(e);if(!bn(I))throw new RangeError("Invalid time value");var O=se(I),T=ee(I,O),N={firstWeekContainsDate:S,weekStartsOn:C,locale:_,_originalDate:I},E=w.match(Un).map((function(e){var t=e[0];if("p"===t||"P"===t){var n=ae[t];return n(e,_.formatLong)}return e})).join("").match(Vn).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return Yn(r);var o=zn[i];if(o)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!he(r)||de(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!ce(r)||de(r,t,String(e)),o(T,r,_.localize,N);if(i.match(Gn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("");return E}function Yn(e){var t=e.match(Wn);return t?t[1].replace(Hn,"'"):e}function Xn(e,t){J(2,arguments);var n=Z(e),r=Z(t);return n.getTime()>r.getTime()}function Kn(e,t){J(2,arguments);var n=Z(e),r=Z(t);return n.getTime()<r.getTime()}function Jn(e,t){J(2,arguments);var n=Z(e),r=Z(t);return n.getTime()===r.getTime()}function Zn(e,t){J(2,arguments);var n=Z(e),r=K(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}function Qn(e,t){if(J(2,arguments),!t||"object"!==typeof t)return new Date(NaN);var n=t.years?K(t.years):0,r=t.months?K(t.months):0,i=t.weeks?K(t.weeks):0,o=t.days?K(t.days):0,a=t.hours?K(t.hours):0,s=t.minutes?K(t.minutes):0,l=t.seconds?K(t.seconds):0,u=Z(e),c=r||n?kn(u,r+12*n):u,h=o||i?Zn(c,o+7*i):c,d=s+60*a,p=l+60*d,f=1e3*p,m=new Date(h.getTime()+f);return m}function er(e,t){if(J(2,arguments),"object"!==typeof t||null===t)throw new RangeError("values parameter must be an object");var n=Z(e);return isNaN(n.getTime())?new Date(NaN):(null!=t.year&&n.setFullYear(t.year),null!=t.month&&(n=In(n,t.month)),null!=t.date&&n.setDate(K(t.date)),null!=t.hours&&n.setHours(K(t.hours)),null!=t.minutes&&n.setMinutes(K(t.minutes)),null!=t.seconds&&n.setSeconds(K(t.seconds)),null!=t.milliseconds&&n.setMilliseconds(K(t.milliseconds)),n)}function tr(e,t){J(2,arguments);var n=K(t);return Zn(e,-n)}function nr(e,t){J(2,arguments);var n=K(t);return kn(e,-n)}function rr(e,t){if(J(2,arguments),!t||"object"!==typeof t)return new Date(NaN);var n=t.years?K(t.years):0,r=t.months?K(t.months):0,i=t.weeks?K(t.weeks):0,o=t.days?K(t.days):0,a=t.hours?K(t.hours):0,s=t.minutes?K(t.minutes):0,l=t.seconds?K(t.seconds):0,u=nr(e,r+12*n),c=tr(u,o+7*i),h=s+60*a,d=l+60*h,p=1e3*d,f=new Date(c.getTime()-p);return f}function ir(e,t){var n;J(1,arguments);var r=K(null!==(n=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!==typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i,o=ur(e);if(o.date){var a=cr(o.date,r);i=hr(a.restDateString,a.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var s,l=i.getTime(),u=0;if(o.time&&(u=pr(o.time),isNaN(u)))return new Date(NaN);if(!o.timezone){var c=new Date(l+u),h=new Date(0);return h.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),h.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),h}return s=mr(o.timezone),isNaN(s)?new Date(NaN):new Date(l+u+s)}var or={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ar=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,sr=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,lr=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ur(e){var t,n={},r=e.split(or.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],or.timeZoneDelimiter.test(n.date)&&(n.date=e.split(or.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var i=or.timezone.exec(t);i?(n.time=t.replace(i[1],""),n.timezone=i[1]):n.time=t}return n}function cr(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:null===o?i:100*o,restDateString:e.slice((r[1]||r[2]).length)}}function hr(e,t){if(null===t)return new Date(NaN);var n=e.match(ar);if(!n)return new Date(NaN);var r=!!n[4],i=dr(n[1]),o=dr(n[2])-1,a=dr(n[3]),s=dr(n[4]),l=dr(n[5])-1;if(r)return wr(t,s,l)?gr(t,s,l):new Date(NaN);var u=new Date(0);return yr(t,o,a)&&xr(t,i)?(u.setUTCFullYear(t,o,Math.max(i,a)),u):new Date(NaN)}function dr(e){return e?parseInt(e):1}function pr(e){var t=e.match(sr);if(!t)return NaN;var n=fr(t[1]),r=fr(t[2]),i=fr(t[3]);return kr(n,r,i)?n*_e+r*ke+1e3*i:NaN}function fr(e){return e&&parseFloat(e.replace(",","."))||0}function mr(e){if("Z"===e)return 0;var t=e.match(lr);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return _r(r,i)?n*(r*_e+i*ke):NaN}function gr(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var i=r.getUTCDay()||7,o=7*(t-1)+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}var br=[31,null,31,30,31,30,31,31,30,31,30,31];function vr(e){return e%400===0||e%4===0&&e%100!==0}function yr(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(br[t]||(vr(e)?29:28))}function xr(e,t){return t>=1&&t<=(vr(e)?366:365)}function wr(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function kr(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function _r(e,t){return t>=0&&t<=59}function Sr(e,t){var n,r,i,o,a,s,l,u;J(1,arguments);var c=Be(),h=K(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:c.weekStartsOn)&&void 0!==r?r:null===(l=c.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==n?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=Z(e),p=d.getDay(),f=(p<h?7:0)+p-h;return d.setDate(d.getDate()-f),d.setHours(0,0,0,0),d}function Cr(e,t){var n,r,i,o,a,s,l,u;J(1,arguments);var c=Be(),h=K(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:c.weekStartsOn)&&void 0!==r?r:null===(l=c.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==n?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=Z(e),p=d.getDay(),f=6+(p<h?-7:0)-(p-h);return d.setDate(d.getDate()+f),d.setHours(23,59,59,999),d}function Ir(e){J(1,arguments);var t=Z(e),n=t.getDay();return n}function Or(e,t){J(2,arguments);var n=K(t);return kn(e,12*n)}function Tr(e,t){J(2,arguments);var n=K(t);return Or(e,-n)}function Nr(e){J(1,arguments);var t=Z(e);return t.setHours(0,0,0,0),t}var Er=864e5;function Dr(e,t){J(2,arguments);var n=Nr(e),r=Nr(t),i=n.getTime()-se(n),o=r.getTime()-se(r);return Math.round((i-o)/Er)}function $r(e,t){var n;J(1,arguments);var r=e||{},i=Z(r.start),o=Z(r.end),a=o.getTime();if(!(i.getTime()<=a))throw new RangeError("Invalid interval");var s=[],l=i;l.setHours(0,0,0,0);var u=Number(null!==(n=null===t||void 0===t?void 0:t.step)&&void 0!==n?n:1);if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number greater than 1");while(l.getTime()<=a)s.push(Z(l)),l.setDate(l.getDate()+u),l.setHours(0,0,0,0);return s}function Ar(e){return J(1,arguments),Sr(e,{weekStartsOn:1})}function Rr(e){J(1,arguments);var t=Z(e),n=t.getFullYear(),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var i=Ar(r),o=new Date(0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);var a=Ar(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function Mr(e){J(1,arguments);var t=Rr(e),n=new Date(0);n.setFullYear(t,0,4),n.setHours(0,0,0,0);var r=Ar(n);return r}var Fr=6048e5;function Pr(e){J(1,arguments);var t=Z(e),n=Ar(t).getTime()-Mr(t).getTime();return Math.round(n/Fr)+1}const jr=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},Br={},Lr={version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",class:"dp__icon"},zr=(0,r._)("path",{d:"M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z"},null,-1),Vr=(0,r._)("path",{d:"M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"},null,-1),Ur=(0,r._)("path",{d:"M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"},null,-1),Wr=(0,r._)("path",{d:"M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z"},null,-1),Hr=[zr,Vr,Ur,Wr];function Gr(e,t){return(0,r.wg)(),(0,r.iD)("svg",Lr,Hr)}const qr=jr(Br,[["render",Gr]]),Yr={},Xr={version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",class:"dp__icon"},Kr=(0,r._)("path",{d:"M23.057 7.057l-16 16c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l16-16c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0z"},null,-1),Jr=(0,r._)("path",{d:"M7.057 8.943l16 16c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885l-16-16c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"},null,-1),Zr=[Kr,Jr];function Qr(e,t){return(0,r.wg)(),(0,r.iD)("svg",Xr,Zr)}const ei=jr(Yr,[["render",Qr]]),ti={},ni={version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",class:"dp__icon"},ri=(0,r._)("path",{d:"M20.943 23.057l-7.057-7.057c0 0 7.057-7.057 7.057-7.057 0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-8 8c-0.521 0.521-0.521 1.365 0 1.885l8 8c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"},null,-1),ii=[ri];function oi(e,t){return(0,r.wg)(),(0,r.iD)("svg",ni,ii)}const ai=jr(ti,[["render",oi]]),si={},li={version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",class:"dp__icon"},ui=(0,r._)("path",{d:"M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885l7.057 7.057c0 0-7.057 7.057-7.057 7.057-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0z"},null,-1),ci=[ui];function hi(e,t){return(0,r.wg)(),(0,r.iD)("svg",li,ci)}const di=jr(si,[["render",hi]]),pi={},fi={version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",class:"dp__icon"},mi=(0,r._)("path",{d:"M16 1.333c-8.095 0-14.667 6.572-14.667 14.667s6.572 14.667 14.667 14.667c8.095 0 14.667-6.572 14.667-14.667s-6.572-14.667-14.667-14.667zM16 4c6.623 0 12 5.377 12 12s-5.377 12-12 12c-6.623 0-12-5.377-12-12s5.377-12 12-12z"},null,-1),gi=(0,r._)("path",{d:"M14.667 8v8c0 0.505 0.285 0.967 0.737 1.193l5.333 2.667c0.658 0.329 1.46 0.062 1.789-0.596s0.062-1.46-0.596-1.789l-4.596-2.298c0 0 0-7.176 0-7.176 0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"},null,-1),bi=[mi,gi];function vi(e,t){return(0,r.wg)(),(0,r.iD)("svg",fi,bi)}const yi=jr(pi,[["render",vi]]),xi={},wi={version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",class:"dp__icon"},ki=(0,r._)("path",{d:"M24.943 19.057l-8-8c-0.521-0.521-1.365-0.521-1.885 0l-8 8c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l7.057-7.057c0 0 7.057 7.057 7.057 7.057 0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"},null,-1),_i=[ki];function Si(e,t){return(0,r.wg)(),(0,r.iD)("svg",wi,_i)}const Ci=jr(xi,[["render",Si]]),Ii={},Oi={version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",class:"dp__icon"},Ti=(0,r._)("path",{d:"M7.057 12.943l8 8c0.521 0.521 1.365 0.521 1.885 0l8-8c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-7.057 7.057c0 0-7.057-7.057-7.057-7.057-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"},null,-1),Ni=[Ti];function Ei(e,t){return(0,r.wg)(),(0,r.iD)("svg",Oi,Ni)}const Di=jr(Ii,[["render",Ei]]),$i=(e,t)=>{const n=fn(e,t.slice(0,e.length),new Date);return bn(n)&&gn(n)?n:null},Ai=(e,t)=>{if("string"==typeof t)return $i(e,t);if(Array.isArray(t)){let n=null;for(let r=0;r<t.length&&(n=$i(e,t[r]),!n);r++);return n}return"function"==typeof t?t(e):null},Ri=e=>{let t=new Date(JSON.parse(JSON.stringify(e)));return t=vn(t,0),t=yn(t,0),t=xn(t,0),t=wn(t,0),t},Mi=e=>Array.isArray(e)?bn(e[0])&&(!e[1]||bn(e[1])):!!e&&bn(e),Fi=(e,t,n,r)=>{let i=e?new Date(e):new Date;return(t||0===t)&&(i=vn(i,+t)),(n||0===n)&&(i=yn(i,+n)),(r||0===r)&&(i=xn(i,+r)),wn(i,0)},Pi=e=>{const t=kn(e,1);return{month:_n(t),year:Sn(t)}},ji=(e,t,n)=>{let r=e?new Date(e):new Date;return(t||0===t)&&(r=In(r,t)),n&&(r=On(r,n)),r},Bi=(e,t)=>e?"HH:mm"+(t?":ss":""):`hh:mm${t?":ss":""} aa`,Li=(e,t,n,r,i,o,a,s)=>e||(r?"MM/yyyy":i?Bi(t,n):o?"MM/dd/yyyy":a?"yyyy":s?`MM/dd/yyyy, ${Bi(t,n)}`:"MM/dd/yyyy"),zi=e=>{const t=e||new Date;return{hours:Tn(t),minutes:Nn(t),seconds:En(t)}},Vi=e=>({month:_n(e),year:Sn(e)}),Ui=e=>Array.isArray(e)?[Vi(e[0]),e[1]?Vi(e[1]):null]:Vi(e),Wi=e=>Array.isArray(e)?[zi(e[0]),zi(e[1])]:zi(e),Hi=(e,t,n)=>n?qn(e,t,{locale:n}):qn(e,t),Gi=(e,t,n,r,i)=>Array.isArray(e)?`${Hi(e[0],t,n)} ${i&&!e[1]?"":r||"-"} ${e[1]?Hi(e[1],t,n):""}`:Hi(e,t,n),qi=(e,t)=>!(!e||!t)&&Xn(Ri(e),Ri(t)),Yi=(e,t)=>!(!e||!t)&&Kn(Ri(e),Ri(t)),Xi=(e,t)=>!(!e||!t)&&Jn(Ri(e),Ri(t)),Ki=(e,t)=>Qn(er(new Date,e),t),Ji=(e,t)=>rr(er(new Date,e),t),Zi=e=>er(new Date,{hours:Tn(e),minutes:Nn(e),seconds:En(e)}),Qi=e=>er(new Date,{hours:+e.hours||0,minutes:+e.minutes||0,seconds:+e.seconds||0}),eo=(e,t,n,r)=>{if(!e)return!0;if(r){const r="max"===n?Kn(e,t):Xn(e,t),i={seconds:0,milliseconds:0};return r||Jn(er(e,i),er(t,i))}return"max"===n?e.getTime()<=t.getTime():e.getTime()>=t.getTime()},to=(e,t,n,r,i)=>{let o=!0;if(!e)return!0;const a=i||r?e:Array.isArray(e)?[e[0]?Zi(e[0]):null,e[1]?Zi(e[1]):null]:Zi(e);if(t||r){const e=t?Qi(t):new Date(r);o=Array.isArray(a)?eo(a[0],e,"max",!!r)&&eo(a[1],e,"max",!!r):eo(a,e,"max",!!r)}if(n||i){const e=n?Qi(n):new Date(i);o=Array.isArray(a)?eo(a[0],e,"min",!!i)&&eo(a[1],e,"min",!!i)&&o:eo(a,e,"min",!!i)&&o}return o},no=(e,t,n)=>{let r=!0;return t&&n&&(r=qi(new Date(e),new Date(t))&&Yi(new Date(e),new Date(n))),t&&(r=qi(new Date(e),new Date(t))),n&&(r=Yi(new Date(e),new Date(n))),r},ro=e=>e instanceof Date?e:ir(e),io=(e,t)=>{if(t){const t=6e4*(new Date).getTimezoneOffset();return new Date(e.getTime()-t).toISOString()}const n=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds());return new Date(n).toISOString()},oo=(e,t,n)=>e&&e[0]&&e[1]?qi(n,e[0])&&Yi(n,e[1]):!!(e&&e[0]&&t)&&(qi(n,e[0])&&Yi(n,t)||Yi(n,e[0])&&qi(n,t)),ao=(e,t)=>{const n=Sr(e,{weekStartsOn:t}),r=Cr(e,{weekStartsOn:t});return[n,r]},so=(e,t)=>Array.isArray(t)?t.some((t=>Xi(ro(new Date(t)),ro(e)))):t(e),lo=(e,t,n,r,i,o,a,s)=>{const l=!!n&&qi(ro(e),ro(n)),u=!!t&&Yi(ro(e),ro(t)),c=so(e,r),h=(o.months.length?o.months.map((e=>+e)):[]).includes(_n(e)),d=!!a.length&&a.some((t=>+t===Ir(e))),p=!!i.length&&!i.some((t=>Xi(ro(t),ro(e)))),f=Sn(e),m=f<+s[0]||f>+s[1];return!(l||u||c||h||m||d||p)},uo=(e,t,n,r,i,o,a)=>({validate:s=>lo(s,e,t,n,r,i,o,a)}),co=Symbol(),ho=Symbol(),po=Symbol(),fo=Symbol(),mo=Symbol(),go=Symbol(),bo={disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},autoApply:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},textInput:{type:Boolean,default:!1}},vo={range:{type:Boolean,default:!1},uid:{type:String,default:null}},yo={enableSeconds:{type:Boolean,default:!1},is24:{type:Boolean,default:!0},noHoursOverlay:{type:Boolean,default:!1},noMinutesOverlay:{type:Boolean,default:!1},noSecondsOverlay:{type:Boolean,default:!1},hoursGridIncrement:{type:[String,Number],default:1},minutesGridIncrement:{type:[String,Number],default:5},secondsGridIncrement:{type:[String,Number],default:5},hoursIncrement:{type:[Number,String],default:1},minutesIncrement:{type:[Number,String],default:1},secondsIncrement:{type:[Number,String],default:1}},xo={...yo,fixedStart:{type:Boolean,default:!1},fixedEnd:{type:Boolean,default:!1},timePicker:{type:Boolean,default:!1}},wo={name:{type:String,default:null},placeholder:{type:String,default:""},hideInputIcon:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},state:{type:Boolean,default:null},required:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},inputClassName:{type:String,default:null},inlineWithInput:{type:Boolean,default:!1},textInputOptions:{type:Object,default:()=>null}},ko={minTime:{type:Object,default:null},maxTime:{type:Object,default:null}},_o={minDate:{type:[Date,String],default:null},maxDate:{type:[Date,String],default:null}},So={selectText:{type:String,default:"Select"},cancelText:{type:String,default:"Cancel"},previewFormat:{type:[String,Function],default:()=>""},multiDates:{type:Boolean,default:!1},partialRange:{type:Boolean,default:!0},...ko},Co={monthPicker:{type:Boolean,default:!1},customProps:{type:Object,default:null},yearPicker:{type:Boolean,default:!1},modelAuto:{type:Boolean,default:!1}},Io={locale:{type:String,default:"en-Us"},weekNumName:{type:String,default:"W"},weekStart:{type:[Number,String],default:1},weekNumbers:{type:Boolean,default:!1},calendarClassName:{type:String,default:null},noSwipe:{type:Boolean,default:!1},monthChangeOnScroll:{type:[Boolean,String],default:!0},dayNames:{type:[Function,Array],default:null}},Oo={...xo,...So,...Co,..._o,...Io,...vo,vertical:{type:Boolean,default:!1},disableMonthYearSelect:{type:Boolean,default:!1},menuClassName:{type:String,default:null},yearRange:{type:Array,default:()=>[1900,2100]},multiCalendarsSolo:{type:Boolean,default:!1},calendarCellClassName:{type:String,default:null},enableTimePicker:{type:Boolean,default:!0},autoApply:{type:Boolean,default:!1},disabledDates:{type:[Array,Function],default:()=>[]},monthNameFormat:{type:String,default:"short"},startDate:{type:[Date,String],default:null},startTime:{type:[Object,Array],default:null},monthYearComponent:{type:Object,default:null},timePickerComponent:{type:Object,default:null},actionRowComponent:{type:Object,default:null},hideOffsetDates:{type:Boolean,default:!1},autoRange:{type:[Number,String],default:null},noToday:{type:Boolean,default:!1},disabledWeekDays:{type:Array,default:()=>[]},allowedDates:{type:Array,default:()=>[]},showNowButton:{type:Boolean,default:!1},nowButtonLabel:{type:String,default:"Now"},markers:{type:Array,default:()=>[]},modeHeight:{type:[Number,String],default:255},escClose:{type:Boolean,default:!0},spaceConfirm:{type:Boolean,default:!0},monthChangeOnArrows:{type:Boolean,default:!0},presetRanges:{type:Array,default:()=>[]},flow:{type:Array,default:()=>[]},preventMinMaxNavigation:{type:Boolean,default:!1},minRange:{type:[Number,String],default:null},maxRange:{type:[Number,String],default:null},multiDatesLimit:{type:[Number,String],default:null},reverseYears:{type:Boolean,default:!1},keepActionRow:{type:Boolean,default:!1},weekPicker:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},arrowNavigation:{type:Boolean,default:!1},multiStatic:{type:Boolean,default:!0},disableTimeRangeValidation:{type:Boolean,default:!1},highlight:{type:[Array,Function],default:null},teleportCenter:{type:Boolean,default:!1}},To={...wo,...bo,...Oo,multiCalendars:{type:[Boolean,Number,String],default:null},modelValue:{type:[String,Date,Array,Object,Number],default:null},modelType:{type:String,default:null},position:{type:String,default:"center"},dark:{type:Boolean,default:!1},format:{type:[String,Function],default:()=>null},closeOnScroll:{type:Boolean,default:!1},autoPosition:{type:Boolean,default:!0},closeOnAutoApply:{type:Boolean,default:!0},teleport:{type:[String,Object],default:"body"},altPosition:{type:[Boolean,Function],default:!1},transitions:{type:[Boolean,Object],default:!0},formatLocale:{type:Object,default:null},utc:{type:[Boolean,String],default:!1},ariaLabels:{type:Object,default:()=>({})},offset:{type:[Number,String],default:10}},No={range:{type:Boolean,default:!1},multiCalendars:{type:Number,default:0},internalModelValue:{type:[Date,Array],default:null}},Eo={...Co,...No,vertical:{type:Boolean,default:!1},month:{type:Number,default:0},year:{type:Number,default:0},instance:{type:Number,default:1}},Do=["aria-label","aria-disabled","aria-readonly"],$o={key:1,class:"dp__input_wrap"},Ao=["id","name","placeholder","disabled","readonly","required","value","autocomplete","onKeydown"],Ro={key:2,class:"dp__input_icon"},Mo={key:4,class:"dp__clear_icon"},Fo=(0,r.aZ)({__name:"DatepickerInput",props:{...wo,...bo,...vo,inputValue:{type:String,default:""},inline:{type:Boolean,default:!1},isMenuOpen:{type:Boolean,default:!1},pattern:{type:String,default:""}},emits:["clear","open","update:inputValue","setInputDate","close","selectDate","setEmptyDate","toggle","focus-prev","focus","blur"],setup(e,{expose:t,emit:n}){const s=e,l=(0,i.iH)(),u=(0,i.iH)(null),c=(0,i.iH)(!1),h=(0,r.f3)(co),d=(0,r.Fl)((()=>({dp__pointer:!s.disabled&&!s.readonly&&!s.textInput,dp__disabled:s.disabled,dp__input_readonly:!s.textInput,dp__input:!0,dp__input_icon_pad:!s.hideInputIcon,dp__input_valid:s.state,dp__input_invalid:!1===s.state,dp__input_focus:c.value||s.isMenuOpen,dp__input_reg:!s.textInput,[s.inputClassName]:!!s.inputClassName}))),p=e=>{var t;const{value:r}=e.target,{format:i,rangeSeparator:o}=s.textInputOptions;if(""!==r){if((null==(t=s.textInputOptions)?void 0:t.openMenu)&&!s.isMenuOpen&&n("open"),s.range){const[e,t]=r.split(`${o}`);if(e&&t){const n=Ai(e.trim(),i||s.pattern),r=Ai(t.trim(),i||s.pattern);l.value=n&&r?[n,r]:null}}else l.value=Ai(r,i||s.pattern);n("setInputDate",l.value)}else n("setInputDate",null),s.autoApply&&(n("setEmptyDate"),l.value=null);n("update:inputValue",r)},f=()=>{var e,t;(null==(e=s.textInputOptions)?void 0:e.enterSubmit)&&Mi(l.value)&&""!==s.inputValue?(n("setInputDate",l.value,!0),l.value=null):(null==(t=s.textInputOptions)?void 0:t.enterSubmit)&&""===s.inputValue&&(l.value=null,n("clear"))},m=()=>{var e,t;(null==(e=s.textInputOptions)?void 0:e.tabSubmit)&&Mi(l.value)&&""!==s.inputValue?(n("setInputDate",l.value,!0),l.value=null):(null==(t=s.textInputOptions)?void 0:t.tabSubmit)&&""===s.inputValue&&(l.value=null,n("clear"))},g=()=>{c.value=!0,n("focus")},b=e=>{var t;e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),s.textInput&&(null==(t=s.textInputOptions)?void 0:t.openMenu)?s.isMenuOpen?s.textInputOptions.enterSubmit&&n("selectDate"):n("open"):s.textInput||n("toggle")},v=()=>{c.value=!1,s.isMenuOpen||n("blur"),s.autoApply&&s.textInput&&l.value&&(n("setInputDate",l.value),n("selectDate"),l.value=null)},y=()=>{n("clear")},x=e=>{s.textInput||e.preventDefault()};return t({focusInput:()=>{u.value&&u.value.focus({preventScroll:!0})}}),(t,n)=>((0,r.wg)(),(0,r.iD)("div",{onClick:b,"aria-label":(0,i.SU)(h).input,role:"textbox","aria-multiline":"false","aria-disabled":t.disabled,"aria-readonly":t.readonly},[!t.$slots.trigger||t.$slots["dp-input"]||e.inline?(0,r.kq)("",!0):(0,r.WI)(t.$slots,"trigger",{key:0}),t.$slots.trigger||e.inline&&!t.inlineWithInput?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",$o,[!t.$slots["dp-input"]||t.$slots.trigger||e.inline?(0,r.kq)("",!0):(0,r.WI)(t.$slots,"dp-input",{key:0,value:e.inputValue,onInput:p,onEnter:f,onTab:m,onClear:y}),t.$slots["dp-input"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("input",{key:1,ref_key:"inputRef",ref:u,id:t.uid?`dp-input-${t.uid}`:void 0,name:t.name,class:(0,o.C_)((0,i.SU)(d)),placeholder:t.placeholder,disabled:t.disabled,readonly:t.readonly,required:t.required,value:e.inputValue,autocomplete:t.autocomplete,onInput:p,onKeydown:[(0,a.D2)(b,["enter"]),(0,a.D2)(m,["tab"])],onBlur:v,onFocus:g,onKeypress:x},null,42,Ao)),t.$slots["input-icon"]&&!t.hideInputIcon?((0,r.wg)(),(0,r.iD)("span",Ro,[(0,r.WI)(t.$slots,"input-icon")])):(0,r.kq)("",!0),t.$slots["input-icon"]||t.hideInputIcon||t.$slots["dp-input"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,i.SU)(qr),{key:3,class:"dp__input_icon dp__input_icons"})),t.$slots["clear-icon"]&&e.inputValue&&t.clearable&&!t.disabled&&!t.readonly?((0,r.wg)(),(0,r.iD)("span",Mo,[(0,r.WI)(t.$slots,"clear-icon",{clear:y})])):(0,r.kq)("",!0),!t.clearable||t.$slots["clear-icon"]||!e.inputValue||t.disabled||t.readonly?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,i.SU)(ei),{key:5,class:"dp__clear_icon dp__input_icons",onClick:(0,a.iM)(y,["stop","prevent"])},null,8,["onClick"]))]))],8,Do))}}),Po=(e,t,n)=>{const r=new Date(JSON.parse(JSON.stringify(e))),i=[];for(let o=0;o<7;o++){const e=Zn(r,o),a=_n(e)!==t;i.push({text:n&&a?"":e.getDate(),value:e,current:!a})}return i},jo=(e,t,n,r)=>{const i=[],o=new Date(t,e),a=new Date(t,e+1,0),s=Sr(o,{weekStartsOn:n}),l=t=>{const n=Po(t,e,r);if(i.push({days:n}),!i[i.length-1].days.some((e=>Xi(Ri(e.value),Ri(a))))){const e=Zn(t,7);l(e)}};return l(s),i},Bo=(e,t=3)=>{const n=[];for(let r=0;r<e.length;r+=t)n.push([e[r],e[r+1],e[r+2]]);return n},Lo=(e,t)=>{const n=[1,2,3,4,5,6,7].map((t=>new Intl.DateTimeFormat(e,{weekday:"short",timeZone:"UTC"}).format(new Date(`2017-01-0${t}T00:00:00+00:00`)).slice(0,2))),r=n.slice(0,t),i=n.slice(t+1,n.length);return[n[t]].concat(...i).concat(...r)},zo=e=>{const t=[];for(let n=+e[0];n<=+e[1];n++)t.push({value:+n,text:`${n}`});return t},Vo=(e,t)=>{const n=new Intl.DateTimeFormat(e,{month:t,timeZone:"UTC"});return[1,2,3,4,5,6,7,8,9,10,11,12].map((e=>{const t=e<10?`0${e}`:e;return new Date(`2017-${t}-01T00:00:00+00:00`)})).map(((e,t)=>({text:n.format(e),value:t})))},Uo=e=>[12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11][e],Wo=()=>({enterSubmit:!0,tabSubmit:!0,openMenu:!0,rangeSeparator:" - "}),Ho=e=>Object.assign({months:[],years:[],times:{hours:[],minutes:[],seconds:[]}},e),Go=e=>{function t(t){let n="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=r.length;for(let e=0;e<t;e++)n+=r.charAt(Math.floor(Math.random()*i));return n+e}return t(5)},qo=e=>{var t;const n=(0,i.SU)(e);return null!=(t=null==n?void 0:n.$el)?t:n},Yo=e=>Object.assign({type:"dot"},e),Xo=e=>Object.assign({menuAppear:"dp-menu-appear",open:"dp-slide-down",close:"dp-slide-up",next:"calendar-next",previous:"calendar-prev",vNext:"dp-slide-up",vPrevious:"dp-slide-down"},e),Ko=e=>Object.assign({toggleOverlay:"Toggle overlay",menu:"Datepicker menu",input:"Datepicker input",calendarWrap:"Calendar wrapper",calendarDays:"Calendar days",openTimePicker:"Open time picker",closeTimePicker:"Close time Picker",incrementValue:e=>`Increment ${e}`,decrementValue:e=>`Decrement ${e}`,openTpOverlay:e=>`Open ${e} overlay`,amPmButton:"Switch AM/PM mode",openYearsOverlay:"Open years overlay",openMonthsOverlay:"Open months overlay",nextMonth:"Next month",prevMonth:"Previous month"},e),Jo=e=>!!Array.isArray(e)&&(!!e[0]&&!!e[1]),Zo=(0,i.qj)({monthYear:[],calendar:[],time:[],actionRow:[],selectionGrid:[],timePicker:{0:[],1:[]},monthPicker:[]}),Qo=(0,i.iH)(null),ea=(0,i.iH)(!1),ta=(0,i.iH)(!1),na=(0,i.iH)(!1),ra=(0,i.iH)(!1),ia=(0,i.iH)(0),oa=(0,i.iH)(0),aa=()=>{const e=(0,r.Fl)((()=>ea.value?[...Zo.selectionGrid,Zo.actionRow].filter((e=>e.length)):ta.value?[...Zo.timePicker[0],...Zo.timePicker[1],ra.value?[]:[Qo.value],Zo.actionRow].filter((e=>e.length)):na.value?[...Zo.monthPicker,Zo.actionRow]:[Zo.monthYear,...Zo.calendar,Zo.time,Zo.actionRow].filter((e=>e.length)))),t=t=>{ia.value=t?ia.value+1:ia.value-1;let n=null;e.value[oa.value]&&(n=e.value[oa.value][ia.value]),n||(ia.value=t?ia.value-1:ia.value+1)},n=t=>{0===oa.value&&!t||oa.value===e.value.length&&t||(oa.value=t?oa.value+1:oa.value-1,e.value[oa.value]?e.value[oa.value]&&!e.value[oa.value][ia.value]&&0!==ia.value&&(ia.value=e.value[oa.value].length-1):oa.value=t?oa.value-1:oa.value+1)},i=t=>{let n=null;e.value[oa.value]&&(n=e.value[oa.value][ia.value]),n?n.focus({preventScroll:!ea.value}):ia.value=t?ia.value-1:ia.value+1},o=()=>{t(!0),i(!0)},a=()=>{t(!1),i(!1)},s=()=>{n(!1),i(!0)},l=()=>{n(!0),i(!0)},u=(e,t)=>{Zo[t]=e},c=(e,t)=>{Zo[t]=e},h=()=>{ia.value=0,oa.value=0};return{buildMatrix:u,buildMultiLevelMatrix:c,setTimePickerBackRef:e=>{Qo.value=e},setSelectionGrid:e=>{ea.value=e,h(),e||(Zo.selectionGrid=[])},setTimePicker:(e,t=!1)=>{ta.value=e,ra.value=t,h(),e||(Zo.timePicker[0]=[],Zo.timePicker[1]=[])},setTimePickerElements:(e,t=0)=>{Zo.timePicker[t]=e},arrowRight:o,arrowLeft:a,arrowUp:s,arrowDown:l,clearArrowNav:()=>{Zo.monthYear=[],Zo.calendar=[],Zo.time=[],Zo.actionRow=[],Zo.selectionGrid=[],Zo.timePicker[0]=[],Zo.timePicker[1]=[],ea.value=!1,ta.value=!1,ra.value=!1,na.value=!1,h(),Qo.value=null},setMonthPicker:e=>{na.value=e,h()}}},sa=["aria-label"],la={class:"dp__calendar_header",role:"row"},ua={key:0,class:"dp__calendar_header_item",role:"gridcell"},ca=(0,r._)("div",{class:"dp__calendar_header_separator"},null,-1),ha=["aria-label"],da={key:0,role:"gridcell",class:"dp__calendar_item dp__week_num"},pa={class:"dp__cell_inner"},fa=["aria-selected","aria-disabled","onClick","onKeydown","onMouseover"],ma=(0,r._)("div",{class:"dp__arrow_bottom_tp"},null,-1),ga=(0,r.aZ)({__name:"Calendar",props:{...Eo,...Io,mappedDates:{type:Array,default:()=>[]},getWeekNum:{type:Function,default:()=>""},modeHeight:{type:[Number,String],default:255},specificMode:{type:Boolean,default:!1}},emits:["selectDate","setHoverDate","handleScroll","mount","handleSwipe"],setup(e,{expose:t,emit:n}){const s=e,l=(0,i.iH)(null),u=(0,i.iH)({bottom:"",left:"",transform:""}),c=(0,i.iH)([]),h=(0,i.iH)(null),d=(0,i.iH)(!0),p=(0,r.f3)(ho),f=(0,r.f3)(co),m=(0,r.f3)(go),g=(0,i.iH)(""),b=(0,i.iH)({startX:0,endX:0,startY:0,endY:0}),v=(0,r.Fl)((()=>s.dayNames?Array.isArray(s.dayNames)?s.dayNames:s.dayNames(s.locale,+s.weekStart):Lo(s.locale,+s.weekStart))),{buildMultiLevelMatrix:y}=aa();(0,r.bv)((()=>{n("mount",{cmp:"calendar",refs:c}),s.noSwipe||h.value&&(h.value.addEventListener("touchstart",T,{passive:!1}),h.value.addEventListener("touchend",N,{passive:!1}),h.value.addEventListener("touchmove",E,{passive:!1})),s.monthChangeOnScroll&&h.value&&h.value.addEventListener("wheel",A,{passive:!1})}));const x=(e,t)=>{if(null!=p&&p.value){const n=Ri(ji(new Date,s.month,s.year));g.value=qi(Ri(ji(new Date,e,t)),n)?p.value[s.vertical?"vNext":"next"]:p.value[s.vertical?"vPrevious":"previous"],d.value=!1,(0,r.Y3)((()=>{d.value=!0}))}},w=(0,r.Fl)((()=>({dp__calendar_wrap:!0,[s.calendarClassName]:!!s.calendarClassName}))),k=(0,r.Fl)((()=>e=>{const t=Yo(e);return{dp__marker_dot:"dot"===t.type,dp__marker_line:"line"===t.type}})),_=(0,r.Fl)((()=>e=>Xi(e,l.value))),S=(0,r.Fl)((()=>({dp__calendar:!0,dp__calendar_next:s.multiCalendars>0&&0!==s.instance}))),C=(0,r.Fl)((()=>s.specificMode?{height:`${s.modeHeight}px`}:null)),I=(e,t,r)=>{var i,o;if(n("setHoverDate",e),null!=(o=null==(i=e.marker)?void 0:i.tooltip)&&o.length){const n=qo(c.value[t][r]);if(n){const{width:t,height:r}=n.getBoundingClientRect();u.value={bottom:`${r}px`,left:t/2+"px",transform:"translateX(-50%)"},l.value=e.value}}},O=()=>{l.value=null},T=e=>{b.value.startX=e.changedTouches[0].screenX,b.value.startY=e.changedTouches[0].screenY},N=e=>{b.value.endX=e.changedTouches[0].screenX,b.value.endY=e.changedTouches[0].screenY,D()},E=e=>{e.preventDefault()},D=()=>{const e=s.vertical?"Y":"X";Math.abs(b.value[`start${e}`]-b.value[`end${e}`])>10&&n("handleSwipe",b.value[`start${e}`]>b.value[`end${e}`]?"right":"left")},$=(e,t,n)=>{e&&(Array.isArray(c.value[t])?c.value[t][n]=e:c.value[t]=[e]),null!=m&&m.value&&y(c.value,"calendar")},A=e=>{s.monthChangeOnScroll&&(e.preventDefault(),n("handleScroll",e))};return t({triggerTransition:x}),(t,n)=>((0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)((0,i.SU)(S))},[(0,r._)("div",{style:(0,o.j5)((0,i.SU)(C))},[e.specificMode?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",{key:0,ref_key:"calendarWrapRef",ref:h,class:(0,o.C_)((0,i.SU)(w)),role:"grid","aria-label":(0,i.SU)(f).calendarWrap},[(0,r._)("div",la,[t.weekNumbers?((0,r.wg)(),(0,r.iD)("div",ua,(0,o.zw)(t.weekNumName),1)):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,i.SU)(v),((e,n)=>((0,r.wg)(),(0,r.iD)("div",{class:"dp__calendar_header_item",role:"gridcell",key:n},[t.$slots["calendar-header"]?(0,r.WI)(t.$slots,"calendar-header",{key:0,day:e,index:n}):(0,r.kq)("",!0),t.$slots["calendar-header"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r.Uk)((0,o.zw)(e),1)],64))])))),128))]),ca,(0,r.Wm)(a.uT,{name:g.value,css:!!(0,i.SU)(p)},{default:(0,r.w5)((()=>[d.value?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"dp__calendar",role:"grid","aria-label":(0,i.SU)(f).calendarDays},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.mappedDates,((s,l)=>((0,r.wg)(),(0,r.iD)("div",{class:"dp__calendar_row",role:"row",key:l},[t.weekNumbers?((0,r.wg)(),(0,r.iD)("div",da,[(0,r._)("div",pa,(0,o.zw)(e.getWeekNum(s.days)),1)])):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.days,((e,s)=>((0,r.wg)(),(0,r.iD)("div",{role:"gridcell",class:"dp__calendar_item",ref_for:!0,ref:e=>$(e,l,s),key:s+l,"aria-selected":e.classData.dp__active_date||e.classData.dp__range_start||e.classData.dp__range_start,"aria-disabled":e.classData.dp__cell_disabled,tabindex:"0",onClick:(0,a.iM)((n=>t.$emit("selectDate",e)),["stop","prevent"]),onKeydown:(0,a.D2)((n=>t.$emit("selectDate",e)),["enter"]),onMouseover:t=>I(e,l,s),onMouseleave:O},[(0,r._)("div",{class:(0,o.C_)(["dp__cell_inner",e.classData])},[t.$slots.day?(0,r.WI)(t.$slots,"day",{key:0,day:+e.text,date:e.value}):(0,r.kq)("",!0),t.$slots.day?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r.Uk)((0,o.zw)(e.text),1)],64)),e.marker?((0,r.wg)(),(0,r.iD)("div",{key:2,class:(0,o.C_)((0,i.SU)(k)(e.marker)),style:(0,o.j5)(e.marker.color?{backgroundColor:e.marker.color}:{})},null,6)):(0,r.kq)("",!0),(0,i.SU)(_)(e.value)?((0,r.wg)(),(0,r.iD)("div",{key:3,class:"dp__marker_tooltip",style:(0,o.j5)(u.value)},[(0,r._)("div",{class:"dp__tooltip_content",onClick:n[0]||(n[0]=(0,a.iM)((()=>{}),["stop"]))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.marker.tooltip,((n,i)=>((0,r.wg)(),(0,r.iD)("div",{key:i,class:"dp__tooltip_text"},[t.$slots["marker-tooltip"]?(0,r.WI)(t.$slots,"marker-tooltip",{key:0,tooltop:n,day:e.value}):(0,r.kq)("",!0),t.$slots["marker-tooltip"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("div",{class:"dp__tooltip_mark",style:(0,o.j5)(n.color?{backgroundColor:n.color}:{})},null,4),(0,r._)("div",null,(0,o.zw)(n.text),1)],64))])))),128)),ma])],4)):(0,r.kq)("",!0)],2)],40,fa)))),128))])))),128))],8,ha)):(0,r.kq)("",!0)])),_:3},8,["name","css"])],10,sa))],4)],2))}}),ba=e=>"object"==typeof e,va=(e,t)=>t,ya=e=>Array.isArray(e)&&2===e.length,xa=e=>Array.isArray(e),wa=e=>"object"==typeof e,ka=e=>Array.isArray(e),_a=e=>Array.isArray(e),Sa=e=>Array.isArray(e)&&2===e.length,Ca=(e,t)=>t?Array.isArray(e):Sa(e),Ia=e=>Array.isArray(e),Oa=e=>"string"==typeof e||"object"==typeof e||"number"==typeof e,Ta=e=>"string"==typeof e,Na={class:"dp__selection_preview"},Ea={class:"dp__action_buttons"},Da=["onKeydown"],$a=(0,r.aZ)({__name:"ActionRow",props:{...So,..._o,...ko,...Co,...No,inline:{type:Boolean,default:!1},timePicker:{type:Boolean,default:!1},calendarWidth:{type:Number,default:0},menuMount:{type:Boolean,default:!1},enableTimePicker:{type:Boolean,default:!0}},emits:["closePicker","selectDate","invalid-select"],setup(e,{emit:t}){const n=e,{buildMatrix:s}=aa(),l=(0,r.f3)(mo),u=(0,r.f3)(go),c=(0,i.iH)(null),h=(0,i.iH)(null);(0,r.bv)((()=>{null!=u&&u.value&&s([qo(c),qo(h)],"actionRow")}));const d=(0,r.Fl)((()=>!(n.range&&!n.partialRange&&n.internalModelValue)||2===n.internalModelValue.length)),p=(0,r.Fl)((()=>({dp__action:!0,dp__select:!0,dp__action_disabled:!f.value||!m.value||!d.value}))),f=(0,r.Fl)((()=>!n.enableTimePicker||to(n.internalModelValue,n.maxTime,n.minTime,n.maxDate,n.minDate))),m=(0,r.Fl)((()=>!n.monthPicker||no(n.internalModelValue,n.minDate,n.maxDate))),g=e=>Gi(e,n.previewFormat,null==l?void 0:l.value),b=(0,r.Fl)((()=>n.internalModelValue&&n.menuMount?"string"==typeof n.previewFormat?ka(n.internalModelValue)?2===n.internalModelValue.length&&n.internalModelValue[1]?n.multiCalendars>0?`${g(n.internalModelValue[0])} - ${g(n.internalModelValue[1])}`:[g(n.internalModelValue[0]),g(n.internalModelValue[1])]:n.multiDates?n.internalModelValue.map((e=>`${g(e)}`)):n.modelAuto?`${g(n.internalModelValue[0])}`:`${g(n.internalModelValue[0])} -`:Gi(n.internalModelValue,n.previewFormat,null==l?void 0:l.value):n.timePicker?n.previewFormat(Wi(n.internalModelValue)):n.monthPicker?n.previewFormat(Vi(n.internalModelValue)):n.previewFormat(n.internalModelValue):"")),v=()=>{f.value&&m.value&&d.value?t("selectDate"):t("invalid-select")};return(t,n)=>((0,r.wg)(),(0,r.iD)("div",{class:"dp__action_row",style:(0,o.j5)(e.calendarWidth?{width:`${e.calendarWidth}px`}:{})},[(0,r._)("div",Na,[t.$slots["action-preview"]?(0,r.WI)(t.$slots,"action-preview",{key:0,value:t.internalModelValue}):(0,r.kq)("",!0),t.$slots["action-preview"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[Array.isArray((0,i.SU)(b))?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r.Uk)((0,o.zw)((0,i.SU)(b)),1)],64)),Array.isArray((0,i.SU)(b))?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)((0,i.SU)(b),((e,t)=>((0,r.wg)(),(0,r.iD)("div",{key:t},(0,o.zw)(e),1)))),128)):(0,r.kq)("",!0)],64))]),(0,r._)("div",Ea,[t.$slots["action-select"]?(0,r.WI)(t.$slots,"action-select",{key:0,value:t.internalModelValue}):(0,r.kq)("",!0),t.$slots["action-select"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[e.inline?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",{key:0,class:"dp__action dp__cancel",ref_key:"cancelButtonRef",ref:c,tabindex:"0",onClick:n[0]||(n[0]=e=>t.$emit("closePicker")),onKeydown:n[1]||(n[1]=(0,a.D2)((e=>t.$emit("closePicker")),["enter"]))},(0,o.zw)(t.cancelText),545)),(0,r._)("span",{class:(0,o.C_)((0,i.SU)(p)),tabindex:"0",onKeydown:(0,a.D2)(v,["enter"]),onClick:v,ref_key:"selectButtonRef",ref:h},(0,o.zw)(t.selectText),43,Da)],64))])],4))}}),Aa={class:"dp__selection_grid_header"},Ra=["aria-selected","aria-disabled","onClick","onKeydown","onMouseover"],Ma=["aria-label","onKeydown"],Fa=(0,r.aZ)({__name:"SelectionGrid",props:{items:{type:Array,default:()=>[]},modelValue:{type:[String,Number],default:null},multiModelValue:{type:Array,default:()=>[]},disabledValues:{type:Array,default:()=>[]},minValue:{type:[Number,String],default:null},maxValue:{type:[Number,String],default:null},year:{type:Number,default:0},skipActive:{type:Boolean,default:!1},headerRefs:{type:Array,default:()=>[]},skipButtonRef:{type:Boolean,default:!1},monthPicker:{type:Boolean,default:!1},yearPicker:{type:Boolean,default:!1}},emits:["update:modelValue","selected","toggle","reset-flow"],setup(e,{expose:t,emit:n}){const s=e,l=(0,i.iH)(!1),u=(0,i.iH)(null),c=(0,i.iH)(null),h=(0,i.iH)([]),d=(0,r.f3)(po,!1),p=(0,r.f3)(fo,(0,i.iH)(!1)),f=(0,r.f3)(co),m=(0,r.f3)(go),g=(0,i.iH)(),b=(0,i.iH)(),{setSelectionGrid:v,buildMultiLevelMatrix:y,setMonthPicker:x}=aa();(0,r.Xn)((()=>{u.value=null})),(0,r.bv)((()=>{(0,r.Y3)().then((()=>N())),k(),w(!0)})),(0,r.Ah)((()=>w(!1)));const w=e=>{var t;null!=m&&m.value&&(null!=(t=s.headerRefs)&&t.length?x(e):v(e))},k=()=>{const e=qo(c);e&&(p.value||e.focus({preventScroll:!0}),l.value=e.clientHeight<e.scrollHeight)},_=(0,r.Fl)((()=>({dp__overlay:!0}))),S=(0,r.Fl)((()=>({dp__overlay_col:!0}))),C=(0,r.Fl)((()=>s.items.map((e=>e.filter((e=>e)).map((e=>{var t,n,r;const i=s.disabledValues.some((t=>t===e.value))||T(e.value),o=null!=(t=s.multiModelValue)&&t.length?null==(n=s.multiModelValue)?void 0:n.some((t=>Xi(t,On(s.monthPicker?In(new Date,e.value):new Date,s.monthPicker?s.year:e.value)))):!s.skipActive&&e.value===s.modelValue;return{...e,className:{dp__overlay_cell_active:o,dp__overlay_cell:!o,dp__overlay_cell_disabled:i,dp__overlay_cell_active_disabled:i&&o,dp__overlay_cell_pad:!0,dp__cell_in_between:!(null==(r=s.multiModelValue)||!r.length)&&D(e.value)}}})))))),I=(0,r.Fl)((()=>({dp__button:!0,dp__overlay_action:!0,dp__over_action_scroll:l.value,dp__button_bottom:d}))),O=(0,r.Fl)((()=>{var e,t;return{dp__overlay_container:!0,dp__container_flex:(null==(e=s.items)?void 0:e.length)<=6,dp__container_block:(null==(t=s.items)?void 0:t.length)>6}})),T=e=>{const t=s.maxValue||0===s.maxValue,n=s.minValue||0===s.minValue;return!(!t&&!n)&&(t&&n?+e>+s.maxValue||+e<+s.minValue:t?+e>+s.maxValue:!!n&&+e<+s.minValue)},N=()=>{const e=qo(u);if(e){const t=qo(c);t&&(t.scrollTop=e.offsetTop-t.offsetTop-(t.getBoundingClientRect().height/2-e.getBoundingClientRect().height))}},E=e=>{!s.disabledValues.some((t=>t===e))&&!T(e)&&(n("update:modelValue",e),n("selected"))},D=e=>{const t=s.monthPicker?s.year:e;return oo(s.multiModelValue,On(s.monthPicker?In(new Date,g.value||0):new Date,s.monthPicker?t:g.value||t),On(s.monthPicker?In(new Date,e):new Date,t))},$=()=>{n("toggle"),n("reset-flow")},A=(e,t,n,r)=>{var i,o;if(e&&(t.value===+s.modelValue&&!s.disabledValues.includes(t.value)&&(u.value=e),null!=m&&m.value)){Array.isArray(h.value[n])?h.value[n][r]=e:h.value[n]=[e];const t=null!=(i=s.headerRefs)&&i.length?[s.headerRefs].concat(h.value):h.value.concat([s.skipButtonRef?[]:[b.value]]);y(t,null!=(o=s.headerRefs)&&o.length?"monthPicker":"selectionGrid")}};return t({focusGrid:k}),(t,n)=>((0,r.wg)(),(0,r.iD)("div",{ref_key:"gridWrapRef",ref:c,class:(0,o.C_)((0,i.SU)(_)),role:"dialog",tabindex:"0"},[(0,r._)("div",{class:(0,o.C_)((0,i.SU)(O)),role:"grid"},[(0,r._)("div",Aa,[(0,r.WI)(t.$slots,"header")]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,i.SU)(C),((n,s)=>((0,r.wg)(),(0,r.iD)("div",{class:"dp__overlay_row",key:(0,i.SU)(Go)(s),role:"row"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n,((n,l)=>((0,r.wg)(),(0,r.iD)("div",{role:"gridcell",class:(0,o.C_)((0,i.SU)(S)),key:n.value,"aria-selected":n.value===e.modelValue&&!e.disabledValues.includes(n.value),"aria-disabled":n.className.dp__overlay_cell_disabled,ref_for:!0,ref:e=>A(e,n,s,l),tabindex:"0",onClick:e=>E(n.value),onKeydown:(0,a.D2)((e=>E(n.value)),["enter"]),onMouseover:e=>g.value=n.value},[(0,r._)("div",{class:(0,o.C_)(n.className)},[t.$slots.item?(0,r.WI)(t.$slots,"item",{key:0,item:n}):(0,r.kq)("",!0),t.$slots.item?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r.Uk)((0,o.zw)(n.text),1)],64))],2)],42,Ra)))),128))])))),128)),t.$slots["button-icon"]?((0,r.wg)(),(0,r.iD)("div",{key:0,role:"button","aria-label":(0,i.SU)(f).toggleOverlay,class:(0,o.C_)((0,i.SU)(I)),tabindex:"0",ref_key:"toggleButton",ref:b,onClick:$,onKeydown:(0,a.D2)($,["enter"])},[(0,r.WI)(t.$slots,"button-icon")],42,Ma)):(0,r.kq)("",!0)],2)],2))}}),Pa=()=>{const e=(0,r.f3)(ho);return{transitionName:(0,r.Fl)((()=>t=>null!=e&&e.value?t?e.value.open:e.value.close:"")),showTransition:!(null==e||!e.value)}},ja={key:0,class:"dp__time_input"},Ba=(0,r.Uk)(" : "),La=["aria-label","onKeydown","onClick"],za=["aria-label","onKeydown","onClick"],Va=["aria-label","onKeydown","onClick"],Ua={key:0},Wa=["aria-label","onKeydown"],Ha=(0,r.aZ)({__name:"TimeInput",props:{...yo,hours:{type:Number,default:0},minutes:{type:Number,default:0},seconds:{type:Number,default:0},filters:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},closeTimePickerBtn:{type:Object,default:null},order:{type:Number,default:0}},emits:["setHours","setMinutes","update:hours","update:minutes","update:seconds","reset-flow","mounted","overlay-closed"],setup(e,{expose:t,emit:n}){const s=e,l=(0,i.qj)({hours:!1,minutes:!1,seconds:!1}),u=(0,i.iH)("AM"),c=(0,i.iH)(null),h=(0,r.f3)(co),d=(0,r.f3)(go),p=(0,i.iH)([]),{transitionName:f,showTransition:m}=Pa(),{setTimePickerElements:g,setTimePickerBackRef:b}=aa();(0,r.bv)((()=>{n("mounted")}));const v=(0,r.Fl)((()=>({dp__time_col:!0,dp__time_col_reg:!s.enableSeconds&&s.is24,dp__time_col_reg_with_button:!s.enableSeconds&&!s.is24,dp__time_col_sec:s.enableSeconds&&s.is24,dp__time_col_sec_with_button:s.enableSeconds&&!s.is24}))),y=(0,r.Fl)((()=>{const e=[{type:"hours"},"separator",{type:"minutes"}];return s.enableSeconds?e.concat(["separator",{type:"seconds"}]):e})),x=(0,r.Fl)((()=>y.value.filter((e=>"string"!=typeof e)))),w=(0,r.Fl)((()=>e=>{if("hours"===e){const e=I(s.hours);return{text:e<10?`0${e}`:`${e}`,value:e}}return{text:s[e]<10?`0${s[e]}`:`${s[e]}`,value:s[e]}})),k=e=>{const t="hours"===e?s.is24?24:12:60,n=+s[`${e}GridIncrement`],r=[];for(let i=0;i<t;i+=n)r.push({value:i,text:i<10?`0${i}`:`${i}`});return Bo(r)},_=e=>s[`no${e[0].toUpperCase()+e.slice(1)}Overlay`],S=e=>{_(e)||(l[e]=!l[e],l[e]||n("overlay-closed"))},C=(e,t=!0)=>{const r="hours"===e?Tn:"minutes"===e?Nn:En,i=t?Ki:Ji;n(`update:${e}`,r(i({[e]:+s[e]},{[e]:+s[`${e}Increment`]})))},I=e=>s.is24?e:(u.value=e>=12?"PM":"AM",Uo(e)),O=()=>{"PM"===u.value?(u.value="AM",n("update:hours",s.hours-12)):(u.value="PM",n("update:hours",s.hours+12))},T=e=>{l[e]=!0},N=(e,t,n)=>{if(e&&(null==d?void 0:d.value)){Array.isArray(p.value[t])?p.value[t][n]=e:p.value[t]=[e];const r=p.value.reduce(((e,t)=>t.map(((n,r)=>[...e[r]||[],t[r]]))),[]);b(s.closeTimePickerBtn),c.value&&(r[1]=r[1].concat(c.value)),g(r,s.order)}},E=(e,t)=>"hours"!==e||s.is24?n(`update:${e}`,t):n(`update:${e}`,"PM"===u.value?t+12:t);return t({openChildCmp:T}),(t,n)=>e.disabled?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",ja,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,i.SU)(y),((e,n)=>((0,r.wg)(),(0,r.iD)("div",{key:n,class:(0,o.C_)((0,i.SU)(v))},["separator"===e?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[Ba],64)):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("div",{class:"dp__inc_dec_button",role:"button","aria-label":(0,i.SU)(h).incrementValue(e.type),tabindex:"0",onKeydown:(0,a.D2)((t=>C(e.type)),["enter"]),onClick:t=>C(e.type),ref_for:!0,ref:e=>N(e,n,0)},[t.$slots["arrow-up"]?(0,r.WI)(t.$slots,"arrow-up",{key:0}):(0,r.kq)("",!0),t.$slots["arrow-up"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,i.SU)(Ci),{key:1}))],40,La),(0,r._)("div",{role:"button","aria-label":(0,i.SU)(h).openTpOverlay(e.type),class:(0,o.C_)(_(e.type)?"":"dp__time_display"),tabindex:"0",onKeydown:(0,a.D2)((t=>S(e.type)),["enter"]),onClick:t=>S(e.type),ref_for:!0,ref:e=>N(e,n,1)},[t.$slots[e.type]?(0,r.WI)(t.$slots,e.type,{key:0,text:(0,i.SU)(w)(e.type).text,value:(0,i.SU)(w)(e.type).value}):(0,r.kq)("",!0),t.$slots[e.type]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r.Uk)((0,o.zw)((0,i.SU)(w)(e.type).text),1)],64))],42,za),(0,r._)("div",{class:"dp__inc_dec_button",role:"button","aria-label":(0,i.SU)(h).decrementValue(e.type),tabindex:"0",onKeydown:(0,a.D2)((t=>C(e.type,!1)),["enter"]),onClick:t=>C(e.type,!1),ref_for:!0,ref:e=>N(e,n,2)},[t.$slots["arrow-down"]?(0,r.WI)(t.$slots,"arrow-down",{key:0}):(0,r.kq)("",!0),t.$slots["arrow-down"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,i.SU)(Di),{key:1}))],40,Va)],64))],2)))),128)),t.is24?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Ua,[t.$slots["am-pm-button"]?(0,r.WI)(t.$slots,"am-pm-button",{key:0,toggle:O,value:u.value}):(0,r.kq)("",!0),t.$slots["am-pm-button"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:1,ref_key:"amPmButton",ref:c,type:"button",class:"dp__pm_am_button",role:"button","aria-label":(0,i.SU)(h).amPmButton,tabindex:"0",onClick:O,onKeydown:(0,a.D2)((0,a.iM)(O,["prevent"]),["enter"])},(0,o.zw)(u.value),41,Wa))])),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,i.SU)(x),((o,s)=>((0,r.wg)(),(0,r.j4)(a.uT,{key:s,name:(0,i.SU)(f)(l[o.type]),css:(0,i.SU)(m)},{default:(0,r.w5)((()=>[l[o.type]?((0,r.wg)(),(0,r.j4)(Fa,{key:0,items:k(o.type),"disabled-values":e.filters.times[o.type],"onUpdate:modelValue":e=>E(o.type,e),onSelected:e=>S(o.type),onToggle:e=>S(o.type),onResetFlow:n[0]||(n[0]=e=>t.$emit("reset-flow"))},(0,r.Nv)({"button-icon":(0,r.w5)((()=>[t.$slots["clock-icon"]?(0,r.WI)(t.$slots,"clock-icon",{key:0}):(0,r.kq)("",!0),t.$slots["clock-icon"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,i.SU)(yi),{key:1}))])),_:2},[t.$slots[`${o.type}-overlay`]?{name:"item",fn:(0,r.w5)((({item:e})=>[(0,r.WI)(t.$slots,`${o.type}-overlay`,{text:e.text,value:e.value})]))}:void 0]),1032,["items","disabled-values","onUpdate:modelValue","onSelected","onToggle"])):(0,r.kq)("",!0)])),_:2},1032,["name","css"])))),128))]))}}),Ga=[{name:"clock-icon",use:["time","calendar"]},{name:"arrow-left",use:["month-year","calendar"]},{name:"arrow-right",use:["month-year","calendar"]},{name:"arrow-up",use:["time","calendar"]},{name:"arrow-down",use:["time","calendar"]},{name:"calendar-icon",use:["month-year","time","calendar"]},{name:"day",use:["calendar"]},{name:"month-overlay",use:["calendar","month-year"]},{name:"year-overlay",use:["calendar","month-year"]},{name:"hours-overlay",use:["calendar","time"]},{name:"minutes-overlay",use:["calendar","time"]},{name:"seconds-overlay",use:["calendar","time"]},{name:"hours",use:["calendar","time"]},{name:"minutes",use:["calendar","time"]},{name:"month",use:["calendar","month-year"]},{name:"year",use:["calendar","month-year"]},{name:"action-select",use:["action"]},{name:"action-preview",use:["action"]},{name:"calendar-header",use:["calendar"]},{name:"marker-tooltip",use:["calendar"]},{name:"now-button",use:[]},{name:"time-picker-overlay",use:["calendar","time"]},{name:"am-pm-button",use:["calendar","time"]}],qa=[{name:"trigger"},{name:"input-icon"},{name:"clear-icon"},{name:"dp-input"}],Ya={all:()=>Ga,monthYear:()=>Ga.filter((e=>e.use.includes("month-year"))),input:()=>qa,timePicker:()=>Ga.filter((e=>e.use.includes("time"))),action:()=>Ga.filter((e=>e.use.includes("action"))),calendar:()=>Ga.filter((e=>e.use.includes("calendar")))},Xa=(e,t)=>{const n=[];return Ya[t]().forEach((t=>{e[t.name]&&n.push(t.name)})),n},Ka=["aria-label"],Ja={class:"dp__overlay_container dp__container_flex"},Za={key:1,class:"dp__overlay_row"},Qa=["aria-label"],es=(0,r.aZ)({__name:"TimePicker",props:{...xo,range:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},hours:{type:[Number,Array],default:0},minutes:{type:[Number,Array],default:0},seconds:{type:[Number,Array],default:0},customProps:{type:Object,default:null},modelAuto:{type:Boolean,default:!1},internalModelValue:{type:[Date,Array],default:null}},emits:["update:hours","update:minutes","update:seconds","mount","reset-flow","overlay-closed"],setup(e,{expose:t,emit:n}){const s=e,l=(0,r.Rr)(),u=(0,i.iH)(null),c=(0,i.iH)(null),h=(0,r.f3)(po,!1),d=(0,i.iH)([]),p=(0,i.iH)(null),f=(0,r.f3)(co),m=(0,r.f3)(go),{transitionName:g,showTransition:b}=Pa(),{buildMatrix:v,setTimePicker:y}=aa();(0,r.bv)((()=>{n("mount"),!s.timePicker&&(null==m?void 0:m.value)?v([qo(u.value)],"time"):y(!0,s.timePicker)}));const x=(0,r.Fl)((()=>!s.range||!s.modelAuto||Jo(s.internalModelValue))),w=(0,i.iH)(!1),k=e=>({hours:Array.isArray(s.hours)?s.hours[e]:s.hours,minutes:Array.isArray(s.minutes)?s.minutes[e]:s.minutes,seconds:Array.isArray(s.seconds)?s.seconds[e]:s.seconds}),_=(0,r.Fl)((()=>{const e=[];if(s.range)for(let t=0;t<2;t++)e.push(k(t));else e.push(k(0));return e})),S=(e,t=!1,i="")=>{t||n("reset-flow"),w.value=e,null!=m&&m.value&&(y(e),e||n("overlay-closed")),(0,r.Y3)((()=>{""!==i&&d.value[0]&&d.value[0].openChildCmp(i)}))},C=(0,r.Fl)((()=>({dp__button:!0,dp__button_bottom:h}))),I=Xa(l,"timePicker"),O=(e,t,n)=>s.range?0===t?[e,_.value[1][n]]:[_.value[0][n],e]:e,T=e=>{n("update:hours",e)},N=e=>{n("update:minutes",e)},E=e=>{n("update:seconds",e)},D=()=>{p.value&&(null==m?void 0:m.value)&&p.value.focus({preventScroll:!0})};return t({toggleTimePicker:S}),(t,n)=>((0,r.wg)(),(0,r.iD)("div",null,[t.timePicker?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,o.C_)((0,i.SU)(C)),role:"button","aria-label":(0,i.SU)(f).openTimePicker,tabindex:"0",ref_key:"openTimePickerBtn",ref:u,onKeydown:n[0]||(n[0]=(0,a.D2)((e=>S(!0)),["enter"])),onClick:n[1]||(n[1]=e=>S(!0))},[t.$slots["clock-icon"]?(0,r.WI)(t.$slots,"clock-icon",{key:0}):(0,r.kq)("",!0),t.$slots["clock-icon"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,i.SU)(yi),{key:1}))],42,Ka)),(0,r.Wm)(a.uT,{name:(0,i.SU)(g)(w.value),css:(0,i.SU)(b)},{default:(0,r.w5)((()=>[w.value||t.timePicker?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"dp__overlay",ref_key:"overlayRef",ref:p,tabindex:"0"},[(0,r._)("div",Ja,[t.$slots["time-picker-overlay"]?(0,r.WI)(t.$slots,"time-picker-overlay",{key:0,range:e.range,hours:e.hours,minutes:e.minutes,seconds:e.seconds,setHours:T,setMinutes:N,setSeconds:E}):(0,r.kq)("",!0),t.$slots["time-picker-overlay"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Za,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,i.SU)(_),((n,s)=>(0,r.wy)(((0,r.wg)(),(0,r.j4)(Ha,(0,r.dG)({key:s,disabled:0===s?t.fixedStart:t.fixedEnd,hours:n.hours,minutes:n.minutes,seconds:n.seconds,filters:e.filters,ref_for:!0,ref_key:"timeInputRefs",ref:d},{is24:t.is24,hoursGridIncrement:t.hoursGridIncrement,minutesGridIncrement:t.minutesGridIncrement,secondsGridIncrement:t.secondsGridIncrement,hoursIncrement:t.hoursIncrement,minutesIncrement:t.minutesIncrement,secondsIncrement:t.secondsIncrement,filters:e.filters,noHoursOverlay:t.noHoursOverlay,noMinutesOverlay:t.noMinutesOverlay,noSecondsOverlay:t.noSecondsOverlay,enableSeconds:t.enableSeconds,closeTimePickerBtn:c.value,order:s},{"onUpdate:hours":e=>T(O(e,s,"hours")),"onUpdate:minutes":e=>N(O(e,s,"minutes")),"onUpdate:seconds":e=>E(O(e,s,"seconds")),onMounted:D,onOverlayClosed:D}),(0,r.Nv)({_:2},[(0,r.Ko)((0,i.SU)(I),((e,n)=>({name:e,fn:(0,r.w5)((n=>[(0,r.WI)(t.$slots,e,(0,o.vs)((0,r.F4)(n)))]))})))]),1040,["disabled","hours","minutes","seconds","filters","onUpdate:hours","onUpdate:minutes","onUpdate:seconds"])),[[a.F8,0===s||(0,i.SU)(x)]]))),128))])),t.timePicker?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",{key:2,ref_key:"closeTimePickerBtn",ref:c,class:(0,o.C_)((0,i.SU)(C)),role:"button","aria-label":(0,i.SU)(f).closeTimePicker,tabindex:"0",onKeydown:n[2]||(n[2]=(0,a.D2)((e=>S(!1)),["enter"])),onClick:n[3]||(n[3]=e=>S(!1))},[t.$slots["calendar-icon"]?(0,r.WI)(t.$slots,"calendar-icon",{key:0}):(0,r.kq)("",!0),t.$slots["calendar-icon"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,i.SU)(qr),{key:1}))],42,Qa))])],512)):(0,r.kq)("",!0)])),_:3},8,["name","css"])]))}}),ts=["aria-label"],ns=(0,r.aZ)({__name:"ActionIcon",props:{ariaLabel:{type:String,default:""}},emits:["activate","setRef"],setup(e,{emit:t}){const n=(0,i.iH)(null);return(0,r.bv)((()=>t("setRef",n))),(t,i)=>((0,r.wg)(),(0,r.iD)("div",{class:"dp__month_year_col_nav",onClick:i[0]||(i[0]=e=>t.$emit("activate")),onKeydown:i[1]||(i[1]=(0,a.D2)((e=>t.$emit("activate")),["enter"])),tabindex:"0",ref_key:"elRef",ref:n},[(0,r._)("div",{class:"dp__inner_nav",role:"button","aria-label":e.ariaLabel},[(0,r.WI)(t.$slots,"default")],8,ts)],544))}}),rs=["aria-label"],is=(0,r.aZ)({__name:"RegularPicker",props:{ariaLabel:{type:String,default:""},showSelectionGrid:{type:Boolean,default:!1},modelValue:{type:Number,default:null},items:{type:Array,default:()=>[]},disabledValues:{type:Array,default:()=>[]},minValue:{type:Number,default:null},maxValue:{type:Number,default:null},slotName:{type:String,default:""},headerRefs:{type:Array,default:()=>[]}},emits:["update:model-value","toggle","setRef"],setup(e,{emit:t}){const{transitionName:n,showTransition:o}=Pa(),s=(0,i.iH)(null);return(0,r.bv)((()=>t("setRef",s))),(t,l)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",{class:"dp__month_year_select",onClick:l[0]||(l[0]=e=>t.$emit("toggle")),onKeydown:l[1]||(l[1]=(0,a.D2)((e=>t.$emit("toggle")),["enter"])),role:"button","aria-label":e.ariaLabel,tabindex:"0",ref_key:"elRef",ref:s},[(0,r.WI)(t.$slots,"default")],40,rs),(0,r.Wm)(a.uT,{name:(0,i.SU)(n)(e.showSelectionGrid),css:(0,i.SU)(o)},{default:(0,r.w5)((()=>[e.showSelectionGrid?((0,r.wg)(),(0,r.j4)(Fa,(0,r.dG)({key:0},{modelValue:e.modelValue,items:e.items,disabledValues:e.disabledValues,minValue:e.minValue,maxValue:e.maxValue},{"header-refs":[],"onUpdate:modelValue":l[2]||(l[2]=e=>t.$emit("update:model-value",e)),onToggle:l[3]||(l[3]=e=>t.$emit("toggle"))}),(0,r.Nv)({"button-icon":(0,r.w5)((()=>[t.$slots["calendar-icon"]?(0,r.WI)(t.$slots,"calendar-icon",{key:0}):(0,r.kq)("",!0),t.$slots["calendar-icon"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,i.SU)(qr),{key:1}))])),_:2},[t.$slots[e.slotName]?{name:"item",fn:(0,r.w5)((({item:n})=>[(0,r.WI)(t.$slots,e.slotName,{item:n})]))}:void 0]),1040)):(0,r.kq)("",!0)])),_:3},8,["name","css"])],64))}}),os=(e,t,n)=>[er(new Date(e),{date:1}),er(new Date,{month:t,year:n,date:1})],as=(e,t,n)=>Yi(...os(e,t,n))||Xi(...os(e,t,n)),ss=(e,t,n)=>qi(...os(e,t,n))||Xi(...os(e,t,n)),ls=(e,t,n,r,i,o)=>{let a=!1;return o?e&&t?(t&&i&&ss(t,n,r)&&(a=!0),e&&!i&&as(e,n,r)&&(a=!0)):(e&&as(e,n,r)||t&&ss(t,n,r))&&(a=!0):a=!0,a},us=(e,t)=>{const n=(t,r)=>{let i=t;return e.filters.months.includes(_n(i))?(i=r?kn(t,1):nr(t,1),n(i,r)):i},r=(t,n)=>{let i=t;return e.filters.years.includes(Sn(i))?(i=n?Or(t,1):Tr(t,1),r(i,n)):i},i=t=>{const i=er(new Date,{month:e.month,year:e.year});let a=t?kn(i,1):nr(i,1),s=_n(a),l=Sn(a);e.filters.months.includes(s)&&(a=n(a,t),s=_n(a),l=Sn(a)),e.filters.years.includes(l)&&(a=r(a,t),l=Sn(a)),ls(e.minDate,e.maxDate,s,l,t,e.preventMinMaxNavigation)&&o(s,l)},o=(e,n)=>{t("update-month-year",{month:e,year:n})};return{handleMonthYearChange:i}},cs={class:"dp__month_year_row"},hs={class:"dp__month_picker_header"},ds=["aria-label"],ps=["aria-label","onKeydown"],fs=["aria-label"],ms=(0,r.aZ)({__name:"MonthYearPicker",props:{...Eo,..._o,preventMinMaxNavigation:{type:Boolean,default:!1},reverseYears:{type:Boolean,default:!1},years:{type:Array,default:()=>[]},months:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},multiCalendarsSolo:{type:Boolean,default:!1},yearPicker:{type:Boolean,default:!1}},emits:["update-month-year","monthYearSelect","mount","reset-flow","overlay-closed"],setup(e,{expose:t,emit:n}){const s=e,{transitionName:l,showTransition:u}=Pa(),{buildMatrix:c}=aa(),h=(0,i.iH)(!1),d=(0,i.iH)(!1),p=(0,i.iH)([null,null,null,null]),f=(0,i.iH)(null),m=(0,i.iH)(null),g=(0,i.iH)(null),b=(0,r.f3)(co),v=(0,r.f3)(go),{handleMonthYearChange:y}=us(s,n);(0,r.bv)((()=>{n("mount")}));const x=e=>({get:()=>s[e],set:t=>{const r="month"===e?"year":"month";n("update-month-year",{[e]:t,[r]:s[r]}),n("monthYearSelect","year"===e),"month"===e?M(!0):F(!0)}}),w=(0,r.Fl)(x("month")),k=(0,r.Fl)(x("year")),_=(0,r.Fl)((()=>e=>{const t="month"===e;return{showSelectionGrid:(t?h:d).value,items:(t?D:$).value,disabledValues:s.filters[t?"months":"years"],minValue:(t?I:S).value,maxValue:(t?O:C).value,headerRefs:t&&s.monthPicker?[f.value,m.value,g.value]:[]}})),S=(0,r.Fl)((()=>s.minDate?Sn(new Date(s.minDate)):null)),C=(0,r.Fl)((()=>s.maxDate?Sn(new Date(s.maxDate)):null)),I=(0,r.Fl)((()=>{if(s.minDate&&S.value){if(S.value>s.year)return 12;if(S.value===s.year)return _n(new Date(s.minDate))}return null})),O=(0,r.Fl)((()=>s.maxDate&&C.value?C.value<s.year?-1:C.value===s.year?_n(new Date(s.maxDate)):null:null)),T=(0,r.Fl)((()=>s.range&&s.internalModelValue&&(s.monthPicker||s.yearPicker)?s.internalModelValue:[])),N=(e,t=!1)=>{const n=[];for(let r=0;r<e.length;r+=3){const i=[e[r],e[r+1],e[r+2]];n.push(t?i.reverse():i)}return t?n.reverse():n},E=(0,r.Fl)((()=>{const e=s.months.find((e=>e.value===s.month));return e||{text:"",value:0}})),D=(0,r.Fl)((()=>N(s.months))),$=(0,r.Fl)((()=>N(s.years,s.reverseYears))),A=(0,r.Fl)((()=>!s.multiCalendars||(!!s.multiCalendarsSolo||0===s.instance))),R=(0,r.Fl)((()=>!s.multiCalendars||(!!s.multiCalendarsSolo||s.instance===s.multiCalendars-1))),M=(e=!1)=>{P(e),h.value=!h.value,h.value||n("overlay-closed")},F=(e=!1)=>{P(e),d.value=!d.value,d.value||n("overlay-closed")},P=e=>{e||n("reset-flow")},j=(e=!1)=>{n("update-month-year",{year:e?s.year+1:s.year-1,month:s.month})},B=(e,t)=>{null!=v&&v.value&&(p.value[t]=qo(e),c(p.value,"monthYear"))};return t({toggleMonthPicker:M,toggleYearPicker:F}),(t,n)=>((0,r.wg)(),(0,r.iD)("div",cs,[t.monthPicker||e.yearPicker?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,i.SU)(A)&&!t.vertical?((0,r.wg)(),(0,r.j4)(ns,{key:0,"aria-label":(0,i.SU)(b).prevMonth,onActivate:n[0]||(n[0]=e=>(0,i.SU)(y)(!1)),onSetRef:n[1]||(n[1]=e=>B(e,0))},{default:(0,r.w5)((()=>[t.$slots["arrow-left"]?(0,r.WI)(t.$slots,"arrow-left",{key:0}):(0,r.kq)("",!0),t.$slots["arrow-left"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,i.SU)(ai),{key:1}))])),_:3},8,["aria-label"])):(0,r.kq)("",!0),(0,r.Wm)(is,(0,r.dG)({"aria-label":(0,i.SU)(b).openMonthsOverlay,"slot-name":"month-overlay",modelValue:(0,i.SU)(w),"onUpdate:modelValue":n[2]||(n[2]=e=>(0,i.dq)(w)?w.value=e:null)},(0,i.SU)(_)("month"),{onToggle:M,onSetRef:n[3]||(n[3]=e=>B(e,1))}),(0,r.Nv)({default:(0,r.w5)((()=>[t.$slots.month?(0,r.WI)(t.$slots,"month",(0,o.vs)((0,r.dG)({key:0},(0,i.SU)(E)))):(0,r.kq)("",!0),t.$slots.month?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r.Uk)((0,o.zw)((0,i.SU)(E).text),1)],64))])),_:2},[t.$slots["calendar-icon"]?{name:"calendar-icon",fn:(0,r.w5)((()=>[(0,r.WI)(t.$slots,"calendar-icon")]))}:void 0,t.$slots["month-overlay"]?{name:"month-overlay",fn:(0,r.w5)((({item:e})=>[(0,r.WI)(t.$slots,"month-overlay",{text:e.text,value:e.value})]))}:void 0]),1040,["aria-label","modelValue"]),(0,r.Wm)(is,(0,r.dG)({"aria-label":(0,i.SU)(b).openYearsOverlay,"slot-name":"year-overlay",modelValue:(0,i.SU)(k),"onUpdate:modelValue":n[4]||(n[4]=e=>(0,i.dq)(k)?k.value=e:null)},(0,i.SU)(_)("year"),{onToggle:F,onSetRef:n[5]||(n[5]=e=>B(e,2))}),(0,r.Nv)({default:(0,r.w5)((()=>[t.$slots.year?(0,r.WI)(t.$slots,"year",{key:0,year:t.year}):(0,r.kq)("",!0),t.$slots.year?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r.Uk)((0,o.zw)(t.year),1)],64))])),_:2},[t.$slots["calendar-icon"]?{name:"calendar-icon",fn:(0,r.w5)((()=>[(0,r.WI)(t.$slots,"calendar-icon")]))}:void 0,t.$slots["year-overlay"]?{name:"year-overlay",fn:(0,r.w5)((({item:e})=>[(0,r.WI)(t.$slots,"year-overlay",{text:e.text,value:e.value})]))}:void 0]),1040,["aria-label","modelValue"]),(0,i.SU)(A)&&t.vertical?((0,r.wg)(),(0,r.j4)(ns,{key:1,"aria-label":(0,i.SU)(b).prevMonth,onActivate:n[6]||(n[6]=e=>(0,i.SU)(y)(!1))},{default:(0,r.w5)((()=>[t.$slots["arrow-up"]?(0,r.WI)(t.$slots,"arrow-up",{key:0}):(0,r.kq)("",!0),t.$slots["arrow-up"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,i.SU)(Ci),{key:1}))])),_:3},8,["aria-label"])):(0,r.kq)("",!0),(0,i.SU)(R)?((0,r.wg)(),(0,r.j4)(ns,{key:2,"arial-label":(0,i.SU)(b).nextMonth,onActivate:n[7]||(n[7]=e=>(0,i.SU)(y)(!0)),ref:"rightIcon",onSetRef:n[8]||(n[8]=e=>B(e,3))},{default:(0,r.w5)((()=>[t.$slots[t.vertical?"arrow-down":"arrow-right"]?(0,r.WI)(t.$slots,t.vertical?"arrow-down":"arrow-right",{key:0}):(0,r.kq)("",!0),t.$slots[t.vertical?"arrow-down":"arrow-right"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,r.LL)(t.vertical?(0,i.SU)(Di):(0,i.SU)(di)),{key:1}))])),_:3},8,["arial-label"])):(0,r.kq)("",!0)],64)),t.monthPicker?((0,r.wg)(),(0,r.j4)(Fa,(0,r.dG)({key:1},(0,i.SU)(_)("month"),{"skip-active":s.range,year:t.year,"multi-model-value":(0,i.SU)(T),"month-picker":"",modelValue:(0,i.SU)(w),"onUpdate:modelValue":n[15]||(n[15]=e=>(0,i.dq)(w)?w.value=e:null),onToggle:M,onSelected:n[16]||(n[16]=e=>t.$emit("overlay-closed"))}),(0,r.Nv)({header:(0,r.w5)((()=>[(0,r._)("div",hs,[(0,r._)("div",{class:"dp__month_year_col_nav",tabindex:"0",ref_key:"mpPrevIconRef",ref:f,onClick:n[9]||(n[9]=e=>j(!1)),onKeydown:n[10]||(n[10]=(0,a.D2)((e=>j(!1)),["enter"]))},[(0,r._)("div",{class:"dp__inner_nav",role:"button","aria-label":(0,i.SU)(b).prevMonth},[t.$slots["arrow-left"]?(0,r.WI)(t.$slots,"arrow-left",{key:0}):(0,r.kq)("",!0),t.$slots["arrow-left"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,i.SU)(ai),{key:1}))],8,ds)],544),(0,r._)("div",{class:"dp__pointer",role:"button",ref_key:"mpYearButtonRef",ref:m,"aria-label":(0,i.SU)(b).openYearsOverlay,tabindex:"0",onClick:F,onKeydown:(0,a.D2)(F,["enter"])},[t.$slots.year?(0,r.WI)(t.$slots,"year",{key:0,year:t.year}):(0,r.kq)("",!0),t.$slots.year?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r.Uk)((0,o.zw)(t.year),1)],64))],40,ps),(0,r._)("div",{class:"dp__month_year_col_nav",tabindex:"0",ref_key:"mpNextIconRef",ref:g,onClick:n[11]||(n[11]=e=>j(!0)),onKeydown:n[12]||(n[12]=(0,a.D2)((e=>j(!0)),["enter"]))},[(0,r._)("div",{class:"dp__inner_nav",role:"button","aria-label":(0,i.SU)(b).nextMonth},[t.$slots["arrow-right"]?(0,r.WI)(t.$slots,"arrow-right",{key:0}):(0,r.kq)("",!0),t.$slots["arrow-right"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,i.SU)(di),{key:1}))],8,fs)],544)]),(0,r.Wm)(a.uT,{name:(0,i.SU)(l)(d.value),css:(0,i.SU)(u)},{default:(0,r.w5)((()=>[d.value?((0,r.wg)(),(0,r.j4)(Fa,(0,r.dG)({key:0},(0,i.SU)(_)("year"),{modelValue:(0,i.SU)(k),"onUpdate:modelValue":n[13]||(n[13]=e=>(0,i.dq)(k)?k.value=e:null),onToggle:F,onSelected:n[14]||(n[14]=e=>t.$emit("overlay-closed"))}),(0,r.Nv)({"button-icon":(0,r.w5)((()=>[t.$slots["calendar-icon"]?(0,r.WI)(t.$slots,"calendar-icon",{key:0}):(0,r.kq)("",!0),t.$slots["calendar-icon"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,i.SU)(qr),{key:1}))])),_:2},[t.$slots["year-overlay"]?{name:"item",fn:(0,r.w5)((({item:e})=>[(0,r.WI)(t.$slots,"year-overlay",{text:e.text,value:e.value})]))}:void 0]),1040,["modelValue"])):(0,r.kq)("",!0)])),_:3},8,["name","css"])])),_:2},[t.$slots["month-overlay"]?{name:"item",fn:(0,r.w5)((({item:e})=>[(0,r.WI)(t.$slots,"month-overlay",{text:e.text,value:e.value})]))}:void 0]),1040,["skip-active","year","multi-model-value","modelValue"])):(0,r.kq)("",!0),e.yearPicker?((0,r.wg)(),(0,r.j4)(Fa,(0,r.dG)({key:2},(0,i.SU)(_)("year"),{modelValue:(0,i.SU)(k),"onUpdate:modelValue":n[17]||(n[17]=e=>(0,i.dq)(k)?k.value=e:null),"multi-model-value":(0,i.SU)(T),"skip-active":s.range,"skip-button-ref":"","year-picker":"",onToggle:F,onSelected:n[18]||(n[18]=e=>t.$emit("overlay-closed"))}),(0,r.Nv)({_:2},[t.$slots["year-overlay"]?{name:"item",fn:(0,r.w5)((({item:e})=>[(0,r.WI)(t.$slots,"year-overlay",{text:e.text,value:e.value})]))}:void 0]),1040,["modelValue","multi-model-value","skip-active"])):(0,r.kq)("",!0)]))}}),gs=(e,t,n,o)=>{const a=(0,i.iH)(new Date),s=(0,i.iH)(),l=(0,i.iH)([{month:_n(new Date),year:Sn(new Date)}]),u=(0,i.iH)(e.range?[Tn(new Date),Tn(new Date)]:Tn(new Date)),c=(0,i.iH)(e.range?[Nn(new Date),Nn(new Date)]:Nn(new Date)),h=(0,i.iH)(e.range?[0,0]:0);(0,r.YP)(l,(()=>{setTimeout((()=>{e.openOnTop&&t("dpOpen")}),0)}),{deep:!0}),(0,r.bv)((()=>{O(!0),y.value||(e.startDate&&(l.value[0].month=_n(new Date(e.startDate)),l.value[0].year=Sn(new Date(e.startDate)),e.multiCalendars&&L(0)),e.startTime&&v())}));const d=(0,r.Fl)((()=>e=>l.value[e]?l.value[e].month:0)),p=(0,r.Fl)((()=>e=>l.value[e]?l.value[e].year:0)),f=(e,t,n)=>{l.value[e].month=t,l.value[e].year=n},m=(e,t)=>l.value[e].month=t,g=(e,t)=>l.value[e].year=t,b=(t=!0)=>e.enableSeconds?Array.isArray(h.value)?t?h.value[0]:h.value[1]:h.value:0,v=()=>{e.startTime&&(Ia(e.startTime)?(u.value=[+e.startTime[0].hours,+e.startTime[1].hours],c.value=[+e.startTime[0].minutes,+e.startTime[1].minutes],e.enableSeconds&&(h.value=[+e.startTime[0].seconds,+e.startTime[1].seconds])):(u.value=+e.startTime.hours,c.value=+e.startTime.minutes,e.enableSeconds&&(h.value=+e.startTime.seconds)))},y=(0,r.Fl)({get:()=>e.internalModelValue,set:n=>{!e.readonly&&!e.disabled&&t("update:internalModelValue",n)}});(0,r.YP)(y,(()=>O()));const x=t=>{const{validate:n}=uo(e.minDate,e.maxDate,e.disabledDates,e.allowedDates,e.filters,e.disabledWeekDays,e.yearRange);return!n(t)},w=t=>!(!y.value||e.hideOffsetDates&&!t.current)&&(e.range?!(!e.modelAuto||!Array.isArray(y.value))&&Xi(t.value,y.value[0]?y.value[0]:a.value):e.multiDates&&Array.isArray(y.value)?y.value.some((e=>Xi(e,t.value))):Xi(t.value,y.value?y.value:a.value)),k=e=>oo(y.value,s.value,e.value),_=(t,n=!1)=>{if((!e.multiCalendars||!e.multiStatic||n)&&(m(0,_n(t)),g(0,Sn(t))),e.multiCalendars)for(let r=1;r<=e.multiCalendars;r++){const e=er(new Date,{month:d.value(r-1),year:p.value(r-1)}),t=Qn(e,{months:1});l.value[r]={month:_n(t),year:Sn(t)}}},S=()=>{if(Array.isArray(y.value)&&2===y.value.length){const t=new Date(y.value[1]?y.value[1]:kn(y.value[0],1)),[n,r]=[_n(y.value[0]),Sn(y.value[0])],[i,o]=[_n(y.value[1]),Sn(y.value[1])];(n!==i||n===i&&r!==o)&&e.multiCalendarsSolo&&(m(1,_n(t)),g(1,Sn(t)))}},C=e=>{_(e),u.value=Tn(e),c.value=Nn(e),h.value=En(e)},I=()=>Array.isArray(y.value)&&y.value.length?y.value[y.value.length-1]:null,O=(t=!1)=>{if(y.value)if(ka(y.value)){if(2!==y.value.length||e.multiDates){if(ka(y.value)&&e.multiDates){const e=y.value[y.value.length-1];e&&C(e)}}else _(y.value[0],t),u.value=[Tn(y.value[0]),y.value[1]?Tn(y.value[1]):Tn(new Date)],c.value=[Nn(y.value[0]),y.value[1]?Nn(y.value[1]):Nn(new Date)],h.value=[En(y.value[0]),y.value[1]?En(y.value[1]):En(new Date)];e.multiCalendars&&e.multiCalendarsSolo&&S()}else C(y.value);else e.timePicker?(v(),e.range?_a(u.value)&&_a(c.value)&&(y.value=[Fi(new Date,u.value[0],c.value[0],b()),Fi(new Date,u.value[1],c.value[1],b(!1))]):y.value=Fi(new Date,u.value,c.value,b())):e.monthPicker&&!e.range?y.value=ji(new Date,d.value(0),p.value(0)):e.multiCalendars?_(new Date):e.yearPicker&&!e.range&&(y.value=new Date)},T=t=>{const n=_n(new Date(t)),r=Sn(new Date(t));if(m(0,n),g(0,r),e.multiCalendars>0)for(let i=1;i<e.multiCalendars;i++){const e=Pi(er(new Date(t),{year:d.value(i-1),month:p.value(i-1)}));m(i,e.month),g(i,e.year)}},N=t=>{if(y.value&&Array.isArray(y.value))if(y.value.some((e=>Xi(t,e)))){const e=y.value.filter((e=>!Xi(e,t)));y.value=e.length?e:null}else(e.multiDatesLimit&&+e.multiDatesLimit>y.value.length||!e.multiDatesLimit)&&y.value.push(t);else y.value=[t]},E=t=>{if(Array.isArray(y.value)&&y.value[0]){const n=Dr(t,y.value[0]),r=qi(y.value[0],t)?t:y.value[0],i=qi(t,y.value[0])?t:y.value[0],o=$r({start:r,end:i}).filter((e=>x(e))).length,a=Math.abs(n<0?n+1:n-1)-o;if(e.minRange&&e.maxRange)return a>=+e.minRange&&a<=+e.maxRange;if(e.minRange)return a>=+e.minRange;if(e.maxRange)return a<=+e.maxRange}return!0},D=t=>Array.isArray(y.value)&&2===y.value.length?e.fixedStart&&(qi(t,y.value[0])||Xi(t,y.value[0]))?[y.value[0],t]:e.fixedEnd&&(Yi(t,y.value[1])||Xi(t,y.value[1]))?[t,y.value[1]]:y.value:[],$=()=>{e.autoApply&&t("autoApply")},A=e=>!$r({start:e[0],end:e[1]}).some((e=>x(e))),R=(r,i=!1)=>{if(!x(r.value)&&(r.current||!e.hideOffsetDates)){if(e.weekPicker)return y.value=ao(new Date(r.value),+e.weekStart),$();if(e.range||_a(u.value)||_a(c.value)){if(_a(u.value)&&_a(c.value)&&!e.multiDates){let o=y.value?y.value.slice():[];if(2===o.length&&!(e.fixedStart||e.fixedEnd)&&(o=[]),e.autoRange){const t=[new Date(r.value),Zn(new Date(r.value),+e.autoRange)];A(t)&&(i&&T(r.value),o=t)}else e.fixedStart||e.fixedEnd?o=D(new Date(r.value)):o[0]?E(new Date(r.value))&&(Yi(new Date(r.value),new Date(o[0]))?o.unshift(new Date(r.value)):o[1]=new Date(r.value)):o[0]=new Date(r.value);o.length&&(o[0]&&!o[1]?o[0]=Fi(o[0],u.value[0],c.value[0],b()):(o[0]=Fi(o[0],u.value[0],c.value[0],b()),o[1]=Fi(o[1],u.value[1],c.value[1],b(!1)),n()),y.value=o,o[0]&&o[1]&&e.autoApply&&t("autoApply"))}}else{const t=Fi(new Date(r.value),u.value,c.value,b());e.multiDates?N(t):y.value=t,n(),$()}}},M=e=>{const t=e.find((e=>e.current));return t?Pr(t.value):""},F=t=>{!t.current&&e.hideOffsetDates||(s.value=t.value)},P=t=>{if(e.autoRange||e.weekPicker){if(s.value){if(e.hideOffsetDates&&!t.current)return!1;const n=Zn(s.value,+e.autoRange),r=ao(new Date(s.value),+e.weekStart);return e.weekPicker?Xi(r[1],new Date(t.value)):Xi(n,new Date(t.value))}return!1}return!1},j=t=>{if(e.autoRange||e.weekPicker){if(s.value){const n=Zn(s.value,+e.autoRange);if(e.hideOffsetDates&&!t.current)return!1;const r=ao(new Date(s.value),+e.weekStart);return e.weekPicker?qi(t.value,r[0])&&Yi(t.value,r[1]):qi(t.value,s.value)&&Yi(t.value,n)}return!1}return!1},B=t=>{if(e.autoRange||e.weekPicker){if(s.value){if(e.hideOffsetDates&&!t.current)return!1;const n=ao(new Date(s.value),+e.weekStart);return e.weekPicker?Xi(n[0],t.value):Xi(s.value,t.value)}return!1}return!1},L=t=>{for(let e=t-1;e>=0;e--){const t=nr(er(new Date,{month:d.value(e+1),year:p.value(e+1)}),1);f(e,_n(t),Sn(t))}for(let n=t+1;n<=e.multiCalendars-1;n++){const e=kn(er(new Date,{month:d.value(n-1),year:p.value(n-1)}),1);f(n,_n(e),Sn(e))}},z=e=>ji(new Date,d.value(e),p.value(e)),V=(r,i)=>{const o=e.monthPicker?d.value(r)!==i.month:p.value(r)!==i.year;if(m(r,i.month),g(r,i.year),e.multiCalendars&&!e.multiCalendarsSolo&&L(r),e.monthPicker||e.yearPicker)if(e.range){if(o){let e=y.value?y.value.slice():[];2===e.length&&null!==e[1]&&(e=[]),e.length?Yi(z(r),e[0])?e.unshift(z(r)):e[1]=z(r):e=[z(r)],y.value=e}}else y.value=z(r);n(),t("updateMonthYear",{instance:r,month:i.month,year:i.year}),oe(e.multiCalendarsSolo?r:void 0)},U=e=>Fi(e,u.value,c.value,b()),W=n=>{ka(n)&&ka(y.value)&&_a(u.value)&&_a(c.value)?(n[0]&&y.value[0]&&(y.value[0]=Fi(n[0],u.value[0],c.value[0],b())),n[1]&&y.value[1]&&(y.value[1]=Fi(n[1],u.value[1],c.value[1],b(!1)))):e.multiDates&&Array.isArray(y.value)?y.value[y.value.length-1]=U(n):!e.range&&!Sa(n)&&(y.value=U(n)),t("timeUpdate")},H=(t,r=!0,i=!1)=>{const o=r?t:u.value,a=r||i?c.value:t,s=i?t:h.value;if(e.range&&Sa(y.value)&&_a(o)&&_a(a)&&_a(s)&&!e.disableTimeRangeValidation){const e=e=>Fi(y.value[e],o[e],a[e],s[e]),t=e=>wn(y.value[e],0);if(Xi(y.value[0],y.value[1])&&(Xn(e(0),t(1))||Kn(e(1),t(0))))return}if(u.value=o,c.value=a,h.value=s,y.value)if(e.multiDates){const e=I();e&&W(e)}else W(y.value);else e.timePicker&&W(e.range?[new Date,new Date]:new Date);n()},G=()=>{s.value=null},q=t=>!(va(y.value,e.range)&&y.value[0]&&s.value)||(t?qi(s.value,y.value[0]):Yi(s.value,y.value[0])),Y=(t,n=!0)=>(e.range||e.weekPicker)&&Sa(y.value)?!(e.hideOffsetDates&&!t.current)&&Xi(new Date(t.value),y.value[n?0:1]):!!e.range&&(Xi(new Date(t.value),y.value&&Array.isArray(y.value)?n?y.value[0]||null:y.value[1]:null)&&(!n||!Yi(s.value||null,Array.isArray(y.value)?y.value[0]:null))||Xi(t.value,Array.isArray(y.value)?y.value[0]:null)&&q(n)),X=(t,n)=>!(Array.isArray(e.internalModelValue)&&e.internalModelValue.length||e.weekPicker)&&(!t&&!w(n)&&!(!n.current&&e.hideOffsetDates)&&(!e.range||!Y(n)&&!Y(n,!1))),K=(t,n,r)=>!(!Array.isArray(e.internalModelValue)||!e.internalModelValue[0]||1!==e.internalModelValue.length)&&(!t&&(r?qi(e.internalModelValue[0],n.value):Yi(e.internalModelValue[0],n.value))),J=(n=!1)=>{e.autoApply&&(e.monthPicker||e.yearPicker)&&(0,r.Y3)().then((()=>{e.range?t("autoApply",n||!y.value||1===y.value.length):t("autoApply",n)}))},Z=(t,n)=>{const r=er(new Date,{month:d.value(n),year:p.value(n)}),i=t<0?kn(r,1):nr(r,1);ls(e.minDate,e.maxDate,_n(i),Sn(i),t<0,e.preventMinMaxNavigation)&&(f(n,_n(i),Sn(i)),e.multiCalendars&&!e.multiCalendarsSolo&&L(n),oe())},Q=(t,n)=>{e.monthChangeOnScroll&&Z("inverse"!==e.monthChangeOnScroll?-t.deltaY:t.deltaY,n)},ee=(t,n,r=!1)=>{e.monthChangeOnArrows&&e.vertical===r&&te(t,n)},te=(e,t)=>{Z("right"===e?-1:1,t)},ne=t=>e.markers.find((e=>Xi(ro(t.value),ro(e.date)))),re=()=>{e.range?va(y.value,e.range)&&(y.value&&y.value[0]?y.value=Yi(new Date,y.value[0])?[new Date,y.value[0]]:[y.value[0],new Date]:y.value=[new Date]):t("update:internalModelValue",new Date),e.autoApply&&t("selectDate")},ie=n=>{n.length&&n.length<=2&&e.range&&(y.value=n.map((e=>new Date(e))),e.autoApply&&t("selectDate"))},oe=e=>{e||0===e?o.value[e].triggerTransition(d.value(e),p.value(e)):o.value.forEach(((e,t)=>e.triggerTransition(d.value(t),p.value(t))))};return{today:a,hours:u,minutes:c,seconds:h,month:d,year:p,monthYearSelect:J,isDisabled:x,updateTime:H,setHoverDate:F,getWeekNum:M,selectDate:R,rangeActive:k,isActiveDate:w,updateMonthYear:V,isHoverRangeEnd:P,isAutoRangeInBetween:j,isAutoRangeStart:B,clearHoverDate:G,rangeActiveStartEnd:Y,handleScroll:Q,getMarker:ne,handleArrow:ee,handleSwipe:te,selectCurrentDate:re,isHoverDate:X,isHoverDateStartEnd:K,presetDateRange:ie}},bs=(0,i.qj)({menuFocused:!1,shiftKeyInMenu:!1}),vs=()=>({setMenuFocused:e=>{bs.menuFocused=e},getStore:()=>bs,setShiftKey:e=>{bs.shiftKeyInMenu!==e&&(bs.shiftKeyInMenu=e)}}),ys=["id","aria-label","onKeydown"],xs={key:0,class:"dp__preset_ranges"},ws=["onClick"],ks={key:1,class:"dp__now_wrap"},_s=(0,r.aZ)({__name:"DatepickerMenu",props:{...Oo,...vo,...bo,internalModelValue:{type:[Date,Array],default:null},multiCalendars:{type:Number,default:0},openOnTop:{type:Boolean,default:!1}},emits:["update:internalModelValue","closePicker","selectDate","dpOpen","autoApply","timeUpdate","flow-step","updateMonthYear","invalid-select"],setup(e,{emit:t}){const n=e,s=(0,r.Rr)(),l=(0,i.iH)(null),u=(0,i.qj)({timePicker:!(n.enableTimePicker&&!n.timePicker&&!n.monthPicker),monthYearInput:!!n.timePicker,calendar:!1}),c=(0,i.iH)([]),h=(0,i.iH)([]),d=(0,i.iH)(null),p=(0,i.iH)(null),f=(0,i.iH)(0),m=(0,i.iH)(!1),g=(0,i.iH)(0),b=(0,r.f3)(ho),v=(0,r.f3)(co),y=(0,r.f3)(go),{setMenuFocused:x,setShiftKey:w,getStore:k}=vs();(0,r.bv)((()=>{var e;m.value=!0,null!=(e=n.presetRanges)&&e.length||he();const t=qo(p);if(t&&!n.textInput&&!n.inline&&(x(!0),O()),t){const e=e=>{!n.monthYearComponent&&!n.timePickerComponent&&e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()};t.addEventListener("pointerdown",e),t.addEventListener("mousedown",e)}document.addEventListener("resize",he)})),(0,r.Ah)((()=>{document.removeEventListener("resize",he)}));const{arrowRight:_,arrowLeft:S,arrowDown:C,arrowUp:I}=aa(),O=()=>{const e=qo(p);e&&e.focus({preventScroll:!0})},T=()=>{var e;(null==(e=n.flow)?void 0:e.length)&&-1!==g.value&&(g.value+=1,t("flow-step",g.value),Ne())},N=()=>{g.value=-1},{updateTime:E,updateMonthYear:D,today:$,month:A,year:R,hours:M,minutes:F,seconds:P,isDisabled:j,isActiveDate:B,selectDate:L,getWeekNum:z,setHoverDate:V,isHoverRangeEnd:U,isAutoRangeInBetween:W,isAutoRangeStart:H,rangeActive:G,clearHoverDate:q,rangeActiveStartEnd:Y,monthYearSelect:X,handleScroll:K,handleArrow:J,handleSwipe:Z,getMarker:Q,selectCurrentDate:ee,isHoverDateStartEnd:te,isHoverDate:ne,presetDateRange:re}=gs(n,t,T,h),ie=Xa(s,"calendar"),oe=Xa(s,"action"),ae=Xa(s,"timePicker"),se=Xa(s,"monthYear"),le=(0,r.Fl)((()=>n.openOnTop?"dp__arrow_bottom":"dp__arrow_top")),ue=(0,r.Fl)((()=>zo(n.yearRange))),ce=(0,r.Fl)((()=>Vo(n.locale,n.monthNameFormat))),he=()=>{const e=qo(l);e&&(f.value=e.getBoundingClientRect().width)},de=(0,r.Fl)((()=>e=>jo(A.value(e),R.value(e),+n.weekStart,n.hideOffsetDates))),pe=(0,r.Fl)((()=>n.multiCalendars>0&&n.range?[...Array(n.multiCalendars).keys()]:[0])),fe=(0,r.Fl)((()=>e=>1===e)),me=(0,r.Fl)((()=>n.monthPicker||n.timePicker||n.yearPicker)),ge=(0,r.Fl)((()=>({dp__flex_display:n.multiCalendars>0}))),be=(0,r.Fl)((()=>({dp__instance_calendar:n.multiCalendars>0}))),ve=(0,r.Fl)((()=>({dp__menu_disabled:n.disabled,dp__menu_readonly:n.readonly}))),ye=(0,r.Fl)((()=>e=>Se(de,e))),xe=(0,r.Fl)((()=>({locale:n.locale,weekNumName:n.weekNumName,weekStart:n.weekStart,weekNumbers:n.weekNumbers,customProps:n.customProps,calendarClassName:n.calendarClassName,specificMode:me.value,getWeekNum:z,multiCalendars:n.multiCalendars,modeHeight:n.modeHeight,internalModelValue:n.internalModelValue,noSwipe:n.noSwipe,vertical:n.vertical,dayNames:n.dayNames,monthChangeOnScroll:n.monthChangeOnScroll}))),we=(0,r.Fl)((()=>({dp__menu:!0,dp__menu_index:!n.inline,dp__relative:n.inline,[n.menuClassName]:!!n.menuClassName}))),ke=()=>!(!n.modelAuto||!Array.isArray(n.internalModelValue))&&!!n.internalModelValue[0],_e=()=>!n.modelAuto||Jo(n.internalModelValue),Se=(e,t)=>e.value(t).map((e=>({...e,days:e.days.map((e=>{const t=j(e.value),r=ne(t,e),i=n.range?!!n.modelAuto&&(ke()&&B(e)):B(e),o=!!n.highlight&&so(e.value,n.highlight),a=!(!n.range&&!n.weekPicker||n.multiCalendars>0&&!e.current||t||!_e()||!e.current&&n.hideOffsetDates||B(e))&&G(e);return e.marker=Q(e),e.classData={dp__cell_offset:!e.current,dp__pointer:!t&&!(!e.current&&n.hideOffsetDates),dp__active_date:i,dp__date_hover:r,dp__date_hover_start:te(r,e,!0),dp__date_hover_end:te(r,e,!1),dp__range_between:a&&!n.weekPicker,dp__range_between_week:a&&n.weekPicker,dp__today:!n.noToday&&Xi(e.value,$.value)&&e.current,dp__cell_disabled:t,dp__cell_auto_range:W(e),dp__cell_auto_range_start:H(e),dp__cell_auto_range_end:U(e),dp__range_start:n.multiCalendars>0?e.current&&Y(e)&&_e():Y(e)&&_e(),dp__range_end:n.multiCalendars>0?e.current&&Y(e,!1)&&_e():Y(e,!1)&&_e(),[n.calendarCellClassName]:!!n.calendarCellClassName,dp__cell_highlight:o&&!i,dp__cell_highlight_active:o&&i},e}))}))),Ce=e=>{e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},Ie=()=>{n.escClose&&t("closePicker")},Oe=e=>{e.stopImmediatePropagation(),e.preventDefault(),n.spaceConfirm&&t("selectDate")},Te=e=>{var t;null!=(t=n.flow)&&t.length&&(u[e]=!0,Object.keys(u).filter((e=>!u[e])).length||Ne())},Ne=()=>{"month"===n.flow[g.value]&&c.value[0]&&c.value[0].toggleMonthPicker(!0),"year"===n.flow[g.value]&&c.value&&c.value[0].toggleYearPicker(!0),"calendar"===n.flow[g.value]&&d.value&&d.value.toggleTimePicker(!1,!0),"time"===n.flow[g.value]&&d.value&&d.value.toggleTimePicker(!0,!0);const e=n.flow[g.value];("hours"===e||"minutes"===e||"seconds"===e)&&d.value&&d.value.toggleTimePicker(!0,!0,e)},Ee=e=>{if(null!=y&&y.value){if("up"===e)return I();if("down"===e)return C();if("left"===e)return S();if("right"===e)return _()}else"left"===e||"up"===e?J("left",0,"up"===e):J("right",0,"down"===e)},De=e=>{w(e.shiftKey),!n.disableMonthYearSelect&&"Tab"===e.code&&e.target.classList.contains("dp__menu")&&k().shiftKeyInMenu&&(e.preventDefault(),e.stopImmediatePropagation(),t("closePicker"))};return(t,n)=>((0,r.wg)(),(0,r.j4)(a.uT,{appear:"",name:(0,i.SU)(b).menuAppear,mode:"out-in",css:!!(0,i.SU)(b)},{default:(0,r.w5)((()=>[(0,r._)("div",{id:t.uid?`dp-menu-${t.uid}`:void 0,tabindex:"0",ref_key:"dpMenuRef",ref:p,role:"dialog","aria-label":(0,i.SU)(v).menu,class:(0,o.C_)((0,i.SU)(we)),onMouseleave:n[12]||(n[12]=(...e)=>(0,i.SU)(q)&&(0,i.SU)(q)(...e)),onClick:Ce,onKeydown:[(0,a.D2)(Ie,["esc"]),(0,a.D2)(Oe,["space"]),n[13]||(n[13]=(0,a.D2)((0,a.iM)((e=>Ee("left")),["prevent"]),["left"])),n[14]||(n[14]=(0,a.D2)((0,a.iM)((e=>Ee("up")),["prevent"]),["up"])),n[15]||(n[15]=(0,a.D2)((0,a.iM)((e=>Ee("down")),["prevent"]),["down"])),n[16]||(n[16]=(0,a.D2)((0,a.iM)((e=>Ee("right")),["prevent"]),["right"])),De]},[(t.disabled||t.readonly)&&t.inline?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,o.C_)((0,i.SU)(ve))},null,2)):(0,r.kq)("",!0),t.inline||t.teleportCenter?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,o.C_)((0,i.SU)(le))},null,2)),(0,r._)("div",{class:(0,o.C_)(t.presetRanges.length?"dp__menu_content_wrapper":null)},[t.presetRanges.length?((0,r.wg)(),(0,r.iD)("div",xs,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.presetRanges,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{key:t,style:(0,o.j5)(e.style||{}),class:"dp__preset_range",onClick:t=>(0,i.SU)(re)(e.range)},(0,o.zw)(e.label),13,ws)))),128))])):(0,r.kq)("",!0),(0,r._)("div",{class:"dp__instance_calendar",ref_key:"calendarWrapperRef",ref:l,role:"document"},[(0,r._)("div",{class:(0,o.C_)((0,i.SU)(ge))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,i.SU)(pe),((a,s)=>((0,r.wg)(),(0,r.iD)("div",{key:a,class:(0,o.C_)((0,i.SU)(be))},[t.disableMonthYearSelect||t.timePicker?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,r.LL)(t.monthYearComponent?t.monthYearComponent:ms),(0,r.dG)({key:0,ref_for:!0,ref:e=>{e&&(c.value[s]=e)}},{months:(0,i.SU)(ce),years:(0,i.SU)(ue),filters:t.filters,monthPicker:t.monthPicker,month:(0,i.SU)(A)(a),year:(0,i.SU)(R)(a),customProps:t.customProps,multiCalendars:e.multiCalendars,multiCalendarsSolo:t.multiCalendarsSolo,instance:a,minDate:t.minDate,maxDate:t.maxDate,preventMinMaxNavigation:t.preventMinMaxNavigation,internalModelValue:e.internalModelValue,range:t.range,reverseYears:t.reverseYears,vertical:t.vertical,yearPicker:t.yearPicker},{onMount:n[0]||(n[0]=e=>Te("monthYearInput")),onResetFlow:N,onUpdateMonthYear:e=>(0,i.SU)(D)(a,e),onMonthYearSelect:(0,i.SU)(X),onOverlayClosed:O}),(0,r.Nv)({_:2},[(0,r.Ko)((0,i.SU)(se),((e,n)=>({name:e,fn:(0,r.w5)((n=>[(0,r.WI)(t.$slots,e,(0,o.vs)((0,r.F4)(n)))]))})))]),1040,["onUpdateMonthYear","onMonthYearSelect"])),(0,r.Wm)(ga,(0,r.dG)({ref_for:!0,ref:e=>{e&&(h.value[s]=e)}},(0,i.SU)(xe),{"flow-step":g.value,"onUpdate:flow-step":n[1]||(n[1]=e=>g.value=e),instance:a,"mapped-dates":(0,i.SU)(ye)(a),month:(0,i.SU)(A)(a),year:(0,i.SU)(R)(a),onSelectDate:e=>(0,i.SU)(L)(e,!(0,i.SU)(fe)(a)),onSetHoverDate:n[2]||(n[2]=e=>(0,i.SU)(V)(e)),onHandleScroll:e=>(0,i.SU)(K)(e,a),onHandleSwipe:e=>(0,i.SU)(Z)(e,a),onMount:n[3]||(n[3]=e=>Te("calendar")),onResetFlow:N}),(0,r.Nv)({_:2},[(0,r.Ko)((0,i.SU)(ie),((e,n)=>({name:e,fn:(0,r.w5)((n=>[(0,r.WI)(t.$slots,e,(0,o.vs)((0,r.F4)({...n})))]))})))]),1040,["flow-step","instance","mapped-dates","month","year","onSelectDate","onHandleScroll","onHandleSwipe"])],2)))),128))],2),(0,r._)("div",null,[!t.enableTimePicker||t.monthPicker||t.weekPicker?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,r.LL)(t.timePickerComponent?t.timePickerComponent:es),(0,r.dG)({key:0,ref_key:"timePickerRef",ref:d},{is24:t.is24,hoursIncrement:t.hoursIncrement,minutesIncrement:t.minutesIncrement,hoursGridIncrement:t.hoursGridIncrement,secondsIncrement:t.secondsIncrement,minutesGridIncrement:t.minutesGridIncrement,secondsGridIncrement:t.secondsGridIncrement,noHoursOverlay:t.noHoursOverlay,noMinutesOverlay:t.noMinutesOverlay,noSecondsOverlay:t.noSecondsOverlay,range:t.range,filters:t.filters,timePicker:t.timePicker,hours:(0,i.SU)(M),minutes:(0,i.SU)(F),seconds:(0,i.SU)(P),customProps:t.customProps,enableSeconds:t.enableSeconds,fixedStart:t.fixedStart,fixedEnd:t.fixedEnd,modelAuto:t.modelAuto,internalModelValue:e.internalModelValue},{onMount:n[4]||(n[4]=e=>Te("timePicker")),"onUpdate:hours":n[5]||(n[5]=e=>(0,i.SU)(E)(e)),"onUpdate:minutes":n[6]||(n[6]=e=>(0,i.SU)(E)(e,!1)),"onUpdate:seconds":n[7]||(n[7]=e=>(0,i.SU)(E)(e,!1,!0)),onResetFlow:N,onOverlayClosed:O}),(0,r.Nv)({_:2},[(0,r.Ko)((0,i.SU)(ae),((e,n)=>({name:e,fn:(0,r.w5)((n=>[(0,r.WI)(t.$slots,e,(0,o.vs)((0,r.F4)(n)))]))})))]),1040))])],512),t.showNowButton?((0,r.wg)(),(0,r.iD)("div",ks,[t.$slots["now-button"]?(0,r.WI)(t.$slots,"now-button",{key:0,selectCurrentDate:(0,i.SU)(ee)}):(0,r.kq)("",!0),t.$slots["now-button"]?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:1,type:"button",role:"button",class:"dp__now_button",onClick:n[8]||(n[8]=(...e)=>(0,i.SU)(ee)&&(0,i.SU)(ee)(...e))},(0,o.zw)(t.nowButtonLabel),1))])):(0,r.kq)("",!0)],2),!t.autoApply||t.keepActionRow?((0,r.wg)(),(0,r.j4)((0,r.LL)(t.actionRowComponent?t.actionRowComponent:$a),(0,r.dG)({key:2},{calendarWidth:f.value,selectText:t.selectText,cancelText:t.cancelText,internalModelValue:e.internalModelValue,range:t.range,previewFormat:t.previewFormat,inline:t.inline,monthPicker:t.monthPicker,timePicker:t.timePicker,customProps:t.customProps,multiCalendars:e.multiCalendars,menuMount:m.value,maxTime:t.maxTime,minTime:t.minTime,enableTimePicker:t.enableTimePicker,minDate:t.minDate,maxDate:t.maxDate,multiDates:t.multiDates,modelAuto:t.modelAuto,partialRange:t.partialRange},{onClosePicker:n[9]||(n[9]=e=>t.$emit("closePicker")),onSelectDate:n[10]||(n[10]=e=>t.$emit("selectDate")),onInvalidSelect:n[11]||(n[11]=e=>t.$emit("invalid-select"))}),(0,r.Nv)({_:2},[(0,r.Ko)((0,i.SU)(oe),((e,n)=>({name:e,fn:(0,r.w5)((n=>[(0,r.WI)(t.$slots,e,(0,o.vs)((0,r.F4)({...n})))]))})))]),1040)):(0,r.kq)("",!0)],42,ys)])),_:3},8,["name","css"]))}});var Ss=(e=>(e.center="center",e.left="left",e.right="right",e))(Ss||{});const Cs=(e,t,n,r,o,a,s,l,u)=>{const c=(0,i.iH)({top:"0",left:"0",transform:"none"}),h=(0,i.iH)(!1),d=390,p=e=>{const t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY}},f=e=>{const t=e.getBoundingClientRect();let n=0,r=0;for(;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)n+=e.offsetLeft-e.scrollLeft,r=t.top+e.scrollTop,e=e.offsetParent;return{top:r,left:n}},m=(e,t)=>{c.value.left=`${e+t}px`,c.value.transform="translateX(-100%)"},g=e=>{c.value.left=`${e}px`,c.value.transform="translateX(0)"},b=(t,n)=>{e===Ss.left&&g(t),e===Ss.right&&m(t,n),e===Ss.center&&(c.value.left=`${t+n/2}px`,c.value.transform="translateX(-50%)")},v=()=>{const e=qo(o);if(e){const n=window.innerHeight,{top:r}=t?f(e):p(e),{left:i,width:o,top:a,height:s}=e.getBoundingClientRect(),l=n-a-s;c.value.top=a>l?r-d+"px":`${r}px`,b(i,o)}},y=()=>{c.value.left="50%",c.value.top="50%",c.value.transform="translate(-50%, -50%)",c.value.position="fixed"},x=(e=!0)=>{if(!a){if(l.value)return y();const r=qo(o);if(t&&"boolean"!=typeof t)c.value=t(r);else if(r){const{left:i,width:o,height:a}=r.getBoundingClientRect(),{top:l}=t?f(r):p(r);c.value.top=`${a+l+ +s}px`,b(i,o),e&&n&&w()}}},w=()=>{const e=qo(o);if(e&&n&&!a){const{height:n,top:i,left:o,width:a}=e.getBoundingClientRect(),{top:l}=t?f(e):p(e),u=window.innerHeight-i-n,d=qo(r);if(d){const{height:e,left:t,right:r}=d.getBoundingClientRect(),p=e+n;p>i&&p>u?i<u?(x(!1),h.value=!1):(c.value.top=l-e-+s+"px",h.value=!0):p>u?(c.value.top=l-e-+s+"px",h.value=!0):(x(!1),h.value=!1),t<0?g(o):r>document.documentElement.clientWidth&&m(o,a)}}u("recalculatePosition")};return{openOnTop:h,menuPosition:c,setMenuPosition:x,setInitialPosition:v,recalculatePosition:w}},Is=(e,t,n,o,a,s,l,u,c,h,d,p,f,m,g,b,v)=>{const y=(0,i.iH)(""),x=(0,i.iH)();(0,r.YP)(x,(()=>{v("internalModelChange",x.value)}));const w=e=>[I(e[0]),e[1]?I(e[1]):null],k=e=>{let r=null;e?t?ya(e)&&"hours"in e[0]&&"minutes"in e[0]?r=[Fi(null,+e[0].hours,+e[0].minutes,+e[0].seconds),Fi(null,+e[1].hours,+e[1].minutes,+e[1].seconds)]:ba(e)&&(r=Fi(null,+e.hours,+e.minutes,+e.seconds)):n?xa(e)&&"month"in e[0]&&"year"in e[0]?(r=[ji(null,+e[0].month,+e[0].year)],e[1]?r[1]=ji(null,+e[1].month,+e[1].year):!e[1]&&a&&(r[1]=null)):wa(e)&&"month"in e&&"year"in e&&(r=ji(null,+e.month,+e.year)):f?r=Array.isArray(e)?[On(new Date,e[0]),!e[1]&&a?null:On(new Date,e[1])]:On(new Date,e):h&&Array.isArray(e)?r=e.map((e=>I(e))):p&&Array.isArray(e)?r=[new Date(e[0]),new Date(e[1])]:o?b?r=Array.isArray(e)?w(e):[I(e),null]:Ca(e,a)&&(r=w(e)):Oa(e)&&(r=I(e)):r=null,Mi(r)?(x.value=r,S()):(x.value=null,y.value="")},_=()=>Li(e,s,u,n,t,p,f,l),S=()=>{if(x.value)if(e&&"string"!=typeof e)y.value=e(t?Wi(x.value):n?Ui(x.value):x.value);else{const e=_();Array.isArray(x.value)&&h?y.value=x.value.map((t=>Gi(t,e,null==c?void 0:c.value))).join("; "):y.value=Gi(x.value,e,null==c?void 0:c.value,null==m?void 0:m.rangeSeparator,b)}else y.value=""},C=()=>!!x.value&&(o?a?x.value.length>=1:2===x.value.length:!!x.value),I=t=>{if(d){const e=new Date(t);return"preserve"===d?new Date(e.getTime()+6e4*e.getTimezoneOffset()):e}return g?"date"===g||"timestamp"===g?new Date(t):fn(t,"format"!==g||"string"!=typeof e&&e?g:_(),new Date):new Date(t)},O=t=>g?"timestamp"===g?+t:Gi(t,"format"!==g||"string"!=typeof e&&e?g:_(),null==c?void 0:c.value,null==m?void 0:m.rangeSeparator):t,T=e=>{v("update:modelValue",e)},N=()=>[O(x.value[0]),x.value[1]?O(x.value[1]):null];return{parseExternalModelValue:k,formatInputValue:S,internalModelValue:x,inputValue:y,emitModelValue:()=>{if(n)T(Ui(x.value));else if(t)T(Wi(x.value));else if(p)T(x.value);else if(f)T(Array.isArray(x.value)?[Sn(x.value[0]),x.value[1]?Sn(x.value[1]):null]:Sn(x.value));else{if(x.value&&o&&a&&1===x.value.length&&x.value.push(null),d){let e;if(Array.isArray(x.value)){const t=e=>e&&io(e,"preserve"===d);e=b?x.value[1]?x.value.map(t):io(x.value[0],"preserve"===d):x.value.map(t)}else e=io(x.value,"preserve"===d);return T(e)}Array.isArray(x.value)&&!h?T(b?x.value[1]?N():O(x.value[0]):N()):Array.isArray(x.value)&&h?T(x.value.map((e=>O(e)))):T(O(x.value))}S()},checkBeforeEmit:C}},Os=typeof window<"u"?window:void 0,Ts=()=>{},Ns=e=>!!(0,i.nZ)()&&((0,i.EB)(e),!0),Es=(e,t,n,o)=>{if(!e)return Ts;let a=Ts;const s=(0,r.YP)((()=>(0,i.SU)(e)),(e=>{a(),e&&(e.addEventListener(t,n,o),a=()=>{e.removeEventListener(t,n,o),a=Ts})}),{immediate:!0,flush:"post"}),l=()=>{s(),a()};return Ns(l),l},Ds=(e,t,n,r={})=>{const{window:i=Os,event:o="pointerdown"}=r;return i?Es(i,o,(r=>{const i=qo(e),o=qo(t);!i||!o||i===r.target||r.composedPath().includes(i)||r.composedPath().includes(o)||n(r)}),{passive:!0}):void 0},$s=(0,r.aZ)({__name:"VueDatePicker",props:{...To},emits:["update:modelValue","textSubmit","closed","cleared","open","focus","blur","internalModelChange","recalculatePosition","flow-step","updateMonthYear","invalid-select"],setup(e,{expose:t,emit:n}){const a=e,s=(0,r.Rr)(),l=(0,i.iH)(!1),u=(0,i.Vh)(a,"modelValue"),c=(0,i.iH)(null),h=(0,i.iH)(null),d=(0,i.Vh)(a,"teleportCenter");(0,r.JJ)(po,a.autoApply);const p=(0,r.Fl)((()=>a.formatLocale));(0,r.JJ)(mo,p),(0,r.JJ)(fo,(0,i.Vh)(a,"textInput")),(0,r.JJ)(go,(0,i.Vh)(a,"arrowNavigation")),(0,r.bv)((()=>{_(a.modelValue),a.inline||(window.addEventListener("scroll",L),window.addEventListener("resize",z)),a.inline&&(l.value=!0)})),(0,r.Ah)((()=>{a.inline||(window.removeEventListener("scroll",L),window.removeEventListener("resize",z))}));const f=Xa(s,"all"),m=Xa(s,"input");(0,r.YP)(u,(()=>{_(u.value)}),{deep:!0});const{openOnTop:g,menuPosition:b,setMenuPosition:v,recalculatePosition:y,setInitialPosition:x}=Cs(a.position,a.altPosition,a.autoPosition,c,h,a.inline,a.offset,d,n),{internalModelValue:w,inputValue:k,parseExternalModelValue:_,emitModelValue:S,checkBeforeEmit:C,formatInputValue:I}=Is(a.format,a.timePicker,a.monthPicker,a.range,a.partialRange,a.is24,a.enableTimePicker,a.enableSeconds,p,a.multiDates,a.utc,a.weekPicker,a.yearPicker,a.textInputOptions,a.modelType,a.modelAuto,n),{clearArrowNav:O}=aa(),{setMenuFocused:T,setShiftKey:N}=vs(),E=(0,r.Fl)((()=>({dp__main:!0,dp__theme_dark:a.dark,dp__theme_light:!a.dark,dp__flex_display:a.inline,dp__flex_display_with_input:a.inlineWithInput}))),D=(0,r.Fl)((()=>Ta(a.format)?a.format:Li(null,a.is24,a.enableSeconds,a.monthPicker,a.timePicker,a.weekPicker,a.yearPicker,a.enableTimePicker))),$=(0,r.Fl)((()=>a.previewFormat?a.previewFormat:Ta(D.value)?D.value:a.format)),A=(0,r.Fl)((()=>"boolean"==typeof a.transitions?!!a.transitions&&Xo({}):Xo(a.transitions)));(0,r.JJ)(ho,A);const R=(0,r.Fl)((()=>a.dark?"dp__theme_dark":"dp__theme_light")),M=(0,r.Fl)((()=>Object.assign(Wo(),a.textInputOptions))),F=(0,r.Fl)((()=>Ko(a.ariaLabels)));(0,r.JJ)(co,F);const P=(0,r.Fl)((()=>Ho(a.filters))),j=(0,r.Fl)((()=>{const e=e=>{const t={hours:Tn(new Date),minutes:Nn(new Date),seconds:En(new Date)};return Object.assign(t,e)};return a.range?a.startTime&&Array.isArray(a.startTime)?[e(a.startTime[0]),e(a.startTime[1])]:null:a.startTime&&!Array.isArray(a.startTime)?e(a.startTime):null})),B=(0,r.Fl)((()=>null===a.multiCalendars?0:"boolean"==typeof a.multiCalendars?a.multiCalendars?2:0:+a.multiCalendars>=2?+a.multiCalendars:2)),L=()=>{l.value&&(a.closeOnScroll?X():a.autoPosition?v():window.removeEventListener("scroll",L))},z=()=>{l.value&&v()},V=()=>{!a.disabled&&!a.readonly&&(x(),l.value=!0,(0,r.Y3)().then((()=>{v(),l.value&&n("open")})),l.value||Y(),_(a.modelValue))},U=()=>{k.value="",Y(),n("update:modelValue",null),n("cleared"),X()},W=()=>{const{validate:e}=uo(a.minDate,a.maxDate,a.disabledDates,a.allowedDates,P.value,a.disabledWeekDays,a.yearRange),t=w.value;return!(t&&(Array.isArray(t)||!e(t)))||!!Array.isArray(t)&&(!(2!==t.length||!e(t[0])||!e(t[1]))||!!e(t[0]))},H=()=>{C()&&W()?(S(),X()):n("invalid-select",w.value)},G=e=>{S(),a.closeOnAutoApply&&!e&&X()},q=(e=!1)=>{a.autoApply&&(!a.enableTimePicker||a.monthPicker||a.yearPicker||to(w.value,a.maxTime,a.minTime,a.maxDate,a.minDate))&&W()&&(a.range&&Array.isArray(w.value)?(a.partialRange||2===w.value.length)&&G(e):G(e))},Y=()=>{w.value=null},X=()=>{a.inline||(l.value&&(l.value=!1,T(!1),N(!1),O(),n("closed"),x(),k.value&&_(u.value)),Y(),h.value&&h.value.focusInput())},K=(e,t)=>{e?(w.value=e,t&&(H(),n("textSubmit"))):w.value=null},J=()=>{a.autoApply&&to(w.value,a.maxTime,a.minTime,a.maxDate,a.minDate)&&S()},Z=()=>l.value?X():V();return Ds(c,h,X),t({closeMenu:X,selectDate:H,clearValue:U,openMenu:V,onScroll:L,formatInputValue:I}),(e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)((0,i.SU)(E))},[(0,r.Wm)(Fo,(0,r.dG)({ref_key:"inputRef",ref:h},{placeholder:e.placeholder,hideInputIcon:e.hideInputIcon,readonly:e.readonly,disabled:e.disabled,inputClassName:e.inputClassName,clearable:e.clearable,state:e.state,inline:e.inline,inlineWithInput:e.inlineWithInput,textInput:e.textInput,textInputOptions:(0,i.SU)(M),range:e.range,isMenuOpen:l.value,pattern:(0,i.SU)(D),autoApply:e.autoApply,uid:e.uid,required:e.required,name:e.name,autocomplete:e.autocomplete},{"input-value":(0,i.SU)(k),"onUpdate:input-value":t[0]||(t[0]=e=>(0,i.dq)(k)?k.value=e:null),onClear:U,onOpen:V,onSetInputDate:K,onSetEmptyDate:(0,i.SU)(S),onSelectDate:H,onToggle:Z,onClose:X,onFocus:t[1]||(t[1]=t=>e.$emit("focus")),onBlur:t[2]||(t[2]=t=>e.$emit("blur"))}),(0,r.Nv)({_:2},[(0,r.Ko)((0,i.SU)(m),((t,n)=>({name:t,fn:(0,r.w5)((n=>[(0,r.WI)(e.$slots,t,(0,o.vs)((0,r.F4)(n)))]))})))]),1040,["input-value","onSetEmptyDate"]),l.value?((0,r.wg)(),(0,r.j4)(r.lR,{key:0,to:e.teleport,disabled:e.inline},[l.value?((0,r.wg)(),(0,r.j4)(_s,(0,r.dG)({key:0,ref_key:"dpMenuRef",ref:c,class:(0,i.SU)(R),style:(0,i.SU)(b)},{weekNumbers:e.weekNumbers,weekStart:e.weekStart,disableMonthYearSelect:e.disableMonthYearSelect,menuClassName:e.menuClassName,calendarClassName:e.calendarClassName,yearRange:e.yearRange,range:e.range,multiCalendars:(0,i.SU)(B),multiCalendarsSolo:e.multiCalendarsSolo,multiStatic:e.multiStatic,calendarCellClassName:e.calendarCellClassName,enableTimePicker:e.enableTimePicker,is24:e.is24,hoursIncrement:e.hoursIncrement,minutesIncrement:e.minutesIncrement,hoursGridIncrement:e.hoursGridIncrement,minutesGridIncrement:e.minutesGridIncrement,minDate:e.minDate,maxDate:e.maxDate,autoApply:e.autoApply,selectText:e.selectText,cancelText:e.cancelText,previewFormat:(0,i.SU)($),locale:e.locale,weekNumName:e.weekNumName,disabledDates:e.disabledDates,filters:(0,i.SU)(P),minTime:e.minTime,maxTime:e.maxTime,inline:e.inline,openOnTop:(0,i.SU)(g),monthPicker:e.monthPicker,timePicker:e.timePicker,monthNameFormat:e.monthNameFormat,startDate:e.startDate,startTime:(0,i.SU)(j),monthYearComponent:e.monthYearComponent,timePickerComponent:e.timePickerComponent,actionRowComponent:e.actionRowComponent,customProps:e.customProps,hideOffsetDates:e.hideOffsetDates,autoRange:e.autoRange,noToday:e.noToday,noHoursOverlay:e.noHoursOverlay,noMinutesOverlay:e.noMinutesOverlay,disabledWeekDays:e.disabledWeekDays,allowedDates:e.allowedDates,showNowButton:e.showNowButton,nowButtonLabel:e.nowButtonLabel,monthChangeOnScroll:e.monthChangeOnScroll,markers:e.markers,uid:e.uid,modeHeight:e.modeHeight,enableSeconds:e.enableSeconds,secondsIncrement:e.secondsIncrement,secondsGridIncrement:e.secondsGridIncrement,noSecondsOverlay:e.noSecondsOverlay,escClose:e.escClose,spaceConfirm:e.spaceConfirm,monthChangeOnArrows:e.monthChangeOnArrows,textInput:e.textInput,disabled:e.disabled,readonly:e.readonly,multiDates:e.multiDates,presetRanges:e.presetRanges,flow:e.flow,preventMinMaxNavigation:e.preventMinMaxNavigation,minRange:e.minRange,maxRange:e.maxRange,fixedStart:e.fixedStart,fixedEnd:e.fixedEnd,multiDatesLimit:e.multiDatesLimit,reverseYears:e.reverseYears,keepActionRow:e.keepActionRow,weekPicker:e.weekPicker,noSwipe:e.noSwipe,vertical:e.vertical,arrowNavigation:e.arrowNavigation,yearPicker:e.yearPicker,disableTimeRangeValidation:e.disableTimeRangeValidation,dayNames:e.dayNames,modelAuto:e.modelAuto,highlight:e.highlight,partialRange:e.partialRange,teleportCenter:e.teleportCenter},{internalModelValue:(0,i.SU)(w),"onUpdate:internalModelValue":t[3]||(t[3]=e=>(0,i.dq)(w)?w.value=e:null),onClosePicker:X,onSelectDate:H,onDpOpen:(0,i.SU)(y),onAutoApply:q,onTimeUpdate:J,onFlowStep:t[4]||(t[4]=t=>e.$emit("flow-step",t)),onUpdateMonthYear:t[5]||(t[5]=t=>e.$emit("updateMonthYear",t)),onInvalidSelect:t[6]||(t[6]=t=>e.$emit("invalid-select",(0,i.SU)(w)))}),(0,r.Nv)({_:2},[(0,r.Ko)((0,i.SU)(f),((t,n)=>({name:t,fn:(0,r.w5)((n=>[(0,r.WI)(e.$slots,t,(0,o.vs)((0,r.F4)({...n})))]))})))]),1040,["class","style","internalModelValue","onDpOpen"])):(0,r.kq)("",!0)],8,["to","disabled"])):(0,r.kq)("",!0)],2))}}),As=(()=>{const e=$s;return e.install=t=>{t.component("Vue3DatePicker",e)},e})(),Rs=Object.freeze(Object.defineProperty({__proto__:null,default:As},Symbol.toStringTag,{value:"Module"}));Object.entries(Rs).forEach((([e,t])=>{"default"!==e&&(As[e]=t)}))},741:function(e,t,n){"use strict";n.d(t,{qi:function(){return Ra},vn:function(){return si},ZL:function(){return os},N0:function(){return li},uw:function(){return yl},kL:function(){return _a},WY:function(){return hs},jI:function(){return ci},Gu:function(){return zs},De:function(){return Gs},ST:function(){return hi},jn:function(){return qa},f$:function(){return _l},WV:function(){return Il},tt:function(){return pi},od:function(){return Xa},CV:function(){return di},Xi:function(){return fi},l7:function(){return Ll},ho:function(){return Wi},DK:function(){return Js},FB:function(){return Jl},RM:function(){return Ql},Dx:function(){return Xs},u:function(){return ml}});n(1703);
/*!
 * Chart.js v3.9.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */
function r(){}const i=function(){let e=0;return function(){return e++}}();function o(e){return null===e||"undefined"===typeof e}function a(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function s(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}const l=e=>("number"===typeof e||e instanceof Number)&&isFinite(+e);function u(e,t){return l(e)?e:t}function c(e,t){return"undefined"===typeof e?t:e}const h=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100:e/t,d=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function p(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function f(e,t,n,r){let i,o,l;if(a(e))if(o=e.length,r)for(i=o-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<o;i++)t.call(n,e[i],i);else if(s(e))for(l=Object.keys(e),o=l.length,i=0;i<o;i++)t.call(n,e[l[i]],l[i])}function m(e,t){let n,r,i,o;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],o=t[n],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function g(e){if(a(e))return e.map(g);if(s(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=g(e[n[i]]);return t}return e}function b(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function v(e,t,n,r){if(!b(e))return;const i=t[e],o=n[e];s(i)&&s(o)?y(i,o,r):t[e]=g(o)}function y(e,t,n){const r=a(t)?t:[t],i=r.length;if(!s(e))return e;n=n||{};const o=n.merger||v;for(let a=0;a<i;++a){if(t=r[a],!s(t))continue;const i=Object.keys(t);for(let r=0,a=i.length;r<a;++r)o(i[r],e,t,n)}return e}function x(e,t){return y(e,t,{merger:w})}function w(e,t,n){if(!b(e))return;const r=t[e],i=n[e];s(r)&&s(i)?x(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=g(i))}const k={"":e=>e,x:e=>e.x,y:e=>e.y};function _(e,t){const n=k[t]||(k[t]=S(t));return n(e)}function S(e){const t=C(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}function C(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function I(e){return e.charAt(0).toUpperCase()+e.slice(1)}const O=e=>"undefined"!==typeof e,T=e=>"function"===typeof e,N=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function E(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}const D=Math.PI,$=2*D,A=$+D,R=Number.POSITIVE_INFINITY,M=D/180,F=D/2,P=D/4,j=2*D/3,B=Math.log10,L=Math.sign;function z(e){const t=Math.round(e);e=W(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(B(e))),r=e/n,i=r<=1?1:r<=2?2:r<=5?5:10;return i*n}function V(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}function U(e){return!isNaN(parseFloat(e))&&isFinite(e)}function W(e,t,n){return Math.abs(e-t)<n}function H(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function G(e,t,n){let r,i,o;for(r=0,i=e.length;r<i;r++)o=e[r][n],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function q(e){return e*(D/180)}function Y(e){return e*(180/D)}function X(e){if(!l(e))return;let t=1,n=0;while(Math.round(e*t)/t!==e)t*=10,n++;return n}function K(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let o=Math.atan2(r,n);return o<-.5*D&&(o+=$),{angle:o,distance:i}}function J(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Z(e,t){return(e-t+A)%$-D}function Q(e){return(e%$+$)%$}function ee(e,t,n,r){const i=Q(e),o=Q(t),a=Q(n),s=Q(o-i),l=Q(a-i),u=Q(i-o),c=Q(i-a);return i===o||i===a||r&&o===a||s>l&&u<c}function te(e,t,n){return Math.max(t,Math.min(n,e))}function ne(e){return te(e,-32768,32767)}function re(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function ie(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,o=0;while(i-o>1)r=o+i>>1,n(r)?o=r:i=r;return{lo:o,hi:i}}const oe=(e,t,n,r)=>ie(e,n,r?r=>e[r][t]<=n:r=>e[r][t]<n),ae=(e,t,n)=>ie(e,n,(r=>e[r][t]>=n));function se(e,t,n){let r=0,i=e.length;while(r<i&&e[r]<t)r++;while(i>r&&e[i-1]>n)i--;return r>0||i<e.length?e.slice(r,i):e}const le=["push","pop","shift","splice","unshift"];function ue(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),le.forEach((t=>{const n="_onData"+I(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(...t){const i=r.apply(this,t);return e._chartjs.listeners.forEach((e=>{"function"===typeof e[n]&&e[n](...t)})),i}})})))}function ce(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(le.forEach((t=>{delete e[t]})),delete e._chartjs)}function he(e){const t=new Set;let n,r;for(n=0,r=e.length;n<r;++n)t.add(e[n]);return t.size===r?e:Array.from(t)}const de=function(){return"undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame}();function pe(e,t,n){const r=n||(e=>Array.prototype.slice.call(e));let i=!1,o=[];return function(...n){o=r(n),i||(i=!0,de.call(window,(()=>{i=!1,e.apply(t,o)})))}}function fe(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}const me=e=>"start"===e?"left":"end"===e?"right":"center",ge=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2,be=(e,t,n,r)=>{const i=r?"left":"right";return e===i?n:"center"===e?(t+n)/2:t};function ve(e,t,n){const r=t.length;let i=0,o=r;if(e._sorted){const{iScale:a,_parsed:s}=e,l=a.axis,{min:u,max:c,minDefined:h,maxDefined:d}=a.getUserBounds();h&&(i=te(Math.min(oe(s,a.axis,u).lo,n?r:oe(t,l,a.getPixelForValue(u)).lo),0,r-1)),o=d?te(Math.max(oe(s,a.axis,c,!0).hi+1,n?0:oe(t,l,a.getPixelForValue(c),!0).hi+1),i,r)-i:r-i}return{start:i,count:o}}function ye(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const o=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),o}const xe=e=>0===e||1===e,we=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*$/n),ke=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*$/n)+1,_e={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*F),easeOutSine:e=>Math.sin(e*F),easeInOutSine:e=>-.5*(Math.cos(D*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>xe(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>xe(e)?e:we(e,.075,.3),easeOutElastic:e=>xe(e)?e:ke(e,.075,.3),easeInOutElastic(e){const t=.1125,n=.45;return xe(e)?e:e<.5?.5*we(2*e,t,n):.5+.5*ke(2*e-1,t,n)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-_e.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*_e.easeInBounce(2*e):.5*_e.easeOutBounce(2*e-1)+.5};
/*!
 * @kurkle/color v0.2.1
 * https://github.com/kurkle/color#readme
 * (c) 2022 Jukka Kurkela
 * Released under the MIT License
 */
function Se(e){return e+.5|0}const Ce=(e,t,n)=>Math.max(Math.min(e,n),t);function Ie(e){return Ce(Se(2.55*e),0,255)}function Oe(e){return Ce(Se(255*e),0,255)}function Te(e){return Ce(Se(e/2.55)/100,0,1)}function Ne(e){return Ce(Se(100*e),0,100)}const Ee={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},De=[..."0123456789ABCDEF"],$e=e=>De[15&e],Ae=e=>De[(240&e)>>4]+De[15&e],Re=e=>(240&e)>>4===(15&e),Me=e=>Re(e.r)&&Re(e.g)&&Re(e.b)&&Re(e.a);function Fe(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*Ee[e[1]],g:255&17*Ee[e[2]],b:255&17*Ee[e[3]],a:5===n?17*Ee[e[4]]:255}:7!==n&&9!==n||(t={r:Ee[e[1]]<<4|Ee[e[2]],g:Ee[e[3]]<<4|Ee[e[4]],b:Ee[e[5]]<<4|Ee[e[6]],a:9===n?Ee[e[7]]<<4|Ee[e[8]]:255})),t}const Pe=(e,t)=>e<255?t(e):"";function je(e){var t=Me(e)?$e:Ae;return e?"#"+t(e.r)+t(e.g)+t(e.b)+Pe(e.a,t):void 0}const Be=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Le(e,t,n){const r=t*Math.min(n,1-n),i=(t,i=(t+e/30)%12)=>n-r*Math.max(Math.min(i-3,9-i,1),-1);return[i(0),i(8),i(4)]}function ze(e,t,n){const r=(r,i=(r+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function Ve(e,t,n){const r=Le(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function Ue(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}function We(e){const t=255,n=e.r/t,r=e.g/t,i=e.b/t,o=Math.max(n,r,i),a=Math.min(n,r,i),s=(o+a)/2;let l,u,c;return o!==a&&(c=o-a,u=s>.5?c/(2-o-a):c/(o+a),l=Ue(n,r,i,c,o),l=60*l+.5),[0|l,u||0,s]}function He(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(Oe)}function Ge(e,t,n){return He(Le,e,t,n)}function qe(e,t,n){return He(Ve,e,t,n)}function Ye(e,t,n){return He(ze,e,t,n)}function Xe(e){return(e%360+360)%360}function Ke(e){const t=Be.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?Ie(+t[5]):Oe(+t[5]));const i=Xe(+t[2]),o=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?qe(i,o,a):"hsv"===t[1]?Ye(i,o,a):Ge(i,o,a),{r:n[0],g:n[1],b:n[2],a:r}}function Je(e,t){var n=We(e);n[0]=Xe(n[0]+t),n=Ge(n),e.r=n[0],e.g=n[1],e.b=n[2]}function Ze(e){if(!e)return;const t=We(e),n=t[0],r=Ne(t[1]),i=Ne(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${i}%, ${Te(e.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const Qe={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},et={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function tt(){const e={},t=Object.keys(et),n=Object.keys(Qe);let r,i,o,a,s;for(r=0;r<t.length;r++){for(a=s=t[r],i=0;i<n.length;i++)o=n[i],s=s.replace(o,Qe[o]);o=parseInt(et[a],16),e[s]=[o>>16&255,o>>8&255,255&o]}return e}let nt;function rt(e){nt||(nt=tt(),nt.transparent=[0,0,0,0]);const t=nt[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const it=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ot(e){const t=it.exec(e);let n,r,i,o=255;if(t){if(t[7]!==n){const e=+t[7];o=t[8]?Ie(e):Ce(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?Ie(n):Ce(n,0,255)),r=255&(t[4]?Ie(r):Ce(r,0,255)),i=255&(t[6]?Ie(i):Ce(i,0,255)),{r:n,g:r,b:i,a:o}}}function at(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Te(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const st=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,lt=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function ut(e,t,n){const r=lt(Te(e.r)),i=lt(Te(e.g)),o=lt(Te(e.b));return{r:Oe(st(r+n*(lt(Te(t.r))-r))),g:Oe(st(i+n*(lt(Te(t.g))-i))),b:Oe(st(o+n*(lt(Te(t.b))-o))),a:e.a+n*(t.a-e.a)}}function ct(e,t,n){if(e){let r=We(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=Ge(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function ht(e,t){return e?Object.assign(t||{},e):e}function dt(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Oe(e[3]))):(t=ht(e,{r:0,g:0,b:0,a:1}),t.a=Oe(t.a)),t}function pt(e){return"r"===e.charAt(0)?ot(e):Ke(e)}class ft{constructor(e){if(e instanceof ft)return e;const t=typeof e;let n;"object"===t?n=dt(e):"string"===t&&(n=Fe(e)||rt(e)||pt(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=ht(this._rgb);return e&&(e.a=Te(e.a)),e}set rgb(e){this._rgb=dt(e)}rgbString(){return this._valid?at(this._rgb):void 0}hexString(){return this._valid?je(this._rgb):void 0}hslString(){return this._valid?Ze(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const o=t===i?.5:t,a=2*o-1,s=n.a-r.a,l=((a*s===-1?a:(a+s)/(1+a*s))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=ut(this._rgb,e._rgb,t)),this}clone(){return new ft(this.rgb)}alpha(e){return this._rgb.a=Oe(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Se(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ct(this._rgb,2,e),this}darken(e){return ct(this._rgb,2,-e),this}saturate(e){return ct(this._rgb,1,e),this}desaturate(e){return ct(this._rgb,1,-e),this}rotate(e){return Je(this._rgb,e),this}}function mt(e){return new ft(e)}function gt(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function bt(e){return gt(e)?e:mt(e)}function vt(e){return gt(e)?e:mt(e).saturate(.5).darken(.1).hexString()}const yt=Object.create(null),xt=Object.create(null);function wt(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function kt(e,t,n){return"string"===typeof t?y(wt(e,t),n):y(wt(e,""),t)}class _t{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>vt(t.backgroundColor),this.hoverBorderColor=(e,t)=>vt(t.borderColor),this.hoverColor=(e,t)=>vt(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,t){return kt(this,e,t)}get(e){return wt(this,e)}describe(e,t){return kt(xt,e,t)}override(e,t){return kt(yt,e,t)}route(e,t,n,r){const i=wt(this,e),o=wt(this,n),a="_"+t;Object.defineProperties(i,{[a]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=o[r];return s(e)?Object.assign({},t,e):c(e,t)},set(e){this[a]=e}}})}}var St=new _t({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Ct(e){return!e||o(e.size)||o(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function It(e,t,n,r,i){let o=t[i];return o||(o=t[i]=e.measureText(i).width,n.push(i)),o>r&&(r=o),r}function Ot(e,t,n,r){r=r||{};let i=r.data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},o=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let s=0;const l=n.length;let u,c,h,d,p;for(u=0;u<l;u++)if(d=n[u],void 0!==d&&null!==d&&!0!==a(d))s=It(e,i,o,s,d);else if(a(d))for(c=0,h=d.length;c<h;c++)p=d[c],void 0===p||null===p||a(p)||(s=It(e,i,o,s,p));e.restore();const f=o.length/2;if(f>n.length){for(u=0;u<f;u++)delete i[o[u]];o.splice(0,f)}return s}function Tt(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function Nt(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function Et(e,t,n,r){Dt(e,t,n,r,null)}function Dt(e,t,n,r,i){let o,a,s,l,u,c;const h=t.pointStyle,d=t.rotation,p=t.radius;let f=(d||0)*M;if(h&&"object"===typeof h&&(o=h.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return e.save(),e.translate(n,r),e.rotate(f),e.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),void e.restore();if(!(isNaN(p)||p<=0)){switch(e.beginPath(),h){default:i?e.ellipse(n,r,i/2,p,0,0,$):e.arc(n,r,p,0,$),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(f)*p,r-Math.cos(f)*p),f+=j,e.lineTo(n+Math.sin(f)*p,r-Math.cos(f)*p),f+=j,e.lineTo(n+Math.sin(f)*p,r-Math.cos(f)*p),e.closePath();break;case"rectRounded":u=.516*p,l=p-u,a=Math.cos(f+P)*l,s=Math.sin(f+P)*l,e.arc(n-a,r-s,u,f-D,f-F),e.arc(n+s,r-a,u,f-F,f),e.arc(n+a,r+s,u,f,f+F),e.arc(n-s,r+a,u,f+F,f+D),e.closePath();break;case"rect":if(!d){l=Math.SQRT1_2*p,c=i?i/2:l,e.rect(n-c,r-l,2*c,2*l);break}f+=P;case"rectRot":a=Math.cos(f)*p,s=Math.sin(f)*p,e.moveTo(n-a,r-s),e.lineTo(n+s,r-a),e.lineTo(n+a,r+s),e.lineTo(n-s,r+a),e.closePath();break;case"crossRot":f+=P;case"cross":a=Math.cos(f)*p,s=Math.sin(f)*p,e.moveTo(n-a,r-s),e.lineTo(n+a,r+s),e.moveTo(n+s,r-a),e.lineTo(n-s,r+a);break;case"star":a=Math.cos(f)*p,s=Math.sin(f)*p,e.moveTo(n-a,r-s),e.lineTo(n+a,r+s),e.moveTo(n+s,r-a),e.lineTo(n-s,r+a),f+=P,a=Math.cos(f)*p,s=Math.sin(f)*p,e.moveTo(n-a,r-s),e.lineTo(n+a,r+s),e.moveTo(n+s,r-a),e.lineTo(n-s,r+a);break;case"line":a=i?i/2:Math.cos(f)*p,s=Math.sin(f)*p,e.moveTo(n-a,r-s),e.lineTo(n+a,r+s);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(f)*p,r+Math.sin(f)*p);break}e.fill(),t.borderWidth>0&&e.stroke()}}function $t(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function At(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Rt(e){e.restore()}function Mt(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Ft(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Pt(e,t,n,r,i,s={}){const l=a(t)?t:[t],u=s.strokeWidth>0&&""!==s.strokeColor;let c,h;for(e.save(),e.font=i.string,jt(e,s),c=0;c<l.length;++c)h=l[c],u&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),o(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(h,n,r,s.maxWidth)),e.fillText(h,n,r,s.maxWidth),Bt(e,n,r,h,s),r+=i.lineHeight;e.restore()}function jt(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),o(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Bt(e,t,n,r,i){if(i.strikethrough||i.underline){const o=e.measureText(r),a=t-o.actualBoundingBoxLeft,s=t+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,u=n+o.actualBoundingBoxDescent,c=i.strikethrough?(l+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(a,c),e.lineTo(s,c),e.stroke()}}function Lt(e,t){const{x:n,y:r,w:i,h:o,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,-F,D,!0),e.lineTo(n,r+o-a.bottomLeft),e.arc(n+a.bottomLeft,r+o-a.bottomLeft,a.bottomLeft,D,F,!0),e.lineTo(n+i-a.bottomRight,r+o),e.arc(n+i-a.bottomRight,r+o-a.bottomRight,a.bottomRight,F,0,!0),e.lineTo(n+i,r+a.topRight),e.arc(n+i-a.topRight,r+a.topRight,a.topRight,0,-F,!0),e.lineTo(n+a.topLeft,r)}const zt=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Vt=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function Ut(e,t){const n=(""+e).match(zt);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const Wt=e=>+e||0;function Ht(e,t){const n={},r=s(t),i=r?Object.keys(t):t,o=s(e)?r?n=>c(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of i)n[a]=Wt(o(a));return n}function Gt(e){return Ht(e,{top:"y",right:"x",bottom:"y",left:"x"})}function qt(e){return Ht(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Yt(e){const t=Gt(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Xt(e,t){e=e||{},t=t||St.font;let n=c(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=c(e.style,t.style);r&&!(""+r).match(Vt)&&(console.warn('Invalid font style specified: "'+r+'"'),r="");const i={family:c(e.family,t.family),lineHeight:Ut(c(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:c(e.weight,t.weight),string:""};return i.string=Ct(i),i}function Kt(e,t,n,r){let i,o,s,l=!0;for(i=0,o=e.length;i<o;++i)if(s=e[i],void 0!==s&&(void 0!==t&&"function"===typeof s&&(s=s(t),l=!1),void 0!==n&&a(s)&&(s=s[n%s.length],l=!1),void 0!==s))return r&&!l&&(r.cacheable=!1),s}function Jt(e,t,n){const{min:r,max:i}=e,o=d(t,(i-r)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(r,-Math.abs(o)),max:a(i,o)}}function Zt(e,t){return Object.assign(Object.create(e),t)}function Qt(e,t=[""],n=e,r,i=(()=>e[0])){O(r)||(r=gn("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:n,_fallback:r,_getTarget:i,override:i=>Qt([i,...e],t,n,r)};return new Proxy(o,{deleteProperty(t,n){return delete t[n],delete t._keys,delete e[0][n],!0},get(n,r){return on(n,r,(()=>mn(r,t,e,n)))},getOwnPropertyDescriptor(e,t){return Reflect.getOwnPropertyDescriptor(e._scopes[0],t)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(e,t){return bn(e).includes(t)},ownKeys(e){return bn(e)},set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function en(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:tn(e,r),setContext:t=>en(e,t,n,r),override:i=>en(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty(t,n){return delete t[n],delete e[n],!0},get(e,t,n){return on(e,t,(()=>an(e,t,n)))},getOwnPropertyDescriptor(t,n){return t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(t,n){return Reflect.has(e,n)},ownKeys(){return Reflect.ownKeys(e)},set(t,n,r){return e[n]=r,delete t[n],!0}})}function tn(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:T(n)?n:()=>n,isIndexable:T(r)?r:()=>r}}const nn=(e,t)=>e?e+I(t):t,rn=(e,t)=>s(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function on(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const r=n();return e[t]=r,r}function an(e,t,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:s}=e;let l=r[t];return T(l)&&s.isScriptable(t)&&(l=sn(t,l,e,n)),a(l)&&l.length&&(l=ln(t,l,e,s.isIndexable)),rn(t,l)&&(l=en(l,i,o&&o[t],s)),l}function sn(e,t,n,r){const{_proxy:i,_context:o,_subProxy:a,_stack:s}=n;if(s.has(e))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+e);return s.add(e),t=t(o,a||r),s.delete(e),rn(e,t)&&(t=dn(i._scopes,i,e,t)),t}function ln(e,t,n,r){const{_proxy:i,_context:o,_subProxy:a,_descriptors:l}=n;if(O(o.index)&&r(e))t=t[o.index%t.length];else if(s(t[0])){const n=t,r=i._scopes.filter((e=>e!==n));t=[];for(const s of n){const n=dn(r,i,e,s);t.push(en(n,o,a&&a[e],l))}}return t}function un(e,t,n){return T(e)?e(t,n):e}const cn=(e,t)=>!0===e?t:"string"===typeof e?_(t,e):void 0;function hn(e,t,n,r,i){for(const o of t){const t=cn(n,o);if(t){e.add(t);const o=un(t._fallback,n,i);if(O(o)&&o!==n&&o!==r)return o}else if(!1===t&&O(r)&&n!==r)return null}return!1}function dn(e,t,n,r){const i=t._rootScopes,o=un(t._fallback,n,r),a=[...e,...i],s=new Set;s.add(r);let l=pn(s,a,n,o||n,r);return null!==l&&((!O(o)||o===n||(l=pn(s,a,o,l,r),null!==l))&&Qt(Array.from(s),[""],i,o,(()=>fn(t,n,r))))}function pn(e,t,n,r,i){while(n)n=hn(e,t,n,r,i);return n}function fn(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];return a(i)&&s(n)?n:i}function mn(e,t,n,r){let i;for(const o of t)if(i=gn(nn(o,e),n),O(i))return rn(e,i)?dn(n,r,e,i):i}function gn(e,t){for(const n of t){if(!n)continue;const t=n[e];if(O(t))return t}}function bn(e){let t=e._keys;return t||(t=e._keys=vn(e._scopes)),t}function vn(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}function yn(e,t,n,r){const{iScale:i}=e,{key:o="r"}=this._parsing,a=new Array(r);let s,l,u,c;for(s=0,l=r;s<l;++s)u=s+n,c=t[u],a[s]={r:i.parse(_(c,o),u)};return a}const xn=Number.EPSILON||1e-14,wn=(e,t)=>t<e.length&&!e[t].skip&&e[t],kn=e=>"x"===e?"y":"x";function _n(e,t,n,r){const i=e.skip?t:e,o=t,a=n.skip?t:n,s=J(o,i),l=J(a,o);let u=s/(s+l),c=l/(s+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;const h=r*u,d=r*c;return{previous:{x:o.x-h*(a.x-i.x),y:o.y-h*(a.y-i.y)},next:{x:o.x+d*(a.x-i.x),y:o.y+d*(a.y-i.y)}}}function Sn(e,t,n){const r=e.length;let i,o,a,s,l,u=wn(e,0);for(let c=0;c<r-1;++c)l=u,u=wn(e,c+1),l&&u&&(W(t[c],0,xn)?n[c]=n[c+1]=0:(i=n[c]/t[c],o=n[c+1]/t[c],s=Math.pow(i,2)+Math.pow(o,2),s<=9||(a=3/Math.sqrt(s),n[c]=i*a*t[c],n[c+1]=o*a*t[c])))}function Cn(e,t,n="x"){const r=kn(n),i=e.length;let o,a,s,l=wn(e,0);for(let u=0;u<i;++u){if(a=s,s=l,l=wn(e,u+1),!s)continue;const i=s[n],c=s[r];a&&(o=(i-a[n])/3,s[`cp1${n}`]=i-o,s[`cp1${r}`]=c-o*t[u]),l&&(o=(l[n]-i)/3,s[`cp2${n}`]=i+o,s[`cp2${r}`]=c+o*t[u])}}function In(e,t="x"){const n=kn(t),r=e.length,i=Array(r).fill(0),o=Array(r);let a,s,l,u=wn(e,0);for(a=0;a<r;++a)if(s=l,l=u,u=wn(e,a+1),l){if(u){const e=u[t]-l[t];i[a]=0!==e?(u[n]-l[n])/e:0}o[a]=s?u?L(i[a-1])!==L(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}Sn(e,i,o),Cn(e,o,t)}function On(e,t,n){return Math.max(Math.min(e,n),t)}function Tn(e,t){let n,r,i,o,a,s=$t(e[0],t);for(n=0,r=e.length;n<r;++n)a=o,o=s,s=n<r-1&&$t(e[n+1],t),o&&(i=e[n],a&&(i.cp1x=On(i.cp1x,t.left,t.right),i.cp1y=On(i.cp1y,t.top,t.bottom)),s&&(i.cp2x=On(i.cp2x,t.left,t.right),i.cp2y=On(i.cp2y,t.top,t.bottom)))}function Nn(e,t,n,r,i){let o,a,s,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)In(e,i);else{let n=r?e[e.length-1]:e[0];for(o=0,a=e.length;o<a;++o)s=e[o],l=_n(n,s,e[Math.min(o+1,a-(r?0:1))%a],t.tension),s.cp1x=l.previous.x,s.cp1y=l.previous.y,s.cp2x=l.next.x,s.cp2y=l.next.y,n=s}t.capBezierPoints&&Tn(e,n)}function En(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Dn(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function $n(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const An=e=>window.getComputedStyle(e,null);function Rn(e,t){return An(e).getPropertyValue(t)}const Mn=["top","right","bottom","left"];function Fn(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const o=Mn[i];r[o]=parseFloat(e[t+"-"+o+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Pn=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function jn(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:o}=r;let a,s,l=!1;if(Pn(i,o,e.target))a=i,s=o;else{const e=t.getBoundingClientRect();a=r.clientX-e.left,s=r.clientY-e.top,l=!0}return{x:a,y:s,box:l}}function Bn(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=An(n),o="border-box"===i.boxSizing,a=Fn(i,"padding"),s=Fn(i,"border","width"),{x:l,y:u,box:c}=jn(e,n),h=a.left+(c&&s.left),d=a.top+(c&&s.top);let{width:p,height:f}=t;return o&&(p-=a.width+s.width,f-=a.height+s.height),{x:Math.round((l-h)/p*n.width/r),y:Math.round((u-d)/f*n.height/r)}}function Ln(e,t,n){let r,i;if(void 0===t||void 0===n){const o=Dn(e);if(o){const e=o.getBoundingClientRect(),a=An(o),s=Fn(a,"border","width"),l=Fn(a,"padding");t=e.width-l.width-s.width,n=e.height-l.height-s.height,r=$n(a.maxWidth,o,"clientWidth"),i=$n(a.maxHeight,o,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||R,maxHeight:i||R}}const zn=e=>Math.round(10*e)/10;function Vn(e,t,n,r){const i=An(e),o=Fn(i,"margin"),a=$n(i.maxWidth,e,"clientWidth")||R,s=$n(i.maxHeight,e,"clientHeight")||R,l=Ln(e,t,n);let{width:u,height:c}=l;if("content-box"===i.boxSizing){const e=Fn(i,"border","width"),t=Fn(i,"padding");u-=t.width+e.width,c-=t.height+e.height}return u=Math.max(0,u-o.width),c=Math.max(0,r?Math.floor(u/r):c-o.height),u=zn(Math.min(u,a,l.maxWidth)),c=zn(Math.min(c,s,l.maxHeight)),u&&!c&&(c=zn(u/2)),{width:u,height:c}}function Un(e,t,n){const r=t||1,i=Math.floor(e.height*r),o=Math.floor(e.width*r);e.height=i/r,e.width=o/r;const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==r||a.height!==i||a.width!==o)&&(e.currentDevicePixelRatio=r,a.height=i,a.width=o,e.ctx.setTransform(r,0,0,r,0,0),!0)}const Wn=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){}return e}();function Hn(e,t){const n=Rn(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Gn(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function qn(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function Yn(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},a=Gn(e,i,n),s=Gn(i,o,n),l=Gn(o,t,n),u=Gn(a,s,n),c=Gn(s,l,n);return Gn(u,c,n)}const Xn=new Map;function Kn(e,t){t=t||{};const n=e+JSON.stringify(t);let r=Xn.get(n);return r||(r=new Intl.NumberFormat(e,t),Xn.set(n,r)),r}function Jn(e,t,n){return Kn(t,n).format(e)}const Zn=function(e,t){return{x(n){return e+e+t-n},setWidth(e){t=e},textAlign(e){return"center"===e?e:"right"===e?"left":"right"},xPlus(e,t){return e-t},leftForLtr(e,t){return e-t}}},Qn=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function er(e,t,n){return e?Zn(t,n):Qn()}function tr(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function nr(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function rr(e){return"angle"===e?{between:ee,compare:Z,normalize:Q}:{between:re,compare:(e,t)=>e-t,normalize:e=>e}}function ir({start:e,end:t,count:n,loop:r,style:i}){return{start:e%n,end:t%n,loop:r&&(t-e+1)%n===0,style:i}}function or(e,t,n){const{property:r,start:i,end:o}=n,{between:a,normalize:s}=rr(r),l=t.length;let u,c,{start:h,end:d,loop:p}=e;if(p){for(h+=l,d+=l,u=0,c=l;u<c;++u){if(!a(s(t[h%l][r]),i,o))break;h--,d--}h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:p,style:e.style}}function ar(e,t,n){if(!n)return[e];const{property:r,start:i,end:o}=n,a=t.length,{compare:s,between:l,normalize:u}=rr(r),{start:c,end:h,loop:d,style:p}=or(e,t,n),f=[];let m,g,b,v=!1,y=null;const x=()=>l(i,b,m)&&0!==s(i,b),w=()=>0===s(o,m)||l(o,b,m),k=()=>v||x(),_=()=>!v||w();for(let S=c,C=c;S<=h;++S)g=t[S%a],g.skip||(m=u(g[r]),m!==b&&(v=l(m,i,o),null===y&&k()&&(y=0===s(m,i)?S:C),null!==y&&_()&&(f.push(ir({start:y,end:S,loop:d,count:a,style:p})),y=null),C=S,b=m));return null!==y&&f.push(ir({start:y,end:h,loop:d,count:a,style:p})),f}function sr(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const o=ar(r[i],e.points,t);o.length&&n.push(...o)}return n}function lr(e,t,n,r){let i=0,o=t-1;if(n&&!r)while(i<t&&!e[i].skip)i++;while(i<t&&e[i].skip)i++;i%=t,n&&(o+=i);while(o>i&&e[o%t].skip)o--;return o%=t,{start:i,end:o}}function ur(e,t,n,r){const i=e.length,o=[];let a,s=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%i];n.skip||n.stop?l.skip||(r=!1,o.push({start:t%i,end:(a-1)%i,loop:r}),t=s=n.stop?a:null):(s=a,l.skip&&(t=a)),l=n}return null!==s&&o.push({start:t%i,end:s%i,loop:r}),o}function cr(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const o=!!e._loop,{start:a,end:s}=lr(n,i,o,r);if(!0===r)return hr(e,[{start:a,end:s,loop:o}],n,t);const l=s<a?s+i:s,u=!!e._fullLoop&&0===a&&s===i-1;return hr(e,ur(n,a,l,u),n,t)}function hr(e,t,n,r){return r&&r.setContext&&n?dr(e,t,n,r):t}function dr(e,t,n,r){const i=e._chart.getContext(),o=pr(e.options),{_datasetIndex:a,options:{spanGaps:s}}=e,l=n.length,u=[];let c=o,h=t[0].start,d=h;function p(e,t,r,i){const o=s?-1:1;if(e!==t){e+=l;while(n[e%l].skip)e-=o;while(n[t%l].skip)t+=o;e%l!==t%l&&(u.push({start:e%l,end:t%l,loop:r,style:i}),c=i,h=t%l)}}for(const f of t){h=s?h:f.start;let e,t=n[h%l];for(d=h+1;d<=f.end;d++){const o=n[d%l];e=pr(r.setContext(Zt(i,{type:"segment",p0:t,p1:o,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:a}))),fr(e,c)&&p(h,d-1,f.loop,c),t=o,c=e}h<d-1&&p(h,d-1,f.loop,c)}return u}function pr(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function fr(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}
/*!
 * Chart.js v3.9.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */
class mr{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],o=t.duration;i.forEach((r=>r({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(n-t.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=de.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(e=Date.now()){let t=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o,a=i.length-1,s=!1;for(;a>=0;--a)o=i[a],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(e),s=!0):(i[a]=i[i.length-1],i.pop());s&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var gr=new mr;const br="transparent",vr={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const r=bt(e||br),i=r.valid&&bt(t||br);return i&&i.valid?i.mix(r,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class yr{constructor(e,t,n,r){const i=t[n];r=Kt([e.to,r,i,e.from]);const o=Kt([e.from,i,r]);this._active=!0,this._fn=e.fn||vr[e.type||typeof o],this._easing=_e[e.easing]||_e.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Kt([e.to,t,r,e.from]),this._from=Kt([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let s;if(this._active=i!==a&&(o||t<n),!this._active)return this._target[r]=a,void this._notify(!0);t<0?this._target[r]=i:(s=t/n%2,s=o&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[r]=this._fn(i,a,s))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}const xr=["x","y","borderWidth","radius","tension"],wr=["color","borderColor","backgroundColor"];St.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const kr=Object.keys(St.animation);St.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),St.set("animations",{colors:{type:"color",properties:wr},numbers:{type:"number",properties:xr}}),St.describe("animations",{_fallback:"animation"}),St.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}});class _r{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!s(e))return;const t=this._properties;Object.getOwnPropertyNames(e).forEach((n=>{const r=e[n];if(!s(r))return;const i={};for(const e of kr)i[e]=r[e];(a(r.properties)&&r.properties||[n]).forEach((e=>{e!==n&&t.has(e)||t.set(e,i)}))}))}_animateOptions(e,t){const n=t.options,r=Cr(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&Sr(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let s;for(s=o.length-1;s>=0;--s){const l=o[s];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const u=t[l];let c=i[l];const h=n.get(l);if(c){if(h&&c.active()){c.update(h,u,a);continue}c.cancel()}h&&h.duration?(i[l]=c=new yr(h,e,l,u),r.push(c)):e[l]=u}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(gr.add(this._chart,n),!0):void 0}}function Sr(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}function Cr(e,t){if(!t)return;let n=e.options;if(n)return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n;e.options=t}function Ir(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,o=void 0===n.max?t:0;return{start:r?o:i,end:r?i:o}}function Or(e,t,n){if(!1===n)return!1;const r=Ir(e,n),i=Ir(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function Tr(e){let t,n,r,i;return s(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}function Nr(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,o;for(i=0,o=r.length;i<o;++i)n.push(r[i].index);return n}function Er(e,t,n,r={}){const i=e.keys,o="single"===r.mode;let a,s,u,c;if(null!==t){for(a=0,s=i.length;a<s;++a){if(u=+i[a],u===n){if(r.all)continue;break}c=e.values[u],l(c)&&(o||0===t||L(t)===L(c))&&(t+=c)}return t}}function Dr(e){const t=Object.keys(e),n=new Array(t.length);let r,i,o;for(r=0,i=t.length;r<i;++r)o=t[r],n[r]={x:o,y:e[o]};return n}function $r(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function Ar(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function Rr(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function Mr(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function Fr(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function Pr(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:o,vScale:a,index:s}=r,l=o.axis,u=a.axis,c=Ar(o,a,r),h=t.length;let d;for(let p=0;p<h;++p){const e=t[p],{[l]:n,[u]:o}=e,h=e._stacks||(e._stacks={});d=h[u]=Mr(i,c,n),d[s]=o,d._top=Fr(d,a,!0,r.type),d._bottom=Fr(d,a,!1,r.type)}}function jr(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function Br(e,t){return Zt(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Lr(e,t,n){return Zt(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function zr(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n]}}}const Vr=e=>"reset"===e||"none"===e,Ur=(e,t)=>t?e:Object.assign({},e),Wr=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Nr(n,!0),values:null};class Hr{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=$r(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&zr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=c(n.xAxisID,jr(e,"x")),o=t.yAxisID=c(n.yAxisID,jr(e,"y")),a=t.rAxisID=c(n.rAxisID,jr(e,"r")),s=t.indexAxis,l=t.iAxisID=r(s,i,o,a),u=t.vAxisID=r(s,o,i,a);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&ce(this._data,this),e._stacked&&zr(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(s(t))this._data=Dr(t);else if(n!==t){if(n){ce(n,this);const e=this._cachedMeta;zr(e),e._parsed=[]}t&&Object.isExtensible(t)&&ue(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=$r(t.vScale,t),t.stack!==n.stack&&(r=!0,zr(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&Pr(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,l=i.axis;let u,c,h,d=0===e&&t===r.length||n._sorted,p=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,h=r;else{h=a(r[e])?this.parseArrayData(n,r,e,t):s(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===c[l]||p&&c[l]<p[l];for(u=0;u<t;++u)n._parsed[u+e]=c=h[u],d&&(i()&&(d=!1),p=c);n._sorted=d}o&&Pr(this,h)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:o}=e,a=i.axis,s=o.axis,l=i.getLabels(),u=i===o,c=new Array(r);let h,d,p;for(h=0,d=r;h<d;++h)p=h+n,c[h]={[a]:u||i.parse(l[p],p),[s]:o.parse(t[p],p)};return c}parseArrayData(e,t,n,r){const{xScale:i,yScale:o}=e,a=new Array(r);let s,l,u,c;for(s=0,l=r;s<l;++s)u=s+n,c=t[u],a[s]={x:i.parse(c[0],u),y:o.parse(c[1],u)};return a}parseObjectData(e,t,n,r){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l=new Array(r);let u,c,h,d;for(u=0,c=r;u<c;++u)h=u+n,d=t[h],l[u]={x:i.parse(_(d,a),h),y:o.parse(_(d,s),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,o=t[e.axis],a={keys:Nr(r,!0),values:t._stacks[e.axis]};return Er(a,o,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let o=null===i?NaN:i;const a=r&&n._stacks[t.axis];r&&a&&(r.values=a,o=Er(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,o=r.length,a=this._getOtherScale(e),s=Wr(t,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:h}=Rr(a);let d,p;function f(){p=r[d];const t=p[a.axis];return!l(p[e.axis])||c>t||h<t}for(d=0;d<o;++d)if(!f()&&(this.updateRangeFromParsed(u,e,p,s),i))break;if(i)for(d=o-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(u,e,p,s);break}return u}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=t.length;r<i;++r)o=t[r][e.axis],l(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=Tr(c(this.options.clip,Or(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,o=[],a=this._drawStart||0,s=this._drawCount||r.length-a,l=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,i,a,s),u=a;u<a+s;++u){const t=r[u];t.hidden||(t.active&&l?o.push(t):t.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=Lr(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Br(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",n){const r="active"===t,i=this._cachedDataOpts,o=e+"-"+t,a=i[o],s=this.enableOptionSharing&&O(n);if(a)return Ur(a,s);const l=this.chart.config,u=l.datasetElementScopeKeys(this._type,e),c=r?[`${e}Hover`,"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),u),d=Object.keys(St.elements[e]),p=()=>this.getContext(n,r),f=l.resolveNamedOptions(h,d,p,c);return f.$shared&&(f.$shared=s,i[o]=Object.freeze(Ur(f,s))),f}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,o=`animation-${t}`,a=i[o];if(a)return a;let s;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),o=r.getOptionScopes(this.getDataset(),i);s=r.createResolver(o,this.getContext(e,n,t))}const l=new _r(r,s&&s.animations);return s&&s._cacheable&&(i[o]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Vr(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:o}}updateElement(e,t,n,r){Vr(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!Vr(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,s,l]of this._syncList)this[a](s,l);this._syncList=[];const r=n.length,i=t.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t,n=!0){const r=this._cachedMeta,i=r.data,o=e+t;let a;const s=e=>{for(e.length+=t,a=e.length-1;a>=o;a--)e[a]=e[a-t]};for(s(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&s(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&zr(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Gr(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=he(r.sort(((e,t)=>e-t)))}return e._cache.$bar}function qr(e){const t=e.iScale,n=Gr(t,e.type);let r,i,o,a,s=t._length;const l=()=>{32767!==o&&-32768!==o&&(O(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(r=0,i=n.length;r<i;++r)o=t.getPixelForValue(n[r]),l();for(a=void 0,r=0,i=t.ticks.length;r<i;++r)o=t.getPixelForTick(r),l();return s}function Yr(e,t,n,r){const i=n.barThickness;let a,s;return o(i)?(a=t.min*n.categoryPercentage,s=n.barPercentage):(a=i*r,s=1),{chunk:a/r,ratio:s,start:t.pixels[e]-a/2}}function Xr(e,t,n,r){const i=t.pixels,o=i[e];let a=e>0?i[e-1]:null,s=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===a&&(a=o-(null===s?t.end-t.start:s-o)),null===s&&(s=o+o-a);const u=o-(o-Math.min(a,s))/2*l,c=Math.abs(s-a)/2*l;return{chunk:c/r,ratio:n.barPercentage,start:u}}function Kr(e,t,n,r){const i=n.parse(e[0],r),o=n.parse(e[1],r),a=Math.min(i,o),s=Math.max(i,o);let l=a,u=s;Math.abs(a)>Math.abs(s)&&(l=s,u=a),t[n.axis]=u,t._custom={barStart:l,barEnd:u,start:i,end:o,min:a,max:s}}function Jr(e,t,n,r){return a(e)?Kr(e,t,n,r):t[n.axis]=n.parse(e,r),t}function Zr(e,t,n,r){const i=e.iScale,o=e.vScale,a=i.getLabels(),s=i===o,l=[];let u,c,h,d;for(u=n,c=n+r;u<c;++u)d=t[u],h={},h[i.axis]=s||i.parse(a[u],u),l.push(Jr(d,h,o,u));return l}function Qr(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function ei(e,t,n){return 0!==e?L(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function ti(e){let t,n,r,i,o;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",o="start"):(i="start",o="end"),{start:n,end:r,reverse:t,top:i,bottom:o}}function ni(e,t,n,r){let i=t.borderSkipped;const o={};if(!i)return void(e.borderSkipped=o);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:s,reverse:l,top:u,bottom:c}=ti(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=u:(n._bottom||0)===r?i=c:(o[ri(c,a,s,l)]=!0,i=u)),o[ri(i,a,s,l)]=!0,e.borderSkipped=o}function ri(e,t,n,r){return r?(e=ii(e,t,n),e=oi(e,n,t)):e=oi(e,t,n),e}function ii(e,t,n){return e===t?n:e===n?t:e}function oi(e,t,n){return"start"===e?t:"end"===e?n:e}function ai(e,{inflateAmount:t},n){e.inflateAmount="auto"===t?1===n?.33:0:t}Hr.defaults={},Hr.prototype.datasetElementType=null,Hr.prototype.dataElementType=null;class si extends Hr{parsePrimitiveData(e,t,n,r){return Zr(e,t,n,r)}parseArrayData(e,t,n,r){return Zr(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l="x"===i.axis?a:s,u="x"===o.axis?a:s,c=[];let h,d,p,f;for(h=n,d=n+r;h<d;++h)f=t[h],p={},p[i.axis]=i.parse(_(f,l),h),c.push(Jr(_(f,u),p,o,h));return c}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),o=i._custom,a=Qr(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:a,_cachedMeta:{vScale:s}}=this,l=s.getBasePixel(),u=s.isHorizontal(),c=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(t,r);for(let p=t;p<t+n;p++){const t=this.getParsed(p),n=i||o(t[s.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),f=this._calculateBarIndexPixels(p,c),m=(t._stacks||{})[s.axis],g={horizontal:u,base:n.base,enableBorderRadius:!m||Qr(t._custom)||a===m._top||a===m._bottom,x:u?n.head:f.center,y:u?f.center:n.head,height:u?f.size:Math.abs(n.size),width:u?Math.abs(n.size):f.size};d&&(g.options=h||this.resolveDataElementOptions(p,e[p].active?"active":r));const b=g.options||e[p].options;ni(g,b,m,a),ai(g,b,c.ratio),this.updateElement(e[p],p,g,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),i=n.options.stacked,a=[],s=e=>{const n=e.controller.getParsed(t),r=n&&n[e.vScale.axis];if(o(r)||isNaN(r))return!0};for(const o of r)if((void 0===t||!s(o))&&((!1===i||-1===a.indexOf(o.stack)||void 0===i&&void 0===o.stack)&&a.push(o.stack),o.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,o;for(i=0,o=t.data.length;i<o;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const a=e.barThickness,s=a||qr(t);return{min:s,pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n},options:{base:r,minBarLength:i}}=this,a=r||0,s=this.getParsed(e),l=s._custom,u=Qr(l);let c,h,d=s[t.axis],p=0,f=n?this.applyStack(t,s,n):d;f!==d&&(p=f-d,f=d),u&&(d=l.barStart,f=l.barEnd-l.barStart,0!==d&&L(d)!==L(l.barEnd)&&(p=0),p+=d);const m=o(r)||u?p:r;let g=t.getPixelForValue(m);if(c=this.chart.getDataVisibility(e)?t.getPixelForValue(p+f):g,h=c-g,Math.abs(h)<i){h=ei(h,t,a)*i,d===a&&(g-=h/2);const e=t.getPixelForDecimal(0),n=t.getPixelForDecimal(1),r=Math.min(e,n),o=Math.max(e,n);g=Math.max(Math.min(g,o),r),c=g+h}if(g===t.getPixelForValue(a)){const e=L(h)*t.getLineWidthForValue(a)/2;g+=e,h-=e}return{size:h,base:g,head:c,center:c+h/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,o=c(r.maxBarThickness,1/0);let a,s;if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,l="flex"===r.barThickness?Xr(e,t,r,n):Yr(e,t,r,n),u=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);a=l.start+l.chunk*u+l.chunk/2,s=Math.min(o,l.chunk*l.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),s=Math.min(o,t.min*t.ratio);return{base:a-s/2,head:a+s/2,center:a,size:s}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null!==this.getParsed(i)[t.axis]&&n[i].draw(this._ctx)}}si.id="bar",si.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},si.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class li extends Hr{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let o=0;o<i.length;o++)i[o]._custom=this.resolveDataElementOptions(o+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let o=0;o<i.length;o++){const e=t[n+o];i[o]._custom=c(e[2],this.resolveDataElementOptions(o+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let o=0;o<i.length;o++){const e=t[n+o];i[o]._custom=c(e&&e.r&&+e.r,this.resolveDataElementOptions(o+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,{xScale:n,yScale:r}=t,i=this.getParsed(e),o=n.getLabelForValue(i.x),a=r.getLabelForValue(i.y),s=i._custom;return{label:t.label,value:"("+o+", "+a+(s?", "+s:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:s,includeOptions:l}=this._getSharedOptions(t,r),u=o.axis,c=a.axis;for(let h=t;h<t+n;h++){const t=e[h],n=!i&&this.getParsed(h),d={},p=d[u]=i?o.getPixelForDecimal(.5):o.getPixelForValue(n[u]),f=d[c]=i?a.getBasePixel():a.getPixelForValue(n[c]);d.skip=isNaN(p)||isNaN(f),l&&(d.options=s||this.resolveDataElementOptions(h,t.active?"active":r),i&&(d.options.radius=0)),this.updateElement(t,h,d,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=c(n&&n._custom,i),r}}function ui(e,t,n){let r=1,i=1,o=0,a=0;if(t<$){const s=e,l=s+t,u=Math.cos(s),c=Math.sin(s),h=Math.cos(l),d=Math.sin(l),p=(e,t,r)=>ee(e,s,l,!0)?1:Math.max(t,t*n,r,r*n),f=(e,t,r)=>ee(e,s,l,!0)?-1:Math.min(t,t*n,r,r*n),m=p(0,u,h),g=p(F,c,d),b=f(D,u,h),v=f(D+F,c,d);r=(m-b)/2,i=(g-v)/2,o=-(m+b)/2,a=-(g+v)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:a}}li.id="bubble",li.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},li.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}};class ci extends Hr{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,o,a=e=>+n[e];if(s(n[e])){const{key:e="value"}=this._parsing;a=t=>+_(n[t],e)}for(i=e,o=e+t;i<o;++i)r._parsed[i]=a(i)}}_getRotation(){return q(this.options.rotation-90)}_getCircumference(){return q(this.options.circumference)}_getRotationExtents(){let e=$,t=-$;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),s=Math.min(h(this.options.cutout,a),1),l=this._getRingWeight(this.index),{circumference:u,rotation:c}=this._getRotationExtents(),{ratioX:p,ratioY:f,offsetX:m,offsetY:g}=ui(c,u,s),b=(n.width-o)/p,v=(n.height-o)/f,y=Math.max(Math.min(b,v)/2,0),x=d(this.options.radius,y),w=Math.max(x*s,0),k=(x-w)/this._getVisibleDatasetWeightTotal();this.offsetX=m*x,this.offsetY=g*x,r.total=this.calculateTotal(),this.outerRadius=x-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*l,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/$)}updateElements(e,t,n,r){const i="reset"===r,o=this.chart,a=o.chartArea,s=o.options,l=s.animation,u=(a.left+a.right)/2,c=(a.top+a.bottom)/2,h=i&&l.animateScale,d=h?0:this.innerRadius,p=h?0:this.outerRadius,{sharedOptions:f,includeOptions:m}=this._getSharedOptions(t,r);let g,b=this._getRotation();for(g=0;g<t;++g)b+=this._circumference(g,i);for(g=t;g<t+n;++g){const t=this._circumference(g,i),n=e[g],o={x:u+this.offsetX,y:c+this.offsetY,startAngle:b,endAngle:b+t,circumference:t,outerRadius:p,innerRadius:d};m&&(o.options=f||this.resolveDataElementOptions(g,n.active?"active":r)),b+=t,this.updateElement(n,g,o,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?$*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Jn(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,o,a,s;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){o=n.getDatasetMeta(r),e=o.data,a=o.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)s=a.resolveDataElementOptions(r),"inner"!==s.borderAlign&&(t=Math.max(t,s.borderWidth||0,s.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(c(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ci.id="doughnut",ci.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},ci.descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e},ci.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map(((t,r)=>{const i=e.getDatasetMeta(0),o=i.controller.getStyle(r);return{text:t,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title(){return""},label(e){let t=e.label;const n=": "+e.formattedValue;return a(t)?(t=t.slice(),t[0]+=n):t+=n,t}}}}};class hi extends Hr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,o=this.chart._animationsDisabled;let{start:a,count:s}=ve(t,r,o);this._drawStart=a,this._drawCount=s,ye(t)&&(a=0,s=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},e),this.updateElements(r,a,s,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:a,vScale:s,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:c,includeOptions:h}=this._getSharedOptions(t,r),d=a.axis,p=s.axis,{spanGaps:f,segment:m}=this.options,g=U(f)?f:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||"none"===r;let v=t>0&&this.getParsed(t-1);for(let y=t;y<t+n;++y){const t=e[y],n=this.getParsed(y),f=b?t:{},x=o(n[p]),w=f[d]=a.getPixelForValue(n[d],y),k=f[p]=i||x?s.getBasePixel():s.getPixelForValue(l?this.applyStack(s,n,l):n[p],y);f.skip=isNaN(w)||isNaN(k)||x,f.stop=y>0&&Math.abs(n[d]-v[d])>g,m&&(f.parsed=n,f.raw=u.data[y]),h&&(f.options=c||this.resolveDataElementOptions(y,t.active?"active":r)),b||this.updateElement(t,y,f,r),v=n}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}hi.id="line",hi.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},hi.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class di extends Hr{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Jn(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return yn.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),o=Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0),a=(i-o)/e.getVisibleDatasetCount();this.outerRadius=i-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,n,r){const i="reset"===r,o=this.chart,a=o.options,s=a.animation,l=this._cachedMeta.rScale,u=l.xCenter,c=l.yCenter,h=l.getIndexAngle(0)-.5*D;let d,p=h;const f=360/this.countVisibleElements();for(d=0;d<t;++d)p+=this._computeAngle(d,r,f);for(d=t;d<t+n;d++){const t=e[d];let n=p,a=p+this._computeAngle(d,r,f),m=o.getDataVisibility(d)?l.getDistanceFromCenterForValue(this.getParsed(d).r):0;p=a,i&&(s.animateScale&&(m=0),s.animateRotate&&(n=a=h));const g={x:u,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:a,options:this.resolveDataElementOptions(d,t.active?"active":r)};this.updateElement(t,d,g,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?q(this.resolveDataElementOptions(e,t).angle||n):0}}di.id="polarArea",di.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},di.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map(((t,r)=>{const i=e.getDatasetMeta(0),o=i.controller.getStyle(r);return{text:t,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title(){return""},label(e){return e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class pi extends ci{}pi.id="pie",pi.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class fi extends Hr{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return yn.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const o={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,o,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,o="reset"===r;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":r),s=i.getPointPositionForValue(a,this.getParsed(a).r),l=o?i.xCenter:s.x,u=o?i.yCenter:s.y,c={x:l,y:u,angle:s.angle,skip:isNaN(l)||isNaN(u),options:n};this.updateElement(t,a,c,r)}}}fi.id="radar",fi.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},fi.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class mi{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return U(this.x)&&U(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach((e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),r}}mi.defaults={},mi.defaultRoutes=void 0;const gi={values(e){return a(e)?e:""+e},numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,o=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),o=bi(e,n)}const a=B(Math.abs(o)),s=Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(l,this.options.ticks.format),Jn(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=e/Math.pow(10,Math.floor(B(e)));return 1===r||2===r||5===r?gi.numeric.call(this,e,t,n):""}};function bi(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var vi={formatters:gi};function yi(e,t){const n=e.options.ticks,r=n.maxTicksLimit||xi(e),i=n.major.enabled?ki(t):[],a=i.length,s=i[0],l=i[a-1],u=[];if(a>r)return _i(t,u,i,a/r),u;const c=wi(i,t,r);if(a>0){let e,n;const r=a>1?Math.round((l-s)/(a-1)):null;for(Si(t,u,c,o(r)?0:s-r,s),e=0,n=a-1;e<n;e++)Si(t,u,c,i[e],i[e+1]);return Si(t,u,c,l,o(r)?t.length:l+r),u}return Si(t,u,c),u}function xi(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}function wi(e,t,n){const r=Ci(e),i=t.length/n;if(!r)return Math.max(i,1);const o=V(r);for(let a=0,s=o.length-1;a<s;a++){const e=o[a];if(e>i)return e}return Math.max(i,1)}function ki(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}function _i(e,t,n,r){let i,o=0,a=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===a&&(t.push(e[i]),o++,a=n[o*r])}function Si(e,t,n,r,i){const o=c(r,0),a=Math.min(c(i,e.length),e.length);let s,l,u,h=0;n=Math.ceil(n),i&&(s=i-r,n=s/Math.floor(s/n)),u=o;while(u<0)h++,u=Math.round(o+h*n);for(l=Math.max(o,0);l<a;l++)l===u&&(t.push(e[l]),h++,u=Math.round(o+h*n))}function Ci(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}St.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:vi.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),St.route("scale.ticks","color","","color"),St.route("scale.grid","color","","borderColor"),St.route("scale.grid","borderColor","","borderColor"),St.route("scale.title","color","","color"),St.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e}),St.describe("scales",{_fallback:"scale"}),St.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e});const Ii=e=>"left"===e?"right":"right"===e?"left":e,Oi=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n;function Ti(e,t){const n=[],r=e.length/t,i=e.length;let o=0;for(;o<i;o+=r)n.push(e[Math.floor(o)]);return n}function Ni(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),o=e._startPixel,a=e._endPixel,s=1e-6;let l,u=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(u-o,a-u):0===t?(e.getPixelForTick(1)-u)/2:(u-e.getPixelForTick(i-1))/2,u+=i<t?l:-l,u<o-s||u>a+s)))return u}function Ei(e,t){f(e,(e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}}))}function Di(e){return e.drawTicks?e.tickLength:0}function $i(e,t){if(!e.display)return 0;const n=Xt(e.font,t),r=Yt(e.padding),i=a(e.text)?e.text.length:1;return i*n.lineHeight+r.height}function Ai(e,t){return Zt(e,{scale:t,type:"scale"})}function Ri(e,t,n){return Zt(e,{tick:n,index:t,type:"tick"})}function Mi(e,t,n){let r=me(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=Ii(r)),r}function Fi(e,t,n,r){const{top:i,left:o,bottom:a,right:l,chart:u}=e,{chartArea:c,scales:h}=u;let d,p,f,m=0;const g=a-i,b=l-o;if(e.isHorizontal()){if(p=ge(r,o,l),s(n)){const e=Object.keys(n)[0],r=n[e];f=h[e].getPixelForValue(r)+g-t}else f="center"===n?(c.bottom+c.top)/2+g-t:Oi(e,n,t);d=l-o}else{if(s(n)){const e=Object.keys(n)[0],r=n[e];p=h[e].getPixelForValue(r)-b+t}else p="center"===n?(c.left+c.right)/2-b+t:Oi(e,n,t);f=ge(r,a,i),m="left"===n?-F:F}return{titleX:p,titleY:f,maxWidth:d,rotation:m}}class Pi extends mi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=u(e,Number.POSITIVE_INFINITY),t=u(t,Number.NEGATIVE_INFINITY),n=u(n,Number.POSITIVE_INFINITY),r=u(r,Number.NEGATIVE_INFINITY),{min:u(e,n),max:u(t,r),minDefined:l(e),maxDefined:l(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:o}=this.getUserBounds();if(i&&o)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let s=0,l=a.length;s<l;++s)t=a[s].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),o||(r=Math.max(r,t.max));return n=o&&n>r?r:n,r=i&&n>r?n:r,{min:u(n,u(r,n)),max:u(r,u(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){p(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Jt(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=a<this.ticks.length;this._convertTicksToLabels(s?Ti(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=yi(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){p(this.options.afterUpdate,[this])}beforeSetDimensions(){p(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){p(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),p(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){p(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=p(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){p(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){p(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=this.ticks.length,r=t.minRotation||0,i=t.maxRotation;let o,a,s,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const u=this._getLabelSizes(),c=u.widest.width,h=u.highest.height,d=te(this.chart.width-c,0,this.maxWidth);o=e.offset?this.maxWidth/n:d/(n-1),c+6>o&&(o=d/(n-(e.offset?.5:1)),a=this.maxHeight-Di(e.grid)-t.padding-$i(e.title,this.chart.options.font),s=Math.sqrt(c*c+h*h),l=Y(Math.min(Math.asin(te((u.highest.height+6)/o,-1,1)),Math.asin(te(a/s,-1,1))-Math.asin(te(h/s,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){p(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){p(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const o=$i(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=Di(i)+o):(e.height=this.maxHeight,e.width=Di(i)+o),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:o}=this._getLabelSizes(),s=2*n.padding,l=q(this.labelRotation),u=Math.cos(l),c=Math.sin(l);if(a){const t=n.mirror?0:c*i.width+u*o.height;e.height=Math.min(this.maxHeight,e.height+t+s)}else{const t=n.mirror?0:u*i.width+c*o.height;e.width=Math.min(this.maxWidth,e.width+t+s)}this._calculatePadding(t,r,c,u)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:o},position:a}=this.options,s=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let c=0,h=0;s?l?(c=r*e.width,h=n*t.height):(c=n*e.height,h=r*t.width):"start"===i?h=t.width:"end"===i?c=e.width:"inner"!==i&&(c=e.width/2,h=t.width/2),this.paddingLeft=Math.max((c-a+o)*this.width/(this.width-a),0),this.paddingRight=Math.max((h-u+o)*this.width/(this.width-u),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+o,this.paddingBottom=r+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){p(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)o(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=Ti(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length)}return e}_computeLabelSizes(e,t){const{ctx:n,_longestTextCache:r}=this,i=[],s=[];let l,u,c,h,d,p,f,m,g,b,v,y=0,x=0;for(l=0;l<t;++l){if(h=e[l].label,d=this._resolveTickFontOptions(l),n.font=p=d.string,f=r[p]=r[p]||{data:{},gc:[]},m=d.lineHeight,g=b=0,o(h)||a(h)){if(a(h))for(u=0,c=h.length;u<c;++u)v=h[u],o(v)||a(v)||(g=It(n,f.data,f.gc,g,v),b+=m)}else g=It(n,f.data,f.gc,g,h),b=m;i.push(g),s.push(b),y=Math.max(g,y),x=Math.max(b,x)}Ei(r,t);const w=i.indexOf(y),k=s.indexOf(x),_=e=>({width:i[e]||0,height:s[e]||0});return{first:_(0),last:_(t-1),widest:_(w),highest:_(k),widths:i,heights:s}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return ne(this._alignToPixels?Tt(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=Ri(this.getContext(),e,n))}return this.$context||(this.$context=Ai(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=q(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,s=i?i.highest.height+o:0;return this.isHorizontal()?s*n>a*r?a/n:s/r:s*r<a*n?s/n:a/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:o}=r,a=i.offset,l=this.isHorizontal(),u=this.ticks,h=u.length+(a?1:0),d=Di(i),p=[],f=i.setContext(this.getContext()),m=f.drawBorder?f.borderWidth:0,g=m/2,b=function(e){return Tt(n,e,m)};let v,y,x,w,k,_,S,C,I,O,T,N;if("top"===o)v=b(this.bottom),_=this.bottom-d,C=v-g,O=b(e.top)+g,N=e.bottom;else if("bottom"===o)v=b(this.top),O=e.top,N=b(e.bottom)-g,_=v+g,C=this.top+d;else if("left"===o)v=b(this.right),k=this.right-d,S=v-g,I=b(e.left)+g,T=e.right;else if("right"===o)v=b(this.left),I=e.left,T=b(e.right)-g,k=v+g,S=this.left+d;else if("x"===t){if("center"===o)v=b((e.top+e.bottom)/2+.5);else if(s(o)){const e=Object.keys(o)[0],t=o[e];v=b(this.chart.scales[e].getPixelForValue(t))}O=e.top,N=e.bottom,_=v+g,C=_+d}else if("y"===t){if("center"===o)v=b((e.left+e.right)/2);else if(s(o)){const e=Object.keys(o)[0],t=o[e];v=b(this.chart.scales[e].getPixelForValue(t))}k=v-g,S=k-d,I=e.left,T=e.right}const E=c(r.ticks.maxTicksLimit,h),D=Math.max(1,Math.ceil(h/E));for(y=0;y<h;y+=D){const e=i.setContext(this.getContext(y)),t=e.lineWidth,r=e.color,o=e.borderDash||[],s=e.borderDashOffset,u=e.tickWidth,c=e.tickColor,h=e.tickBorderDash||[],d=e.tickBorderDashOffset;x=Ni(this,y,a),void 0!==x&&(w=Tt(n,x,t),l?k=S=I=T=w:_=C=O=N=w,p.push({tx1:k,ty1:_,tx2:S,ty2:C,x1:I,y1:O,x2:T,y2:N,width:t,color:r,borderDash:o,borderDashOffset:s,tickWidth:u,tickColor:c,tickBorderDash:h,tickBorderDashOffset:d}))}return this._ticksLength=h,this._borderValue=v,p}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),l=this.ticks,{align:u,crossAlign:c,padding:h,mirror:d}=i,p=Di(n.grid),f=p+h,m=d?-h:f,g=-q(this.labelRotation),b=[];let v,y,x,w,k,_,S,C,I,O,T,N,E="middle";if("top"===r)_=this.bottom-m,S=this._getXAxisLabelAlignment();else if("bottom"===r)_=this.top+m,S=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(p);S=e.textAlign,k=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(p);S=e.textAlign,k=e.x}else if("x"===t){if("center"===r)_=(e.top+e.bottom)/2+f;else if(s(r)){const e=Object.keys(r)[0],t=r[e];_=this.chart.scales[e].getPixelForValue(t)+f}S=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)k=(e.left+e.right)/2-f;else if(s(r)){const e=Object.keys(r)[0],t=r[e];k=this.chart.scales[e].getPixelForValue(t)}S=this._getYAxisLabelAlignment(p).textAlign}"y"===t&&("start"===u?E="top":"end"===u&&(E="bottom"));const D=this._getLabelSizes();for(v=0,y=l.length;v<y;++v){x=l[v],w=x.label;const e=i.setContext(this.getContext(v));C=this.getPixelForTick(v)+i.labelOffset,I=this._resolveTickFontOptions(v),O=I.lineHeight,T=a(w)?w.length:1;const t=T/2,n=e.color,s=e.textStrokeColor,u=e.textStrokeWidth;let h,p=S;if(o?(k=C,"inner"===S&&(p=v===y-1?this.options.reverse?"left":"right":0===v?this.options.reverse?"right":"left":"center"),N="top"===r?"near"===c||0!==g?-T*O+O/2:"center"===c?-D.highest.height/2-t*O+O:-D.highest.height+O/2:"near"===c||0!==g?O/2:"center"===c?D.highest.height/2-t*O:D.highest.height-T*O,d&&(N*=-1)):(_=C,N=(1-T)*O/2),e.showLabelBackdrop){const t=Yt(e.backdropPadding),n=D.heights[v],r=D.widths[v];let i=_+N-t.top,o=k-t.left;switch(E){case"middle":i-=n/2;break;case"bottom":i-=n;break}switch(S){case"center":o-=r/2;break;case"right":o-=r;break}h={left:o,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}b.push({rotation:g,label:w,font:I,color:n,strokeColor:s,strokeWidth:u,textOffset:N,textAlign:p,textBaseline:E,translation:[k,_],backdrop:h})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options,n=-q(this.labelRotation);if(n)return"top"===e?"left":"right";let r="center";return"start"===t.align?r="left":"end"===t.align?r="right":"inner"===t.align&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,s=o.widest.width;let l,u;return"left"===t?r?(u=this.right+i,"near"===n?l="left":"center"===n?(l="center",u+=s/2):(l="right",u+=s)):(u=this.right-a,"near"===n?l="right":"center"===n?(l="center",u-=s/2):(l="left",u=this.left)):"right"===t?r?(u=this.left+i,"near"===n?l="right":"center"===n?(l="center",u-=s/2):(l="left",u-=s)):(u=this.left+a,"near"===n?l="left":"center"===n?(l="center",u+=s/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks,r=n.findIndex((t=>t.value===e));if(r>=0){const e=t.setContext(this.getContext(r));return e.lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,o=r.length;i<o;++i){const e=r[i];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{grid:n}}=this,r=n.setContext(this.getContext()),i=n.drawBorder?r.borderWidth:0;if(!i)return;const o=n.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let s,l,u,c;this.isHorizontal()?(s=Tt(e,this.left,i)-i/2,l=Tt(e,this.right,o)+o/2,u=c=a):(u=Tt(e,this.top,i)-i/2,c=Tt(e,this.bottom,o)+o/2,s=l=a),t.save(),t.lineWidth=r.borderWidth,t.strokeStyle=r.borderColor,t.beginPath(),t.moveTo(s,u),t.lineTo(l,c),t.stroke(),t.restore()}drawLabels(e){const t=this.options.ticks;if(!t.display)return;const n=this.ctx,r=this._computeLabelArea();r&&At(n,r);const i=this._labelItems||(this._labelItems=this._computeLabelItems(e));let o,a;for(o=0,a=i.length;o<a;++o){const e=i[o],t=e.font,r=e.label;e.backdrop&&(n.fillStyle=e.backdrop.color,n.fillRect(e.backdrop.left,e.backdrop.top,e.backdrop.width,e.backdrop.height));let a=e.textOffset;Pt(n,r,0,a,t,e)}r&&Rt(n)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=Xt(n.font),o=Yt(n.padding),l=n.align;let u=i.lineHeight/2;"bottom"===t||"center"===t||s(t)?(u+=o.bottom,a(n.text)&&(u+=i.lineHeight*(n.text.length-1))):u+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:p}=Fi(this,u,t,l);Pt(e,n.text,0,0,i,{color:n.color,maxWidth:d,rotation:p,textAlign:Mi(l,t,r),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=c(e.grid&&e.grid.z,-1);return this._isVisible()&&this.draw===Pi.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=t.length;i<o;++i){const o=t[i];o[n]!==this.id||e&&o.type!==e||r.push(o)}return r}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Xt(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ji{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;zi(t)&&(n=this.register(t));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,Bi(e,o,n),this.override&&St.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in St[r]&&(delete St[r][n],this.override&&delete yt[n])}}function Bi(e,t,n){const r=y(Object.create(null),[n?St.get(n):{},St.get(t),e.defaults]);St.set(t,r),e.defaultRoutes&&Li(t,e.defaultRoutes),e.descriptors&&St.describe(t,e.descriptors)}function Li(e,t){Object.keys(t).forEach((n=>{const r=n.split("."),i=r.pop(),o=[e].concat(r).join("."),a=t[n].split("."),s=a.pop(),l=a.join(".");St.route(o,i,l,s)}))}function zi(e){return"id"in e&&"defaults"in e}class Vi{constructor(){this.controllers=new ji(Hr,"datasets",!0),this.elements=new ji(mi,"elements"),this.plugins=new ji(Object,"plugins"),this.scales=new ji(Pi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach((t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):f(t,(t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)}))}))}_exec(e,t,n){const r=I(e);p(n["before"+r],[],n),t[e](n),p(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var Ui=new Vi;class Wi extends Hr{update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:o}=ve(t,n,r);if(this._drawStart=i,this._drawCount=o,ye(t)&&(i=0,o=n.length),this.options.showLine){const{dataset:i,_dataset:o}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:a},e)}this.updateElements(n,i,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=Ui.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:a,vScale:s,_stacked:l,_dataset:u}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),h=this.getSharedOptions(c),d=this.includeOptions(r,h),p=a.axis,f=s.axis,{spanGaps:m,segment:g}=this.options,b=U(m)?m:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||"none"===r;let y=t>0&&this.getParsed(t-1);for(let x=t;x<t+n;++x){const t=e[x],n=this.getParsed(x),c=v?t:{},m=o(n[f]),w=c[p]=a.getPixelForValue(n[p],x),k=c[f]=i||m?s.getBasePixel():s.getPixelForValue(l?this.applyStack(s,n,l):n[f],x);c.skip=isNaN(w)||isNaN(k)||m,c.stop=x>0&&Math.abs(n[p]-y[p])>b,g&&(c.parsed=n,c.raw=u.data[x]),d&&(c.options=h||this.resolveDataElementOptions(x,t.active?"active":r)),v||this.updateElement(t,x,c,r),y=n}this.updateSharedOptions(h,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,o)/2}}Wi.id="scatter",Wi.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},Wi.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(e){return"("+e.label+", "+e.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};function Hi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Gi{constructor(e){this.options=e||{}}init(e){}formats(){return Hi()}parse(e,t){return Hi()}format(e,t){return Hi()}add(e,t,n){return Hi()}diff(e,t,n){return Hi()}startOf(e,t,n){return Hi()}endOf(e,t){return Hi()}}Gi.override=function(e){Object.assign(Gi.prototype,e)};var qi={_date:Gi};function Yi(e,t,n,r){const{controller:i,data:o,_sorted:a}=e,s=i._cachedMeta.iScale;if(s&&t===s.axis&&"r"!==t&&a&&o.length){const e=s._reversePixels?ae:oe;if(!r)return e(o,t,n);if(i._sharedOptions){const r=o[0],i="function"===typeof r.getRange&&r.getRange(t);if(i){const r=e(o,t,n-i),a=e(o,t,n+i);return{lo:r.lo,hi:a.hi}}}}return{lo:0,hi:o.length-1}}function Xi(e,t,n,r,i){const o=e.getSortedVisibleDatasetMetas(),a=n[t];for(let s=0,l=o.length;s<l;++s){const{index:e,data:n}=o[s],{lo:l,hi:u}=Yi(o[s],t,a,i);for(let t=l;t<=u;++t){const i=n[t];i.skip||r(i,e,t)}}}function Ki(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,o=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Ji(e,t,n,r,i){const o=[];if(!i&&!e.isPointInArea(t))return o;const a=function(n,a,s){(i||$t(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&o.push({element:n,datasetIndex:a,index:s})};return Xi(e,n,t,a,!0),o}function Zi(e,t,n,r){let i=[];function o(e,n,o){const{startAngle:a,endAngle:s}=e.getProps(["startAngle","endAngle"],r),{angle:l}=K(e,{x:t.x,y:t.y});ee(l,a,s)&&i.push({element:e,datasetIndex:n,index:o})}return Xi(e,n,t,o),i}function Qi(e,t,n,r,i,o){let a=[];const s=Ki(n);let l=Number.POSITIVE_INFINITY;function u(n,u,c){const h=n.inRange(t.x,t.y,i);if(r&&!h)return;const d=n.getCenterPoint(i),p=!!o||e.isPointInArea(d);if(!p&&!h)return;const f=s(t,d);f<l?(a=[{element:n,datasetIndex:u,index:c}],l=f):f===l&&a.push({element:n,datasetIndex:u,index:c})}return Xi(e,n,t,u),a}function eo(e,t,n,r,i,o){return o||e.isPointInArea(t)?"r"!==n||r?Qi(e,t,n,r,i,o):Zi(e,t,n,i):[]}function to(e,t,n,r,i){const o=[],a="x"===n?"inXRange":"inYRange";let s=!1;return Xi(e,n,t,((e,r,l)=>{e[a](t[n],i)&&(o.push({element:e,datasetIndex:r,index:l}),s=s||e.inRange(t.x,t.y,i))})),r&&!s?[]:o}var no={evaluateInteractionItems:Xi,modes:{index(e,t,n,r){const i=Bn(t,e),o=n.axis||"x",a=n.includeInvisible||!1,s=n.intersect?Ji(e,i,o,r,a):eo(e,i,o,!1,r,a),l=[];return s.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=s[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,r){const i=Bn(t,e),o=n.axis||"xy",a=n.includeInvisible||!1;let s=n.intersect?Ji(e,i,o,r,a):eo(e,i,o,!1,r,a);if(s.length>0){const t=s[0].datasetIndex,n=e.getDatasetMeta(t).data;s=[];for(let e=0;e<n.length;++e)s.push({element:n[e],datasetIndex:t,index:e})}return s},point(e,t,n,r){const i=Bn(t,e),o=n.axis||"xy",a=n.includeInvisible||!1;return Ji(e,i,o,r,a)},nearest(e,t,n,r){const i=Bn(t,e),o=n.axis||"xy",a=n.includeInvisible||!1;return eo(e,i,o,n.intersect,r,a)},x(e,t,n,r){const i=Bn(t,e);return to(e,i,"x",n.intersect,r)},y(e,t,n,r){const i=Bn(t,e);return to(e,i,"y",n.intersect,r)}}};const ro=["left","top","right","bottom"];function io(e,t){return e.filter((e=>e.pos===t))}function oo(e,t){return e.filter((e=>-1===ro.indexOf(e.pos)&&e.box.axis===t))}function ao(e,t){return e.sort(((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function so(e){const t=[];let n,r,i,o,a,s;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:o,options:{stack:a,stackWeight:s=1}}=i),t.push({index:n,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&o+a,stackWeight:s});return t}function lo(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!ro.includes(r))continue;const o=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function uo(e,t){const n=lo(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let o,a,s;for(o=0,a=e.length;o<a;++o){s=e[o];const{fullSize:a}=s.box,l=n[s.stack],u=l&&s.stackWeight/l.weight;s.horizontal?(s.width=u?u*r:a&&t.availableWidth,s.height=i):(s.width=r,s.height=u?u*i:a&&t.availableHeight)}return n}function co(e){const t=so(e),n=ao(t.filter((e=>e.box.fullSize)),!0),r=ao(io(t,"left"),!0),i=ao(io(t,"right")),o=ao(io(t,"top"),!0),a=ao(io(t,"bottom")),s=oo(t,"x"),l=oo(t,"y");return{fullSize:n,leftAndTop:r.concat(o),rightAndBottom:i.concat(l).concat(a).concat(s),chartArea:io(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:o.concat(a).concat(s)}}function ho(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function po(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function fo(e,t,n,r){const{pos:i,box:o}=n,a=e.maxPadding;if(!s(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?o.height:o.width),n.size=t.size/t.count,e[i]+=n.size}o.getPadding&&po(a,o.getPadding());const l=Math.max(0,t.outerWidth-ho(a,e,"left","right")),u=Math.max(0,t.outerHeight-ho(a,e,"top","bottom")),c=l!==e.w,h=u!==e.h;return e.w=l,e.h=u,n.horizontal?{same:c,other:h}:{same:h,other:c}}function mo(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function go(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function bo(e,t,n,r){const i=[];let o,a,s,l,u,c;for(o=0,a=e.length,u=0;o<a;++o){s=e[o],l=s.box,l.update(s.width||t.w,s.height||t.h,go(s.horizontal,t));const{same:a,other:h}=fo(t,n,s,r);u|=a&&i.length,c=c||h,l.fullSize||i.push(s)}return u&&bo(i,t,n,r)||c}function vo(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function yo(e,t,n,r){const i=n.padding;let{x:o,y:a}=t;for(const s of e){const e=s.box,l=r[s.stack]||{count:1,placed:0,weight:1},u=s.stackWeight/l.weight||1;if(s.horizontal){const r=t.w*u,o=l.size||e.height;O(l.start)&&(a=l.start),e.fullSize?vo(e,i.left,a,n.outerWidth-i.right-i.left,o):vo(e,t.left+l.placed,a,r,o),l.start=a,l.placed+=r,a=e.bottom}else{const r=t.h*u,a=l.size||e.width;O(l.start)&&(o=l.start),e.fullSize?vo(e,o,i.top,a,n.outerHeight-i.bottom-i.top):vo(e,o,t.top+l.placed,a,r),l.start=o,l.placed+=r,o=e.right}}t.x=o,t.y=a}St.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var xo={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=Yt(e.options.layout.padding),o=Math.max(t-i.width,0),a=Math.max(n-i.height,0),s=co(e.boxes),l=s.vertical,u=s.horizontal;f(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const c=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/c,hBoxMaxHeight:a/2}),d=Object.assign({},i);po(d,Yt(r));const p=Object.assign({maxPadding:d,w:o,h:a,x:i.left,y:i.top},i),m=uo(l.concat(u),h);bo(s.fullSize,p,h,m),bo(l,p,h,m),bo(u,p,h,m)&&bo(l,p,h,m),mo(p),yo(s.leftAndTop,p,h,m),p.x+=p.w,p.y+=p.h,yo(s.rightAndBottom,p,h,m),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},f(s.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}};class wo{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class ko extends wo{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const _o="$chartjs",So={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Co=e=>null===e||""===e;function Io(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[_o]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Co(i)){const t=Hn(e,"width");void 0!==t&&(e.width=t)}if(Co(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Hn(e,"height");void 0!==t&&(e.height=t)}return e}const Oo=!!Wn&&{passive:!0};function To(e,t,n){e.addEventListener(t,n,Oo)}function No(e,t,n){e.canvas.removeEventListener(t,n,Oo)}function Eo(e,t){const n=So[e.type]||e.type,{x:r,y:i}=Bn(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}function Do(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function $o(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Do(n.addedNodes,r),t=t&&!Do(n.removedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function Ao(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Do(n.removedNodes,r),t=t&&!Do(n.addedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}const Ro=new Map;let Mo=0;function Fo(){const e=window.devicePixelRatio;e!==Mo&&(Mo=e,Ro.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function Po(e,t){Ro.size||window.addEventListener("resize",Fo),Ro.set(e,t)}function jo(e){Ro.delete(e),Ro.size||window.removeEventListener("resize",Fo)}function Bo(e,t,n){const r=e.canvas,i=r&&Dn(r);if(!i)return;const o=pe(((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()}),window),a=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||o(n,r)}));return a.observe(i),Po(e,o),a}function Lo(e,t,n){n&&n.disconnect(),"resize"===t&&jo(e)}function zo(e,t,n){const r=e.canvas,i=pe((t=>{null!==e.ctx&&n(Eo(t,e))}),e,(e=>{const t=e[0];return[t,t.offsetX,t.offsetY]}));return To(r,t,i),i}class Vo extends wo{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(Io(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[_o])return!1;const n=t[_o].initial;["height","width"].forEach((e=>{const r=n[e];o(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=n.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t[_o],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:$o,detach:Ao,resize:Bo},o=i[t]||zo;r[t]=o(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;const i={attach:Lo,detach:Lo,resize:Lo},o=i[t]||No;o(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return Vn(e,t,n,r)}isAttached(e){const t=Dn(e);return!(!t||!t.isConnected)}}function Uo(e){return!En()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?ko:Vo}class Wo{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin,o=e[n],a=[t,r,i.options];if(!1===p(o,a,e)&&r.cancelable)return!1}return!0}invalidate(){o(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=c(n.options&&n.options.plugins,{}),i=Ho(n);return!1!==r||t?qo(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function Ho(e){const t={},n=[],r=Object.keys(Ui.plugins.items);for(let o=0;o<r.length;o++)n.push(Ui.getPlugin(r[o]));const i=e.plugins||[];for(let o=0;o<i.length;o++){const e=i[o];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}function Go(e,t){return t||!1!==e?!0===e?{}:e:null}function qo(e,{plugins:t,localIds:n},r,i){const o=[],a=e.getContext();for(const s of t){const t=s.id,l=Go(r[t],i);null!==l&&o.push({plugin:s,options:Yo(e.config,{plugin:s,local:n[t]},l,a)})}return o}function Yo(e,{plugin:t,local:n},r,i){const o=e.pluginScopeKeys(t),a=e.getOptionScopes(r,o);return n&&t.defaults&&a.push(t.defaults),e.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Xo(e,t){const n=St.datasets[e]||{},r=(t.datasets||{})[e]||{};return r.indexAxis||t.indexAxis||n.indexAxis||"x"}function Ko(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}function Jo(e,t){return e===t?"_index_":"_value_"}function Zo(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function Qo(e,t){return"x"===e||"y"===e?e:t.axis||Zo(t.position)||e.charAt(0).toLowerCase()}function ea(e,t){const n=yt[e.type]||{scales:{}},r=t.scales||{},i=Xo(e.type,t),o=Object.create(null),a=Object.create(null);return Object.keys(r).forEach((e=>{const t=r[e];if(!s(t))return console.error(`Invalid scale configuration for scale: ${e}`);if(t._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const l=Qo(e,t),u=Jo(l,i),c=n.scales||{};o[l]=o[l]||e,a[e]=x(Object.create(null),[{axis:l},t,c[l],c[u]])})),e.data.datasets.forEach((n=>{const i=n.type||e.type,s=n.indexAxis||Xo(i,t),l=yt[i]||{},u=l.scales||{};Object.keys(u).forEach((e=>{const t=Ko(e,s),i=n[t+"AxisID"]||o[t]||t;a[i]=a[i]||Object.create(null),x(a[i],[{axis:t},r[i],u[e]])}))})),Object.keys(a).forEach((e=>{const t=a[e];x(t,[St.scales[t.type],St.scale])})),a}function ta(e){const t=e.options||(e.options={});t.plugins=c(t.plugins,{}),t.scales=ea(e,t)}function na(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function ra(e){return e=e||{},e.data=na(e.data),ta(e),e}const ia=new Map,oa=new Set;function aa(e,t){let n=ia.get(e);return n||(n=t(),ia.set(e,n),oa.add(n)),n}const sa=(e,t,n)=>{const r=_(t,n);void 0!==r&&e.add(r)};class la{constructor(e){this._config=ra(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=na(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ta(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return aa(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return aa(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return aa(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id,n=this.type;return aa(`${n}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,o=this._cachedScopes(e,n),a=o.get(t);if(a)return a;const s=new Set;t.forEach((t=>{e&&(s.add(e),t.forEach((t=>sa(s,e,t)))),t.forEach((e=>sa(s,r,e))),t.forEach((e=>sa(s,yt[i]||{},e))),t.forEach((e=>sa(s,St,e))),t.forEach((e=>sa(s,xt,e)))}));const l=Array.from(s);return 0===l.length&&l.push(Object.create(null)),oa.has(t)&&o.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,yt[t]||{},St.datasets[t]||{},{type:t},St,xt]}resolveNamedOptions(e,t,n,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=ua(this._resolverCache,e,r);let s=o;if(ha(o,t)){i.$shared=!1,n=T(n)?n():n;const t=this.createResolver(e,n,a);s=en(o,n,t)}for(const l of t)i[l]=s[l];return i}createResolver(e,t,n=[""],r){const{resolver:i}=ua(this._resolverCache,e,n);return s(t)?en(i,t,void 0,r):i}}function ua(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let o=r.get(i);if(!o){const e=Qt(t,n);o={resolver:e,subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},r.set(i,o)}return o}const ca=e=>s(e)&&Object.getOwnPropertyNames(e).reduce(((t,n)=>t||T(e[n])),!1);function ha(e,t){const{isScriptable:n,isIndexable:r}=tn(e);for(const i of t){const t=n(i),o=r(i),s=(o||t)&&e[i];if(t&&(T(s)||ca(s))||o&&a(s))return!0}return!1}var da="3.9.1";const pa=["top","bottom","left","right","chartArea"];function fa(e,t){return"top"===e||"bottom"===e||-1===pa.indexOf(e)&&"x"===t}function ma(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function ga(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),p(n&&n.onComplete,[e],t)}function ba(e){const t=e.chart,n=t.options.animation;p(n&&n.onProgress,[e],t)}function va(e){return En()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const ya={},xa=e=>{const t=va(e);return Object.values(ya).filter((e=>e.canvas===t)).pop()};function wa(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function ka(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}class _a{constructor(e,t){const n=this.config=new la(t),r=va(e),o=xa(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Uo(r)),this.platform.updateConfig(n);const s=this.platform.acquireContext(r,a.aspectRatio),l=s&&s.canvas,u=l&&l.height,c=l&&l.width;this.id=i(),this.ctx=s,this.canvas=l,this.width=c,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Wo,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=fe((e=>this.update(e)),a.resizeDelay||0),this._dataChanges=[],ya[this.id]=this,s&&l?(gr.listen(this,"complete",ga),gr.listen(this,"progress",ba),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return o(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Un(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Nt(this.canvas,this.ctx),this}stop(){return gr.stop(this),this}resize(e,t){gr.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,t,i),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Un(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),p(n.onResize,[this,o],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){const e=this.options,t=e.scales||{};f(t,((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let i=[];t&&(i=i.concat(Object.keys(t).map((e=>{const n=t[e],r=Qo(e,n),i="r"===r,o="x"===r;return{options:n,dposition:i?"chartArea":o?"bottom":"left",dtype:i?"radialLinear":o?"category":"linear"}})))),f(i,(t=>{const i=t.options,o=i.id,a=Qo(o,i),s=c(i.type,t.dtype);void 0!==i.position&&fa(i.position,a)===fa(t.dposition)||(i.position=t.dposition),r[o]=!0;let l=null;if(o in n&&n[o].type===s)l=n[o];else{const e=Ui.getScale(s);l=new e({id:o,type:s,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)})),f(r,((e,t)=>{e||delete n[t]})),f(n,(e=>{xo.configure(this,e,e.options),xo.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(ma("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const o=r.type||this.config.type;if(i.type&&i.type!==o&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=o,i.indexAxis=r.indexAxis||Xo(o,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=Ui.getController(o),{datasetElementType:r,dataElementType:a}=St.datasets[o];Object.assign(t.prototype,{dataElementType:Ui.getElement(a),datasetElementType:r&&Ui.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){f(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let l=0,u=this.data.datasets.length;l<u;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||f(i,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(ma("z","_idx"));const{_active:a,_lastEvent:s}=this;s?this._eventHandler(s,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){f(this.scales,(e=>{xo.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);N(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){const t="_removeElements"===n?-i:i;wa(e,r,t)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),r=n(0);for(let i=1;i<t;i++)if(!N(r,n(i)))return;return Array.from(r).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;xo.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],f(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,T(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(gr.has(this)?this.attached&&!gr.running(this)&&gr.start(this):(this.draw(),ga({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resize(e,t),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,r=!n.disabled,i=this.chartArea,o={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&At(t,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),e.controller.draw(),r&&Rt(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return $t(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=no.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter((e=>e&&e._dataset===t)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Zt(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){const n=this.getDatasetMeta(e);n.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);O(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(i,{visible:n}),this.update((t=>t.datasetIndex===e?r:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),gr.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Nt(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete ya[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};f(this.options.events,(e=>n(e,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){f(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},f(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,o,a,s;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,s=e.length;a<s;++a){o=e[a];const t=o&&this.getDatasetMeta(o.datasetIndex).controller;t&&t[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((({datasetIndex:e,index:t})=>{const n=this.getDatasetMeta(e);if(!n)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:n.data[t],index:t}})),r=!m(n,t);r&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),o=i(t,e),a=n?e:i(e,t);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,o=t,a=this._getActiveElements(e,r,n,o),s=E(e),l=ka(e,this._lastEvent,n,s);n&&(this._lastEvent=null,p(i.onHover,[e,a,this],this),s&&p(i.onClick,[e,a,this],this));const u=!m(a,r);return(u||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=l,u}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}const Sa=()=>f(_a.instances,(e=>e._plugins.invalidate())),Ca=!0;function Ia(e,t,n){const{startAngle:r,pixelMargin:i,x:o,y:a,outerRadius:s,innerRadius:l}=t;let u=i/s;e.beginPath(),e.arc(o,a,s,r-u,n+u),l>i?(u=i/l,e.arc(o,a,l,n+u,r-u,!0)):e.arc(o,a,i,n+F,r-F),e.closePath(),e.clip()}function Oa(e){return Ht(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Ta(e,t,n,r){const i=Oa(e.options.borderRadius),o=(n-t)/2,a=Math.min(o,r*t/2),s=e=>{const t=(n-Math.min(o,e))*r/2;return te(e,0,Math.min(o,t))};return{outerStart:s(i.outerStart),outerEnd:s(i.outerEnd),innerStart:te(i.innerStart,0,a),innerEnd:te(i.innerEnd,0,a)}}function Na(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function Ea(e,t,n,r,i,o){const{x:a,y:s,startAngle:l,pixelMargin:u,innerRadius:c}=t,h=Math.max(t.outerRadius+r+n-u,0),d=c>0?c+r+n+u:0;let p=0;const f=i-l;if(r){const e=c>0?c-r:0,t=h>0?h-r:0,n=(e+t)/2,i=0!==n?f*n/(n+r):f;p=(f-i)/2}const m=Math.max(.001,f*h-n/D)/h,g=(f-m)/2,b=l+g+p,v=i-g-p,{outerStart:y,outerEnd:x,innerStart:w,innerEnd:k}=Ta(t,d,h,v-b),_=h-y,S=h-x,C=b+y/_,I=v-x/S,O=d+w,T=d+k,N=b+w/O,E=v-k/T;if(e.beginPath(),o){if(e.arc(a,s,h,C,I),x>0){const t=Na(S,I,a,s);e.arc(t.x,t.y,x,I,v+F)}const t=Na(T,v,a,s);if(e.lineTo(t.x,t.y),k>0){const t=Na(T,E,a,s);e.arc(t.x,t.y,k,v+F,E+Math.PI)}if(e.arc(a,s,d,v-k/d,b+w/d,!0),w>0){const t=Na(O,N,a,s);e.arc(t.x,t.y,w,N+Math.PI,b-F)}const n=Na(_,b,a,s);if(e.lineTo(n.x,n.y),y>0){const t=Na(_,C,a,s);e.arc(t.x,t.y,y,b-F,C)}}else{e.moveTo(a,s);const t=Math.cos(C)*h+a,n=Math.sin(C)*h+s;e.lineTo(t,n);const r=Math.cos(I)*h+a,i=Math.sin(I)*h+s;e.lineTo(r,i)}e.closePath()}function Da(e,t,n,r,i){const{fullCircles:o,startAngle:a,circumference:s}=t;let l=t.endAngle;if(o){Ea(e,t,n,r,a+$,i);for(let t=0;t<o;++t)e.fill();isNaN(s)||(l=a+s%$,s%$===0&&(l+=$))}return Ea(e,t,n,r,l,i),e.fill(),l}function $a(e,t,n){const{x:r,y:i,startAngle:o,pixelMargin:a,fullCircles:s}=t,l=Math.max(t.outerRadius-a,0),u=t.innerRadius+a;let c;for(n&&Ia(e,t,o+$),e.beginPath(),e.arc(r,i,u,o+$,o,!0),c=0;c<s;++c)e.stroke();for(e.beginPath(),e.arc(r,i,l,o,o+$),c=0;c<s;++c)e.stroke()}function Aa(e,t,n,r,i,o){const{options:a}=t,{borderWidth:s,borderJoinStyle:l}=a,u="inner"===a.borderAlign;s&&(u?(e.lineWidth=2*s,e.lineJoin=l||"round"):(e.lineWidth=s,e.lineJoin=l||"bevel"),t.fullCircles&&$a(e,t,u),u&&Ia(e,t,i),Ea(e,t,n,r,i,o),e.stroke())}Object.defineProperties(_a,{defaults:{enumerable:Ca,value:St},instances:{enumerable:Ca,value:ya},overrides:{enumerable:Ca,value:yt},registry:{enumerable:Ca,value:Ui},version:{enumerable:Ca,value:da},getChart:{enumerable:Ca,value:xa},register:{enumerable:Ca,value:(...e)=>{Ui.add(...e),Sa()}},unregister:{enumerable:Ca,value:(...e)=>{Ui.remove(...e),Sa()}}});class Ra extends mi{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:o}=K(r,{x:e,y:t}),{startAngle:a,endAngle:s,innerRadius:l,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=this.options.spacing/2,p=c(h,s-a),f=p>=$||ee(i,a,s),m=re(o,l+d,u+d);return f&&m}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:s,spacing:l}=this.options,u=(r+i)/2,c=(o+a+l+s)/2;return{x:t+Math.cos(u)*c,y:n+Math.sin(u)*c}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/2,i=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>$?Math.floor(n/$):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=0;if(r){a=r/2;const t=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(t)*a,Math.sin(t)*a),this.circumference>=D&&(a=r)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;const s=Da(e,this,a,i,o);Aa(e,this,a,i,s,o),e.restore()}}function Ma(e,t,n=t){e.lineCap=c(n.borderCapStyle,t.borderCapStyle),e.setLineDash(c(n.borderDash,t.borderDash)),e.lineDashOffset=c(n.borderDashOffset,t.borderDashOffset),e.lineJoin=c(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=c(n.borderWidth,t.borderWidth),e.strokeStyle=c(n.borderColor,t.borderColor)}function Fa(e,t,n){e.lineTo(n.x,n.y)}function Pa(e){return e.stepped?Mt:e.tension||"monotone"===e.cubicInterpolationMode?Ft:Fa}function ja(e,t,n={}){const r=e.length,{start:i=0,end:o=r-1}=n,{start:a,end:s}=t,l=Math.max(i,a),u=Math.min(o,s),c=i<a&&o<a||i>s&&o>s;return{count:r,start:l,loop:t.loop,ilen:u<l&&!c?r+u-l:u-l}}function Ba(e,t,n,r){const{points:i,options:o}=t,{count:a,start:s,loop:l,ilen:u}=ja(i,n,r),c=Pa(o);let h,d,p,{move:f=!0,reverse:m}=r||{};for(h=0;h<=u;++h)d=i[(s+(m?u-h:h))%a],d.skip||(f?(e.moveTo(d.x,d.y),f=!1):c(e,p,d,m,o.stepped),p=d);return l&&(d=i[(s+(m?u:0))%a],c(e,p,d,m,o.stepped)),!!l}function La(e,t,n,r){const i=t.points,{count:o,start:a,ilen:s}=ja(i,n,r),{move:l=!0,reverse:u}=r||{};let c,h,d,p,f,m,g=0,b=0;const v=e=>(a+(u?s-e:e))%o,y=()=>{p!==f&&(e.lineTo(g,f),e.lineTo(g,p),e.lineTo(g,m))};for(l&&(h=i[v(0)],e.moveTo(h.x,h.y)),c=0;c<=s;++c){if(h=i[v(c)],h.skip)continue;const t=h.x,n=h.y,r=0|t;r===d?(n<p?p=n:n>f&&(f=n),g=(b*g+t)/++b):(y(),e.lineTo(t,n),d=r,b=0,p=f=n),m=n}y()}function za(e){const t=e.options,n=t.borderDash&&t.borderDash.length,r=!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n;return r?La:Ba}function Va(e){return e.stepped?qn:e.tension||"monotone"===e.cubicInterpolationMode?Yn:Gn}function Ua(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),Ma(e,t.options),e.stroke(i)}function Wa(e,t,n,r){const{segments:i,options:o}=t,a=za(t);for(const s of i)Ma(e,o,s.style),e.beginPath(),a(e,t,s,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}Ra.id="arc",Ra.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},Ra.defaultRoutes={backgroundColor:"backgroundColor"};const Ha="function"===typeof Path2D;function Ga(e,t,n,r){Ha&&!t.options.segment?Ua(e,t,n,r):Wa(e,t,n,r)}class qa extends mi{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;Nn(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=cr(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,o=sr(this,{property:t,start:r,end:r});if(!o.length)return;const a=[],s=Va(n);let l,u;for(l=0,u=o.length;l<u;++l){const{start:u,end:c}=o[l],h=i[u],d=i[c];if(h===d){a.push(h);continue}const p=Math.abs((r-h[t])/(d[t]-h[t])),f=s(h,d,p,n.stepped);f[t]=e[t],a.push(f)}return 1===a.length?a[0]:a}pathSegment(e,t,n){const r=za(this);return r(e,this,t,n)}path(e,t,n){const r=this.segments,i=za(this);let o=this._loop;t=t||0,n=n||this.points.length-t;for(const a of r)o&=i(e,this,a,{start:t,end:t+n-1});return!!o}draw(e,t,n,r){const i=this.options||{},o=this.points||[];o.length&&i.borderWidth&&(e.save(),Ga(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Ya(e,t,n,r){const i=e.options,{[n]:o}=e.getProps([n],r);return Math.abs(t-o)<i.radius+i.hitRadius}qa.id="line",qa.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},qa.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},qa.descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};class Xa extends mi{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return Ya(this,e,"x",t)}inYRange(e,t){return Ya(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const n=t&&e.borderWidth||0;return 2*(t+n)}draw(e,t){const n=this.options;this.skip||n.radius<.1||!$t(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Et(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Ka(e,t){const{x:n,y:r,base:i,width:o,height:a}=e.getProps(["x","y","base","width","height"],t);let s,l,u,c,h;return e.horizontal?(h=a/2,s=Math.min(n,i),l=Math.max(n,i),u=r-h,c=r+h):(h=o/2,s=n-h,l=n+h,u=Math.min(r,i),c=Math.max(r,i)),{left:s,top:u,right:l,bottom:c}}function Ja(e,t,n,r){return e?0:te(t,n,r)}function Za(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,o=Gt(r);return{t:Ja(i.top,o.top,0,n),r:Ja(i.right,o.right,0,t),b:Ja(i.bottom,o.bottom,0,n),l:Ja(i.left,o.left,0,t)}}function Qa(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,o=qt(i),a=Math.min(t,n),l=e.borderSkipped,u=r||s(i);return{topLeft:Ja(!u||l.top||l.left,o.topLeft,0,a),topRight:Ja(!u||l.top||l.right,o.topRight,0,a),bottomLeft:Ja(!u||l.bottom||l.left,o.bottomLeft,0,a),bottomRight:Ja(!u||l.bottom||l.right,o.bottomRight,0,a)}}function es(e){const t=Ka(e),n=t.right-t.left,r=t.bottom-t.top,i=Za(e,n/2,r/2),o=Qa(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:o},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function ts(e,t,n,r){const i=null===t,o=null===n,a=i&&o,s=e&&!a&&Ka(e,r);return s&&(i||re(t,s.left,s.right))&&(o||re(n,s.top,s.bottom))}function ns(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function rs(e,t){e.rect(t.x,t.y,t.w,t.h)}function is(e,t,n={}){const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,o=(e.x+e.w!==n.x+n.w?t:0)-r,a=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+o,h:e.h+a,radius:e.radius}}Xa.id="point",Xa.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},Xa.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class os extends mi{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:o}=es(this),a=ns(o.radius)?Lt:rs;e.save(),o.w===i.w&&o.h===i.h||(e.beginPath(),a(e,is(o,t,i)),e.clip(),a(e,is(i,-t,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,is(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return ts(this,e,t,n)}inXRange(e,t){return ts(this,e,null,t)}inYRange(e,t){return ts(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}os.id="bar",os.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},os.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function as(e,t,n,r,i){const o=i.samples||r;if(o>=n)return e.slice(t,t+n);const a=[],s=(n-2)/(o-2);let l=0;const u=t+n-1;let c,h,d,p,f,m=t;for(a[l++]=e[m],c=0;c<o-2;c++){let r,i=0,o=0;const u=Math.floor((c+1)*s)+1+t,g=Math.min(Math.floor((c+2)*s)+1,n)+t,b=g-u;for(r=u;r<g;r++)i+=e[r].x,o+=e[r].y;i/=b,o/=b;const v=Math.floor(c*s)+1+t,y=Math.min(Math.floor((c+1)*s)+1,n)+t,{x:x,y:w}=e[m];for(d=p=-1,r=v;r<y;r++)p=.5*Math.abs((x-i)*(e[r].y-w)-(x-e[r].x)*(o-w)),p>d&&(d=p,h=e[r],f=r);a[l++]=h,m=f}return a[l++]=e[u],a}function ss(e,t,n,r){let i,a,s,l,u,c,h,d,p,f,m=0,g=0;const b=[],v=t+n-1,y=e[t].x,x=e[v].x,w=x-y;for(i=t;i<t+n;++i){a=e[i],s=(a.x-y)/w*r,l=a.y;const t=0|s;if(t===u)l<p?(p=l,c=i):l>f&&(f=l,h=i),m=(g*m+a.x)/++g;else{const n=i-1;if(!o(c)&&!o(h)){const t=Math.min(c,h),r=Math.max(c,h);t!==d&&t!==n&&b.push({...e[t],x:m}),r!==d&&r!==n&&b.push({...e[r],x:m})}i>0&&n!==d&&b.push(e[n]),b.push(a),u=t,g=0,p=f=l,c=h=d=i}}return b}function ls(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{value:t})}}function us(e){e.data.datasets.forEach((e=>{ls(e)}))}function cs(e,t){const n=t.length;let r,i=0;const{iScale:o}=e,{min:a,max:s,minDefined:l,maxDefined:u}=o.getUserBounds();return l&&(i=te(oe(t,o.axis,a).lo,0,n-1)),r=u?te(oe(t,o.axis,s).hi+1,i,n)-i:n-i,{start:i,count:r}}var hs={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled)return void us(e);const r=e.width;e.data.datasets.forEach(((t,i)=>{const{_data:a,indexAxis:s}=t,l=e.getDatasetMeta(i),u=a||t.data;if("y"===Kt([s,e.options.indexAxis]))return;if(!l.controller.supportsDecimation)return;const c=e.scales[l.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(e.options.parsing)return;let{start:h,count:d}=cs(l,u);const p=n.threshold||4*r;if(d<=p)return void ls(t);let f;switch(o(a)&&(t._data=u,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),n.algorithm){case"lttb":f=as(u,h,d,r,n);break;case"min-max":f=ss(u,h,d,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}t._decimated=f}))},destroy(e){us(e)}};function ds(e,t,n){const r=e.segments,i=e.points,o=t.points,a=[];for(const s of r){let{start:e,end:r}=s;r=ms(e,r,i);const l=ps(n,i[e],i[r],s.loop);if(!t.segments){a.push({source:s,target:l,start:i[e],end:i[r]});continue}const u=sr(t,l);for(const t of u){const e=ps(n,o[t.start],o[t.end],t.loop),r=ar(s,i,e);for(const i of r)a.push({source:i,target:t,start:{[n]:gs(l,e,"start",Math.max)},end:{[n]:gs(l,e,"end",Math.min)}})}}return a}function ps(e,t,n,r){if(r)return;let i=t[e],o=n[e];return"angle"===e&&(i=Q(i),o=Q(o)),{property:e,start:i,end:o}}function fs(e,t){const{x:n=null,y:r=null}=e||{},i=t.points,o=[];return t.segments.forEach((({start:e,end:t})=>{t=ms(e,t,i);const a=i[e],s=i[t];null!==r?(o.push({x:a.x,y:r}),o.push({x:s.x,y:r})):null!==n&&(o.push({x:n,y:a.y}),o.push({x:n,y:s.y}))})),o}function ms(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function gs(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function bs(e,t){let n=[],r=!1;return a(e)?(r=!0,n=e):n=fs(e,t),n.length?new qa({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function vs(e){return e&&!1!==e.fill}function ys(e,t,n){const r=e[t];let i=r.fill;const o=[t];let a;if(!n)return i;while(!1!==i&&-1===o.indexOf(i)){if(!l(i))return i;if(a=e[i],!a)return!1;if(a.visible)return i;o.push(i),i=a.fill}return!1}function xs(e,t,n){const r=Ss(e);if(s(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return l(i)&&Math.floor(i)===i?ws(r[0],t,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function ws(e,t,n,r){return"-"!==e&&"+"!==e||(n=t+n),!(n===t||n<0||n>=r)&&n}function ks(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:s(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function _s(e,t,n){let r;return r="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:s(e)?e.value:t.getBaseValue(),r}function Ss(e){const t=e.options,n=t.fill;let r=c(n&&n.target,n);return void 0===r&&(r=!!t.backgroundColor),!1!==r&&null!==r&&(!0===r?"origin":r)}function Cs(e){const{scale:t,index:n,line:r}=e,i=[],o=r.segments,a=r.points,s=Is(t,n);s.push(bs({x:null,y:t.bottom},r));for(let l=0;l<o.length;l++){const e=o[l];for(let t=e.start;t<=e.end;t++)Os(i,a[t],s)}return new qa({points:i,options:{}})}function Is(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const e=r[i];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}function Os(e,t,n){const r=[];for(let i=0;i<n.length;i++){const o=n[i],{first:a,last:s,point:l}=Ts(o,t,"x");if(!(!l||a&&s))if(a)r.unshift(l);else if(e.push(l),!s)break}e.push(...r)}function Ts(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const i=r[n],o=e.segments,a=e.points;let s=!1,l=!1;for(let u=0;u<o.length;u++){const e=o[u],t=a[e.start][n],r=a[e.end][n];if(re(i,t,r)){s=i===t,l=i===r;break}}return{first:s,last:l,point:r}}class Ns{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:r,y:i,radius:o}=this;return t=t||{start:0,end:$},e.arc(r,i,o,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:r}=this,i=e.angle;return{x:t+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function Es(e){const{chart:t,fill:n,line:r}=e;if(l(n))return Ds(t,n);if("stack"===n)return Cs(e);if("shape"===n)return!0;const i=$s(e);return i instanceof Ns?i:bs(i,r)}function Ds(e,t){const n=e.getDatasetMeta(t),r=n&&e.isDatasetVisible(t);return r?n.dataset:null}function $s(e){const t=e.scale||{};return t.getPointPositionForValue?Rs(e):As(e)}function As(e){const{scale:t={},fill:n}=e,r=ks(n,t);if(l(r)){const e=t.isHorizontal();return{x:e?r:null,y:e?null:r}}return null}function Rs(e){const{scale:t,fill:n}=e,r=t.options,i=t.getLabels().length,o=r.reverse?t.max:t.min,a=_s(n,t,o),s=[];if(r.grid.circular){const e=t.getPointPositionForValue(0,o);return new Ns({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(a)})}for(let l=0;l<i;++l)s.push(t.getPointPositionForValue(l,a));return s}function Ms(e,t,n){const r=Es(t),{line:i,scale:o,axis:a}=t,s=i.options,l=s.fill,u=s.backgroundColor,{above:c=u,below:h=u}=l||{};r&&i.points.length&&(At(e,n),Fs(e,{line:i,target:r,above:c,below:h,area:n,scale:o,axis:a}),Rt(e))}function Fs(e,t){const{line:n,target:r,above:i,below:o,area:a,scale:s}=t,l=n._loop?"angle":t.axis;e.save(),"x"===l&&o!==i&&(Ps(e,r,a.top),js(e,{line:n,target:r,color:i,scale:s,property:l}),e.restore(),e.save(),Ps(e,r,a.bottom)),js(e,{line:n,target:r,color:o,scale:s,property:l}),e.restore()}function Ps(e,t,n){const{segments:r,points:i}=t;let o=!0,a=!1;e.beginPath();for(const s of r){const{start:r,end:l}=s,u=i[r],c=i[ms(r,l,i)];o?(e.moveTo(u.x,u.y),o=!1):(e.lineTo(u.x,n),e.lineTo(u.x,u.y)),a=!!t.pathSegment(e,s,{move:a}),a?e.closePath():e.lineTo(c.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function js(e,t){const{line:n,target:r,property:i,color:o,scale:a}=t,s=ds(n,r,i);for(const{source:l,target:u,start:c,end:h}of s){const{style:{backgroundColor:t=o}={}}=l,s=!0!==r;e.save(),e.fillStyle=t,Bs(e,a,s&&ps(i,c,h)),e.beginPath();const d=!!n.pathSegment(e,l);let p;if(s){d?e.closePath():Ls(e,r,h,i);const t=!!r.pathSegment(e,u,{move:d,reverse:!0});p=d&&t,p||Ls(e,r,c,i)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function Bs(e,t,n){const{top:r,bottom:i}=t.chart.chartArea,{property:o,start:a,end:s}=n||{};"x"===o&&(e.beginPath(),e.rect(a,r,s-a,i-r),e.clip())}function Ls(e,t,n,r){const i=t.interpolate(n,r);i&&e.lineTo(i.x,i.y)}var zs={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,i=[];let o,a,s,l;for(a=0;a<r;++a)o=e.getDatasetMeta(a),s=o.dataset,l=null,s&&s.options&&s instanceof qa&&(l={visible:e.isDatasetVisible(a),index:a,fill:xs(s,a,r),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:s}),o.$filler=l,i.push(l);for(a=0;a<r;++a)l=i[a],l&&!1!==l.fill&&(l.fill=ys(i,a,n.propagate))},beforeDraw(e,t,n){const r="beforeDraw"===n.drawTime,i=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let a=i.length-1;a>=0;--a){const t=i[a].$filler;t&&(t.line.updateControlPoints(o,t.axis),r&&t.fill&&Ms(e.ctx,t,o))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const t=r[i].$filler;vs(t)&&Ms(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;vs(r)&&"beforeDatasetDraw"===n.drawTime&&Ms(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Vs=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}},Us=(e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Ws extends mi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=p(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=Xt(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:s}=Vs(n,i);let l,u;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(o,i,a,s)+10):(u=this.maxHeight,l=this._fitCols(o,i,a,s)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],l=this.lineWidths=[0],u=r+a;let c=e;i.textAlign="left",i.textBaseline="middle";let h=-1,d=-u;return this.legendItems.forEach(((e,p)=>{const f=n+t/2+i.measureText(e.text).width;(0===p||l[l.length-1]+f+2*a>o)&&(c+=u,l[l.length-(p>0?0:1)]=0,d+=u,h++),s[p]={left:0,top:d,row:h,width:f,height:r},l[l.length-1]+=f+a})),c}_fitCols(e,t,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-e;let c=a,h=0,d=0,p=0,f=0;return this.legendItems.forEach(((e,o)=>{const m=n+t/2+i.measureText(e.text).width;o>0&&d+r+2*a>u&&(c+=h+a,l.push({width:h,height:d}),p+=h+a,f++,h=d=0),s[o]={left:p,top:d,col:f,width:m,height:r},h=Math.max(h,m),d+=r+a})),c+=h,l.push({width:h,height:d}),c}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,o=er(i,this.left,this.width);if(this.isHorizontal()){let i=0,a=ge(n,this.left+r,this.right-this.lineWidths[i]);for(const s of t)i!==s.row&&(i=s.row,a=ge(n,this.left+r,this.right-this.lineWidths[i])),s.top+=this.top+e+r,s.left=o.leftForLtr(o.x(a),s.width),a+=s.width+r}else{let i=0,a=ge(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const s of t)s.col!==i&&(i=s.col,a=ge(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),s.top=a,s.left+=this.left+r,s.left=o.leftForLtr(o.x(s.left),s.width),a+=s.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;At(e,this),this._draw(),Rt(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:o}=e,a=St.color,s=er(e.rtl,this.left,this.width),l=Xt(o.font),{color:u,padding:h}=o,d=l.size,p=d/2;let f;this.drawTitle(),r.textAlign=s.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:m,boxHeight:g,itemHeight:b}=Vs(o,d),v=function(e,t,n){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;r.save();const i=c(n.lineWidth,1);if(r.fillStyle=c(n.fillStyle,a),r.lineCap=c(n.lineCap,"butt"),r.lineDashOffset=c(n.lineDashOffset,0),r.lineJoin=c(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=c(n.strokeStyle,a),r.setLineDash(c(n.lineDash,[])),o.usePointStyle){const a={radius:g*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=s.xPlus(e,m/2),u=t+p;Dt(r,a,l,u,o.pointStyleWidth&&m)}else{const o=t+Math.max((d-g)/2,0),a=s.leftForLtr(e,m),l=qt(n.borderRadius);r.beginPath(),Object.values(l).some((e=>0!==e))?Lt(r,{x:a,y:o,w:m,h:g,radius:l}):r.rect(a,o,m,g),r.fill(),0!==i&&r.stroke()}r.restore()},y=function(e,t,n){Pt(r,n.text,e,t+b/2,l,{strikethrough:n.hidden,textAlign:s.textAlign(n.textAlign)})},x=this.isHorizontal(),w=this._computeTitleHeight();f=x?{x:ge(i,this.left+h,this.right-n[0]),y:this.top+h+w,line:0}:{x:this.left+h,y:ge(i,this.top+w+h,this.bottom-t[0].height),line:0},tr(this.ctx,e.textDirection);const k=b+h;this.legendItems.forEach(((a,l)=>{r.strokeStyle=a.fontColor||u,r.fillStyle=a.fontColor||u;const c=r.measureText(a.text).width,d=s.textAlign(a.textAlign||(a.textAlign=o.textAlign)),g=m+p+c;let b=f.x,_=f.y;s.setWidth(this.width),x?l>0&&b+g+h>this.right&&(_=f.y+=k,f.line++,b=f.x=ge(i,this.left+h,this.right-n[f.line])):l>0&&_+k>this.bottom&&(b=f.x=b+t[f.line].width+h,f.line++,_=f.y=ge(i,this.top+w+h,this.bottom-t[f.line].height));const S=s.x(b);v(S,_,a),b=be(d,b+m+p,x?b+g:this.right,e.rtl),y(s.x(b),_,a),x?f.x+=g+h:f.y+=k})),nr(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=Xt(t.font),r=Yt(t.padding);if(!t.display)return;const i=er(e.rtl,this.left,this.width),o=this.ctx,a=t.position,s=n.size/2,l=r.top+s;let u,c=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+l,c=ge(e.align,c,this.right-h);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);u=l+ge(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=ge(a,c,c+h);o.textAlign=i.textAlign(me(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=n.string,Pt(o,t.text,d,u,n)}_computeTitleHeight(){const e=this.options.title,t=Xt(e.font),n=Yt(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(re(e,this.left,this.right)&&re(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],re(e,r.left,r.left+r.width)&&re(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!Hs(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,i=Us(r,n);r&&!i&&p(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&p(t.onHover,[e,n,this],this)}else n&&p(t.onClick,[e,n,this],this)}}function Hs(e,t){return!("mousemove"!==e&&"mouseout"!==e||!t.onHover&&!t.onLeave)||!(!t.onClick||"click"!==e&&"mouseup"!==e)}var Gs={id:"legend",_element:Ws,start(e,t,n){const r=e.legend=new Ws({ctx:e.ctx,options:n,chart:e});xo.configure(e,r,n),xo.addBox(e,r)},stop(e){xo.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;xo.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:o}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const a=e.controller.getStyle(n?0:void 0),s=Yt(a.borderWidth);return{text:t[e.index].label,fillStyle:a.backgroundColor,fontColor:o,hidden:!e.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(s.width+s.height)/4,strokeStyle:a.borderColor,pointStyle:r||a.pointStyle,rotation:a.rotation,textAlign:i||a.textAlign,borderRadius:0,datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class qs extends mi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=a(n.text)?n.text.length:1;this._padding=Yt(n.padding);const i=r*Xt(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:o}=this,a=o.align;let s,l,u,c=0;return this.isHorizontal()?(l=ge(a,n,i),u=t+e,s=i-n):("left"===o.position?(l=n+e,u=ge(a,r,t),c=-.5*D):(l=i-e,u=ge(a,t,r),c=.5*D),s=r-t),{titleX:l,titleY:u,maxWidth:s,rotation:c}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=Xt(t.font),r=n.lineHeight,i=r/2+this._padding.top,{titleX:o,titleY:a,maxWidth:s,rotation:l}=this._drawArgs(i);Pt(e,t.text,0,0,n,{color:t.color,maxWidth:s,rotation:l,textAlign:me(t.align),textBaseline:"middle",translation:[o,a]})}}function Ys(e,t){const n=new qs({ctx:e.ctx,options:t,chart:e});xo.configure(e,n,t),xo.addBox(e,n),e.titleBlock=n}var Xs={id:"title",_element:qs,start(e,t,n){Ys(e,n)},stop(e){const t=e.titleBlock;xo.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;xo.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ks=new WeakMap;var Js={id:"subtitle",start(e,t,n){const r=new qs({ctx:e.ctx,options:n,chart:e});xo.configure(e,r,n),xo.addBox(e,r),Ks.set(e,r)},stop(e){xo.removeBox(e,Ks.get(e)),Ks.delete(e)},beforeUpdate(e,t,n){const r=Ks.get(e);xo.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Zs={average(e){if(!e.length)return!1;let t,n,r=0,i=0,o=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r+=e.x,i+=e.y,++o}}return{x:r/o,y:i/o}},nearest(e,t){if(!e.length)return!1;let n,r,i,o=t.x,a=t.y,s=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=r.getCenterPoint(),n=J(t,e);n<s&&(s=n,i=r)}}if(i){const e=i.tooltipPosition();o=e.x,a=e.y}return{x:o,y:a}}};function Qs(e,t){return t&&(a(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function el(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function tl(e,t){const{element:n,datasetIndex:r,index:i}=t,o=e.getDatasetMeta(r).controller,{label:a,value:s}=o.getLabelAndValue(i);return{chart:e,label:a,parsed:o.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:s,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function nl(e,t){const n=e.chart.ctx,{body:r,footer:i,title:o}=e,{boxWidth:a,boxHeight:s}=t,l=Xt(t.bodyFont),u=Xt(t.titleFont),c=Xt(t.footerFont),h=o.length,d=i.length,p=r.length,m=Yt(t.padding);let g=m.height,b=0,v=r.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(v+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*u.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),v){const e=t.displayColors?Math.max(s,l.lineHeight):l.lineHeight;g+=p*e+(v-p)*l.lineHeight+(v-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*c.lineHeight+(d-1)*t.footerSpacing);let y=0;const x=function(e){b=Math.max(b,n.measureText(e).width+y)};return n.save(),n.font=u.string,f(e.title,x),n.font=l.string,f(e.beforeBody.concat(e.afterBody),x),y=t.displayColors?a+2+t.boxPadding:0,f(r,(e=>{f(e.before,x),f(e.lines,x),f(e.after,x)})),y=0,n.font=c.string,f(e.footer,x),n.restore(),b+=m.width,{width:b,height:g}}function rl(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}function il(e,t,n,r){const{x:i,width:o}=r,a=n.caretSize+n.caretPadding;return"left"===e&&i+o+a>t.width||("right"===e&&i-o-a<0||void 0)}function ol(e,t,n,r){const{x:i,width:o}=n,{width:a,chartArea:{left:s,right:l}}=e;let u="center";return"center"===r?u=i<=(s+l)/2?"left":"right":i<=o/2?u="left":i>=a-o/2&&(u="right"),il(u,e,t,n)&&(u="center"),u}function al(e,t,n){const r=n.yAlign||t.yAlign||rl(e,n);return{xAlign:n.xAlign||t.xAlign||ol(e,t,n,r),yAlign:r}}function sl(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}function ll(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}function ul(e,t,n,r){const{caretSize:i,caretPadding:o,cornerRadius:a}=e,{xAlign:s,yAlign:l}=n,u=i+o,{topLeft:c,topRight:h,bottomLeft:d,bottomRight:p}=qt(a);let f=sl(t,s);const m=ll(t,l,u);return"center"===l?"left"===s?f+=u:"right"===s&&(f-=u):"left"===s?f-=Math.max(c,d)+i:"right"===s&&(f+=Math.max(h,p)+i),{x:te(f,0,r.width-t.width),y:te(m,0,r.height-t.height)}}function cl(e,t,n){const r=Yt(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function hl(e){return Qs([],el(e))}function dl(e,t,n){return Zt(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function pl(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}class fl extends mi{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new _r(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=dl(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:n}=t,r=n.beforeTitle.apply(this,[e]),i=n.title.apply(this,[e]),o=n.afterTitle.apply(this,[e]);let a=[];return a=Qs(a,el(r)),a=Qs(a,el(i)),a=Qs(a,el(o)),a}getBeforeBody(e,t){return hl(t.callbacks.beforeBody.apply(this,[e]))}getBody(e,t){const{callbacks:n}=t,r=[];return f(e,(e=>{const t={before:[],lines:[],after:[]},i=pl(n,e);Qs(t.before,el(i.beforeLabel.call(this,e))),Qs(t.lines,i.label.call(this,e)),Qs(t.after,el(i.afterLabel.call(this,e))),r.push(t)})),r}getAfterBody(e,t){return hl(t.callbacks.afterBody.apply(this,[e]))}getFooter(e,t){const{callbacks:n}=t,r=n.beforeFooter.apply(this,[e]),i=n.footer.apply(this,[e]),o=n.afterFooter.apply(this,[e]);let a=[];return a=Qs(a,el(r)),a=Qs(a,el(i)),a=Qs(a,el(o)),a}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],o=[];let a,s,l=[];for(a=0,s=t.length;a<s;++a)l.push(tl(this.chart,t[a]));return e.filter&&(l=l.filter(((t,r,i)=>e.filter(t,r,i,n)))),e.itemSort&&(l=l.sort(((t,r)=>e.itemSort(t,r,n)))),f(l,(t=>{const n=pl(e.callbacks,t);r.push(n.labelColor.call(this,t)),i.push(n.labelPointStyle.call(this,t)),o.push(n.labelTextColor.call(this,t))})),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(r.length){const e=Zs[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const t=this._size=nl(this,n),a=Object.assign({},e,t),s=al(this.chart,n,a),l=ul(n,a,s,this.chart);this.xAlign=s.xAlign,this.yAlign=s.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:s,topRight:l,bottomLeft:u,bottomRight:c}=qt(a),{x:h,y:d}=e,{width:p,height:f}=t;let m,g,b,v,y,x;return"center"===i?(y=d+f/2,"left"===r?(m=h,g=m-o,v=y+o,x=y-o):(m=h+p,g=m+o,v=y-o,x=y+o),b=m):(g="left"===r?h+Math.max(s,u)+o:"right"===r?h+p-Math.max(l,c)-o:this.caretX,"top"===i?(v=d,y=v-o,m=g-o,b=g+o):(v=d+f,y=v+o,m=g+o,b=g-o),x=v),{x1:m,x2:g,x3:b,y1:v,y2:y,y3:x}}drawTitle(e,t,n){const r=this.title,i=r.length;let o,a,s;if(i){const l=er(n.rtl,this.x,this.width);for(e.x=cl(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",o=Xt(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=o.string,s=0;s<i;++s)t.fillText(r[s],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,s+1===i&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,r,i){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:u,boxPadding:c}=i,h=Xt(i.bodyFont),d=cl(this,"left",i),p=r.x(d),f=l<h.lineHeight?(h.lineHeight-l)/2:0,m=t.y+f;if(i.usePointStyle){const t={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=r.leftForLtr(p,u)+u/2,s=m+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Et(e,t,n,s),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Et(e,t,n,s)}else{e.lineWidth=s(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const t=r.leftForLtr(p,u-c),n=r.leftForLtr(r.xPlus(p,1),u-c-2),a=qt(o.borderRadius);Object.values(a).some((e=>0!==e))?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Lt(e,{x:t,y:m,w:u,h:l,radius:a}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Lt(e,{x:n,y:m+1,w:u-2,h:l-2,radius:a}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,m,u,l),e.strokeRect(t,m,u,l),e.fillStyle=o.backgroundColor,e.fillRect(n,m+1,u-2,l-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:s,boxWidth:l,boxPadding:u}=n,c=Xt(n.bodyFont);let h=c.lineHeight,d=0;const p=er(n.rtl,this.x,this.width),m=function(n){t.fillText(n,p.x(e.x+d),e.y+h/2),e.y+=h+i},g=p.textAlign(o);let b,v,y,x,w,k,_;for(t.textAlign=o,t.textBaseline="middle",t.font=c.string,e.x=cl(this,g,n),t.fillStyle=n.bodyColor,f(this.beforeBody,m),d=a&&"right"!==g?"center"===o?l/2+u:l+2+u:0,x=0,k=r.length;x<k;++x){for(b=r[x],v=this.labelTextColors[x],t.fillStyle=v,f(b.before,m),y=b.lines,a&&y.length&&(this._drawColorBox(t,e,x,p,n),h=Math.max(c.lineHeight,s)),w=0,_=y.length;w<_;++w)m(y[w]),h=c.lineHeight;f(b.after,m)}d=0,h=c.lineHeight,f(this.afterBody,m),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let o,a;if(i){const s=er(n.rtl,this.x,this.width);for(e.x=cl(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=s.textAlign(n.footerAlign),t.textBaseline="middle",o=Xt(n.footerFont),t.fillStyle=n.footerColor,t.font=o.string,a=0;a<i;++a)t.fillText(r[a],s.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:o}=this,{x:a,y:s}=e,{width:l,height:u}=n,{topLeft:c,topRight:h,bottomLeft:d,bottomRight:p}=qt(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+c,s),"top"===o&&this.drawCaret(e,t,n,r),t.lineTo(a+l-h,s),t.quadraticCurveTo(a+l,s,a+l,s+h),"center"===o&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+l,s+u-p),t.quadraticCurveTo(a+l,s+u,a+l-p,s+u),"bottom"===o&&this.drawCaret(e,t,n,r),t.lineTo(a+d,s+u),t.quadraticCurveTo(a,s+u,a,s+u-d),"center"===o&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(a,s+c),t.quadraticCurveTo(a,s,a+c,s),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=Zs[e.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=nl(this,e),a=Object.assign({},n,this._size),s=al(t,e,a),l=ul(e,a,s,t);r._to===l.x&&i._to===l.y||(this.xAlign=s.xAlign,this.yAlign=s.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Yt(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),tr(e,t.textDirection),i.y+=o.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),nr(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map((({datasetIndex:e,index:t})=>{const n=this.chart.getDatasetMeta(e);if(!n)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:n.data[t],index:t}})),i=!m(n,r),o=this._positionChanged(r,t);(i||o)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,n=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,t,n),a=this._positionChanged(o,e),s=t||!m(o,i)||a;return s&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),s}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t;const o=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,o=Zs[i.position].call(this,e,t);return!1!==o&&(n!==o.x||r!==o.y)}}fl.positioners=Zs;var ml={id:"tooltip",_element:fl,positioners:Zs,afterInit(e,t,n){n&&(e.tooltip=new fl({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",n))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:r,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:r,beforeBody:r,beforeLabel:r,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return o(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex),n=t.controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex),n=t.controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:r,afterBody:r,beforeFooter:r,footer:r,afterFooter:r}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const gl=(e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function bl(e,t,n,r){const i=e.indexOf(t);if(-1===i)return gl(e,t,n,r);const o=e.lastIndexOf(t);return i!==o?n:i}const vl=(e,t)=>null===e?null:te(Math.round(e),0,t);class yl extends Pi{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(o(e))return null;const n=this.getLabels();return t=isFinite(t)&&n[t]===e?t:bl(n,e,c(t,e),this._addedLabels),vl(t,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=t;o++)r.push({value:o});return r}getLabelForValue(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function xl(e,t){const n=[],r=1e-14,{bounds:i,step:a,min:s,max:l,precision:u,count:c,maxTicks:h,maxDigits:d,includeBounds:p}=e,f=a||1,m=h-1,{min:g,max:b}=t,v=!o(s),y=!o(l),x=!o(c),w=(b-g)/(d+1);let k,_,S,C,I=z((b-g)/m/f)*f;if(I<r&&!v&&!y)return[{value:g},{value:b}];C=Math.ceil(b/I)-Math.floor(g/I),C>m&&(I=z(C*I/m/f)*f),o(u)||(k=Math.pow(10,u),I=Math.ceil(I*k)/k),"ticks"===i?(_=Math.floor(g/I)*I,S=Math.ceil(b/I)*I):(_=g,S=b),v&&y&&a&&H((l-s)/a,I/1e3)?(C=Math.round(Math.min((l-s)/I,h)),I=(l-s)/C,_=s,S=l):x?(_=v?s:_,S=y?l:S,C=c-1,I=(S-_)/C):(C=(S-_)/I,C=W(C,Math.round(C),I/1e3)?Math.round(C):Math.ceil(C));const O=Math.max(X(I),X(_));k=Math.pow(10,o(u)?O:u),_=Math.round(_*k)/k,S=Math.round(S*k)/k;let T=0;for(v&&(p&&_!==s?(n.push({value:s}),_<s&&T++,W(Math.round((_+T*I)*k)/k,s,wl(s,w,e))&&T++):_<s&&T++);T<C;++T)n.push({value:Math.round((_+T*I)*k)/k});return y&&p&&S!==l?n.length&&W(n[n.length-1].value,l,wl(l,w,e))?n[n.length-1].value=l:n.push({value:l}):y&&S!==l||n.push({value:S}),n}function wl(e,t,{horizontal:n,minRotation:r}){const i=q(r),o=(n?Math.sin(i):Math.cos(i))||.001,a=.75*t*(""+e).length;return Math.min(t/o,a)}yl.id="category",yl.defaults={ticks:{callback:yl.prototype.getLabelForValue}};class kl extends Pi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return o(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=e=>r=t?r:e,a=e=>i=n?i:e;if(e){const e=L(r),t=L(i);e<0&&t<0?a(0):e>0&&t>0&&o(0)}if(r===i){let t=1;(i>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(t=Math.abs(.05*i)),a(i+t),e||o(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},i=this._range||this,o=xl(r,i);return"ticks"===e.bounds&&G(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Jn(e,this.chart.options.locale,this.options.ticks.format)}}class _l extends kl{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=l(e)?e:0,this.max=l(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=q(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}function Sl(e){const t=e/Math.pow(10,Math.floor(B(e)));return 1===t}function Cl(e,t){const n=Math.floor(B(t.max)),r=Math.ceil(t.max/Math.pow(10,n)),i=[];let o=u(e.min,Math.pow(10,Math.floor(B(t.min)))),a=Math.floor(B(o)),s=Math.floor(o/Math.pow(10,a)),l=a<0?Math.pow(10,Math.abs(a)):1;do{i.push({value:o,major:Sl(o)}),++s,10===s&&(s=1,++a,l=a>=0?1:l),o=Math.round(s*Math.pow(10,a)*l)/l}while(a<n||a===n&&s<r);const c=u(e.max,o);return i.push({value:c,major:Sl(o)}),i}_l.id="linear",_l.defaults={ticks:{callback:vi.formatters.numeric}};class Il extends Pi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=kl.prototype.parse.apply(this,[e,t]);if(0!==n)return l(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=l(e)?Math.max(0,e):null,this.max=l(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,o=e=>r=t?r:e,a=(e,t)=>Math.pow(10,Math.floor(B(e))+t);n===r&&(n<=0?(i(1),o(10)):(i(a(n,-1)),o(a(r,1)))),n<=0&&i(a(r,-1)),r<=0&&o(a(n,1)),this._zero&&this.min!==this._suggestedMin&&n===a(this.min,0)&&i(a(n,-1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},n=Cl(t,this);return"ticks"===e.bounds&&G(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return void 0===e?"0":Jn(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=B(e),this._valueRange=B(this.max)-B(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(B(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Ol(e){const t=e.ticks;if(t.display&&e.display){const e=Yt(t.backdropPadding);return c(t.font&&t.font.size,St.font.size)+e.height}return 0}function Tl(e,t,n){return n=a(n)?n:[n],{w:Ot(e,t.string,n),h:n.length*t.lineHeight}}function Nl(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function El(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],o=e._pointLabels.length,a=e.options.pointLabels,s=a.centerPointLabels?D/o:0;for(let l=0;l<o;l++){const o=a.setContext(e.getPointLabelContext(l));i[l]=o.padding;const u=e.getPointPosition(l,e.drawingArea+i[l],s),c=Xt(o.font),h=Tl(e.ctx,c,e._pointLabels[l]);r[l]=h;const d=Q(e.getIndexAngle(l)+s),p=Math.round(Y(d)),f=Nl(p,u.x,h.w,0,180),m=Nl(p,u.y,h.h,90,270);Dl(n,t,d,f,m)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=$l(e,r,i)}function Dl(e,t,n,r,i){const o=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let s=0,l=0;r.start<t.l?(s=(t.l-r.start)/o,e.l=Math.min(e.l,t.l-s)):r.end>t.r&&(s=(r.end-t.r)/o,e.r=Math.max(e.r,t.r+s)),i.start<t.t?(l=(t.t-i.start)/a,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function $l(e,t,n){const r=[],i=e._pointLabels.length,o=e.options,a=Ol(o)/2,s=e.drawingArea,l=o.pointLabels.centerPointLabels?D/i:0;for(let u=0;u<i;u++){const i=e.getPointPosition(u,s+a+n[u],l),o=Math.round(Y(Q(i.angle+F))),c=t[u],h=Ml(i.y,c.h,o),d=Al(o),p=Rl(i.x,c.w,d);r.push({x:i.x,y:h,textAlign:d,left:p,top:h,right:p+c.w,bottom:h+c.h})}return r}function Al(e){return 0===e||180===e?"center":e<180?"left":"right"}function Rl(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function Ml(e,t,n){return 90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t),e}function Fl(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=r.setContext(e.getPointLabelContext(i)),a=Xt(t.font),{x:s,y:l,textAlign:u,left:c,top:h,right:d,bottom:p}=e._pointLabelItems[i],{backdropColor:f}=t;if(!o(f)){const e=qt(t.borderRadius),r=Yt(t.backdropPadding);n.fillStyle=f;const i=c-r.left,o=h-r.top,a=d-c+r.width,s=p-h+r.height;Object.values(e).some((e=>0!==e))?(n.beginPath(),Lt(n,{x:i,y:o,w:a,h:s,radius:e}),n.fill()):n.fillRect(i,o,a,s)}Pt(n,e._pointLabels[i],s,l+a.lineHeight/2,a,{color:t.color,textAlign:u,textBaseline:"middle"})}}function Pl(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,$);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let o=1;o<r;o++)n=e.getPointPosition(o,t),i.lineTo(n.x,n.y)}}function jl(e,t,n,r){const i=e.ctx,o=t.circular,{color:a,lineWidth:s}=t;!o&&!r||!a||!s||n<0||(i.save(),i.strokeStyle=a,i.lineWidth=s,i.setLineDash(t.borderDash),i.lineDashOffset=t.borderDashOffset,i.beginPath(),Pl(e,n,o,r),i.closePath(),i.stroke(),i.restore())}function Bl(e,t,n){return Zt(e,{label:n,index:t,type:"pointLabel"})}Il.id="logarithmic",Il.defaults={ticks:{callback:vi.formatters.logarithmic,major:{enabled:!0}}};class Ll extends kl{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Yt(Ol(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=l(e)&&!isNaN(e)?e:0,this.max=l(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ol(this.options))}generateTickLabels(e){kl.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=p(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?El(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){const t=$/(this._pointLabels.length||1),n=this.options.startAngle||0;return Q(e*t+q(n))}getDistanceFromCenterForValue(e){if(o(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(o(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return Bl(this.getContext(),e,n)}}getPointPosition(e,t,n=0){const r=this.getIndexAngle(e)-F+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Pl(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r}=t,i=this._pointLabels.length;let o,a,s;if(t.pointLabels.display&&Fl(this,i),r.display&&this.ticks.forEach(((e,t)=>{if(0!==t){a=this.getDistanceFromCenterForValue(e.value);const n=r.setContext(this.getContext(t-1));jl(this,n,a,i)}})),n.display){for(e.save(),o=i-1;o>=0;o--){const r=n.setContext(this.getPointLabelContext(o)),{color:i,lineWidth:l}=r;l&&i&&(e.lineWidth=l,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,a=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),s=this.getPointPosition(o,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(s.x,s.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((r,a)=>{if(0===a&&!t.reverse)return;const s=n.setContext(this.getContext(a)),l=Xt(s.font);if(i=this.getDistanceFromCenterForValue(this.ticks[a].value),s.showLabelBackdrop){e.font=l.string,o=e.measureText(r.label).width,e.fillStyle=s.backdropColor;const t=Yt(s.backdropPadding);e.fillRect(-o/2-t.left,-i-l.size/2-t.top,o+t.width,l.size+t.height)}Pt(e,r.label,0,-i,l,{color:s.color})})),e.restore()}drawTitle(){}}Ll.id="radialLinear",Ll.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:vi.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}},Ll.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Ll.descriptors={angleLines:{_fallback:"grid"}};const zl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Vl=Object.keys(zl);function Ul(e,t){return e-t}function Wl(e,t){if(o(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:a}=e._parseOpts;let s=t;return"function"===typeof r&&(s=r(s)),l(s)||(s="string"===typeof r?n.parse(s,r):n.parse(s)),null===s?null:(i&&(s="week"!==i||!U(a)&&!0!==a?n.startOf(s,i):n.startOf(s,"isoWeek",a)),+s)}function Hl(e,t,n,r){const i=Vl.length;for(let o=Vl.indexOf(e);o<i-1;++o){const e=zl[Vl[o]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return Vl[o]}return Vl[i-1]}function Gl(e,t,n,r,i){for(let o=Vl.length-1;o>=Vl.indexOf(n);o--){const n=Vl[o];if(zl[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return Vl[n?Vl.indexOf(n):0]}function ql(e){for(let t=Vl.indexOf(e)+1,n=Vl.length;t<n;++t)if(zl[Vl[t]].common)return Vl[t]}function Yl(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=ie(n,t),o=n[r]>=t?n[r]:n[i];e[o]=!0}}else e[t]=!0}function Xl(e,t,n,r){const i=e._adapter,o=+i.startOf(t[0].value,r),a=t[t.length-1].value;let s,l;for(s=o;s<=a;s=+i.add(s,1,r))l=n[s],l>=0&&(t[l].major=!0);return t}function Kl(e,t,n){const r=[],i={},o=t.length;let a,s;for(a=0;a<o;++a)s=t[a],i[s]=a,r.push({value:s,major:!1});return 0!==o&&n?Xl(e,r,i,n):r}class Jl extends Pi{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t){const n=e.time||(e.time={}),r=this._adapter=new qi._date(e.adapters.date);r.init(t),x(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Wl(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function s(e){o||isNaN(e.min)||(r=Math.min(r,e.min)),a||isNaN(e.max)||(i=Math.max(i,e.max))}o&&a||(s(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||s(this.getMinMax(!1))),r=l(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=l(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,a=se(r,i,o);return this._unit=t.unit||(n.autoSkip?Hl(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):Gl(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?ql(this._unit):void 0,this.initOffsets(r),e.reverse&&a.reverse(),Kl(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(e){let t,n,r=0,i=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),r=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,n=this.getDecimalForValue(e[e.length-1]),i=1===e.length?n:(n-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;r=te(r,0,o),i=te(i,0,o),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||Hl(i.minUnit,t,n,this._getLabelCapacity(t)),a=c(i.stepSize,1),s="week"===o&&i.isoWeekday,l=U(s)||!0===s,u={};let h,d,p=t;if(l&&(p=+e.startOf(p,"isoWeek",s)),p=+e.startOf(p,l?"day":o),e.diff(n,t,o)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+o);const f="data"===r.ticks.source&&this.getDataTimestamps();for(h=p,d=0;h<n;h=+e.add(h,a,o),d++)Yl(u,h,f);return h!==n&&"ticks"!==r.bounds&&1!==d||Yl(u,h,f),Object.keys(u).sort(((e,t)=>e-t)).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}_tickFormatFunction(e,t,n,r){const i=this.options,o=i.time.displayFormats,a=this._unit,s=this._majorUnit,l=a&&o[a],u=s&&o[s],c=n[t],h=s&&u&&c&&c.major,d=this._adapter.format(e,r||(h?u:l)),f=i.ticks.callback;return f?p(f,[d,t,n],this):d}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=q(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*i+a*o,h:n*o+a*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,Kl(this,[e],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(Wl(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return he(e.sort(Ul))}}function Zl(e,t,n){let r,i,o,a,s=0,l=e.length-1;n?(t>=e[s].pos&&t<=e[l].pos&&({lo:s,hi:l}=oe(e,"pos",t)),({pos:r,time:o}=e[s]),({pos:i,time:a}=e[l])):(t>=e[s].time&&t<=e[l].time&&({lo:s,hi:l}=oe(e,"time",t)),({time:r,pos:o}=e[s]),({time:i,pos:a}=e[l]));const u=i-r;return u?o+(a-o)*(t-r)/u:o}Jl.id="time",Jl.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class Ql extends Jl{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Zl(t,this.min),this._tableRange=Zl(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let o,a,s,l,u;for(o=0,a=e.length;o<a;++o)l=e[o],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],s=r[o-1],l=r[o],Math.round((u+s)/2)!==l&&i.push({time:l,pos:o/(a-1)});return i}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Zl(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Zl(this._table,n*this._tableRange+this._minPos,!0)}}Ql.id="timeseries",Ql.defaults=Jl.defaults},2483:function(e,t,n){"use strict";n.d(t,{PO:function(){return B},p7:function(){return tt}});n(1703);var r=n(3396),i=n(4870);
/*!
  * vue-router v4.1.3
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
const o="undefined"!==typeof window;function a(e){return e.__esModule||"Module"===e[Symbol.toStringTag]}const s=Object.assign;function l(e,t){const n={};for(const r in t){const i=t[r];n[r]=c(i)?i.map(e):e(i)}return n}const u=()=>{},c=Array.isArray;const h=/\/$/,d=e=>e.replace(h,"");function p(e,t,n="/"){let r,i={},o="",a="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(r=t.slice(0,l),o=t.slice(l+1,s>-1?s:t.length),i=e(o)),s>-1&&(r=r||t.slice(0,s),a=t.slice(s,t.length)),r=w(null!=r?r:t,n),{fullPath:r+(o&&"?")+o+a,path:r,query:i,hash:a}}function f(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function m(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function g(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&b(t.matched[r],n.matched[i])&&v(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function b(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function v(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!y(e[n],t[n]))return!1;return!0}function y(e,t){return c(e)?x(e,t):c(t)?x(t,e):e===t}function x(e,t){return c(t)?e.length===t.length&&e.every(((e,n)=>e===t[n])):1===e.length&&e[0]===t}function w(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i,o,a=n.length-1;for(i=0;i<r.length;i++)if(o=r[i],"."!==o){if(".."!==o)break;a>1&&a--}return n.slice(0,a).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}var k,_;(function(e){e["pop"]="pop",e["push"]="push"})(k||(k={})),function(e){e["back"]="back",e["forward"]="forward",e["unknown"]=""}(_||(_={}));function S(e){if(!e)if(o){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),d(e)}const C=/^[^#]+#/;function I(e,t){return e.replace(C,"#")+t}function O(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const T=()=>({left:window.pageXOffset,top:window.pageYOffset});function N(e){let t;if("el"in e){const n=e.el,r="string"===typeof n&&n.startsWith("#");0;const i="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=O(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function E(e,t){const n=history.state?history.state.position-t:-1;return n+e}const D=new Map;function $(e,t){D.set(e,t)}function A(e){const t=D.get(e);return D.delete(e),t}let R=()=>location.protocol+"//"+location.host;function M(e,t){const{pathname:n,search:r,hash:i}=t,o=e.indexOf("#");if(o>-1){let t=i.includes(e.slice(o))?e.slice(o).length:1,n=i.slice(t);return"/"!==n[0]&&(n="/"+n),m(n,"")}const a=m(n,e);return a+r+i}function F(e,t,n,r){let i=[],o=[],a=null;const l=({state:o})=>{const s=M(e,location),l=n.value,u=t.value;let c=0;if(o){if(n.value=s,t.value=o,a&&a===l)return void(a=null);c=u?o.position-u.position:0}else r(s);i.forEach((e=>{e(n.value,l,{delta:c,type:k.pop,direction:c?c>0?_.forward:_.back:_.unknown})}))};function u(){a=n.value}function c(e){i.push(e);const t=()=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)};return o.push(t),t}function h(){const{history:e}=window;e.state&&e.replaceState(s({},e.state,{scroll:T()}),"")}function d(){for(const e of o)e();o=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",h),{pauseListeners:u,listen:c,destroy:d}}function P(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?T():null}}function j(e){const{history:t,location:n}=window,r={value:M(e,n)},i={value:t.state};function o(r,o,a){const s=e.indexOf("#"),l=s>-1?(n.host&&document.querySelector("base")?e:e.slice(s))+r:R()+e+r;try{t[a?"replaceState":"pushState"](o,"",l),i.value=o}catch(u){console.error(u),n[a?"replace":"assign"](l)}}function a(e,n){const a=s({},t.state,P(i.value.back,e,i.value.forward,!0),n,{position:i.value.position});o(e,a,!0),r.value=e}function l(e,n){const a=s({},i.value,t.state,{forward:e,scroll:T()});o(a.current,a,!0);const l=s({},P(r.value,e,null),{position:a.position+1},n);o(e,l,!1),r.value=e}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:l,replace:a}}function B(e){e=S(e);const t=j(e),n=F(e,t.state,t.location,t.replace);function r(e,t=!0){t||n.pauseListeners(),history.go(e)}const i=s({location:"",base:e,go:r,createHref:I.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function L(e){return"string"===typeof e||e&&"object"===typeof e}function z(e){return"string"===typeof e||"symbol"===typeof e}const V={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},U=Symbol("");var W;(function(e){e[e["aborted"]=4]="aborted",e[e["cancelled"]=8]="cancelled",e[e["duplicated"]=16]="duplicated"})(W||(W={}));function H(e,t){return s(new Error,{type:e,[U]:!0},t)}function G(e,t){return e instanceof Error&&U in e&&(null==t||!!(e.type&t))}const q="[^/]+?",Y={sensitive:!1,strict:!1,start:!0,end:!0},X=/[.+*?^${}()[\]/\\]/g;function K(e,t){const n=s({},Y,t),r=[];let i=n.start?"^":"";const o=[];for(const s of e){const e=s.length?[]:[90];n.strict&&!s.length&&(i+="/");for(let t=0;t<s.length;t++){const r=s[t];let a=40+(n.sensitive?.25:0);if(0===r.type)t||(i+="/"),i+=r.value.replace(X,"\\$&"),a+=40;else if(1===r.type){const{value:e,repeatable:n,optional:l,regexp:u}=r;o.push({name:e,repeatable:n,optional:l});const c=u||q;if(c!==q){a+=10;try{new RegExp(`(${c})`)}catch(h){throw new Error(`Invalid custom RegExp for param "${e}" (${c}): `+h.message)}}let d=n?`((?:${c})(?:/(?:${c}))*)`:`(${c})`;t||(d=l&&s.length<2?`(?:/${d})`:"/"+d),l&&(d+="?"),i+=d,a+=20,l&&(a+=-8),n&&(a+=-20),".*"===c&&(a+=-50)}e.push(a)}r.push(e)}if(n.strict&&n.end){const e=r.length-1;r[e][r[e].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function l(e){const t=e.match(a),n={};if(!t)return null;for(let r=1;r<t.length;r++){const e=t[r]||"",i=o[r-1];n[i.name]=e&&i.repeatable?e.split("/"):e}return n}function u(t){let n="",r=!1;for(const i of e){r&&n.endsWith("/")||(n+="/"),r=!1;for(const e of i)if(0===e.type)n+=e.value;else if(1===e.type){const{value:o,repeatable:a,optional:s}=e,l=o in t?t[o]:"";if(c(l)&&!a)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const u=c(l)?l.join("/"):l;if(!u){if(!s)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=u}}return n||"/"}return{re:a,score:r,keys:o,parse:l,stringify:u}}function J(e,t){let n=0;while(n<e.length&&n<t.length){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function Z(e,t){let n=0;const r=e.score,i=t.score;while(n<r.length&&n<i.length){const e=J(r[n],i[n]);if(e)return e;n++}if(1===Math.abs(i.length-r.length)){if(Q(r))return 1;if(Q(i))return-1}return i.length-r.length}function Q(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ee={type:0,value:""},te=/[a-zA-Z0-9_]/;function ne(e){if(!e)return[[]];if("/"===e)return[[ee]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${u}": ${e}`)}let n=0,r=n;const i=[];let o;function a(){o&&i.push(o),o=[]}let s,l=0,u="",c="";function h(){u&&(0===n?o.push({type:0,value:u}):1===n||2===n||3===n?(o.length>1&&("*"===s||"+"===s)&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:"*"===s||"+"===s,optional:"*"===s||"?"===s})):t("Invalid state to consume buffer"),u="")}function d(){u+=s}while(l<e.length)if(s=e[l++],"\\"!==s||2===n)switch(n){case 0:"/"===s?(u&&h(),a()):":"===s?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:"("===s?n=2:te.test(s)?d():(h(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&l--);break;case 2:")"===s?"\\"==c[c.length-1]?c=c.slice(0,-1)+s:n=3:c+=s;break;case 3:h(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&l--,c="";break;default:t("Unknown state");break}else r=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${u}"`),h(),a(),i}function re(e,t,n){const r=K(ne(e.path),n);const i=s(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf===!t.record.aliasOf&&t.children.push(i),i}function ie(e,t){const n=[],r=new Map;function i(e){return r.get(e)}function o(e,n,r){const i=!r,l=ae(e);l.aliasOf=r&&r.record;const h=ce(t,e),d=[l];if("alias"in e){const t="string"===typeof e.alias?[e.alias]:e.alias;for(const e of t)d.push(s({},l,{components:r?r.record.components:l.components,path:e,aliasOf:r?r.record:l}))}let p,f;for(const t of d){const{path:s}=t;if(n&&"/"!==s[0]){const e=n.record.path,r="/"===e[e.length-1]?"":"/";t.path=n.record.path+(s&&r+s)}if(p=re(t,n,h),r?r.alias.push(p):(f=f||p,f!==p&&f.alias.push(p),i&&e.name&&!le(p)&&a(e.name)),l.children){const e=l.children;for(let t=0;t<e.length;t++)o(e[t],p,r&&r.children[t])}r=r||p,c(p)}return f?()=>{a(f)}:u}function a(e){if(z(e)){const t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(a),t.alias.forEach(a))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(a),e.alias.forEach(a))}}function l(){return n}function c(e){let t=0;while(t<n.length&&Z(e,n[t])>=0&&(e.record.path!==n[t].record.path||!he(e,n[t])))t++;n.splice(t,0,e),e.record.name&&!le(e)&&r.set(e.record.name,e)}function h(e,t){let i,o,a,l={};if("name"in e&&e.name){if(i=r.get(e.name),!i)throw H(1,{location:e});a=i.record.name,l=s(oe(t.params,i.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params),o=i.stringify(l)}else if("path"in e)o=e.path,i=n.find((e=>e.re.test(o))),i&&(l=i.parse(o),a=i.record.name);else{if(i=t.name?r.get(t.name):n.find((e=>e.re.test(t.path))),!i)throw H(1,{location:e,currentLocation:t});a=i.record.name,l=s({},t.params,e.params),o=i.stringify(l)}const u=[];let c=i;while(c)u.unshift(c.record),c=c.parent;return{name:a,path:o,params:l,matched:u,meta:ue(u)}}return t=ce({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>o(e))),{addRoute:o,resolve:h,removeRoute:a,getRoutes:l,getRecordMatcher:i}}function oe(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function ae(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:se(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function se(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]="boolean"===typeof n?n:n[r];return t}function le(e){while(e){if(e.record.aliasOf)return!0;e=e.parent}return!1}function ue(e){return e.reduce(((e,t)=>s(e,t.meta)),{})}function ce(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function he(e,t){return t.children.some((t=>t===e||he(e,t)))}const de=/#/g,pe=/&/g,fe=/\//g,me=/=/g,ge=/\?/g,be=/\+/g,ve=/%5B/g,ye=/%5D/g,xe=/%5E/g,we=/%60/g,ke=/%7B/g,_e=/%7C/g,Se=/%7D/g,Ce=/%20/g;function Ie(e){return encodeURI(""+e).replace(_e,"|").replace(ve,"[").replace(ye,"]")}function Oe(e){return Ie(e).replace(ke,"{").replace(Se,"}").replace(xe,"^")}function Te(e){return Ie(e).replace(be,"%2B").replace(Ce,"+").replace(de,"%23").replace(pe,"%26").replace(we,"`").replace(ke,"{").replace(Se,"}").replace(xe,"^")}function Ne(e){return Te(e).replace(me,"%3D")}function Ee(e){return Ie(e).replace(de,"%23").replace(ge,"%3F")}function De(e){return null==e?"":Ee(e).replace(fe,"%2F")}function $e(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function Ae(e){const t={};if(""===e||"?"===e)return t;const n="?"===e[0],r=(n?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const e=r[i].replace(be," "),n=e.indexOf("="),o=$e(n<0?e:e.slice(0,n)),a=n<0?null:$e(e.slice(n+1));if(o in t){let e=t[o];c(e)||(e=t[o]=[e]),e.push(a)}else t[o]=a}return t}function Re(e){let t="";for(let n in e){const r=e[n];if(n=Ne(n),null==r){void 0!==r&&(t+=(t.length?"&":"")+n);continue}const i=c(r)?r.map((e=>e&&Te(e))):[r&&Te(r)];i.forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}))}return t}function Me(e){const t={};for(const n in e){const r=e[n];void 0!==r&&(t[n]=c(r)?r.map((e=>null==e?null:""+e)):null==r?r:""+r)}return t}const Fe=Symbol(""),Pe=Symbol(""),je=Symbol(""),Be=Symbol(""),Le=Symbol("");function ze(){let e=[];function t(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function Ve(e,t,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((a,s)=>{const l=e=>{!1===e?s(H(4,{from:n,to:t})):e instanceof Error?s(e):L(e)?s(H(2,{from:t,to:e})):(o&&r.enterCallbacks[i]===o&&"function"===typeof e&&o.push(e),a())},u=e.call(r&&r.instances[i],t,n,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch((e=>s(e)))}))}function Ue(e,t,n,r){const i=[];for(const o of e){0;for(const e in o.components){let s=o.components[e];if("beforeRouteEnter"===t||o.instances[e])if(We(s)){const a=s.__vccOpts||s,l=a[t];l&&i.push(Ve(l,n,r,o,e))}else{let l=s();0,i.push((()=>l.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${o.path}"`));const s=a(i)?i.default:i;o.components[e]=s;const l=s.__vccOpts||s,u=l[t];return u&&Ve(u,n,r,o,e)()}))))}}}return i}function We(e){return"object"===typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function He(e){const t=(0,r.f3)(je),n=(0,r.f3)(Be),o=(0,r.Fl)((()=>t.resolve((0,i.SU)(e.to)))),a=(0,r.Fl)((()=>{const{matched:e}=o.value,{length:t}=e,r=e[t-1],i=n.matched;if(!r||!i.length)return-1;const a=i.findIndex(b.bind(null,r));if(a>-1)return a;const s=Ke(e[t-2]);return t>1&&Ke(r)===s&&i[i.length-1].path!==s?i.findIndex(b.bind(null,e[t-2])):a})),s=(0,r.Fl)((()=>a.value>-1&&Xe(n.params,o.value.params))),l=(0,r.Fl)((()=>a.value>-1&&a.value===n.matched.length-1&&v(n.params,o.value.params)));function c(n={}){return Ye(n)?t[(0,i.SU)(e.replace)?"replace":"push"]((0,i.SU)(e.to)).catch(u):Promise.resolve()}return{route:o,href:(0,r.Fl)((()=>o.value.href)),isActive:s,isExactActive:l,navigate:c}}const Ge=(0,r.aZ)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:He,setup(e,{slots:t}){const n=(0,i.qj)(He(e)),{options:o}=(0,r.f3)(je),a=(0,r.Fl)((()=>({[Je(e.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[Je(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const i=t.default&&t.default(n);return e.custom?i:(0,r.h)("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},i)}}}),qe=Ge;function Ye(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Xe(e,t){for(const n in t){const r=t[n],i=e[n];if("string"===typeof r){if(r!==i)return!1}else if(!c(i)||i.length!==r.length||r.some(((e,t)=>e!==i[t])))return!1}return!0}function Ke(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Je=(e,t,n)=>null!=e?e:null!=t?t:n,Ze=(0,r.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const o=(0,r.f3)(Le),a=(0,r.Fl)((()=>e.route||o.value)),l=(0,r.f3)(Pe,0),u=(0,r.Fl)((()=>{let e=(0,i.SU)(l);const{matched:t}=a.value;let n;while((n=t[e])&&!n.components)e++;return e})),c=(0,r.Fl)((()=>a.value.matched[u.value]));(0,r.JJ)(Pe,(0,r.Fl)((()=>u.value+1))),(0,r.JJ)(Fe,c),(0,r.JJ)(Le,a);const h=(0,i.iH)();return(0,r.YP)((()=>[h.value,c.value,e.name]),(([e,t,n],[r,i,o])=>{t&&(t.instances[n]=e,i&&i!==t&&e&&e===r&&(t.leaveGuards.size||(t.leaveGuards=i.leaveGuards),t.updateGuards.size||(t.updateGuards=i.updateGuards))),!e||!t||i&&b(t,i)&&r||(t.enterCallbacks[n]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const i=a.value,o=e.name,l=c.value,u=l&&l.components[o];if(!u)return Qe(n.default,{Component:u,route:i});const d=l.props[o],p=d?!0===d?i.params:"function"===typeof d?d(i):d:null,f=e=>{e.component.isUnmounted&&(l.instances[o]=null)},m=(0,r.h)(u,s({},p,t,{onVnodeUnmounted:f,ref:h}));return Qe(n.default,{Component:m,route:i})||m}}});function Qe(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const et=Ze;function tt(e){const t=ie(e.routes,e),n=e.parseQuery||Ae,a=e.stringifyQuery||Re,h=e.history;const d=ze(),m=ze(),b=ze(),v=(0,i.XI)(V);let y=V;o&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const x=l.bind(null,(e=>""+e)),w=l.bind(null,De),_=l.bind(null,$e);function S(e,n){let r,i;return z(e)?(r=t.getRecordMatcher(e),i=n):i=e,t.addRoute(i,r)}function C(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)}function I(){return t.getRoutes().map((e=>e.record))}function O(e){return!!t.getRecordMatcher(e)}function D(e,r){if(r=s({},r||v.value),"string"===typeof e){const i=p(n,e,r.path),o=t.resolve({path:i.path},r),a=h.createHref(i.fullPath);return s(i,o,{params:_(o.params),hash:$e(i.hash),redirectedFrom:void 0,href:a})}let i;if("path"in e)i=s({},e,{path:p(n,e.path,r.path).path});else{const t=s({},e.params);for(const e in t)null==t[e]&&delete t[e];i=s({},e,{params:w(e.params)}),r.params=w(r.params)}const o=t.resolve(i,r),l=e.hash||"";o.params=x(_(o.params));const u=f(a,s({},e,{hash:Oe(l),path:o.path})),c=h.createHref(u);return s({fullPath:u,hash:l,query:a===Re?Me(e.query):e.query||{}},o,{redirectedFrom:void 0,href:c})}function R(e){return"string"===typeof e?p(n,e,v.value.path):s({},e)}function M(e,t){if(y!==e)return H(8,{from:t,to:e})}function F(e){return B(e)}function P(e){return F(s(R(e),{replace:!0}))}function j(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let r="function"===typeof n?n(e):n;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=R(r):{path:r},r.params={}),s({query:e.query,hash:e.hash,params:"path"in r?{}:e.params},r)}}function B(e,t){const n=y=D(e),r=v.value,i=e.state,o=e.force,l=!0===e.replace,u=j(n);if(u)return B(s(R(u),{state:i,force:o,replace:l}),t||n);const c=n;let h;return c.redirectedFrom=t,!o&&g(a,r,n)&&(h=H(16,{to:c,from:r}),ne(r,r,!0,!1)),(h?Promise.resolve(h):U(c,r)).catch((e=>G(e)?G(e,2)?e:te(e):Q(e,c,r))).then((e=>{if(e){if(G(e,2))return B(s({replace:l},R(e.to),{state:i,force:o}),t||c)}else e=q(c,r,!0,l,i);return W(c,r,e),e}))}function L(e,t){const n=M(e,t);return n?Promise.reject(n):Promise.resolve()}function U(e,t){let n;const[r,i,o]=rt(e,t);n=Ue(r.reverse(),"beforeRouteLeave",e,t);for(const s of r)s.leaveGuards.forEach((r=>{n.push(Ve(r,e,t))}));const a=L.bind(null,e,t);return n.push(a),nt(n).then((()=>{n=[];for(const r of d.list())n.push(Ve(r,e,t));return n.push(a),nt(n)})).then((()=>{n=Ue(i,"beforeRouteUpdate",e,t);for(const r of i)r.updateGuards.forEach((r=>{n.push(Ve(r,e,t))}));return n.push(a),nt(n)})).then((()=>{n=[];for(const r of e.matched)if(r.beforeEnter&&!t.matched.includes(r))if(c(r.beforeEnter))for(const i of r.beforeEnter)n.push(Ve(i,e,t));else n.push(Ve(r.beforeEnter,e,t));return n.push(a),nt(n)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),n=Ue(o,"beforeRouteEnter",e,t),n.push(a),nt(n)))).then((()=>{n=[];for(const r of m.list())n.push(Ve(r,e,t));return n.push(a),nt(n)})).catch((e=>G(e,8)?e:Promise.reject(e)))}function W(e,t,n){for(const r of b.list())r(e,t,n)}function q(e,t,n,r,i){const a=M(e,t);if(a)return a;const l=t===V,u=o?history.state:{};n&&(r||l?h.replace(e.fullPath,s({scroll:l&&u&&u.scroll},i)):h.push(e.fullPath,i)),v.value=e,ne(e,t,n,l),te()}let Y;function X(){Y||(Y=h.listen(((e,t,n)=>{if(!se.listening)return;const r=D(e),i=j(r);if(i)return void B(s(i,{replace:!0}),r).catch(u);y=r;const a=v.value;o&&$(E(a.fullPath,n.delta),T()),U(r,a).catch((e=>G(e,12)?e:G(e,2)?(B(e.to,r).then((e=>{G(e,20)&&!n.delta&&n.type===k.pop&&h.go(-1,!1)})).catch(u),Promise.reject()):(n.delta&&h.go(-n.delta,!1),Q(e,r,a)))).then((e=>{e=e||q(r,a,!1),e&&(n.delta&&!G(e,8)?h.go(-n.delta,!1):n.type===k.pop&&G(e,20)&&h.go(-1,!1)),W(r,a,e)})).catch(u)})))}let K,J=ze(),Z=ze();function Q(e,t,n){te(e);const r=Z.list();return r.length?r.forEach((r=>r(e,t,n))):console.error(e),Promise.reject(e)}function ee(){return K&&v.value!==V?Promise.resolve():new Promise(((e,t)=>{J.add([e,t])}))}function te(e){return K||(K=!e,X(),J.list().forEach((([t,n])=>e?n(e):t())),J.reset()),e}function ne(t,n,i,a){const{scrollBehavior:s}=e;if(!o||!s)return Promise.resolve();const l=!i&&A(E(t.fullPath,0))||(a||!i)&&history.state&&history.state.scroll||null;return(0,r.Y3)().then((()=>s(t,n,l))).then((e=>e&&N(e))).catch((e=>Q(e,t,n)))}const re=e=>h.go(e);let oe;const ae=new Set,se={currentRoute:v,listening:!0,addRoute:S,removeRoute:C,hasRoute:O,getRoutes:I,resolve:D,options:e,push:F,replace:P,go:re,back:()=>re(-1),forward:()=>re(1),beforeEach:d.add,beforeResolve:m.add,afterEach:b.add,onError:Z.add,isReady:ee,install(e){const t=this;e.component("RouterLink",qe),e.component("RouterView",et),e.config.globalProperties.$router=t,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,i.SU)(v)}),o&&!oe&&v.value===V&&(oe=!0,F(h.location).catch((e=>{0})));const n={};for(const i in V)n[i]=(0,r.Fl)((()=>v.value[i]));e.provide(je,t),e.provide(Be,(0,i.qj)(n)),e.provide(Le,v);const a=e.unmount;ae.add(e),e.unmount=function(){ae.delete(e),ae.size<1&&(y=V,Y&&Y(),Y=null,v.value=V,oe=!1,K=!1),a()}}};return se}function nt(e){return e.reduce(((e,t)=>e.then((()=>t()))),Promise.resolve())}function rt(e,t){const n=[],r=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const o=t.matched[a];o&&(e.matched.find((e=>b(e,o)))?r.push(o):n.push(o));const s=e.matched[a];s&&(t.matched.find((e=>b(e,s)))||i.push(s))}return[n,r,i]}}}]);
//# sourceMappingURL=chunk-vendors.248abe2b.js.map